{"mappings":"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AAG;AAAE,KAAC;AAAC,OAAG;AAAC,MAAE;AAAC,MAAE;AAAC,OAAG;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAE,MAAE;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAC3E,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAE,KAAC;AAAC,MAAE;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAC3E,KAAC;AAAC,OAAG;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,MAAE;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,MAAE;AAAC,OAAG;AAAC,MAAE;AAAC,MAAE;AAAC,MAAE;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,MAAE;AAAC,MAAE;AAC3E,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAE,KAAC;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAE,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAE,MAAE;AAAC,OAAG;AAAC,KAAC;AAC3E,OAAG;AAAC,MAAE;AAAC,MAAE;AAAC,OAAG;AAAE,MAAE;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAE,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,MAAE;AAAC,OAAG;AAC3E,OAAG;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAE,MAAE;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAAC,OAAG;AAAC,MAAE;AAAC,OAAG;AAAC,OAAG;AAC3E,MAAE;AAAC,OAAG;AAAC,OAAG;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,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YA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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-ec1bbf9d6de9c21c.js","src/app/script/main-standalone.ts","src/app/script/polyfills.ts","node_modules/mdn-polyfills/Node.prototype.append.js","node_modules/mdn-polyfills/Node.prototype.prepend.js","node_modules/mdn-polyfills/String.prototype.padStart.js","node_modules/mdn-polyfills/Array.prototype.findIndex.js","src/app/script/bb/bb.ts","src/app/script/bb/input/event-listener.ts","src/app/script/bb/base/browser.ts","src/app/script/bb/base/create-canvas.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/app/script/bb/base/base.ts","src/app/script/bb/input/key-listener.ts","src/app/script/bb/input/pointer-listener.ts","src/app/script/bb/math/math.ts","src/app/script/bb/input/event-chain.ts","src/app/script/bb/base/canvas.ts","src/app/script/bb/math/matrix.ts","src/app/script/bb/math/vec2.ts","src/app/script/bb/math/line.ts","src/app/script/bb/color/color.ts","src/app/script/bb/base/ui.ts","src/app/script/bb/base/bb-log.ts","src/app/script/bb/base/local-storage.ts","src/app/script/klecks/kl.ts","src/app/script/klecks/history/kl-history.ts","src/app/script/klecks/ui/modals/popup.ts","src/app/script/klecks/ui/modals/modal-count.ts","node_modules/@parcel/runtime-js/lib/runtime-3e73a9dfaa196a24.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-755a29e1717be0a3.js","src/app/script/language/language.ts","src/app/languages/languages.ts","src/app/languages/en.json","node_modules/@parcel/runtime-js/lib/runtime-011175784a2cf923.js","node_modules/@parcel/runtime-js/lib/helpers/browser/js-loader.js","node_modules/@parcel/runtime-js/lib/helpers/cacheLoader.js","node_modules/@parcel/runtime-js/lib/runtime-bb8a7967b07dde2b.js","node_modules/@parcel/runtime-js/lib/runtime-0d95367398109618.js","node_modules/@parcel/runtime-js/lib/runtime-9c603a92f782c218.js","src/app/script/klecks/ui/base-components/checkbox.ts","src/app/script/klecks/ui/base-components/input.ts","src/app/script/klecks/ui/base-components/select.ts","src/app/script/klecks/ui/base-components/image-toggle.ts","src/app/script/klecks/ui/base-components/image-radio-list.ts","src/app/script/klecks/ui/base-components/pen-pressure-toggle.ts","node_modules/@parcel/runtime-js/lib/runtime-79e5eb781e4ff740.js","src/app/script/klecks/ui/base-components/kl-slider.ts","src/app/script/klecks/ui/base-components/slider-falloff.ts","src/app/script/klecks/ui/base-components/kl-slider-manual-input.ts","src/app/script/klecks/ui/modals/color-slider-hex-dialog.ts","node_modules/@parcel/runtime-js/lib/runtime-b0a4788980166243.js","src/app/script/klecks/ui/base-components/kl-color-slider.ts","node_modules/@parcel/runtime-js/lib/runtime-2d1634a1745f772c.js","src/app/script/klecks/ui/base-components/kl-color-slider-small.ts","src/app/script/klecks/ui/base-components/point-slider.ts","src/app/script/klecks/ui/base-components/color-options.ts","src/app/script/klecks/ui/base-components/options.ts","src/app/script/klecks/ui/components/status-overlay.ts","node_modules/@parcel/runtime-js/lib/runtime-d50a700d42ff408b.js","src/app/script/klecks/ui/modals/export-dialog-deprecated.ts","src/app/script/klecks/ui/components/crop-copy.ts","src/app/script/klecks/ui/modals/clipboard-dialog.ts","src/app/script/klecks/ui/tool-tabs/kl-layer-manager.ts","node_modules/@parcel/runtime-js/lib/runtime-32904c4611d87261.js","node_modules/@parcel/runtime-js/lib/runtime-3441d9a8951e190a.js","node_modules/@parcel/runtime-js/lib/runtime-61c3f2ed686d3127.js","node_modules/@parcel/runtime-js/lib/runtime-9ccf42737d9349c9.js","node_modules/@parcel/runtime-js/lib/runtime-a7ec776f18d07e06.js","src/app/script/klecks/canvas/kl-canvas.ts","src/app/script/klecks/image-operations/flood-fill.ts","src/app/script/klecks/image-operations/shape-tool.ts","src/app/script/klecks/image-operations/render-text.ts","src/app/script/klecks/canvas/draw-project.ts","src/app/script/klecks/image-operations/gradient-tool.ts","src/app/script/klecks/canvas/translate-blending.ts","src/app/script/klecks/canvas-ui/workspace-svg-overlay.ts","src/app/script/klecks/canvas-ui/kl-canvas-workspace.ts","node_modules/@parcel/runtime-js/lib/runtime-b297a7d70f74609c.js","node_modules/@parcel/runtime-js/lib/runtime-565a61cada5f00a9.js","node_modules/@parcel/runtime-js/lib/runtime-3e3ae40904452353.js","node_modules/@parcel/runtime-js/lib/runtime-23d9ab834e6f7b5b.js","src/app/script/klecks/canvas-ui/canvas-preview.ts","src/app/script/klecks/ui/components/free-transform.ts","node_modules/@parcel/runtime-js/lib/runtime-867eb0c41b06004a.js","src/app/script/klecks/ui/components/free-transform-canvas.ts","src/app/script/klecks/ui/components/cropper.ts","src/app/script/klecks/ui/components/layer-preview.ts","src/app/script/klecks/ui/components/fitted-image.ts","src/app/script/klecks/ui/modals/show-import-as-layer-dialog.ts","src/app/script/klecks/ui/components/kl-image-dropper.ts","src/app/script/klecks/ui/components/overlay-toolspace.ts","src/app/script/klecks/ui/components/toolspace-top-row.ts","node_modules/@parcel/runtime-js/lib/runtime-8e1e9edf468f0fb1.js","node_modules/@parcel/runtime-js/lib/runtime-5804f5aee30ab40b.js","node_modules/@parcel/runtime-js/lib/runtime-ae814fe53b5afeca.js","node_modules/@parcel/runtime-js/lib/runtime-0b516193f10d99da.js","node_modules/@parcel/runtime-js/lib/runtime-91030e387556394e.js","node_modules/@parcel/runtime-js/lib/runtime-f8695d324142cd28.js","src/app/script/klecks/ui/components/tool-dropdown.ts","node_modules/@parcel/runtime-js/lib/runtime-7615e1b7404b8065.js","node_modules/@parcel/runtime-js/lib/runtime-d2f88ba69bb0ef44.js","node_modules/@parcel/runtime-js/lib/runtime-e6b9226a9aea9aaf.js","node_modules/@parcel/runtime-js/lib/runtime-cc6cd7c676659766.js","node_modules/@parcel/runtime-js/lib/runtime-c96dc38161fe047e.js","node_modules/@parcel/runtime-js/lib/runtime-4d7773d6e0790c2a.js","src/app/script/klecks/ui/components/toolspace-tool-row.ts","node_modules/@parcel/runtime-js/lib/runtime-91cabf15574c0ad9.js","node_modules/@parcel/runtime-js/lib/runtime-26fd1436168cdabc.js","node_modules/@parcel/runtime-js/lib/runtime-37692aa5de7dc88b.js","node_modules/@parcel/runtime-js/lib/runtime-b5b3a06c74688f8b.js","src/app/script/klecks/ui/components/toolspace-stabilizer-row.ts","src/app/script/klecks/ui/components/tab-row.ts","node_modules/@parcel/runtime-js/lib/runtime-87931f58f9053133.js","src/app/script/klecks/ui/tool-tabs/hand-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-cd9e1e12703e4744.js","src/app/script/klecks/ui/tool-tabs/fill-ui.ts","src/app/script/klecks/ui/tool-tabs/text-ui.ts","src/app/script/klecks/ui/tool-tabs/shape-ui.ts","src/app/script/klecks/ui/modals/new-image-dialog.ts","src/app/script/klecks/ui/components/toolspace-collapser.ts","node_modules/@parcel/runtime-js/lib/runtime-79c11eaf67934014.js","src/app/script/klecks/ui/modals/text-tool-dialog.ts","node_modules/@parcel/runtime-js/lib/runtime-5744a5d11ac6a886.js","node_modules/@parcel/runtime-js/lib/runtime-98655457574851f3.js","node_modules/@parcel/runtime-js/lib/runtime-9562a2f7545643fc.js","node_modules/@parcel/runtime-js/lib/runtime-59c99a53f7e227b4.js","node_modules/@parcel/runtime-js/lib/runtime-1b5090eeaeb6feee.js","src/app/script/klecks/ui/modals/show-import-image-dialog.ts","src/app/script/klecks/storage/psd.ts","src/app/script/klecks/storage/indexed-db.ts","src/app/script/klecks/filters/filters.ts","node_modules/@parcel/runtime-js/lib/runtime-c159093883ff5561.js","node_modules/@parcel/runtime-js/lib/runtime-a3488caaace8f263.js","node_modules/@parcel/runtime-js/lib/runtime-9dc9361654f38a2e.js","node_modules/@parcel/runtime-js/lib/runtime-4a52064cfa76e494.js","node_modules/@parcel/runtime-js/lib/runtime-d7a8ece1b4ea7cc2.js","node_modules/@parcel/runtime-js/lib/runtime-9c2a70bbfb5fb352.js","node_modules/@parcel/runtime-js/lib/runtime-6d42e8a40743bfcc.js","node_modules/@parcel/runtime-js/lib/runtime-498baf42b9c88850.js","node_modules/@parcel/runtime-js/lib/runtime-e10203531583af3e.js","node_modules/@parcel/runtime-js/lib/runtime-c96fd2175483b432.js","node_modules/@parcel/runtime-js/lib/runtime-4119c2e4942af8de.js","node_modules/@parcel/runtime-js/lib/runtime-b13af3f66471ab7e.js","node_modules/@parcel/runtime-js/lib/runtime-5e47f6b33be6c8a2.js","node_modules/@parcel/runtime-js/lib/runtime-e51e4a761516076e.js","node_modules/@parcel/runtime-js/lib/runtime-4f8410e3bff84ef6.js","node_modules/@parcel/runtime-js/lib/runtime-45ae5909732802b4.js","node_modules/@parcel/runtime-js/lib/runtime-20acd74645a1bb0d.js","node_modules/@parcel/runtime-js/lib/runtime-98ed14f1c797216d.js","src/app/script/klecks/brushes/brushes.ts","src/app/script/klecks/brushes/pen-brush.ts","src/app/script/klecks/brushes/brushes-common.ts","src/app/script/klecks/brushes/alphas/brush-alphas.ts","src/app/script/bb/math/perlin.ts","src/app/script/klecks/brushes/blend-brush.ts","src/app/script/klecks/brushes/sketchy-brush.ts","src/app/script/klecks/brushes/pixel-brush.ts","src/app/script/klecks/brushes/eraser-brush.ts","src/app/script/klecks/brushes/smudge-brush.ts","src/app/script/klecks/brushes/chemy-brush.ts","src/app/script/klecks/brushes-ui/brushes-ui.ts","src/app/script/klecks/brushes-ui/pen-brush-ui.ts","src/app/script/klecks/brushes-ui/brushes-consts.ts","node_modules/@parcel/runtime-js/lib/runtime-8bddae59aeda5353.js","src/app/script/klecks/brushes-ui/blend-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-b8f896524f2e71cd.js","src/app/script/klecks/brushes-ui/sketchy-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-324904751cb03d0c.js","src/app/script/klecks/brushes-ui/pixel-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-e31a24e26fff0e9a.js","src/app/script/klecks/brushes-ui/eraser-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-4e1bb8813f5d0eab.js","src/app/script/klecks/brushes-ui/smudge-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-8b500ab42c1a1f67.js","src/app/script/klecks/brushes-ui/chemy-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-9b284db9da1a2287.js","src/app/script/klecks/ui/base-components/box-toggle.ts","src/app/script/klecks/ui/modals/show-iframe-popup.ts","src/app/script/klecks/ui/base-components/radio-list.ts","src/app/script/klecks/ui/components/browser-storage-ui.ts","src/app/script/klecks/storage/project-store.ts","src/app/script/klecks/storage/project-converter.ts","src/app/script/klecks/storage/base-64-to-blob.ts","src/app/script/klecks/ui/tool-tabs/file-tab.ts","node_modules/@parcel/runtime-js/lib/runtime-6a3f40e438811b49.js","src/app/script/klecks/ui/tool-tabs/filter-tab.ts","src/app/script/klecks/ui/modals/imgur-upload.ts","node_modules/@parcel/runtime-js/lib/runtime-dc5015c222b2c83e.js","src/app/script/klecks/storage/ag-psd-wrapper.ts","node_modules/@parcel/runtime-js/lib/runtime-a25489f9c47fa74e.js","src/app/script/klecks/ui/components/save-reminder.ts","src/app/script/klecks/storage/save-to-computer.ts","node_modules/file-saver/dist/FileSaver.min.js","node_modules/file-saver/src/FileSaver.js","src/app/script/klecks/history/undo-redo-catchup.ts","src/app/script/klecks/brushes-ui/brush-setting-service.ts","src/app/script/klecks/ui/tool-tabs/settings-tab.ts","node_modules/@parcel/runtime-js/lib/runtime-baae958e1bb44804.js","node_modules/@parcel/runtime-js/lib/runtime-c2cf08a9433ab95f.js","node_modules/@parcel/runtime-js/lib/runtime-beaa76e649a4141d.js","src/app/script/klecks/ui/components/toolspace-scroller.ts","src/app/script/klecks/ui/tool-tabs/gradient-ui.ts","src/app/script/app/kl-app.ts","src/app/script/embed/toolspace-top-row.ts","src/app/script/klecks/filters/filters-lazy.ts","src/app/script/klecks/filters/filter-brightness-contrast.ts","src/app/script/klecks/filters/filters-consts.ts","src/app/script/klecks/filters/shared-gl-fx.ts","src/app/script-vendor/glfx.ts","src/app/script-vendor/shader-noise.glsl","src/app/script/klecks/filters/filter-crop-extend.ts","src/app/script/klecks/filters/filter-curves.ts","src/app/script/klecks/filters/filter-flip.ts","node_modules/@parcel/runtime-js/lib/runtime-be15906c8a68c254.js","src/app/script/klecks/filters/filter-hue-saturation.ts","src/app/script/klecks/filters/filter-invert.ts","src/app/script/klecks/filters/filter-perspective.ts","src/app/script/klecks/ui/components/two-tabs.ts","src/app/script/klecks/filters/filter-resize.ts","node_modules/@parcel/runtime-js/lib/runtime-27f8da222644610b.js","src/app/script/klecks/filters/filter-rotate.ts","src/app/script/klecks/filters/filter-tilt-shift.ts","src/app/script/klecks/filters/filter-transform.ts","src/app/script/klecks/filters/filter-blur.ts","src/app/script/klecks/filters/filter-unsharp-mask.ts","src/app/script/klecks/filters/filter-to-alpha.ts","src/app/script/klecks/filters/filter-grid.ts","src/app/script/klecks/image-operations/draw-grid.ts","src/app/script/klecks/filters/filter-noise.ts","src/app/script/klecks/filters/filter-pattern.ts","src/app/script/klecks/filters/filter-distort.ts","src/app/script/klecks/filters/filter-vanish-point.ts","src/app/script/klecks/image-operations/draw-vanish-point.ts","src/app/script/klecks/storage/kl-canvas-to-psd-blob.ts","node_modules/@parcel/runtime-js/lib/runtime-42e7dff95ae092a5.js","node_modules/@parcel/runtime-js/lib/runtime-8219aec810b1c01d.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"d6ea1d42532a7575\";module.bundle.HMR_BUNDLE_ID = \"9808432d9aa0ef6a\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, chrome, browser, globalThis, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: mixed;\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData = undefined;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets\n/*: {|[string]: boolean|} */\n, acceptedAssets\n/*: {|[string]: boolean|} */\n, assetsToAccept\n/*: Array<[ParcelRequire, string]> */\n;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\n\nfunction getPort() {\n  return HMR_PORT || location.port;\n} // eslint-disable-next-line no-redeclare\n\n\nvar parent = module.bundle.parent;\n\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !/localhost|127.0.0.1|0.0.0.0/.test(hostname) ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/'); // Web extension context\n\n  var extCtx = typeof chrome === 'undefined' ? typeof browser === 'undefined' ? null : browser : chrome; // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n\n  var supportsSourceURL = false;\n\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  } // $FlowFixMe\n\n\n  ws.onmessage = async function (event\n  /*: {data: string, ...} */\n  ) {\n    checkedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    acceptedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    assetsToAccept = [];\n    var data\n    /*: HMRMessage */\n    = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH); // Handle HMR Update\n\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n\n      if (handled) {\n        console.clear(); // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n\n        await hmrApplyUpdates(assets);\n\n        for (var i = 0; i < assetsToAccept.length; i++) {\n          var id = assetsToAccept[i][1];\n\n          if (!acceptedAssets[id]) {\n            hmrAcceptRun(assetsToAccept[i][0], id);\n          }\n        }\n      } else fullReload();\n    }\n\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error(' [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html); // $FlowFixMe\n\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n\n  ws.onerror = function (e) {\n    console.error(e.message);\n  };\n\n  ws.onclose = function () {\n    console.warn('[parcel]  Connection to the HMR server was lost');\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel]  Error resolved');\n  }\n}\n\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n           ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div> ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div> <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\n\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\n\nfunction getParents(bundle, id)\n/*: Array<[ParcelRequire, string]> */\n{\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n\n  newLink.setAttribute('href', // $FlowFixMe\n  link.getAttribute('href').split('?')[0] + '?' + Date.now()); // $FlowFixMe\n\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\n\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href\n      /*: string */\n      = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n\n      return new Promise((resolve, reject) => {\n        var _document$head;\n\n        script.onload = () => resolve(script);\n\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 ? void 0 : _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\n\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension bugfix for Chromium\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=1255412#c12\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3) {\n            if (typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n              extCtx.runtime.reload();\n              return;\n            }\n\n            asset.url = extCtx.runtime.getURL('/__parcel_hmr_proxy__?url=' + encodeURIComponent(asset.url + '?t=' + Date.now()));\n            return hmrDownload(asset);\n          }\n\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n\n          (_document$head2 = document.head) === null || _document$head2 === void 0 ? void 0 : _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\n\nfunction hmrApply(bundle\n/*: ParcelRequire */\n, asset\n/*:  HMRAsset */\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      } // $FlowFixMe\n\n\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\n\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    } // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n\n\n    delete modules[id];\n    delete bundle.cache[id]; // Now delete the orphans.\n\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\n\nfunction hmrAcceptCheck(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  } // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n\n\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n\n      parents.push(...p);\n    }\n  }\n\n  return accepted;\n}\n\nfunction hmrAcceptCheckOne(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n\n  if (checkedAssets[id]) {\n    return true;\n  }\n\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToAccept.push([bundle, id]);\n\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n}\n\nfunction hmrAcceptRun(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n  cached = bundle.cache[id];\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n\n  acceptedAssets[id] = true;\n}","/**\n * by bitbof (bitbof.com)\n */\n\nimport './polyfills';\nimport {BB} from './bb/bb';\nimport {KL} from './klecks/kl';\nimport {klHistory} from './klecks/history/kl-history';\nimport {KlApp} from './app/kl-app';\nimport {IKlProject} from './klecks/kl.types';\nimport {ProjectStore} from './klecks/storage/project-store';\nimport {initLANG, LANG} from './language/language';\n\nfunction initError(e) {\n    let el = document.createElement('div');\n    el.style.textAlign = 'center';\n    el.style.background = '#fff';\n    el.style.padding = '20px';\n    el.innerHTML = '<h1>App failed to initialize</h1>';\n    el.innerHTML += 'Error: ' + (e.message ? e.message : ('' + e));\n    document.body.append(el);\n    console.error(e);\n}\n\n(async () => {\n    let klApp;\n    let domIsLoaded = false;\n\n    try {\n        BB.addEventListener(window, 'DOMContentLoaded', () => {\n            domIsLoaded = true;\n        });\n        await initLANG();\n    } catch (e) {\n        initError(e);\n        return;\n    }\n\n    function onProjectLoaded(project: IKlProject, projectStore: ProjectStore) {\n        if (klApp) {\n            throw 'onKlProjectObjLoaded called more than once';\n        }\n        let loadingScreenEl = document.getElementById(\"loading-screen\");\n        try {\n            // in case an extension screwed with the page\n            loadingScreenEl.parentNode.removeChild(loadingScreenEl);\n        } catch(e) {}\n\n        const saveReminder = new KL.SaveReminder(\n            klHistory,\n            true,\n            true,\n            () => klApp.saveAsPsd(),\n            () => {\n                return klApp ? klApp.isDrawing() : false;\n            },\n            null,\n            null,\n        );\n        klApp = new KlApp(\n            project,\n            {\n                saveReminder,\n                projectStore,\n            }\n        );\n        saveReminder.init();\n        if (project) {\n            setTimeout(() => {\n                klApp.out(LANG('file-storage-restored'));\n            }, 100);\n        }\n\n        document.body.appendChild(klApp.getEl());\n    }\n\n    async function onDomLoaded() {\n        try {\n            BB.removeEventListener(window, 'DOMContentLoaded', onDomLoaded);\n            let projectStore = new KL.ProjectStore();\n            let project: IKlProject = null;\n            try {\n                const readResult = await projectStore.read();\n                if (readResult) {\n                    project = readResult.project;\n                }\n            } catch(e) {\n                let message;\n                if (e.message.indexOf('db-error') === 0) {\n                    message = 'Failed to access Browser Storage';\n                } else if (e.message.indexOf('format-error') === 0) {\n                    message = 'Failed to restore from Browser Storage';\n                } else {\n                    message = 'Failed to restore from Browser Storage';\n                }\n                if (message) {\n                    setTimeout(function() {\n                        klApp && klApp.out(message);\n                        throw new Error('Initial browser storage error, ' + e);\n                    }, 100);\n                }\n            }\n            onProjectLoaded(project, projectStore);\n        } catch (e) {\n            initError(e);\n        }\n\n    }\n    if (domIsLoaded) {\n        onDomLoaded();\n    } else {\n        BB.addEventListener(window, 'DOMContentLoaded', onDomLoaded);\n    }\n})();\n\n","// import 'core-js';\nimport 'mdn-polyfills/Node.prototype.append';\nimport 'mdn-polyfills/Node.prototype.prepend';\nimport 'mdn-polyfills/String.prototype.padStart';\nimport 'mdn-polyfills/Array.prototype.findIndex';\n\nif (!('scrollTo' in Element.prototype)) {\n    Object.defineProperty(Element.prototype, 'scrollTo', {\n        value: function (x, y) {\n            this.scrollLeft = x;\n            this.scrollTop = y;\n        }\n    });\n}\n\nif (!('scrollBy' in Element.prototype)) {\n    Object.defineProperty(Element.prototype, 'scrollBy', {\n        value: function (x, y) {\n            this.scrollLeft += x;\n            this.scrollTop += y;\n        }\n    });\n}\n\n// sometimes Android WebView has no localStorage\nif (!('localStorage' in window)) {\n    try {\n        window['localStorage'] = {\n            getItem: () => null,\n            setItem: () => {},\n            removeItem: () => {},\n        } as any;\n    } catch (e) {\n        // maybe it doesn't let me set this\n    }\n}","!function(){function t(){var e=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();e.forEach(function(e){var t=e instanceof Node;n.appendChild(t?e:document.createTextNode(String(e)))}),this.appendChild(n)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty(\"append\")||Object.defineProperty(e,\"append\",{configurable:!0,enumerable:!0,writable:!0,value:t})})}();\n","!function(){function t(){var e=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();e.forEach(function(e){var t=e instanceof Node;n.appendChild(t?e:document.createTextNode(String(e)))}),this.insertBefore(n,this.firstChild)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty(\"prepend\")||Object.defineProperty(e,\"prepend\",{configurable:!0,enumerable:!0,writable:!0,value:t})})}();\n","String.prototype.padStart||(String.prototype.padStart=function(t,n){return t>>=0,n=String(n||\" \"),this.length>t?String(this):((t-=this.length)>n.length&&(n+=n.repeat(t/n.length)),n.slice(0,t)+String(this))});\n","Array.prototype.findIndex||Object.defineProperty(Array.prototype,\"findIndex\",{value:function(r){if(null==this)throw new TypeError('\"this\" is null or not defined');var e=Object(this),t=e.length>>>0;if(\"function\"!=typeof r)throw new TypeError(\"predicate must be a function\");for(var n=arguments[1],o=0;o<t;){var i=e[o];if(r.call(n,i,o,e))return o;o++}return-1}});\n","import * as BBEventListener from './input/event-listener';\nimport {\n    append, centerWithin, copyObj, createSvg,\n    css, dateDayDifference, decToFraction,\n    fitInto, gcd, getDate,\n    handleClick, imageBlobToUrl,\n    insertAfter, loadImage,\n    reduce,\n    setAttributes, shareCanvas\n} from './base/base';\nimport {\n    canShareFiles,\n    eventUsesHighResTimeStamp,\n    getVisitor,\n    hasPointerEvents,\n    hasWebGl,\n    isCssMinMaxSupported,\n    mouseEventHasMovement\n} from './base/browser';\nimport {KeyListener, sameKeys} from './input/key-listener';\nimport {PointerListener} from './input/pointer-listener';\nimport * as EventChain from './input/event-chain';\nimport {\n    canvasBounds,\n    convertToAlphaChannelCanvas,\n    copyCanvas,\n    createCheckerCanvas, createCheckerDataUrl,\n    drawTransformedImageOnCanvas,\n    drawTransformedImageWithBounds, freeCanvas, resizeCanvas, testShouldPixelate\n} from './base/canvas';\nimport {Matrix} from './math/matrix';\nimport {Vec2} from './math/vec2';\nimport {BezierLine, PointLine, projectPointOnLine, quadraticSplineInput, SplineInterpolator} from './math/line';\nimport {CMYK, ColorConverter, HSV, RGB, testIsWhiteBestContrast} from './color/color';\nimport {\n    appendTextDiv,\n    clearSelection,\n    destroyEl,\n    el,\n    isInputFocused,\n    makeUnfocusable,\n    unfocusAnyInput\n} from './base/ui';\nimport {\n    pointsToAngleDeg,\n    clamp,\n    dist,\n    mix,\n    pointsToAngleRad,\n    rotate,\n    rotateAround,\n    intDxy,\n    roundEven, roundUneven, distSquared, lenSquared, updateBounds, boundsInArea, round, isInsideRect\n} from './math/math';\nimport {createCanvas} from './base/create-canvas';\nimport {BbLog} from './base/bb-log';\nimport {LocalStorage} from './base/local-storage';\n\nexport const BB = {\n\n    // ---- browser ----\n    eventUsesHighResTimeStamp,\n    mouseEventHasMovement,\n    hasPointerEvents,\n    hasWebGl,\n    getVisitor,\n    isCssMinMaxSupported,\n    canShareFiles,\n\n    // ---- base ----\n    insertAfter,\n    loadImage,\n    css,\n    setAttributes,\n    append,\n    fitInto,\n    centerWithin,\n    getDate,\n    gcd,\n    reduce,\n    decToFraction,\n    imageBlobToUrl,\n    dateDayDifference,\n    copyObj,\n    shareCanvas,\n    handleClick,\n    createSvg,\n    BbLog,\n    LocalStorage,\n\n    // ---- math ----\n    mix,\n    dist,\n    distSquared,\n    lenSquared,\n    pointsToAngleRad,\n    pointsToAngleDeg,\n    isInsideRect,\n    clamp,\n    rotate,\n    rotateAround,\n    Matrix,\n    Vec2,\n    intDxy,\n    roundEven,\n    roundUneven,\n    round,\n    updateBounds,\n    boundsInArea,\n\n    // ---- line ----\n    projectPointOnLine,\n    PointLine,\n    BezierLine,\n    SplineInterpolator,\n    quadraticSplineInput,\n\n    // ---- canvas ----\n    canvas: createCanvas,\n    copyCanvas,\n    testShouldPixelate,\n    drawTransformedImageWithBounds,\n    drawTransformedImageOnCanvas,\n    createCheckerCanvas,\n    createCheckerDataUrl,\n    resizeCanvas,\n    convertToAlphaChannelCanvas,\n    freeCanvas,\n    canvasBounds,\n\n    // ---- color ----\n    HSV,\n    RGB,\n    CMYK,\n    ColorConverter,\n    testIsWhiteBestContrast,\n\n    // ---- UI ----\n    appendTextDiv,\n    clearSelection,\n    makeUnfocusable,\n    el,\n    destroyEl,\n    isInputFocused,\n    unfocusAnyInput,\n\n\n    // ---- events / input ----\n\n    addEventListener: BBEventListener.addEventListener,\n    removeEventListener: BBEventListener.removeEventListener,\n    setEventListener: BBEventListener.setEventListener,\n\n    KeyListener,\n    PointerListener,\n    sameKeys,\n\n    EventChain,\n\n};\n","import {hasPointerEvents} from '../base/browser';\n\nconst listenerFuncObj = {}; // for debugging\n\nexport const setEventListener = function (DomEl, type, listener) {\n    if (!hasPointerEvents) {\n        type = type.replace('pointer', 'mouse');\n    }\n    DomEl[type] = listener;\n};\n\nexport const addEventListener = function (DomEl, type, listener, options?) {\n    if (!hasPointerEvents) {\n        type = type.replace('pointer', 'mouse');\n    }\n    /*if (!(type in listenerFuncObj)) {\n        listenerFuncObj[type] = [];\n    }\n    listenerFuncObj[type].push(listener);*/\n    DomEl.addEventListener(type, listener, options);\n};\n\nexport const removeEventListener = function (DomEl, type, listener, options?) {\n    if (!hasPointerEvents) {\n        type = type.replace('pointer', 'mouse');\n    }\n    /*if (type in listenerFuncObj) {\n        for (let i = 0; i < listenerFuncObj[type].length; i++) {\n            if (listenerFuncObj[type][i] === listener) {\n                listenerFuncObj[type].splice(i, 1);\n                i--;\n            }\n        }\n    }*/\n    DomEl.removeEventListener(type, listener, options);\n};","import {createCanvas} from './create-canvas';\n\nexport const isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\nexport const eventUsesHighResTimeStamp = (function() {\n\n    let eventUsesHighResTimeStamp: boolean | null = null;\n    if (document.body) {\n        (function() {\n            const event = new Event('');\n            eventUsesHighResTimeStamp = event.timeStamp < 1000 * 60 * 60;\n        })();\n    } else {\n        window.addEventListener('DOMContentLoaded', function(event) {\n            eventUsesHighResTimeStamp = event.timeStamp < 1000 * 60 * 60;\n        });\n    }\n\n    return function(): boolean {\n        if (eventUsesHighResTimeStamp === null) {\n            throw 'eventUsesHighResTimeStamp not initialized';\n        }\n        return eventUsesHighResTimeStamp;\n    }\n})();\n\nexport const mouseEventHasMovement = (() => {\n\n    // no support: IE, Safari, Safari iOS\n    // supported but broken: Firefox\n\n    if (!('MouseEvent' in window)) {\n        return false;\n    }\n    let mouseEvent;\n    try {\n        mouseEvent = new MouseEvent('mousemove'); // browsers not supporting the constructor don't have it\n    } catch (e) {\n        return false;\n    }\n    if (!('movementX' in mouseEvent)) {\n        return false; // likely safari\n    }\n    return !isFirefox;\n})();\n\nexport const hasPointerEvents = !!window.PointerEvent;\n\nexport const hasWebGl = (function() {\n\n    const hasWebgl = (function() {\n        const canvas = createCanvas();\n        try {\n            canvas.getContext('experimental-webgl', { premultipliedAlpha: false });\n            return true;\n        } catch (e) {\n            return false;\n        }\n    })();\n\n    return function() {\n        return hasWebgl;\n    }\n})();\n\nexport const getVisitor = (function () {\n    const visitor = {\n        chrome: false,\n        gl: false\n    };\n    //Chrome\n    if ((window as any).chrome && (window as any).chrome.app) {\n        visitor.chrome = true;\n    }\n    //WebGL\n    visitor.gl = hasWebGl();\n    return function () {\n        return JSON.parse(JSON.stringify(visitor));\n    }\n})();\n\nexport const isCssMinMaxSupported = (function() {\n    let result: boolean | null = null;\n\n    function test() {\n        const div = document.createElement('div');\n        div.style.position = 'absolute';\n        div.style.top = '0';\n        div.style.left = 'max(0px, 25px)';\n        document.body.appendChild(div);\n        setTimeout(function() {\n            result = div.offsetLeft === 25;\n            document.body.removeChild(div);\n        }, 25);\n    }\n\n    if (document.body) {\n        test();\n    } else {\n        window.addEventListener('DOMContentLoaded', function() {\n            test();\n        });\n    }\n\n    return function(): boolean {\n        if (result === null) {\n            throw new Error('isCssMinMaxSupported not initialized');\n        }\n        return result;\n    };\n})();\n\nexport const canShareFiles = function(): boolean {\n    return 'share' in navigator && 'canShare' in navigator;\n};","/*window['canvases'] = [];\n\nwindow['printCanvases'] = () => {\n    let total = 0;\n\n    console.log(window['canvases'].map(item => {\n        total += item.width * item.height;\n        return {w: item.width, h: item.height};\n    }));\n\n    console.log('total: ' + (total * 4 / 1000 / 1000) + 'mb');\n};*/\n\nexport function createCanvas(w?: number, h?: number): HTMLCanvasElement {\n    const result = document.createElement('canvas');\n    if (w && h) {\n        result.width = w;\n        result.height = h;\n    }\n    // window['canvases'].push(result);\n    return result;\n}","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import {IKeyString, ISize2D, ISVG, IVector2D} from '../BB.types';\n\nexport function insertAfter (referenceNode: Element, newNode: Element): void {\n    if (referenceNode.parentNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    }\n}\n\nexport function loadImage (im: HTMLImageElement, callback: () => void): void {\n    let counter = 0;\n\n    function check() {\n        if (counter === 1000) {\n            alert(\"couldn't load\");\n            return;\n        }\n        if (im.complete) {\n            counter++;\n            callback();\n        } else {\n            setTimeout(check, 1);\n        }\n    }\n\n    check();\n}\n\nexport function css (el: HTMLElement | SVGElement, styleObj: IKeyString): void {\n    const keyArr = Object.keys(styleObj);\n    let keyStr: string;\n    const style = (el.style as unknown) as IKeyString;\n    for (let i = 0; i < keyArr.length; i++) {\n        keyStr = keyArr[i];\n        style[keyStr] = styleObj[keyStr];\n        style.alignContent = 'true';\n        if (keyStr === 'userSelect') {\n            style.webkitUserSelect = styleObj[keyStr]; // safari\n        }\n    }\n}\n\nexport function setAttributes (el: HTMLElement, attrObj: IKeyString): void {\n    const keyArr = Object.keys(attrObj);\n    let keyStr;\n    for (let i = 0; i < keyArr.length; i++) {\n        keyStr = keyArr[i];\n        el.setAttribute(keyStr, attrObj[keyStr]);\n    }\n}\n\n/**\n * appendChild with an array\n * @param target\n * @param els\n */\nexport function append(target: HTMLElement, els: (HTMLElement | string | null)[]) {\n    const fragment = document.createDocumentFragment();\n    els.forEach(item => item ? fragment.append(item) : null);\n    target.append(fragment);\n}\n\n/**\n * a needs to fit into b\n * @param aw\n * @param ah\n * @param bw\n * @param bh\n * @param min\n */\nexport function fitInto (aw: number, ah: number, bw: number, bh: number, min?: number): ISize2D {\n    let width = aw * bw, height = ah * bw;\n    if (width > bw) {\n        height = bw / width * height;\n        width = bw;\n    }\n    if (height > bh) {\n        width = bh / height * width;\n        height = bh;\n    }\n    if (min) {\n        width = Math.max(min, width);\n        height = Math.max(min, height);\n    }\n    return {width, height};\n}\n\n/**\n * center b in a\n * @param aw\n * @param ah\n * @param bw\n * @param bh\n */\nexport function centerWithin (aw: number, ah: number, bw: number, bh: number): IVector2D {\n    return {\n        x: aw / 2 - bw / 2,\n        y: ah / 2 - bh / 2\n    };\n}\n\nexport function getDate (): string {\n    const date = new Date();\n    const year = date.getFullYear();\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const day = date.getDate().toString().padStart(2, '0');\n    const minutes = (date.getHours() * 60 + date.getMinutes()).toString(36).padStart(3, '0');\n\n    return year + '_' + month + '_' + day + '_' + minutes + '_';\n}\n\nexport function gcd (a: number, b: number): number {\n    return b ? gcd(b, a % b) : a;\n}\n\nexport function reduce (numerator: number, denominator: number): [number, number] {\n    const g = gcd(numerator, denominator);\n    return [numerator / g, denominator / g];\n}\n\nexport function decToFraction (decimalNumber: number): [number, number] {\n    const len = decimalNumber.toString().length - 2;\n    const denominator = Math.pow(10, len);\n    const numerator = decimalNumber * denominator;\n    return reduce(numerator, denominator);\n}\n\n/**\n * blobObj isn't always a Blob, but rather an object, because Blob doesn't exist.\n * @param blobObj\n * @returns {string}\n */\nexport function imageBlobToUrl(blobObj: Blob): string {\n    if (!blobObj) {\n        throw new Error('blobObj is undefined or null');\n    }\n    if (window.Blob && blobObj instanceof Blob) {\n        return URL.createObjectURL(blobObj); // object url\n    } else if (blobObj.constructor.name === 'Object') {\n        const fauxBlob = (blobObj as unknown) as {type: string, encoding: string, data: string};\n        return 'data:' + fauxBlob.type + ';' + fauxBlob.encoding + ',' + fauxBlob.data; // data url\n    } else {\n        throw new Error('unknown blob format');\n    }\n}\n\nexport function dateDayDifference (dateA: string | Date, dateB: string | Date): number {\n    dateA = new Date(dateA);\n    dateB = new Date(dateB);\n    dateA.setHours(0, 0, 0, 0);\n    dateB.setHours(0, 0, 0, 0);\n    return (dateB.getTime() - dateA.getTime()) / (1000 * 60 * 60 * 24);\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function copyObj (obj: any): any {\n    return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * triggers Web Share API - share feature on mobile devices\n * Only works if they support file sharing - e.g. Safari can't do this yet\n * only call if BB.canShareFiles() -> true\n *\n * p = {\n *     canvas: Canvas,\n *     fileName: string,\n *     title: string\n * }\n *\n * @param p\n */\nexport function shareCanvas (p: {canvas: HTMLCanvasElement, fileName:string, title: string, callback: () => void}): void {\n    const mimetype = 'image/png';\n    const err = () => alert('sharing not supported');\n    p.canvas.toBlob(function(blob) {\n        if (blob === null) {\n            err();\n            p.callback();\n            return;\n        }\n        try {\n            const filesArray = [new File([blob], p.fileName, {type: mimetype})];\n            navigator.share({\n                title: p.title,\n                files: filesArray,\n            } as any)\n                .then(r => {\n\n                })\n                .catch(e => {\n                    err();\n            });\n        } catch(e) {\n            err();\n        }\n        p.callback();\n    }, mimetype);\n}\n\n/**\n * Prevent ipad from zooming in when double tapping. iPadOS 13 bug.\n * Give it your click event\n *\n * @param clickEvent\n * @returns {boolean}\n */\nexport function handleClick (clickEvent: MouseEvent): boolean {\n    const target: HTMLElement | null = clickEvent.target as HTMLElement;\n    if (!target) {\n        return false;\n    }\n    if (['A', 'LABEL', 'INPUT'].includes(target.tagName) || (target as any).allowClick) {\n        return true;\n    }\n    clickEvent.preventDefault();\n    return false;\n}\n\n\n/**\n * @param el {elementType: string, childrenArr: []el, ...svg attributes...}\n * @returns svg element tree\n */\nexport function createSvg (el: ISVG): SVGElement {\n    const result = document.createElementNS('http://www.w3.org/2000/svg', el.elementType);\n    const keyArr = Object.keys(el);\n    let keyStr;\n    for (let i = 0; i < keyArr.length; i++) {\n        keyStr = keyArr[i];\n        if (keyStr === 'childrenArr') {\n            for (let e = 0; e < el.childrenArr.length; e++) {\n                result.appendChild(createSvg(el.childrenArr[e]));\n            }\n        } else if (keyStr !== 'elementType') {\n            result.setAttribute(keyStr, el[keyStr] as string);\n        }\n    }\n    return result;\n}","import {addEventListener, removeEventListener} from './event-listener';\n\n\nconst globalKey = (() => {\n\n    const keyStrToKeyObj = { // keyStr not to contain a '+', because that's used for the comboStr\n        'space': [' ', 'Spacebar'], // Spacebar in IE\n        'alt': ['Alt', 'AltGraph'],\n        'shift': 'Shift',\n        'ctrl': 'Control',\n        'cmd': ['Meta', 'MetaLeft', 'MetaRight'],\n        'enter': 'Enter',\n        'esc': 'Escape',\n        'backspace': 'Backspace',\n        'delete': 'Delete',\n        'sqbr_open': '[',\n        'sqbr_close': ']',\n        'a': ['a', 'A'],\n        'b': ['b', 'B'],\n        'c': ['c', 'C'],\n        'e': ['e', 'E'],\n        'f': ['f', 'F'],\n        'g': ['g', 'G'],\n        'r': ['r', 'R'], // when holding shift\n        's': ['s', 'S'],\n        't': ['t', 'T'],\n        'u': ['u', 'U'],\n        'x': ['x', 'X'],\n        'y': ['y', 'Y'],\n        'z': ['z', 'Z'],\n        'plus': '+',\n        'minus': '-',\n        'left': 'ArrowLeft',\n        'right': 'ArrowRight',\n        'up': 'ArrowUp',\n        'down': 'ArrowDown',\n        'home': 'Home',\n        'end': 'End'\n    };\n    const keyToKeyStrArr = Object.keys(keyStrToKeyObj);\n    const isDownObj = {};\n    const keyToKeyStrObj = {}; // event.key to keyStr { ArrowLeft: 'left', ... }\n    let comboArr = [];\n    //a physical key's \"key\" can change as other keys get pressed. to keep track, need to also track the code\n    let codeIsDownObj = {}; // { KeyE: 'e', KeyF: null } - null not down, string, the associated keyStr\n    const listenerArr = [];\n\n    for (let i = 0; i < keyToKeyStrArr.length; i++) {\n        isDownObj[keyToKeyStrArr[i]] = false;\n\n        const code = keyStrToKeyObj[keyToKeyStrArr[i]];\n        if (typeof code === 'string') {\n            keyToKeyStrObj[keyStrToKeyObj[keyToKeyStrArr[i]]] = keyToKeyStrArr[i];\n        } else {\n            for (let e = 0; e < code.length; e++) {\n                keyToKeyStrObj[code[e]] = keyToKeyStrArr[i];\n            }\n        }\n    }\n\n    function emitDown(a, b, c, d?) {\n        listenerArr.forEach(item => {\n            if (!item[0]) {\n                return;\n            }\n            item[0](a, b, c, d);\n        });\n    }\n\n    function emitUp(a, b, c) {\n        listenerArr.forEach(item => {\n            if (!item[1]) {\n                return;\n            }\n            item[1](a, b, c);\n        });\n    }\n\n    function emitBlur() {\n        listenerArr.forEach(item => {\n            if (!item[2]) {\n                return;\n            }\n            item[2]();\n        });\n    }\n\n    function keyDown(e) {\n        const key = e.key;\n        const code = 'code' in e ? e.code : e.keyCode; // ie doesn't have code\n\n        if (key in keyToKeyStrObj) {\n            const keyStr = keyToKeyStrObj[key];\n            if (isDownObj[keyStr]) {\n                emitDown(keyStr, e, comboArr.join('+'), true);\n                return;\n            }\n            isDownObj[keyStr] = true;\n            codeIsDownObj[code] = keyStr;\n\n            //add to combo\n            comboArr.push(keyStr);\n\n            emitDown(keyStr, e, comboArr.join('+'));\n        }\n    }\n\n\n    function keyUp(e) {\n        const key = e.key;\n        const code = 'code' in e ? e.code : e.keyCode; // ie doesn't have code\n        const oldComboStr = comboArr.join('+');\n\n        // because of a macOS bug: when meta key is down, keyup of other keys does not fire.\n        // https://stackoverflow.com/questions/25438608/javascript-keyup-isnt-called-when-command-and-another-is-pressed\n        if ([\n            'Meta', 'MetaLeft', 'MetaRight',\n            'OSLeft', 'OSRight', // Firefox\n        ].includes(code)) {\n            blur(null);\n            return;\n        }\n\n        if (code in codeIsDownObj && codeIsDownObj[code] !== null) {\n            const keyStr = codeIsDownObj[code];\n            isDownObj[keyStr] = false;\n            codeIsDownObj[code] = null;\n\n            //remove from combo\n            for (let i = 0; i < comboArr.length; i++) {\n                if (comboArr[i] == keyStr) {\n                    comboArr.splice(i, 1);\n                    i--;\n                }\n            }\n\n            emitUp(keyStr, e, oldComboStr);\n        }\n    }\n\n    function blur(event) {\n        const oldComboStr = comboArr.join('+');\n        comboArr = [];\n        codeIsDownObj = {};\n\n        const eventArr = [];\n        for (let i = 0; i < keyToKeyStrArr.length; i++) {\n            if (isDownObj[keyToKeyStrArr[i]]) {\n                isDownObj[keyToKeyStrArr[i]] = false;\n                eventArr.push(keyToKeyStrArr[i]);\n            }\n        }\n        for (let i = 0; i < eventArr.length; i++) {\n            emitUp(\n                eventArr[i],\n                {\n                    preventDefault: function () {},\n                    stopPropagation: function () {},\n                },\n                oldComboStr,\n            );\n        }\n        emitBlur();\n    }\n\n\n\n    return {\n        add: (keyListener) => {\n            if (listenerArr.includes(keyListener)) {\n                return;\n            }\n            const first = listenerArr.length === 0;\n            listenerArr.push(keyListener);\n\n            if (first) {\n                addEventListener(document, 'keydown', keyDown);\n                addEventListener(document, 'keyup', keyUp);\n                addEventListener(window, 'blur', blur);\n            }\n        },\n        remove: (keyListener) => {\n            if (!listenerArr.includes(keyListener)) {\n                return;\n            }\n            const last = listenerArr.length === 1;\n            for (let i = 0; i < listenerArr.length; i++) {\n                if (listenerArr[i] === keyListener) {\n                    listenerArr.splice(i, 1);\n                    break;\n                }\n            }\n            if (last) {\n                removeEventListener(document, 'keydown', keyDown);\n                removeEventListener(document, 'keyup', keyUp);\n                removeEventListener(window, 'blur', blur);\n            }\n        },\n        getIsDown: () => {\n            return isDownObj;\n        },\n        getCombo: () => {\n            return comboArr;\n        },\n    };\n})();\n\n\n\n/**\n * Listens to key events in window. Makes combos easier - e.g. ctrl + z\n *\n * keyStr - see in implementation - my representation of a key. e.g. 'r' can be 'r' and 'R'\n * comboStr - string joins currently pressed keyStr with a +\n *              e.g. 'ctrl+z'\n *\n */\nexport class KeyListener {\n\n    private readonly onDown;\n    private readonly onUp;\n    private readonly onBlur;\n    private readonly ref;\n\n    constructor (\n        p: {\n            onDown?: (keyStr: string, e: KeyboardEvent, comboStr: string, isRepeat?: boolean) => void;\n            onUp?: (keyStr: string, e: KeyboardEvent, oldComboStr: string) => void;\n            onBlur?: () => void;\n        },\n    ) {\n        this.onDown = p.onDown;\n        this.onUp = p.onUp;\n        this.onBlur = p.onBlur;\n        this.ref = [this.onDown, this.onUp, this.onBlur];\n        globalKey.add(this.ref);\n    }\n\n    isPressed (keyStr: string): boolean {\n        if (!(keyStr in globalKey.getIsDown())) {\n            throw 'key \"' + keyStr + '\" not found';\n        }\n        return globalKey.getIsDown()[keyStr];\n    }\n\n    getComboStr (): string {\n        return globalKey.getCombo().join('+');\n    }\n\n    comboOnlyContains (keyStrArr: string[]): boolean {\n        for (let i = 0; i < globalKey.getCombo().length; i++) {\n            if (!keyStrArr.includes(globalKey.getCombo()[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    destroy (): void {\n        globalKey.remove(this.ref);\n    }\n}\n\nexport function sameKeys(comboAStr: string, comboBStr: string): boolean {\n    return comboAStr.split('+').sort().join('+')=== comboBStr.split('+').sort().join('+');\n}","import {addEventListener, removeEventListener} from './event-listener';\n\n\n/**\n * Filters wheel events. removes swipe scrolling and pinch scrolling that trackpads do. (as best as it can)\n * Normalizes regular scrolls.\n *\n * Why:\n * - trackpad scrolling is different from old school mouse scrolling\n * - but there is not way to learn from the browser if it's trackpad scrolling\n * - browsers don't even give access to the raw swiping or pinching movement, but some abstraction on top, making the scrolling\n *      continue an arbitrary amount, at an arbitrary scale\n * - each browser does this differently. So you can't offer a coherent experience\n *\n * - also trackpads are painful to draw with. So supporting a trackpad-based workflow makes not much sense.\n *\n * @param callback - func({deltaY: number, pageX: number, pageY: number, clientX: number, clientY: number}\n * @constructor\n */\nimport {eventUsesHighResTimeStamp, hasPointerEvents, isFirefox} from '../base/browser';\nimport {mix} from '../math/math';\n\nconst WheelCleaner = function (callback) {\n    const sequenceTimeoutMs = 200;\n\n    const knownUnitArr = [100];\n    let sequenceLength = 0;\n    let sequenceUnit = null;\n    let endSequenceTimeout;\n    let toEmitDelta = null;\n    let position = null;\n\n\n    function emit(delta) {\n        callback({\n            deltaY: Math.round(delta / sequenceUnit),\n            pageX: position.pageX,\n            pageY: position.pageY,\n            clientX: position.clientX,\n            clientY: position.clientY,\n        });\n    }\n\n    function endSequence() {\n        if (toEmitDelta !== null) {\n            emit(toEmitDelta);\n            toEmitDelta = null;\n        }\n        if (sequenceUnit !== null && !(knownUnitArr.includes(sequenceUnit))) {\n            knownUnitArr.push(sequenceUnit);\n        }\n        sequenceLength = 0;\n        sequenceUnit = null;\n    }\n\n    // --- interface ---\n    this.process = function (event) {\n\n        position = {\n            pageX: event.pageX,\n            pageY: event.pageY,\n            clientX: event.clientX,\n            clientY: event.clientY,\n        };\n\n        clearTimeout(endSequenceTimeout);\n        endSequenceTimeout = setTimeout(endSequence, sequenceTimeoutMs);\n\n        //prep delta\n        let delta = event.deltaY;\n        if ('deltaMode' in event && event.deltaMode === 1) {\n            delta *= 100 / 3;\n        }\n        const absDelta = Math.abs(delta);\n\n\n        if (sequenceLength > 0 && sequenceUnit === null) {\n            //previously determined dirty sequence\n            toEmitDelta = null;\n            return;\n        }\n\n        //sequence begins\n        if (sequenceLength === 0) {\n            sequenceLength++;\n            if (absDelta < 50) {\n                //dirty - probably a swipe scroll or pinch scroll on trackpad\n                return;\n            }\n\n            sequenceUnit = absDelta;\n            if (knownUnitArr.includes(sequenceUnit)) {\n                //we know this unit - emit right away\n                emit(delta);\n            } else {\n                //unknown unit - wait until next event or sequence end, to have more certainty that it's clean\n                toEmitDelta = delta;\n            }\n            return;\n        }\n\n        //sequence continues\n        if (absDelta === 0) {\n            //ignore zero scroll\n            return;\n        }\n        if (\n            absDelta === sequenceUnit ||\n            (absDelta / sequenceUnit) % 1 < 0.0001// a multiple\n        ) {\n            //fine\n        } else if ((sequenceUnit / absDelta) % 1 < 0.0001) {\n            //unit was actually a multiple - update it\n            sequenceUnit = absDelta;\n\n        } else if (absDelta !== sequenceUnit) {\n            //not clean - delta is varying - probably a swipe scroll or pinch scroll on trackpad\n            sequenceUnit = null;\n            toEmitDelta = null;\n            return;\n        }\n\n\n        if (toEmitDelta !== null) {\n            emit(toEmitDelta);\n            toEmitDelta = null;\n        }\n        emit(delta);\n    };\n};\n\n\n/**\n * PointerListener - for pointer events, wheel events. uses fallbacks. ideally consistent behavior across browsers\n * Has some workarounds for browser specific bugs. As browsers get better, this constructor should get smaller\n *\n * p = {\n *     target: DOM element,\n *     onPointer: func (pointerEvent), //optional\n *     onWheel: func (wheelEvent), //optional\n *     onEnterLeave: func (isOver: boolean), //optional\n *     maxPointers: int (1 - n), //default is 1\n *     fixScribble: boolean, // fix ipad scribble issue\n * }\n *\n * pointerEvent = {\n *     type: 'pointerdown'|'pointermove'|'pointerup',\n *     pointerId: long,\n *     pointerType: 'touch'|'mouse'|'pen',\n *     pageX: number,\n *     pageY: number,\n *     clientX: number,\n *     clientY: number,\n *     relX: number, //position relative to top left of target\n *     relY: number,\n *     dX: number, //movementX not supported by safari on iOS, so need my own\n *     dY: number,\n *     downPageX: number, //where was pointer when down-event occurred - set for down|move|up\n *     downPageY: number,\n *     coalescedArr: Array of {\n *         pageX: number,\n *         pageY: number,\n *         clientX: number,\n *         clientY: number,\n *         relX: number, //position relative to top left of target\n *         relY: number,\n *         dX: number,\n *         dY: number,\n *         time: number// same timescale as performance.now() - might be exact same number as in parent\n *     },\n *     time: number, // same timescale as performance.now()\n *     button: 'left'|'middle'|'right',\n *     pressure: number (0-1), // always 1 for touch and mouse\n *     eventPreventDefault: function(),\n *     eventStopPropagation: function(),\n * }\n *\n * wheelEvent = {\n *     deltaY: number, // increments of 1\n *     pageX: number,\n *     pageY: number,\n *     relX: number,\n *     relY: number,\n * }\n *\n * isOver(): boolean - if pointer over the target\n *\n * @param p\n */\nexport const PointerListener = (function () {\n\n    //keeping track of pointers for movement fallback\n    const pointerArr = [];\n\n    function addPointer(event) {\n        const pointerObj = {\n            pointerId: event.pointerId,\n            lastPageX: null,\n            lastPageY: null\n        };\n        pointerArr.push(pointerObj);\n\n        if (pointerArr.length > 15) {\n            pointerArr.shift();\n        }\n\n        return pointerObj;\n    }\n\n    function getPointer(event) {\n        for (let i = pointerArr.length - 1; i >= 0; i--) {\n            if (event.pointerId === pointerArr[i].pointerId) {\n                return pointerArr[i];\n            }\n        }\n        return null;\n    }\n\n\n    let pressureNormalizeAvgCount = 0;\n    let pressureNormalizeAvgPressure = null;\n    let pressureNormalizeIsComplete = false;\n    let pressureNormalizeFactor = 1;\n\n    return function (p) {\n        const targetElement = p.target;\n        const onPointerCallback = p.onPointer;\n        const onWheelCallback = p.onWheel;\n        const onEnterLeaveCallback = p.onEnterLeave;\n        const maxPointers = 'maxPointers' in p ? p.maxPointers : 1;\n        const buttonsToStr = { // translation\n            '1': 'left',\n            '2': 'right',\n            '4': 'middle'\n        };\n        const wheelCleaner = new WheelCleaner(function (wheelEvent) {\n            if (isDestroyed) {\n                return;\n            }\n            if (onWheelCallback) {\n                const bounds = targetElement.getBoundingClientRect();\n                wheelEvent.relX = wheelEvent.clientX - bounds.left + targetElement.scrollLeft;\n                wheelEvent.relY = wheelEvent.clientY - bounds.top + targetElement.scrollTop;\n                onWheelCallback(wheelEvent);\n            }\n        });\n        let isDestroyed = false;\n\n        const timeStampOffset = eventUsesHighResTimeStamp() ? 0 : -performance.timing.navigationStart;\n\n\n        //to circumvent a chrome input glitch\n        let lastPointerType = '';\n        let didSkip = false;\n\n\n        /*\n        pointers that are pressing a button\n        dragObj = {\n            pointerId: long,\n            pointerType: 'mouse'|'pen'|'touch',\n            downPageX: number, //where was pointer when down-event occurred\n            downPageY: number,\n            button: long,\n            lastPageX: number, //pageX in previous event - only for touch events, because they don't have movementX/Y\n            lastPageY: number,\n            lastTimeStamp: number\n        }\n         */\n        const dragObjArr = [];\n        const dragPointerIdArr = [];\n\n        function getDragObj(pointerId) {\n            for (let i = 0; i < dragObjArr.length; i++) {\n                if (pointerId === dragObjArr[i].pointerId) {\n                    return dragObjArr[i];\n                }\n            }\n            return null;\n        }\n\n        function removeDragObj(pointerId) {\n            let removedDragObj = null;\n            for (let i = 0; i < dragPointerIdArr.length; i++) {\n                if (dragPointerIdArr[i] === pointerId) {\n                    removedDragObj = dragObjArr[i];\n                    dragObjArr.splice(i, 1);\n                    dragPointerIdArr.splice(i, 1);\n                    i--;\n                }\n            }\n            return removedDragObj;\n        }\n\n\n        function normalizePressure(pressure, type?) {\n            if (pressure === 0 || pressure === 1) {\n                return pressure;\n            }\n\n            // was this there to prevent some glitch?\n            /*if (pressureNormalizeIsComplete && type === 'pointerdown' && pressure !== 1) {\n                pressure *= 0.004;\n            }*/\n\n            if (pressureNormalizeAvgCount < 60) {\n                if (pressureNormalizeAvgCount === 0) {\n                    pressureNormalizeAvgPressure = pressure;\n                } else {\n                    pressureNormalizeAvgPressure = mix(pressure, pressureNormalizeAvgPressure, 0.95);\n                }\n                pressureNormalizeAvgCount++;\n            } else if (!pressureNormalizeIsComplete) {\n                pressureNormalizeIsComplete = true;\n                //BB.throwOut('avg pressure decision!' + pressureNormalizeAvgPressure);\n                if (pressureNormalizeAvgPressure < 0.13) { // absurd pressure needed\n                    pressureNormalizeFactor = 2.3;\n                }\n            }\n\n\n            return Math.pow(pressure, 1 / pressureNormalizeFactor);\n        }\n\n\n        /**\n         *\n         * More trustworthy pointer attributes. that behave the same across browsers.\n         * returns a new object. this object also gets attached to the orig event. -> event.corrected\n         *\n         * @param event\n         * @returns {{pointerId: number, timeStamp: number, button, buttons, pointerType: (string|string|any), movementY: number, movementX: number, pressure, coalescedArr: [], pageY, pageX, clientX, clientY, eventPreventDefault: func, eventStopPropagation: func}\n         */\n        function correctPointerEvent(event) {\n            if (event.corrected) {\n                return event.corrected;\n            }\n\n            /*if (event.type === 'pointermove' && !window.hidePressureOut) {\n                if (event.type === 'pointermove') {\n                    BB.throwOut(event.pressure + ' ' + event.pointerType);\n                }\n            }*/\n\n            const correctedObj = {\n                pointerId: event.pointerId,\n                pointerType: event.pointerType,\n                pageX: event.pageX,\n                pageY: event.pageY,\n                clientX: event.clientX,\n                clientY: event.clientY,\n                movementX: event.movementX,\n                movementY: event.movementY,\n                timeStamp: event.timeStamp + timeStampOffset,\n                pressure: normalizePressure(event.pressure, event.type),\n                buttons: event.buttons,\n                button: event.button,\n                coalescedArr: [],\n                eventPreventDefault: function () {\n                    event.preventDefault();\n                },\n                eventStopPropagation: function () {\n                    event.stopPropagation();\n                }\n            };\n            event.corrected = correctedObj;\n\n            let customPressure = null;\n            if ('pointerId' in event) {\n                if ('pressure' in event && event.buttons !== 0 && (['mouse'].includes(event.pointerType) || (event.pointerType === 'touch' && event.pressure === 0))) {\n                    correctedObj.pressure = 1;\n                    customPressure = 1;\n                }\n            } else {\n                correctedObj.pointerId = 0;\n                correctedObj.pointerType = 'mouse';\n                correctedObj.pressure = event.buttons !== 0 ? 1 : 0;\n                customPressure = correctedObj.pressure;\n            }\n\n            if (isFirefox && event.pointerType != 'mouse' && event.type === 'pointermove' && event.buttons === 0) { // once again firefox\n                correctedObj.buttons = 1; //todo wrong if no buttons actually pressed\n            }\n\n            let coalescedEventArr = [];\n            if ('getCoalescedEvents' in event) {\n                coalescedEventArr = event.getCoalescedEvents();\n            }\n\n            // chrome somehow movementX not same scale as pageX. todo: only chrome?\n            // so make my own\n\n            let pointerObj = getPointer(correctedObj);\n            if (pointerObj === null) {\n                pointerObj = addPointer(correctedObj);\n            }\n\n            const totalLastX = pointerObj.lastPageX;\n            const totalLastY = pointerObj.lastPageY;\n\n            for (let i = 0; i < coalescedEventArr.length; i++) {\n                const eventItem = coalescedEventArr[i];\n\n                correctedObj.coalescedArr.push({\n                    pageX: eventItem.pageX,\n                    pageY: eventItem.pageY,\n                    clientX: eventItem.clientX,\n                    clientY: eventItem.clientY,\n                    movementX: pointerObj.lastPageX === null ? 0 : eventItem.pageX - pointerObj.lastPageX,\n                    movementY: pointerObj.lastPageY === null ? 0 : eventItem.pageY - pointerObj.lastPageY,\n                    timeStamp: eventItem.timeStamp === 0 ? correctedObj.timeStamp : (eventItem.timeStamp + timeStampOffset), // 0 in firefox\n                    pressure: customPressure === null ? normalizePressure(eventItem.pressure) : customPressure\n                });\n\n                pointerObj.lastPageX = eventItem.pageX;\n                pointerObj.lastPageY = eventItem.pageY;\n            }\n\n            pointerObj.lastPageX = correctedObj.pageX;\n            pointerObj.lastPageY = correctedObj.pageY;\n            correctedObj.movementX = totalLastX === null ? 0 : pointerObj.lastPageX - totalLastX;\n            correctedObj.movementY = totalLastY === null ? 0 : pointerObj.lastPageY - totalLastY;\n\n            return correctedObj;\n\n        }\n\n        /**\n         * creates a value for onPointer, from a pointer event handler\n         *\n         * @param typeStr string - 'pointerdown'|'pointermove'|'pointerup'\n         * @param correctedEvent - corrected pointer event from correctPointerEvent()\n         * @param custom - object for setting custom attributes\n         * @returns {{pointerId: number, pointerType: *, dX: (*), relY: number, dY: (*), relX: number, type: *, event: *, pageY: *, pageX: *}}\n         */\n        function createPointerOutEvent(typeStr, correctedEvent, custom?) {\n\n            const bounds = targetElement.getBoundingClientRect();\n            const result: any = {\n                type: typeStr,\n                pointerId: correctedEvent.pointerId,\n                pointerType: correctedEvent.pointerType,\n                pageX: correctedEvent.pageX,\n                pageY: correctedEvent.pageY,\n                clientX: correctedEvent.clientX,\n                clientY: correctedEvent.clientY,\n                relX: correctedEvent.clientX - bounds.left + targetElement.scrollLeft,\n                relY: correctedEvent.clientY - bounds.top + targetElement.scrollTop,\n                dX: correctedEvent.movementX,\n                dY: correctedEvent.movementY,\n                time: correctedEvent.timeStamp,\n                eventPreventDefault: correctedEvent.eventPreventDefault,\n                eventStopPropagation: correctedEvent.eventStopPropagation\n            };\n\n            if (typeStr === 'pointermove') {\n                result.coalescedArr = [];\n                if (correctedEvent.coalescedArr.length > 1) {\n                    let coalescedItem;\n                    for (let i = 0; i < correctedEvent.coalescedArr.length; i++) {\n                        coalescedItem = correctedEvent.coalescedArr[i];\n                        result.coalescedArr.push({\n                            pageX: coalescedItem.pageX,\n                            pageY: coalescedItem.pageY,\n                            clientX: coalescedItem.clientX,\n                            clientY: coalescedItem.clientY,\n                            relX: coalescedItem.clientX - bounds.left + targetElement.scrollLeft,\n                            relY: coalescedItem.clientY - bounds.top + targetElement.scrollTop,\n                            dX: coalescedItem.movementX,\n                            dY: coalescedItem.movementY,\n                            time: coalescedItem.timeStamp\n                        });\n                    }\n                }\n            }\n\n            if (custom) {\n                const keyArr = Object.keys(custom);\n                for (let i = 0; i < keyArr.length; i++) {\n                    result[keyArr[i]] = custom[keyArr[i]];\n                }\n            }\n\n            return result;\n        }\n\n        /**\n         * creates a value for onPointer, from a fallback touch event handler\n         *\n         * @param typeStr string - 'pointerdown'|'pointermove'|'pointerup'\n         * @param touchListItem - element from changed touch list\n         * @param touchEvent - touch event\n         * @param custom - object for setting custom attributes\n         * @returns {{pointerId: number, pointerType: string, relY: number, relX: number, type: *, event: *, pageY: *, pageX: *}}\n         */\n        function createTouchOutEvent(typeStr, touchListItem, touchEvent, custom) {\n            const bounds = targetElement.getBoundingClientRect();\n            const result: any = {\n                type: typeStr,\n                pointerId: touchListItem.identifier,\n                pointerType: 'touch',\n                pageX: touchListItem.pageX,\n                pageY: touchListItem.pageY,\n                clientX: touchListItem.clientX,\n                clientY: touchListItem.clientY,\n                relX: touchListItem.pageX - bounds.left + targetElement.scrollLeft,\n                relY: touchListItem.pageY - bounds.top + targetElement.scrollTop,\n                time: touchEvent.timeStamp + timeStampOffset,\n                eventPreventDefault: function() { touchEvent.preventDefault(); },\n                eventStopPropagation: function() { touchEvent.stopPropagation(); }\n            };\n\n            if (typeStr === 'pointermove') {\n                result.coalescedArr = [];\n            }\n\n            const keyArr = Object.keys(custom);\n            for (let i = 0; i < keyArr.length; i++) {\n                result[keyArr[i]] = custom[keyArr[i]];\n            }\n\n            return result;\n        }\n\n        function setupDocumentListeners() {\n            addEventListener(document, 'pointermove', onGlobalPointerMove);\n            addEventListener(document, 'pointerup', onGlobalPointerUp);\n            addEventListener(document, 'pointerleave', onGlobalPointerLeave);\n        }\n\n        function destroyDocumentListeners() {\n            removeEventListener(document, 'pointermove', onGlobalPointerMove);\n            removeEventListener(document, 'pointerup', onGlobalPointerUp);\n            removeEventListener(document, 'pointerleave', onGlobalPointerLeave);\n        }\n\n        let isOverCounter = 0; // might be multiple pointers\n        function onPointerEnter() {\n            isOverCounter++;\n            if (onEnterLeaveCallback) {\n                onEnterLeaveCallback(true);\n            }\n        }\n\n        function onPointerLeave() {\n            isOverCounter--;\n            if (onEnterLeaveCallback) {\n                onEnterLeaveCallback(false);\n            }\n        }\n\n        function onPointermove(event) {\n            event = correctPointerEvent(event);\n\n            const tempLastPointerType = lastPointerType;\n            lastPointerType = event.pointerType;\n\n            if (dragPointerIdArr.includes(event.pointerId) || dragPointerIdArr.length === maxPointers || event.pointerType === 'touch') {\n                didSkip = false;\n                return;\n            }\n\n            // chrome input glitch workaround - throws in a random mouse event with the wrong position when using a stylus\n            if (!didSkip && event.pointerType === 'mouse' && tempLastPointerType === 'pen') {\n                didSkip = true;\n                return;\n            }\n            didSkip = false;\n\n            const outEvent = createPointerOutEvent('pointermove', event);\n            onPointerCallback(outEvent);\n\n        }\n\n        function onPointerdown(event) {\n            //BB.throwOut('pointerdown ' + event.pointerId + ' | ' + dragPointerIdArr.length);\n            event = correctPointerEvent(event);\n            ////console.log('debug: ' + event.pointerId + ' pointerdown');\n            if (dragPointerIdArr.includes(event.pointerId) || dragPointerIdArr.length === maxPointers || !([1, 2, 4].includes(event.buttons))) {\n                //BB.throwOut('pointerdown ignored');\n                return;\n            }\n\n\n            //set up global listeners\n            if (dragObjArr.length === 0) {\n                setupDocumentListeners();\n            }\n            const dragObj = {\n                pointerId: event.pointerId,\n                pointerType: event.pointerType,\n                downPageX: event.pageX,\n                downPageY: event.pageY,\n                buttons: event.buttons,\n                lastPageX: event.pageX,\n                lastPageY: event.pageY,\n                lastTimeStamp: event.timeStamp\n            };\n            dragObjArr.push(dragObj);\n            setTouchTimeout(dragObj);\n            dragPointerIdArr.push(event.pointerId);\n\n            const outEvent = createPointerOutEvent('pointerdown', event, {\n                downPageX: event.pageX,\n                downPageY: event.pageY,\n                button: buttonsToStr[event.buttons],\n                pressure: event.pressure\n            });\n\n            onPointerCallback(outEvent);\n        }\n\n\n        function onGlobalPointerMove(event) {\n            //BB.throwOut('pointermove ' + event.pointerId);\n            event = correctPointerEvent(event);\n            ////console.log('debug: ' + event.pointerId + ' GLOBALpointermove');\n            if (!(dragPointerIdArr.includes(event.pointerId))) {\n                return;\n            }\n\n            const dragObj = getDragObj(event.pointerId);\n            clearTouchTimeout(dragObj);\n\n            //if pointer changes button its pressing -> turn into pointerup\n            if (event.buttons !== dragObj.buttons) {\n                //pointer up\n\n                //remove listener\n                if (dragObjArr.length === 1) {\n                    destroyDocumentListeners();\n                }\n                removeDragObj(event.pointerId);\n\n                const outEvent = createPointerOutEvent('pointerup', event, {\n                    downPageX: dragObj.downPageX,\n                    downPageY: dragObj.downPageY\n                });\n                onPointerCallback(outEvent);\n                return;\n\n            }\n\n            setTouchTimeout(dragObj);\n\n            // ipad likes to do this\n            if (\n                event.pointerType === 'pen' &&\n                event.pageX === dragObj.lastPageX &&\n                event.pageY === dragObj.lastPageY &&\n                event.timeStamp === dragObj.lastTimeStamp\n            ) {\n                //ignore\n                return;\n            }\n\n            const outEvent = createPointerOutEvent('pointermove', event, {\n                downPageX: dragObj.downPageX,\n                downPageY: dragObj.downPageY,\n                button: buttonsToStr[event.buttons],\n                pressure: event.pressure\n            });\n\n            dragObj.lastPageX = event.pageX;\n            dragObj.lastPageY = event.pageY;\n            dragObj.lastTimeStamp = event.timeStamp;\n\n            onPointerCallback(outEvent);\n\n        }\n\n        function onGlobalPointerUp(event) {\n            //BB.throwOut('pointerup ' + event.pointerId);\n            event = correctPointerEvent(event);\n            ////console.log('debug: ' + event.pointerId + ' GLOBALpointerup');\n            if (!(dragPointerIdArr.includes(event.pointerId))) {\n                return;\n            }\n\n            //remove listener\n            if (dragObjArr.length === 1) {\n                destroyDocumentListeners();\n            }\n            const dragObj = removeDragObj(event.pointerId);\n            clearTouchTimeout(dragObj);\n\n            const outEvent = createPointerOutEvent('pointerup', event, {\n                downPageX: dragObj.downPageX,\n                downPageY: dragObj.downPageY\n            });\n            onPointerCallback(outEvent);\n\n        }\n\n        function onGlobalPointerLeave(event) {\n            //BB.throwOut('pointerleave ' + event.pointerId);\n            event = correctPointerEvent(event);\n            ////console.log('debug: ' + event.pointerId + ' onGlobalPointerLeave', event);\n            if (!(dragPointerIdArr.includes(event.pointerId))) { //} || event.target !== document) {\n                return;\n            }\n\n            //remove listener\n            if (dragObjArr.length === 1) {\n                destroyDocumentListeners();\n            }\n            const dragObj = removeDragObj(event.pointerId);\n            clearTouchTimeout(dragObj);\n\n            const outEvent = createPointerOutEvent('pointerup', event, {\n                downPageX: dragObj.downPageX,\n                downPageY: dragObj.downPageY\n            });\n            onPointerCallback(outEvent);\n        }\n\n\n        /*\n        --- ipad pointer event glitch damage control ---\n\n        ipad pointer events are glitchy. doesn't always fire pointerup.\n        - when two fingers get really close to each other\n        - when finger moves out and back in bottom\n\n        This artificially fires a pointerup\n        */\n        function onTouchTimeout(dragObj) {\n\n            //create fake event\n            const fakeEvent = {\n                pointerId: dragObj.pointerId,\n                pointerType: dragObj.pointerType,\n                type: 'pointerup',\n                timeStamp: performance.now(),\n                pageX: 0,\n                pageY: 0,\n                clientX: 0,\n                clientY: 0,\n                preventDefault: function () {\n                },\n                stopPropagation: function () {\n                }\n            };\n\n            //call onGlobalPointerUp with it\n            onGlobalPointerUp(fakeEvent);\n        }\n\n        function setTouchTimeout(dragObj) {\n            if (dragObj.pointerType !== 'touch') {\n                return;\n            }\n            dragObj.touchTimeout = setTimeout(function () {\n                onTouchTimeout(dragObj);\n            }, 2500); // 2.5 seconds\n        }\n\n        function clearTouchTimeout(dragObj) {\n            if (!dragObj.touchTimeout) {\n                return;\n            }\n            clearTimeout(dragObj.touchTimeout);\n            dragObj.touchTimeout = null;\n        }\n\n\n        if (onEnterLeaveCallback) {\n            addEventListener(targetElement, 'pointerenter', onPointerEnter);\n            addEventListener(targetElement, 'pointerleave', onPointerLeave);\n        }\n        if (onPointerCallback) {\n            addEventListener(targetElement, 'pointermove', onPointermove);\n            addEventListener(targetElement, 'pointerdown', onPointerdown);\n        }\n        if (onWheelCallback) {\n            addEventListener(targetElement, 'wheel', wheelCleaner.process);\n        }\n\n\n        let onTouchstart;\n        let onTouchmove;\n        let onTouchend;\n\n        // --- touch fallback ---\n        if (!(hasPointerEvents)) {\n\n            onTouchstart = function (event) {\n                ////console.log('onTouchstart', event, event.changedTouches.length);\n                event.preventDefault(); // needs to stay, otherwise page scrolls on iOS12\n\n                const touchArr = event.changedTouches;\n                for (let i = 0; i < touchArr.length && dragObjArr.length < maxPointers; i++) {\n                    const touchObj = touchArr[i];\n\n                    //set up global listeners\n                    if (dragObjArr.length === 0) {\n                        addEventListener(document, 'touchmove', onTouchmove);\n                        addEventListener(document, 'touchend', onTouchend);\n                        addEventListener(document, 'touchcancel', onTouchend);\n                    }\n                    dragObjArr.push({\n                        pointerId: touchObj.identifier,\n                        downPageX: touchObj.pageX,\n                        downPageY: touchObj.pageY,\n                        buttons: 1,\n                        lastPageX: touchObj.pageX,\n                        lastPageY: touchObj.pageY,\n                    });\n                    dragPointerIdArr.push(touchObj.identifier);\n\n                    const outEvent = createTouchOutEvent('pointerdown', touchObj, event, {\n                        dX: 0,\n                        dY: 0,\n                        downPageX: touchObj.downPageX,\n                        downPageY: touchObj.downPageY,\n                        button: 'left',\n                        pressure: 1\n                    });\n                    onPointerCallback(outEvent);\n                }\n\n            }\n\n            onTouchmove = function (event) {\n                event.preventDefault(); // needs to stay, otherwise page scrolls on iOS12\n\n\n                const touchArr = event.changedTouches;\n                for (let i = 0; i < touchArr.length; i++) {\n                    const touchObj = touchArr[i];\n\n                    if (!(dragPointerIdArr.includes(touchObj.identifier))) {\n                        continue;\n                    }\n                    const dragObj = getDragObj(touchObj.identifier);\n\n                    const outEvent = createTouchOutEvent('pointermove', touchObj, event, {\n                        dX: touchObj.pageX - dragObj.lastPageX,\n                        dY: touchObj.pageY - dragObj.lastPageY,\n                        downPageX: dragObj.downPageX,\n                        downPageY: dragObj.downPageY,\n                        button: 'left',\n                        isCoalesced: false,\n                        pressure: 1\n                    });\n                    dragObj.lastPageX = touchObj.pageX;\n                    dragObj.lastPageY = touchObj.pageY;\n                    onPointerCallback(outEvent);\n\n                }\n\n            }\n\n            onTouchend = function (event) {\n                if (event.type !== 'touchcancel') {\n                    event.preventDefault(); // needs to stay, otherwise page scrolls on iOS12\n                }\n\n\n                const touchArr = event.changedTouches;\n                for (let i = 0; i < touchArr.length; i++) {\n                    const touchObj = touchArr[i];\n\n                    if (!(dragPointerIdArr.includes(touchObj.identifier))) {\n                        continue;\n                    }\n\n                    //remove listener\n                    if (dragObjArr.length === 1) {\n                        removeEventListener(document, 'touchmove', onTouchmove);\n                        removeEventListener(document, 'touchend', onTouchend);\n                        removeEventListener(document, 'touchcancel', onTouchend);\n                    }\n                    const dragObj = removeDragObj(touchObj.identifier);\n\n                    const outEvent = createTouchOutEvent('pointerup', touchObj, event, {\n                        dX: touchObj.pageX - dragObj.lastPageX,\n                        dY: touchObj.pageY - dragObj.lastPageY,\n                        downPageX: dragObj.downPageX,\n                        downPageY: dragObj.downPageY,\n                    });\n\n                    onPointerCallback(outEvent);\n                }\n\n            }\n\n            if (onPointerCallback) {\n                addEventListener(targetElement, 'touchstart', onTouchstart);\n            }\n\n        } else if (p.fixScribble) {\n            //ipad scribble workaround https://developer.apple.com/forums/thread/662874\n            onTouchmove = function(e) {\n                e.preventDefault();\n            }\n            addEventListener(targetElement, 'touchmove', onTouchmove);\n\n        }\n\n\n        // --- interface ---\n\n        this.isOver = function () {\n            return isOverCounter > 0;\n        };\n\n        this.destroy = function () {\n            if (isDestroyed) {\n                return;\n            }\n            isDestroyed = true;\n            removeEventListener(targetElement, 'pointerenter', onPointerEnter);\n            removeEventListener(targetElement, 'pointerleave', onPointerLeave);\n            removeEventListener(targetElement, 'pointermove', onPointermove);\n            removeEventListener(targetElement, 'pointerdown', onPointerdown);\n            removeEventListener(targetElement, 'wheel', wheelCleaner.process);\n            if (dragObjArr.length > 0) {\n                destroyDocumentListeners();\n            }\n\n            if (!(hasPointerEvents)) {\n                removeEventListener(targetElement, 'touchstart', onTouchstart);\n                if (dragObjArr.length > 0) {\n                    removeEventListener(document, 'touchmove', onTouchmove);\n                    removeEventListener(document, 'touchend', onTouchend);\n                    removeEventListener(document, 'touchcancel', onTouchend);\n                }\n            } else {\n                removeEventListener(targetElement, 'touchmove', onTouchmove);\n            }\n        };\n\n    }\n})();","import {IBounds, IRect, IVector2D} from '../BB.types';\n\nexport function mix (a: number, b: number, f: number): number {\n    return a * (1 - f) + b * f;\n}\n\nexport function dist (ax: number, ay: number, bx: number, by: number): number {\n    return Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n}\n\nexport function distSquared (ax: number, ay: number, bx: number, by: number): number {\n    // faster because no square-root\n    return Math.pow(ax - bx, 2) + Math.pow(ay - by, 2);\n}\n\nexport function lenSquared (x: number, y: number): number {\n    // faster because no square-root\n    return x * x + y * y;\n}\n\nexport function pointsToAngleRad (p1: IVector2D, p2: IVector2D): number {\n    return Math.atan2(p2.y - p1.y, p2.x - p1.x);\n}\n\nexport function pointsToAngleDeg (p1: IVector2D, p2: IVector2D): number {\n    return pointsToAngleRad(p1, p2) * 180 / Math.PI;\n}\n\nexport function isInsideRect(p: IVector2D, rect: IRect): boolean {\n    return rect.x <= p.x && p.x <= rect.x + rect.width &&\n        rect.y <= p.y && p.y <= rect.y + rect.height;\n}\n\nexport function clamp (num: number, min: number, max: number): number {\n    return num <= min\n        ? min\n        : num >= max\n            ? max\n            : num;\n}\n\nexport function rotate (x: number, y: number, deg: number): IVector2D {\n    const theta = deg * (Math.PI / 180);\n    const cs = Math.cos(theta);\n    const sn = Math.sin(theta);\n\n    return {\n        x: x * cs - y * sn,\n        y: x * sn + y * cs\n    };\n}\n\nexport function rotateAround (center: IVector2D, point: IVector2D, deg: number): IVector2D {\n    const rot = rotate(point.x - center.x, point.y - center.y, deg);\n    rot.x += center.x;\n    rot.y += center.y;\n    return rot;\n}\n\nexport function intDxy(remainder: IVector2D, fDx: number, fDy: number) {\n    remainder.x += fDx;\n    remainder.y += fDy;\n    const dX = Math.round(remainder.x);\n    const dY = Math.round(remainder.y);\n    remainder.x -= dX;\n    remainder.y -= dY;\n    return {\n        dX,\n        dY,\n    };\n}\n\n/**\n * return closest even number\n * @param f\n */\nexport function roundEven(f: number) {\n    if (f % 1 === 0) {\n        if (f % 2 === 0) {\n            return f;\n        }\n        return f + 1;\n    }\n    const above = Math.ceil(f);\n    const below = Math.floor(f);\n    if (above % 2 === 0) {\n        return above;\n    } else {\n        return below;\n    }\n}\n\n/**\n * return closest uneven number\n * @param f\n */\nexport function roundUneven(f: number) {\n    if (f % 1 === 0) {\n        if (f % 2 === 0) {\n            return f + 1;\n        }\n        return f;\n    }\n    const above = Math.ceil(f);\n    const below = Math.floor(f);\n    if (above % 2 === 1) {\n        return above;\n    } else {\n        return below;\n    }\n}\n\n/**\n * round number to certain precision.\n * round(1.2345, 2) = 1.23\n * round(1.2345, 0) = 0\n * round(123, -1) = 120\n *\n * @param f\n * @param digits\n */\nexport function round(f: number, digits: number): number {\n    const digitMult = Math.pow(10, digits);\n    return Math.round((f/* + Number.EPSILON*/) * digitMult) / digitMult;\n}\n\n/**\n * update target so it includes bounds\n * @param target\n * @param bounds\n */\nexport function updateBounds (target: IBounds, bounds: IBounds): IBounds {\n    if (!bounds) {\n        return target;\n    }\n    if (!target) {\n        target = { x1: bounds.x1, y1: bounds.y1, x2: bounds.x2, y2: bounds.y2 };\n    } else {\n        target.x1 = Math.min(target.x1, bounds.x1);\n        target.y1 = Math.min(target.y1, bounds.y1);\n        target.x2 = Math.max(target.x2, bounds.x2);\n        target.y2 = Math.max(target.y2, bounds.y2);\n    }\n    return target;\n}\n\n/**\n * determine overlap of bounds with width&height\n */\nexport function boundsInArea (bounds: IBounds, width: number, height: number): IBounds | null {\n    let x1 = Math.max(0, bounds.x1);\n    let y1 = Math.max(0, bounds.y1);\n    let x2 = Math.min(width - 1, bounds.x2);\n    let y2 = Math.min(height - 1, bounds.y2);\n    if (x1 > x2 || y1 > y2) {\n        return null;\n    }\n    return { x1, y1, x2, y2 };\n}","import {clamp, dist, mix, pointsToAngleRad} from '../math/math';\n\n\ntype ChainOutFunc = (event?) => void;\n\n/**\n * for chaining event processing. useful for gestures (double tap, pinch zoom, max pointer filter).\n * each element in the chain might hold back the events, swallow them, or transform them\n *\n * p = {\n *     chainArr: ChainElement[]\n * }\n *\n * chainIn(event): null - feed an event into the chain\n * setChainOut(func): void - func(event) <- called when passed through chain\n * ^ each ChainElement needs these methods too\n *\n * @param p\n * @constructor\n */\nexport const EventChain = function (p) {\n\n    const chainArr = p.chainArr;\n    let chainOut: ChainOutFunc = () => undefined;\n\n    function continueChain(i, event) {\n        for (; i < chainArr.length; i++) {\n            event = chainArr[i].chainIn(event);\n            if (event === null) {\n                return null;\n            }\n        }\n        chainOut(event);\n        return null;\n    }\n\n    for (let i = 0; i < chainArr.length; i++) {\n        (function (i) {\n            chainArr[i].setChainOut(function (event) {\n                continueChain(i + 1, event);\n            });\n        })(i);\n    }\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n        return continueChain(0, event);\n    };\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n};\n\n\n/**\n * A ChainElement. Detects double taps.\n *\n * p = {\n *     onDoubleTap: function({pageX: number, pageY: number}) - fires when double tap occurs\n * }\n *\n * chainIn\n * setChainOut\n * setAllowedPointerTypeArr(string[]): void - which pointer types are allowed\n * setAllowedButtonArr(string[]): void - which buttons are allowed\n *\n * @param p\n * @constructor\n */\nexport const DoubleTapper = function (p) {\n\n    let chainOut: ChainOutFunc = function () {\n    };\n    const minSilenceBeforeDurationMs = 400;\n    const maxPressedDurationMs = 300;\n    const maxPressedDistancePx = 10;\n    const maxInbetweenDistancePx = 19;\n    const maxUpToUpDurationMs = 500;\n    const maxUntilSecondDownDurationMs = 300;\n    const minSilenceAfterMs = 250;\n\n    let allowedPointerTypeArr = ['touch', 'mouse', 'pen'];\n    let allowedButtonArr = ['left'];\n\n    let sequenceArr = [];\n    const pointersDownIdArr = [];\n    let lastUpTime = 0;\n    let nowTime = 0;\n\n    let eventQueueArr = [];\n\n\n    function fail() {\n        if (sequenceArr.length === 0) { // no gesture started -> can be ignored\n            return;\n        }\n        clearTimeout(timeoutObj.fail);\n        clearTimeout(timeoutObj.maxUntilSecondDown);\n        clearTimeout(timeoutObj.success);\n        timeoutObj.fail = null;\n        timeoutObj.maxUntilSecondDown = null;\n        timeoutObj.success = null;\n\n\n        for (let i = 0; i < eventQueueArr.length; i++) {\n            chainOut(eventQueueArr[i]);\n        }\n        eventQueueArr = [];\n\n        sequenceArr = [];\n    }\n\n    // double tap achieved\n    function success() {\n        timeoutObj.fail = null;\n        timeoutObj.success = null;\n        eventQueueArr = []; // events get swallowed\n        const lastSequenceItem = sequenceArr[sequenceArr.length - 1];\n        sequenceArr = [];\n        p.onDoubleTap({\n            pageX: lastSequenceItem.pageX,\n            pageY: lastSequenceItem.pageY,\n            relX: lastSequenceItem.relX,\n            relY: lastSequenceItem.relY,\n        });\n    }\n\n\n    const timeoutObj = {\n        fail: null,\n        maxUntilSecondDown: null,\n        success: null\n    };\n\n    //returns false if time already up. otherwise sets up timeout\n    function setupTimeout(timeoutStr, targetFunc, timeMS) {\n        const diff = timeMS - nowTime;\n        //console.log(fingers + ': ' + timeoutStr + ' diff', diff);\n        if (diff <= 0) { // time already up\n            return false;\n        }\n        timeoutObj[timeoutStr] = setTimeout(targetFunc, diff);\n        return true;\n    }\n\n\n    /**\n     * @param event object - a pointer event from BB.PointerListener\n     */\n    function processEvent(event) {\n\n        if (event.type === 'pointerdown') {\n            pointersDownIdArr.push(event.pointerId);\n        } else if (event.type === 'pointerup') {\n            for (let i = 0; i < pointersDownIdArr.length; i++) {\n                if (pointersDownIdArr[i] === event.pointerId) {\n                    pointersDownIdArr.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n        if (!allowedPointerTypeArr.includes(event.pointerType)) { //wrong input type -> fail\n            //console.log('wrong input type -> fail');\n            fail();\n            return;\n        }\n\n        nowTime = performance.now();\n        const lastSequenceItem = sequenceArr.length > 0 ? sequenceArr[sequenceArr.length - 1] : null;\n        if (event.type === 'pointerup') {\n            lastUpTime = event.time;\n        }\n\n        if (event.type === 'pointerdown') {\n            if (pointersDownIdArr.length > 1) { // more than one pointer down -> fail\n                //console.log('more than one pointer down -> fail');\n                fail();\n                return;\n            }\n            if (timeoutObj.success !== null) { // silence-after not achieved -> fail\n                //console.log('silence-after not achieved -> fail');\n                fail();\n                return;\n            }\n            if (sequenceArr.length === 0 && nowTime - lastUpTime < minSilenceBeforeDurationMs) { // silence before not achieved -> fail\n                //console.log('silence before not achieved -> fail');\n                fail();\n                return;\n            }\n            if (!allowedButtonArr.includes(event.button)) { // wrong button -> fail\n                //console.log('wrong button -> fail', event.button, allowedButtonArr);\n                fail();\n                return;\n            }\n            if (lastSequenceItem && lastSequenceItem.isDown || sequenceArr.length > 2) { // jumbled -> fail\n                //console.log('jumbled -> fail');\n                fail();\n                return;\n            }\n            if (lastSequenceItem) {\n                const distance = dist(lastSequenceItem.position[0], lastSequenceItem.position[1], event.pageX, event.pageY);\n                if (distance > maxInbetweenDistancePx) { //moved too much -> reset\n                    //console.log('maxInbetweenDistancePx -> reset');\n                    fail();\n\n                    if (nowTime - lastSequenceItem.time < minSilenceBeforeDurationMs) { //silence before not achieved -> fail\n                        return;\n                    }\n                }\n            }\n            sequenceArr.push({\n                isDown: true,\n                time: nowTime,\n                position: [event.pageX, event.pageY],\n                pointerId: event.pointerId\n            });\n            //maxUntilSecondDown\n\n            if (sequenceArr.length > 1) {\n                clearTimeout(timeoutObj.maxUntilSecondDown);\n            } else if (!setupTimeout('maxUntilSecondDown', fail, event.time + maxUntilSecondDownDurationMs)) {\n                //console.log('event.time + maxPressedDurationMs -> fail');\n                fail();\n                return;\n            }\n\n\n            clearTimeout(timeoutObj.fail);\n            if (!setupTimeout('fail', fail, event.time + maxPressedDurationMs)) {\n                //console.log('event.time + maxPressedDurationMs -> fail');\n                fail();\n                return;\n            }\n        }\n        if (lastSequenceItem && event.type === 'pointermove' && lastSequenceItem.pointerId === event.pointerId) {\n            /*if (lastSequenceItem.pointerId !== event.pointerId) { //another pointer mixing in -> fail\n                console.log('another pointer mixing in -> fail');\n                fail();\n                return;\n            }*/\n            const distance = dist(lastSequenceItem.position[0], lastSequenceItem.position[1], event.pageX, event.pageY);\n            if (distance > maxPressedDistancePx) { //moved too much -> fail\n                //console.log('maxPressedDistancePx -> fail');\n                fail();\n                return;\n            }\n        }\n        if (lastSequenceItem && event.type === 'pointerup') {\n            if (lastSequenceItem.pointerId !== event.pointerId) { //another pointer mixing in -> fail\n                fail();\n                return;\n            }\n            if (nowTime >= lastSequenceItem.time + maxPressedDurationMs) { //pressed too long -> fail\n                fail();\n                return;\n            }\n            clearTimeout(timeoutObj.fail);\n\n            if (sequenceArr.length < 3) {\n                if (!setupTimeout('fail', fail, event.time + maxUpToUpDurationMs)) {\n                    fail();\n                    return;\n                }\n\n                sequenceArr = [\n                    lastSequenceItem,\n                    {\n                        isUp: true,\n                        time: nowTime,\n                        position: [event.pageX, event.pageY]\n                    }\n                ];\n                return;\n            }\n\n            if (nowTime < sequenceArr[1].time + maxUpToUpDurationMs) {\n                // double tap almost success\n                // only needs silence\n                sequenceArr.push({\n                    pageX: event.pageX,\n                    pageY: event.pageY,\n                    relX: event.relX,\n                    relY: event.relY,\n                });\n                if (!setupTimeout('success', success, event.time + minSilenceAfterMs)) {\n                    fail();\n                }\n            } else { // time up -> fail\n                fail();\n            }\n\n        }\n    }\n\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n\n        processEvent(event);\n\n        if (sequenceArr.length === 0) { //existing events can not become a double tap\n            fail();\n            return event;\n        }\n        // events might become a double tap -> queue\n        eventQueueArr.push(event);\n        return null;\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n\n    this.setAllowedPointerTypeArr = function (arr) {\n        allowedPointerTypeArr = arr;\n    };\n\n    this.setAllowedButtonArr = function (arr) {\n        allowedButtonArr = arr;\n    };\n};\n\n\n/**\n * A ChainElement. Detects a single tap, done with N 'touch' pointers\n *\n * p = {\n *      fingers: number - number of fingers\n *      onTap: function() - fires when tap occurs\n * }\n *\n * chainIn\n * setChainOut\n *\n * @param p\n * @constructor\n */\nexport const NFingerTapper = function (p) {\n\n    const fingers = p.fingers;\n    let chainOut: ChainOutFunc = function () {\n    };\n\n    const minSilenceBeforeDurationMs = 50; //250;\n    const maxTapMs = 500;\n    const maxFirstLastFingerDownMs = 250;\n    const maxPressedDistancePx = 12; //5 + fingers * 5;\n    const silenceAfterDurationMs = 250;\n\n\n    /*\n        fingerObj = {\n            pointerId: number,\n            downTime: number,\n            downPageX: number,\n            downPageY: number,\n            isUp: boolean\n        }\n     */\n    let fingerArr = [];\n    let firstDownTime;\n    let eventQueueArr = [];\n    let lastEventTime = 0;\n    const pointersDownIdArr = [];\n\n    function fail() {\n        if (eventQueueArr.length === 0) {\n            return;\n        }\n        clearTimeout(timeoutObj.firstLastDownTimeout);\n        clearTimeout(timeoutObj.tapTimeout);\n        for (let i = 0; i < eventQueueArr.length; i++) {\n            chainOut(eventQueueArr[i]);\n        }\n        eventQueueArr = [];\n        fingerArr = [];\n    }\n\n    function success() {\n        clearTimeout(timeoutObj.firstLastDownTimeout);\n        clearTimeout(timeoutObj.tapTimeout);\n        eventQueueArr = []; // events get swallowed\n        fingerArr = [];\n        p.onTap();\n    }\n\n    let nowTime;\n    const timeoutObj = {\n        firstLastDownTimeout: null,\n        tapTimeout: null\n    };\n\n    function setupTimeout(timeoutStr, timeMS) {\n        const diff = timeMS - nowTime;\n        //console.log(fingers + ': ' + timeoutStr + ' diff', diff);\n        if (diff <= 0) { // time already up\n            return false;\n        }\n        timeoutObj[timeoutStr] = setTimeout(fail, diff);\n        return true;\n    }\n\n    function processEvent(event) {\n\n        const tempLastEventTime = lastEventTime;\n        lastEventTime = event.time;\n\n        if (event.type === 'pointerdown') {\n            pointersDownIdArr.push(event.pointerId);\n        } else if (event.type === 'pointerup') {\n            for (let i = 0; i < pointersDownIdArr.length; i++) {\n                if (pointersDownIdArr[i] === event.pointerId) {\n                    pointersDownIdArr.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n        if (event.pointerType !== 'touch') {\n            if (fingerArr.length > 0) { // already in gesture -> fail\n                fail();\n            }\n            return;\n        }\n\n        nowTime = performance.now();\n\n        if (event.type === 'pointerdown') {\n            //console.log('down');\n            if (fingerArr.length + 1 !== pointersDownIdArr.length) { // failed before, and some fingers are still down -> fail\n                fail();\n                return;\n            }\n            if (fingerArr.length === fingers) { // too many fingers down -> fail\n                //console.log(fingers + ': too many fingers down -> fail');\n                fail();\n                return;\n            }\n            if (fingerArr.length > 0 && event.time - maxFirstLastFingerDownMs > fingerArr[0].downTime) { // took too long to touch with all fingers -> fail\n                //console.log(fingers + ': took too long to touch with all fingers -> fail');\n                fail();\n                return;\n            }\n            if (fingerArr.length === 0 && event.time - minSilenceBeforeDurationMs < tempLastEventTime) { // not enough silence before -> fail\n                //console.log(fingers + ': not enough silence before -> fail');\n                fail();\n                return;\n            }\n\n            if (fingerArr.length === 0) {\n                firstDownTime = event.time;\n\n                if (!setupTimeout('firstLastDownTimeout', event.time + maxFirstLastFingerDownMs) || !setupTimeout('tapTimeout', event.time + maxTapMs)) { // timeouts already up -> fail\n                    fail();\n                    return;\n                }\n\n            }\n            fingerArr.push({\n                pointerId: event.pointerId,\n                downTime: event.time,\n                downPageX: event.pageX,\n                downPageY: event.pageY\n            });\n            return;\n\n        }\n\n        if (event.type === 'pointermove') {\n\n            if (fingerArr.length === 0) {\n                //not in a gesture -> ignore\n                return;\n            }\n\n            let fingerObj = null;\n            for (let i = 0; i < fingerArr.length; i++) {\n                if (fingerArr[i].pointerId === event.pointerId) {\n                    fingerObj = fingerArr[i];\n                    break;\n                }\n            }\n            if (fingerObj === null) { // finger not part of the tap is on screen -> fail\n                fail();\n                return;\n            }\n\n            if (event.time - maxTapMs > firstDownTime) { // tap took too long -> fail\n                //console.log(fingers + ': tap took too long -> fail');\n                fail();\n                return;\n            }\n\n            const distance = dist(event.pageX, event.pageY, fingerObj.downPageX, fingerObj.downPageY);\n            if (distance > maxPressedDistancePx) { // finger moved too much -> fail\n                //console.log(fingers + ': a finger moved too much -> fail', distance);\n                fail();\n                return;\n            }\n\n        }\n\n        if (event.type === 'pointerup') {\n\n            if (fingerArr.length === 0) {\n                //not in a gesture -> ignore\n                return;\n            }\n\n            //console.log('up', event.pageX, event.pageY);\n            if (fingerArr.length !== fingers) { // not enough fingers -> fail\n                //console.log(fingers + ': not enough fingers -> fail');\n                fail();\n                return;\n            }\n\n            let fingerObj = null;\n            let i = 0;\n            for (; i < fingerArr.length; i++) {\n                if (fingerArr[i].pointerId === event.pointerId) {\n                    fingerObj = fingerArr[i];\n                    break;\n                }\n            }\n            if (fingerObj === null) {\n                //do nothing\n                return;\n            }\n\n            if (event.time - maxTapMs > firstDownTime) { // tap took too long -> fail\n                //console.log(fingers + ': tap took too long -> fail');\n                fail();\n                return;\n            }\n\n            const distance = dist(event.pageX, event.pageY, fingerObj.downPageX, fingerObj.downPageY);\n            if (distance > maxPressedDistancePx) { // finger moved too much -> fail\n                //console.log(fingers + ': b finger moved too much -> fail', distance, event.pageX, event.pageY);\n                //console.log(fingerArr);\n                fail();\n                return;\n            }\n\n            fingerObj.isUp = true;\n\n            let allAreUp = true;\n            for (let i = 0; i < fingerArr.length; i++) {\n                if (!fingerArr[i].isUp) {\n                    allAreUp = false;\n                    break;\n                }\n            }\n            //console.log('fingerArr', fingerArr);\n\n            if (allAreUp) { // success\n                success();\n                return true;\n            }\n\n        }\n\n\n    }\n\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n\n        const result = processEvent(event);\n\n        //console.log(fingerArr.length);\n\n        if (result === true) {\n            //tap success -> event gets swallowed\n            return null;\n        }\n        if (fingerArr.length === 0) {\n            return event;\n        } else {\n            eventQueueArr.push(event);\n        }\n\n        return null;\n\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n};\n\n\n/**\n * A ChainElement. Detects a pinch zooming (2 touch pointers). If one finger lifts, then will use the remaining.\n * Further pointers are ignored, but their events get swallowed during the pinching.\n * pinching ends when ALL pointers are lifted.\n * Events passed through if no pinching.\n *\n * p = {\n *      onPinch: function({type: 'end'} | {\n *          type: 'move',\n *          relX: number,\n *          relY: number,\n *          downRelX: number,\n *          downRelY: number,\n *          angleDeg: number,\n *          scale: number\n *      }) - fires when pinching occurs\n * }\n *\n * chainIn\n * setChainOut\n *\n * @param p\n * @constructor\n */\nexport const PinchZoomer = function (p) {\n\n    const firstFingerMaxDistancePx = 10;\n    const untilSecondFingerDurationMs = 250;\n\n    let chainOut: ChainOutFunc = function () {\n    };\n    const pointersDownIdArr = [];\n    /*\n    gestureObj = {\n        touchPointerArr: Array of {\n            pointerId: number,\n            relX: number,\n            relY: number,\n            downRelX: number, // only for first\n            downRelY: number\n        },\n        otherPointerIdArr: number[],\n        isInProgress: boolean\n    }\n    */\n    let gestureObj = null;\n    let eventQueueArr = [];\n\n\n    function end() {\n        gestureObj = null;\n        eventQueueArr = [];\n    }\n\n    function fail(doSwallow?) {\n        if (!gestureObj) { // no gesture happening -> ignore\n            return;\n        }\n\n        clearTimeout(timeoutObj.secondFingerTimeout);\n        if (!doSwallow) {\n            for (let i = 0; i < eventQueueArr.length; i++) {\n                chainOut(eventQueueArr[i]);\n            }\n        }\n        end();\n    }\n\n\n    let nowTime;\n    const timeoutObj = {\n        secondFingerTimeout: null\n    };\n\n    function setupTimeout(timeoutStr, targetFunc, timeMS) {\n        const diff = timeMS - nowTime;\n        if (diff <= 0) { // time already up\n            return false;\n        }\n        timeoutObj[timeoutStr] = setTimeout(targetFunc, diff);\n        return true;\n    }\n\n\n    function processEvent(event) {\n\n        if (event.type === 'pointerdown') {\n            pointersDownIdArr.push(event.pointerId);\n\n        } else if (event.type === 'pointerup') {\n            for (let i = 0; i < pointersDownIdArr.length; i++) {\n                if (pointersDownIdArr[i] === event.pointerId) {\n                    pointersDownIdArr.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n        //pass through scenarios\n        if (\n            !gestureObj && (\n                event.pointerType !== 'touch' || // wrong pointer type\n                (event.type === 'pointermove' && pointersDownIdArr.length > 0) || // failed before\n                pointersDownIdArr.length > 1 || // failed before\n                event.type === 'pointerup' // failed before\n            )\n        ) {\n            return;\n        }\n\n        nowTime = performance.now();\n\n\n        //pointer down\n        if (event.type === 'pointerdown') {\n\n            if (gestureObj) {\n                if (event.pointerType === 'touch') { // touch finger down - as nth pointer\n\n                    gestureObj.touchPointerArr.push({\n                        pointerId: event.pointerId,\n                        relX: event.relX,\n                        relY: event.relY\n                    });\n\n                    if (gestureObj.isInProgress) {\n                        continuePinch(gestureObj, {\n                            type: 'down',\n                            index: gestureObj.touchPointerArr.length - 1\n                        });\n                    } else {\n                        clearTimeout(timeoutObj.secondFingerTimeout);\n                        gestureObj.isInProgress = true;\n                        beginPinch(gestureObj);\n                    }\n                    return;\n\n                } else { // non-touch finger down - as nth pointer\n\n                    if (gestureObj.isInProgress) {\n                        gestureObj.otherPointerIdArr.push(event.pointerId);\n                    } else { // second pointer wrong type -> fail\n                        fail();\n                    }\n                    return;\n                }\n\n\n            } else {\n                // first finger down - can only be touch if no gestureObj\n                gestureObj = {\n                    touchPointerArr: [{\n                        pointerId: event.pointerId,\n                        relX: event.relX,\n                        relY: event.relY,\n                        downRelX: event.relX,\n                        downRelY: event.relY\n                    }],\n                    otherPointerIdArr: [],\n                    isInProgress: false\n                };\n                if (!setupTimeout('secondFingerTimeout', function () {\n                    fail();\n                }, event.time + untilSecondFingerDurationMs)) { // time ran out -> fail\n                    fail();\n                    return;\n                }\n                return;\n            }\n\n        }\n\n\n        //pointer move\n        if (event.type === 'pointermove' && event.pointerType === 'touch') {\n            //gesture object should always exist here\n\n            let touchPointerObj = null;\n            let i = 0;\n            for (; i < gestureObj.touchPointerArr.length; i++) {\n                if (event.pointerId === gestureObj.touchPointerArr[i].pointerId) {\n                    touchPointerObj = gestureObj.touchPointerArr[i];\n                    break;\n                }\n            }\n\n            //null should not be possible\n\n            touchPointerObj.relX = event.relX;\n            touchPointerObj.relY = event.relY;\n\n            if (!gestureObj.isInProgress) { // only one finger down & pinching hasn't started\n                const distance = dist(touchPointerObj.downRelX, touchPointerObj.downRelY, touchPointerObj.relX, touchPointerObj.relY);\n                if (distance > firstFingerMaxDistancePx) { // moved too much -> fail\n                    fail();\n                    return;\n                }\n\n            } else {\n                if (i < 2) { // only first two touches can affect pinching\n                    continuePinch(gestureObj, {\n                        type: 'move',\n                        index: i\n                    });\n                }\n            }\n\n            return;\n        }\n\n\n        //pointer up\n        if (event.type === 'pointerup') {\n            //gesture object should always exist here\n\n            if (event.pointerType === 'touch') {\n                let i = 0;\n                for (; i < gestureObj.touchPointerArr.length; i++) {\n                    if (gestureObj.touchPointerArr[i].pointerId === event.pointerId) {\n                        gestureObj.touchPointerArr.splice(i, 1);\n                        break;\n                    }\n                }\n                if (gestureObj.touchPointerArr.length > 0) {\n                    continuePinch(gestureObj, {\n                        type: 'up',\n                        index: i\n                    });\n                }\n\n            } else { // non-touch\n                for (let i = 0; i < gestureObj.otherPointerIdArr.length; i++) {\n                    if (gestureObj.otherPointerIdArr[i] === event.pointerId) {\n                        gestureObj.otherPointerIdArr.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n\n            //all fingers lifted?\n            if (gestureObj.touchPointerArr.length === 0 && gestureObj.otherPointerIdArr.length === 0) {\n                if (gestureObj.isInProgress) { // lifted last finger -> end of pinching\n                    end();\n                    endPinch();\n                } else { // lifted finger again before pinching started -> fail\n                    fail();\n                }\n                return;\n            }\n\n        }\n\n\n    }\n\n\n    // --- actual pinch transform logic ---\n\n    let pincherArr = [];\n\n    function beginPinch(gestureObj) {\n\n        for (let i = 0; i < gestureObj.touchPointerArr.length; i++) {\n            const pointerObj = gestureObj.touchPointerArr[i];\n            pincherArr.push({\n                pointerId: pointerObj.pointerId,\n                relX: pointerObj.relX,\n                relY: pointerObj.relY,\n                downRelX: pointerObj.relX,\n                downRelY: pointerObj.relY\n            });\n        }\n\n        const event: any = {\n            type: 'move',\n            angleRad: 0,\n            scale: 1\n        };\n\n        if (pincherArr.length === 1) {\n            event.relX = pincherArr[0].downRelX;\n            event.relY = pincherArr[0].downRelY;\n        } else {\n            event.relX = 0.5 * (pincherArr[0].downRelX + pincherArr[1].downRelX);\n            event.relY = 0.5 * (pincherArr[0].downRelY + pincherArr[1].downRelY);\n        }\n        event.downRelX = event.relX;\n        event.downRelY = event.relY;\n\n        p.onPinch(event);\n\n    }\n\n    //actionObj = {type: 'down'|'move'|'up', index: number}\n    function continuePinch(gestureObj, actionObj) {\n\n        if (actionObj.index > 1) { // only first two pointers matter\n            return;\n        }\n\n        if (actionObj.type === 'move') {\n\n            let event;\n            pincherArr[actionObj.index].relX = gestureObj.touchPointerArr[actionObj.index].relX;\n            pincherArr[actionObj.index].relY = gestureObj.touchPointerArr[actionObj.index].relY;\n\n            if (pincherArr.length === 1) {\n\n                event = {\n                    type: 'move',\n                    downRelX: pincherArr[0].downRelX,\n                    downRelY: pincherArr[0].downRelY,\n                    relX: pincherArr[0].relX,\n                    relY: pincherArr[0].relY,\n                    angleRad: 0,\n                    scale: 1\n                };\n\n            } else {\n\n                const startDist = dist(pincherArr[0].downRelX, pincherArr[0].downRelY, pincherArr[1].downRelX, pincherArr[1].downRelY);\n                const distance = dist(pincherArr[0].relX, pincherArr[0].relY, pincherArr[1].relX, pincherArr[1].relY);\n\n                const startAngle = pointsToAngleRad({\n                    x: pincherArr[0].downRelX,\n                    y: pincherArr[0].downRelY\n                }, {x: pincherArr[1].downRelX, y: pincherArr[1].downRelY});\n                const angle = pointsToAngleRad({\n                    x: pincherArr[0].relX,\n                    y: pincherArr[0].relY\n                }, {x: pincherArr[1].relX, y: pincherArr[1].relY});\n\n                event = {\n                    type: 'move',\n                    downRelX: 0.5 * (pincherArr[0].downRelX + pincherArr[1].downRelX),\n                    downRelY: 0.5 * (pincherArr[0].downRelY + pincherArr[1].downRelY),\n                    relX: 0.5 * (pincherArr[0].relX + pincherArr[1].relX),\n                    relY: 0.5 * (pincherArr[0].relY + pincherArr[1].relY),\n                    angleRad: angle - startAngle,\n                    scale: distance / startDist\n                };\n\n            }\n\n            p.onPinch(event);\n\n        } else if (actionObj.type === 'down' || actionObj.type === 'up') {\n            endPinch();\n            beginPinch(gestureObj);\n        }\n\n    }\n\n    function endPinch() {\n        pincherArr = [];\n        p.onPinch({\n            type: 'end'\n        });\n    }\n\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n        processEvent(event);\n        if (gestureObj) {\n            if (!gestureObj.isInProgress) { // might still fail -> into queue\n                eventQueueArr.push(event);\n            }\n        } else {\n            return event;\n        }\n        return null;\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n};\n\n\n/**\n * A ChainElement. Splits up coalesced events into their own pointermove events. Otherwise regular pass through.\n *\n * @constructor\n */\nexport const CoalescedExploder = function () {\n\n    let chainOut: ChainOutFunc = function () {\n    };\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n\n        if (event.type === 'pointermove') {\n\n            if (event.coalescedArr.length > 0) {\n\n                let eventCopy = JSON.parse(JSON.stringify(event));\n                eventCopy.coalescedArr = [];\n                let coalescedItem;\n\n                for (let i = 0; i < event.coalescedArr.length; i++) {\n\n                    if (i > 0) {\n                        eventCopy = JSON.parse(JSON.stringify(event));\n                    }\n                    coalescedItem = event.coalescedArr[i];\n\n                    eventCopy.pageX = coalescedItem.pageX;\n                    eventCopy.pageY = coalescedItem.pageY;\n                    eventCopy.relX = coalescedItem.relX;\n                    eventCopy.relY = coalescedItem.relY;\n                    eventCopy.dX = coalescedItem.dX;\n                    eventCopy.dY = coalescedItem.dY;\n                    eventCopy.time = coalescedItem.time;\n                    if (i < event.coalescedArr.length - 1) {\n                        eventCopy.isCoalesced = true;\n                    }\n\n                    chainOut(eventCopy);\n                }\n\n            } else {\n                return event;\n            }\n        } else {\n            return event;\n        }\n\n        return null;\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n};\n\nexport const OnePointerLimiter = function (pointers?) {\n\n    let chainOut: ChainOutFunc = function () {\n    };\n\n    let downPointerId = null;\n    const ignorePointerIdArr = [];\n\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n\n        if (ignorePointerIdArr.includes(event.pointerId)) {\n            if (event.type === 'pointerup') {\n                for (let i = 0; i < ignorePointerIdArr.length; i++) {\n                    if (ignorePointerIdArr[i] === event.pointerId) {\n                        ignorePointerIdArr.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n            return null;\n        }\n\n        if (downPointerId === null) {\n            if (event.type === 'pointerdown') {\n                downPointerId = event.pointerId;\n            }\n            return event;\n\n        } else {\n            if (event.pointerId !== downPointerId) {\n                if (event.type === 'pointerdown') {\n                    ignorePointerIdArr.push(event.pointerId);\n                }\n                return null;\n            }\n            if (event.type === 'pointerup') {\n                downPointerId = null;\n            }\n            return event;\n        }\n\n        return null;\n\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n\n};\n\n\n/**\n * Not really and event chain element. but pretty similar.\n *\n * Processes draw input events. When shift held -> linetool\n * line events - what KlCanvasWorkspace passes onDraw(e)\n *\n * p = {\n *     onDraw: function(drawEvent)\n * }\n *\n * pass input in with process(drawEvent)\n *\n * modifies draw event to include such events:\n * {\n *     type: 'line',\n *     x0: null, // you have to fill that in\n *     y0: null, // you have to fill that in\n *     pressure0: null, // you have to fill that in\n *     x1: number,\n *     y1: number,\n *     pressure1: number\n * }\n *\n * @param p\n * @constructor\n */\nexport const LinetoolProcessor = function (p) {\n\n    let downEvent = null;\n    let eventQueue = [];\n    let direction = null;\n    const DIR_X = 0, DIR_Y = 1;\n\n    this.process = function (event) {\n        if (event.type === 'down') {\n            downEvent = event;\n            direction = null;\n\n            if (event.shiftIsPressed) {\n\n                p.onDraw({\n                    type: 'line',\n                    x0: null,\n                    y0: null,\n                    pressure0: null,\n                    x1: event.x,\n                    y1: event.y,\n                    pressure1: event.pressure\n                });\n\n                eventQueue.push(event);\n                return;\n            }\n\n        }\n\n        if (event.type === 'move') {\n\n            if (event.shiftIsPressed) {\n\n                if (direction === null) {\n                    const dX = Math.abs(event.x - downEvent.x);\n                    const dY = Math.abs(event.y - downEvent.y);\n\n                    if (dX > 5 || dY > 5) {\n                        direction = dX > dY ? DIR_X : DIR_Y;\n\n                        for (let i = 0; i < eventQueue.length; i++) {\n                            const e = eventQueue[i];\n                            if (direction === DIR_X) {\n                                e.y = downEvent.y;\n                            } else {\n                                e.x = downEvent.x;\n                            }\n                            p.onDraw(JSON.parse(JSON.stringify(e)));\n                        }\n                        eventQueue = [];\n                    }\n                }\n\n                if (direction === null) {\n                    eventQueue.push(event);\n                    return;\n                }\n\n                if (direction === DIR_X) {\n                    event.y = downEvent.y;\n                } else {\n                    event.x = downEvent.x;\n                }\n\n            } else {\n                if (eventQueue.length > 0) {\n                    for (let i = 0; i < eventQueue.length; i++) {\n                        p.onDraw(JSON.parse(JSON.stringify(eventQueue[i])));\n                    }\n                    eventQueue = [];\n                }\n            }\n\n        }\n\n        if (event.type === 'up') {\n            eventQueue = [];\n        }\n\n        p.onDraw(JSON.parse(JSON.stringify(event)));\n    };\n};\n\n\n/**\n * cleans up DrawEvents. More trustworthy events. EventChain element\n *\n * that events can only go line this: down -> n x move -> up\n * so, sanitizes this: down, down, down. becomes only one down. the other downs are ignored/swallowed\n * @constructor\n */\nexport const LineSanitizer = function () {\n\n    let chainOut: ChainOutFunc = function () {\n    };\n\n    let isDrawing = false;\n\n    // --- interface ---\n    this.chainIn = function (event) {\n\n        if (event.type === 'down') {\n            if (isDrawing) {\n                //console.log('line sanitizer - down, but already drawing');\n                chainOut({\n                    type: 'up',\n                    scale: event.scale,\n                    shiftIsPressed: event.shiftIsPressed,\n                    isCoalesced: false\n                });\n            } else {\n                isDrawing = true;\n            }\n        }\n        if (!isDrawing && (event.type === 'move' || event.type === 'up')) {\n            //console.log('line sanitizer - ' + event.type + ' but not drawing');\n            return null;\n        }\n\n        if (event.type === 'up' && isDrawing) {\n            isDrawing = false;\n        }\n\n        return event;\n    };\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n    this.getIsDrawing = function () {\n        return isDrawing;\n    };\n};\n\n\n/**\n * Line smoothing. EventChain element. Smoothing via blending new position with old position.\n * for onDraw events from KlCanvasWorkspace.\n *\n * p = {\n *     smoothing: number, // 0-1, 0: no smoothing, 1: 100% smoothing -> would never catch up\n * }\n *\n * smoothing > 0: will fire DrawEvents in interval when no new move events\n *\n * type: 'line' Events are just passed through.\n *\n * @param p\n * @constructor\n */\nexport const LineSmoothing = function (p) {\n\n    let chainOut: ChainOutFunc = function () {\n    };\n    let smoothing = clamp(p.smoothing, 0, 1);\n    let lastMixedInput;\n    let interval;\n    let timeout;\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n        event = JSON.parse(JSON.stringify(event));\n        clearTimeout(timeout);\n        clearInterval(interval);\n\n        if (event.type === 'down') {\n            lastMixedInput = {\n                x: event.x,\n                y: event.y,\n                pressure: event.pressure\n            };\n        }\n\n        if (event.type === 'move') {\n\n            const inputX = event.x;\n            const inputY = event.y;\n            const inputPressure = event.pressure;\n\n            event.x = mix(event.x, lastMixedInput.x, smoothing);\n            event.y = mix(event.y, lastMixedInput.y, smoothing);\n            event.pressure = mix(event.pressure, lastMixedInput.pressure, smoothing);\n            lastMixedInput = {\n                x: event.x,\n                y: event.y,\n                pressure: event.pressure\n            };\n\n            if (smoothing > 0) {\n                timeout = setTimeout(function () {\n                    interval = setInterval(function () {\n                        event = JSON.parse(JSON.stringify(event));\n\n                        event.x = mix(inputX, lastMixedInput.x, smoothing);\n                        event.y = mix(inputY, lastMixedInput.y, smoothing);\n                        event.pressure = mix(inputPressure, lastMixedInput.pressure, smoothing);\n                        lastMixedInput = {\n                            x: event.x,\n                            y: event.y,\n                            pressure: event.pressure\n                        };\n\n                        chainOut(event);\n                    }, 35);\n                }, 80);\n            }\n\n        }\n\n        return event;\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n\n    this.setSmoothing = function (s) {\n        smoothing = clamp(s, 0, 1);\n    };\n};\n","import {IKeyString, IRect} from '../BB.types';\nimport {createCanvas} from './create-canvas';\n\nexport function copyCanvas(canvas: HTMLCanvasElement): HTMLCanvasElement {\n    const resultCanvas = createCanvas(canvas.width, canvas.height);\n    const ctx = resultCanvas.getContext('2d');\n    if (!ctx) {\n        throw new Error('2d context not supported or canvas already initialized');\n    }\n    ctx.drawImage(canvas, 0, 0);\n    return resultCanvas;\n}\n\n/**\n * Determine if should disable imageSmoothing for transformation.\n * ImageSmoothing can make images blurry even when they're in the original scale and aligned with the pixelgrid.\n */\nexport function testShouldPixelate(\n    transform: {x: number, y: number, width:number, height: number, angleDeg: number},\n    scaleX: number,\n    scaleY: number,\n): boolean {\n    if (\n        ![1, -1].includes(scaleX) || ![1, -1].includes(scaleY) ||\n        transform.width % 1 !== 0 || transform.height % 1 !== 0 ||\n        Math.abs(transform.angleDeg) % 90 !== 0\n    ) {\n        return false;\n    }\n    const whSwapped = Math.abs(transform.angleDeg - 90) % 180 === 0;\n    const width = whSwapped ? transform.height : transform.width;\n    const height = whSwapped ? transform.width : transform.height;\n    return (\n            (Math.abs(width) % 2 === 0 && transform.x % 1 === 0) ||\n            (Math.abs(width) % 2 === 1 && transform.x % 1 === 0.5)\n        ) &&\n        (\n            (Math.abs(height) % 2 === 0 && transform.y % 1 === 0) ||\n            (Math.abs(height) % 2 === 1 && transform.y % 1 === 0.5)\n        );\n}\n\n\n/**\n * @param destCtx - the canvas that will be drawn on\n * @param transformImage - image that will be drawn on canvas\n * @param transform - {x, y, width, height, angle} - x and y are center of transformImage\n * @param bounds object - optional {x, y, width, height} - crop of transformImage in transformImage image space\n * @param pixelated\n */\nexport function drawTransformedImageWithBounds(\n    destCtx: CanvasRenderingContext2D,\n    transformImage: HTMLImageElement | HTMLCanvasElement,\n    transform: {x: number, y: number, width:number, height: number, angleDeg: number},\n    bounds?: {x: number, y: number, width: number, height: number},\n    pixelated?: boolean,\n): void {\n    if (!bounds) {\n        bounds = {\n            x: 0,\n            y: 0,\n            width: transformImage.width,\n            height: transformImage.height\n        };\n    }\n\n    destCtx.save();\n    if (pixelated) {\n        destCtx.imageSmoothingEnabled = false;\n    } else {\n        destCtx.imageSmoothingEnabled = true;\n        destCtx.imageSmoothingQuality = 'high';\n    }\n\n    destCtx.translate(transform.x, transform.y);\n    destCtx.rotate(transform.angleDeg / 180 * Math.PI);\n    destCtx.scale(transform.width > 0 ? 1 : -1, transform.height > 0 ? 1 : -1);\n    destCtx.drawImage(\n        transformImage,\n        bounds.x, bounds.y, bounds.width, bounds.height,\n        -Math.abs(transform.width) / 2, -Math.abs(transform.height) / 2, Math.abs(transform.width), Math.abs(transform.height));\n\n    destCtx.restore();\n}\n\n/**\n * all transformations are optional\n * center is the point around which will be scaled and rotated\n *\n * @param baseCanvas canvas - the canvas that will be drawn on\n * @param transformImage image|canvas - image that will be drawn on canvas\n * @param transformObj {center: {x, y}, scale: {x, y}, translate: {x, y}, angleDegree}\n */\nexport function drawTransformedImageOnCanvas(\n    baseCanvas: HTMLCanvasElement,\n    transformImage: HTMLImageElement | HTMLCanvasElement,\n    transformObj: {\n        center: {x: number, y: number},\n        scale: {x: number, y: number},\n        translate: {x: number, y: number},\n        angleDegree: number,\n    },\n): void {\n    transformObj = JSON.parse(JSON.stringify(transformObj));\n    if (!transformObj.center) {\n        transformObj.center = {\n            x: transformImage.width / 2,\n            y: transformImage.height / 2\n        }\n    }\n    if (!transformObj.scale) {\n        transformObj.scale = {\n            x: 1,\n            y: 1\n        };\n    }\n    if (!transformObj.angleDegree) {\n        transformObj.angleDegree = 0;\n    }\n    if (!transformObj.translate) {\n        transformObj.translate = {\n            x: 0,\n            y: 0\n        };\n    }\n\n    const ctx = baseCanvas.getContext('2d');\n    if (!ctx) {\n        throw new Error('2d context not supported or canvas already initialized');\n    }\n    ctx.save();\n    if (\n        Math.abs(transformObj.scale.x - 1) >  0.000001 ||\n        Math.abs(transformObj.scale.y - 1) > 0.000001 ||\n        Math.abs(transformObj.angleDegree % 90) > 0.000001\n    ) {\n        ctx.imageSmoothingEnabled = true;\n        ctx.imageSmoothingQuality = 'high';\n    } else {\n        ctx.imageSmoothingEnabled = false;\n    }\n\n    ctx.translate(transformObj.translate.x, transformObj.translate.y);\n    ctx.translate(transformObj.center.x, transformObj.center.y);\n    ctx.rotate(transformObj.angleDegree / 180 * Math.PI);\n    ctx.scale(transformObj.scale.x, transformObj.scale.y);\n    ctx.translate(-transformObj.center.x, -transformObj.center.y);\n    ctx.drawImage(transformImage, 0, 0, transformImage.width, transformImage.height);\n\n    ctx.restore();\n}\n\nexport const createCheckerCanvas = function(size: number): HTMLCanvasElement {\n    const canvas = createCanvas();\n    let ctx;\n    if (size < 1) {\n        canvas.width = 1;\n        canvas.height = 1;\n        ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('2d context not supported or canvas already initialized');\n        }\n        ctx.fillStyle = 'rgb(128, 128, 128)';\n        ctx.fillRect(0, 0, 1, 1);\n    } else if (size > 200) {\n        canvas.width = 401;\n        canvas.height = 401;\n    } else {\n        canvas.width = size * 2;\n        canvas.height = size * 2;\n        ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('2d context not supported or canvas already initialized');\n        }\n        ctx.fillStyle = 'rgb(255, 255, 255)';\n        ctx.fillRect(0, 0, size * 2, size * 2);\n        ctx.fillStyle = 'rgb(200, 200, 200)';\n        ctx.fillRect(0, 0, size, size);\n        ctx.fillRect(size, size, size * 2, size * 2);\n    }\n    return canvas;\n};\n\nexport const createCheckerDataUrl = (function () {\n    const cache: IKeyString = { // previously created dataUrls\n        '8': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMElEQVQ4T2M8ceLEfwY8wNzcHJ80A+OoAcMiDP7//483HZw8eRJ/Ohg1gIFx6IcBAIhJUqnarXQ1AAAAAElFTkSuQmCC',\n        '4': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAJ0lEQVQoU2M8ceLEfwYkYG5ujsxlYKSDgv///6O44eTJk6huoL0CAGsOKVVu8UYvAAAAAElFTkSuQmCC'\n    };\n\n    return function (size: number, callback?: (s: string) => void) {\n        function create(size: number): string {\n            size = parseInt('' + size);\n            if (cache['' + size]) {\n                return cache['' + size];\n            }\n            const canvas = createCheckerCanvas(size);\n            const result = canvas.toDataURL('image/png');\n            cache['' + size] = result;\n            return result;\n        }\n\n        if (callback) { //async\n            setTimeout(function () {\n                callback(create(size));\n            }, 1);\n        } else { //sync\n            return create(size);\n        }\n    };\n})();\n\n/**\n * smooth resize image\n * @param canvas canvas - will be resized (modified)\n * @param w\n * @param h\n * @param tmp1 canvas - optional, provide to save resources\n * @param tmp2 canvas - optional, provide to save resources\n */\nexport function resizeCanvas(\n    canvas: HTMLCanvasElement,\n    w: number,\n    h: number,\n    tmp1?: HTMLCanvasElement,\n    tmp2?: HTMLCanvasElement,\n): void {\n\n    //determine base 2 exponents of old and new size\n    function getBase2Obj(oldW: number, oldH: number, newW: number, newH: number) {\n        const result = {\n            oldWidthEx: Math.round(Math.log2(oldW)),\n            oldHeightEx: Math.round(Math.log2(oldH)),\n            newWidthEx: Math.ceil(Math.log2(newW)),\n            newHeightEx: Math.ceil(Math.log2(newH))\n        };\n        result.oldWidthEx = Math.max(result.oldWidthEx, result.newWidthEx);\n        result.oldHeightEx = Math.max(result.oldHeightEx, result.newHeightEx);\n        return result;\n    }\n\n    if (!w || !h || (w === canvas.width && h === canvas.height)) {\n        return;\n    }\n    w = Math.max(w, 1);\n    h = Math.max(h, 1);\n    if (w <= canvas.width && h <= canvas.height) {\n\n        tmp1 = !tmp1 ? createCanvas() : tmp1;\n        tmp2 = !tmp2 ? createCanvas() : tmp2;\n\n        const base2 = getBase2Obj(canvas.width, canvas.height, w, h);\n\n        //initially scale to a base of 2. unless new size is too close to old. e.g. sizing from 900 to 600\n        tmp2.width = base2.oldWidthEx > base2.newWidthEx ? Math.pow(2, base2.oldWidthEx) : w;\n        tmp2.height = base2.oldHeightEx > base2.newHeightEx ? Math.pow(2, base2.oldHeightEx) : h;\n        tmp1.getContext('2d')!.save();\n        tmp2.getContext('2d')!.save();\n\n        let ew, eh;\n        let buffer1 = tmp1, buffer2 = tmp2;\n\n        ew = base2.oldWidthEx;\n        eh = base2.oldHeightEx;\n\n        let bufferCtx = buffer2.getContext('2d')!;\n        bufferCtx.imageSmoothingEnabled = true;\n        bufferCtx.imageSmoothingQuality  = 'high';\n        bufferCtx.globalCompositeOperation  = 'copy';\n        bufferCtx.drawImage(canvas, 0, 0, buffer2.width, buffer2.height);\n\n        let currentWidth = buffer2.width;\n        let currentHeight = buffer2.height;\n\n        //stepwise half the size\n        for (; ew > base2.newWidthEx || eh > base2.newHeightEx; ew--, eh--) {\n            bufferCtx = buffer1.getContext('2d')!;\n            bufferCtx.imageSmoothingEnabled = true;\n            bufferCtx.imageSmoothingQuality  = 'high';\n            bufferCtx.globalCompositeOperation  = 'copy';\n\n            const newWidth = (ew > base2.newWidthEx) ? currentWidth / 2 : currentWidth;\n            const newHeight = (eh > base2.newHeightEx) ? currentHeight / 2 : currentHeight;\n\n            //buffer also needs to be properly sized, unfortunately\n            buffer1.width = newWidth;\n            buffer1.height = newHeight;\n\n            bufferCtx.drawImage(\n                buffer2,\n                0, 0,\n                currentWidth, currentHeight,\n                0, 0,\n                newWidth, newHeight\n            );\n            currentWidth = newWidth;\n            currentHeight = newHeight;\n\n            //swap\n            const tmp = buffer1;\n            buffer1 = buffer2;\n            buffer2 = tmp;\n        }\n\n        //when no longer can be halved, bring to target size\n        canvas.width = w;\n        canvas.height = h;\n        const canvasCtx = canvas.getContext('2d')!;\n        canvasCtx.save();\n        canvasCtx.imageSmoothingEnabled = true;\n        canvasCtx.imageSmoothingQuality  = 'high';\n        canvasCtx.drawImage(\n            buffer2,\n            0, 0,\n            currentWidth, currentHeight,\n            0, 0,\n            w, h\n        );\n        canvasCtx.restore();\n        tmp1.getContext('2d')!.restore();\n        tmp2.getContext('2d')!.restore();\n\n    } else if (w >= canvas.width && h >= canvas.height) {\n\n        tmp1 = !tmp1 ? createCanvas() : tmp1;\n        tmp1.width = w;\n        tmp1.height = h;\n        const tmp1Ctx = tmp1.getContext('2d')!;\n        tmp1Ctx.save();\n        tmp1Ctx.imageSmoothingEnabled = true;\n        tmp1Ctx.imageSmoothingQuality  = 'high';\n        tmp1Ctx.drawImage(canvas, 0, 0, w, h);\n        tmp1Ctx.restore();\n\n        canvas.width = w;\n        canvas.height = h;\n        canvas.getContext('2d')!.drawImage(tmp1, 0, 0);\n\n    } else {\n        resizeCanvas(canvas, w, canvas.height, tmp1, tmp2);\n        resizeCanvas(canvas, w, h, tmp1, tmp2);\n    }\n}\n\n/**\n * puts naive greyscale version of image into alpha channel.\n * only writes a, doesn't write rgb\n * @param canvas\n */\nexport function convertToAlphaChannelCanvas(canvas: HTMLCanvasElement): void {\n    const imdat = canvas.getContext('2d')!.getImageData(0, 0, canvas.width, canvas.height);\n    for (let i = 0; i < imdat.data.length; i += 4) {\n        if (imdat.data[i + 3] === 0) {\n            continue;\n        }\n        imdat.data[i + 3] = (imdat.data[i] + imdat.data[i + 1] + imdat.data[i + 2]) / 3 * (imdat.data[i + 3] / 255);\n    }\n    canvas.getContext('2d')!.putImageData(imdat, 0, 0);\n}\n\n/**\n * Sometimes garbage collection is too slow, and canvases use up too much memory,\n * or there is a hard to fix memory leak.\n * This function manually makes the canvas use as little memory as possible.\n */\nexport function freeCanvas(canvas: HTMLCanvasElement): void {\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext('2d');\n    ctx && ctx.clearRect(0, 0, 1, 1);\n}\n\n/**\n * Determine bounding box that describes all pixels which are not fully transparent.\n * Returns null if empty.\n *\n * @param context\n */\nexport function canvasBounds(context: CanvasRenderingContext2D): IRect | null {\n    let boundsObj: {\n        x: number;\n        y: number;\n        width: number;\n        height: number;\n    } = { x: 0, y: 0, width: 0, height: 0 };\n    {\n        let tempBounds: any = {\n            x1: null,\n            y1: null,\n            x2: null,\n            y2: null\n        };\n        let imdat = context.getImageData(0, 0, context.canvas.width, context.canvas.height);\n\n        if (imdat.data[3] > 0 && imdat.data[imdat.data.length - 1] > 0) {\n            tempBounds.x1 = 0;\n            tempBounds.y1 = 0;\n            tempBounds.x2 = context.canvas.width - 1;\n            tempBounds.y2 = context.canvas.height - 1;\n        } else {\n            for (let i = 3; i < imdat.data.length; i += 4) {\n                if (imdat.data[i] > 0 ) {\n                    let x = ((i - 3) / 4) %  context.canvas.width;\n                    let y = Math.floor((i - 3) / 4 / context.canvas.width);\n                    if (tempBounds.x1 > x || tempBounds.x1 === null) {\n                        tempBounds.x1 = x;\n                    }\n                    if (tempBounds.y1 === null) {\n                        tempBounds.y1 = y;\n                    }\n                    if (tempBounds.x2 < x || tempBounds.x2 === null) {\n                        tempBounds.x2 = x;\n                    }\n                    if (tempBounds.y2 < y || tempBounds.y2 === null) {\n                        tempBounds.y2 = y;\n                    }\n                }\n            }\n        }\n        if (tempBounds.x1 === null || tempBounds.y1 === null) {\n            return null;\n        }\n        boundsObj.x = tempBounds.x1;\n        boundsObj.y = tempBounds.y1;\n        boundsObj.width = tempBounds.x2 - tempBounds.x1 + 1;\n        boundsObj.height = tempBounds.y2 - tempBounds.y1 + 1;\n    }\n    return boundsObj;\n}","export const Matrix = (function () {\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web\n    // yes not optimized - but it's not used for physics simulations.\n\n    // const perfTotal = 0;\n\n    // point  matrix\n    function multiplyMatrixAndPoint(matrix, point) {\n        const result = [\n            (point[0] * matrix[0]) + (point[1] * matrix[4]) + (point[2] * matrix[8]) + (point[3] * matrix[12]), // x\n            (point[0] * matrix[1]) + (point[1] * matrix[5]) + (point[2] * matrix[9]) + (point[3] * matrix[13]), // y\n            (point[0] * matrix[2]) + (point[1] * matrix[6]) + (point[2] * matrix[10]) + (point[3] * matrix[14]), // z\n            (point[0] * matrix[3]) + (point[1] * matrix[7]) + (point[2] * matrix[11]) + (point[3] * matrix[15]) // w\n        ];\n        return result;\n    }\n\n    //matrixB  matrixA\n    function multiplyMatrices(matrixA, matrixB) {\n\n        // Slice the second matrix up into rows\n        const row0 = [matrixB[0], matrixB[1], matrixB[2], matrixB[3]];\n        const row1 = [matrixB[4], matrixB[5], matrixB[6], matrixB[7]];\n        const row2 = [matrixB[8], matrixB[9], matrixB[10], matrixB[11]];\n        const row3 = [matrixB[12], matrixB[13], matrixB[14], matrixB[15]];\n\n        // Multiply each row by matrixA\n        const result0 = multiplyMatrixAndPoint(matrixA, row0);\n        const result1 = multiplyMatrixAndPoint(matrixA, row1);\n        const result2 = multiplyMatrixAndPoint(matrixA, row2);\n        const result3 = multiplyMatrixAndPoint(matrixA, row3);\n\n        // Turn the result rows back into a single matrix\n        return [\n            result0[0], result0[1], result0[2], result0[3],\n            result1[0], result1[1], result1[2], result1[3],\n            result2[0], result2[1], result2[2], result2[3],\n            result3[0], result3[1], result3[2], result3[3]\n        ];\n    }\n\n    function createTranslationMatrix(x, y) {\n        return [\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            x, y, 0, 1\n        ];\n    }\n\n    function createRotationMatrix(angleRad) {\n        //let angleRad = angleDeg / 360 * 2 * Math.PI;\n        return [\n            Math.cos(-angleRad), -Math.sin(-angleRad), 0, 0,\n            Math.sin(-angleRad), Math.cos(-angleRad), 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n        ];\n    }\n\n    function createScaleMatrix(f) {\n        return [\n            f, 0, 0, 0,\n            0, f, 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n        ];\n    }\n\n    return {\n        getIdentity: function () {\n            return [\n                1, 0, 0, 0,\n                0, 1, 0, 0,\n                0, 0, 1, 0,\n                0, 0, 0, 1\n            ];\n        },\n        multiplyMatrixAndPoint: multiplyMatrixAndPoint,\n        multiplyMatrices: multiplyMatrices,\n        createTranslationMatrix: createTranslationMatrix,\n        createRotationMatrix: createRotationMatrix,\n        createScaleMatrix: createScaleMatrix\n    };\n})();","import {IVector2D} from '../BB.types';\n\nexport const Vec2 = {\n    add: function (p1: IVector2D, p2: IVector2D): IVector2D {\n        return {x: p1.x + p2.x, y: p1.y + p2.y};\n    },\n    sub: function (p1: IVector2D, p2: IVector2D): IVector2D {\n        return {x: p1.x - p2.x, y: p1.y - p2.y};\n    },\n    nor: function (p: IVector2D): IVector2D {\n        const len = Math.sqrt(Math.pow(p.x, 2) + Math.pow(p.y, 2));\n        return {x: p.x / len, y: p.y / len};\n    },\n    len: function (p: IVector2D): number {\n        return Math.sqrt(Math.pow(p.x, 2) + Math.pow(p.y, 2));\n    },\n    dist: function (p1: IVector2D, p2: IVector2D): number {\n        return Vec2.len(Vec2.sub(p1, p2));\n    },\n    mul: function (p: IVector2D, s: number): IVector2D {\n        return {x: p.x * s, y: p.y * s};\n    },\n    angle: function (p1: IVector2D, p2: IVector2D): number {\n        return Math.atan2(p2.y - p1.y, p2.x - p1.x);\n    },\n    dot: function(a: IVector2D, b: IVector2D): number {\n        const aArr = [a.x, a.y];\n        const bArr = [b.x, b.y];\n        return aArr.map((x, i) => aArr[i] * bArr[i]).reduce((m, n) => m + n);\n    }\n};","import {Vec2} from './vec2';\nimport {pointsToAngleDeg, clamp, dist, mix} from './math';\nimport {IVector2D} from \"../bb.types\";\n\n/**\n * project p onto line\n * @param lineStart\n * @param lineEnd\n * @param p\n */\nexport const projectPointOnLine = function (lineStart: IVector2D, lineEnd: IVector2D, p: IVector2D): IVector2D {\n    let x, y;\n    if (lineStart.x === lineEnd.x) {\n        x = lineStart.x;\n        y = p.y;\n\n        return {\n            x: x,\n            y: y\n        };\n    }\n    const m = (lineEnd.y - lineStart.y) / (lineEnd.x - lineStart.x);\n    const b = lineStart.y - (m * lineStart.x);\n\n    x = (m * p.y + p.x - m * b) / (m * m + 1);\n    y = (m * m * p.y + m * p.x + b) / (m * m + 1);\n\n    return {\n        x: x,\n        y: y\n    };\n};\n\n\n\n/**\n * Operations on a line made up of points\n *\n * getAtDist(dist) - point when traveling *dist* along the line\n * getLength - gives you total length of line\n *\n * @param params object - {points: [{x:float, y:float}, ...]}\n * @constructor\n */\nexport const PointLine = function (params) {\n    const segmentArr = [];\n    const _this = this;\n\n    for (let i = 0; i < params.points.length; i++) {\n        (function (i) {\n            let length = undefined;\n            if (i < params.points.length - 1) {\n                length = dist(params.points[i].x, params.points[i].y, params.points[i + 1].x, params.points[i + 1].y);\n            }\n            segmentArr[i] = {\n                x: params.points[i].x,\n                y: params.points[i].y,\n                length: length\n            };\n        })(i);\n    }\n\n    /**\n     * @param dist number - distance in pixels, > 0\n     * @returns {{x: number, y: number}}\n     */\n    this.getAtDist = function (dist) {\n        let remainder = Math.min(_this.getLength(), dist);\n        let i = 0;\n\n        for (; remainder > segmentArr[i].length && i < segmentArr.length - 2; i++) {\n            remainder -= segmentArr[i].length;\n        }\n\n        const fac = Math.min(1, Math.max(0, remainder / segmentArr[i].length));\n\n        return {\n            x: (segmentArr[i].x * (1 - fac) + segmentArr[i + 1].x * fac),\n            y: (segmentArr[i].y * (1 - fac) + segmentArr[i + 1].y * fac)\n        };\n    };\n    this.getLength = function () {\n        let result = 0;\n        for (let i = 0; i < segmentArr.length - 1; i++) {\n            result += segmentArr[i].length;\n        }\n        return result;\n    };\n};\n\n/**\n * Each instance is one line made up of bezier interpolated segments.\n * You feed it points. It calculates control points on its own, and the resulting curve.\n *\n * @constructor\n */\nexport const BezierLine = function () {\n    const _this = this;\n    const pointArr = [];\n    let lastDot = 0;\n    let lastPoint;\n    let lastCallbackPoint;\n    let lastAngle;\n    let lastSpacing = null;\n\n    /**\n     * creates bezier curve from control points\n     *\n     * @param p1 - control point 1 {x: float, y: float}\n     * @param p2 - control point 2 {x: float, y: float}\n     * @param p3 - control point 3 {x: float, y: float}\n     * @param p4 - control point 4 {x: float, y: float}\n     * @param resolution - int\n     * @returns {Array} - bezier curve made up of points {x: float, y: float}\n     */\n    function getBezierPoints(p1, p2, p3, p4, resolution) {\n        const curvePoints = [];\n        let t, result;\n        for (let i = 0; i <= resolution; i++) {\n            t = i / resolution;\n            result = {};\n            result.x = Math.pow(1 - t, 3) * p1.x + 3 * Math.pow(1 - t, 2) * t * p2.x + 3 * (1 - t) * Math.pow(t, 2) * p3.x + Math.pow(t, 3) * p4.x;\n            result.y = Math.pow(1 - t, 3) * p1.y + 3 * Math.pow(1 - t, 2) * t * p2.y + 3 * (1 - t) * Math.pow(t, 2) * p3.y + Math.pow(t, 3) * p4.y;\n            curvePoints[curvePoints.length] = result;\n        }\n        return curvePoints;\n    }\n\n    /**\n     *\n     * add now point to line\n     * line will go until the previous point\n     *\n     * @param x - coord of new point\n     * @param y - coord of new point\n     * @param spacing - space between each step\n     * @param callback - calls for each step - x, y, t - t is 0-1 how far along\n     * @param controlsCallback - calls that callback with the bezier control points p1, p2, p3, p4 - each {x: float, y: float}\n     */\n    this.add = function (x, y, spacing, callback, controlsCallback) {\n        if (lastPoint && x === lastPoint.x && y === lastPoint.y) {\n            return;\n        }\n        lastPoint = {x: x, y: y};\n        pointArr[pointArr.length] = {\n            x: x,\n            y: y,\n            spacing: spacing\n        };\n\n        //calculate directions\n        if (pointArr.length === 1) {\n            lastSpacing = spacing;\n            return;\n        } else if (pointArr.length === 2) {\n            pointArr[0].dir = Vec2.nor(Vec2.sub(pointArr[1], pointArr[0]));\n            lastDot = spacing;\n            lastSpacing = spacing;\n            return;\n        } else {\n            const pointM1 = pointArr[pointArr.length - 1];\n            const pointM2 = pointArr[pointArr.length - 2];\n            const pointM3 = pointArr[pointArr.length - 3];\n            pointM2.dir = Vec2.nor(Vec2.sub(pointM1, pointM3));\n            if (isNaN(pointM2.dir.x) || isNaN(pointM2.dir.y)) {\n                //when xy -3 == -1\n                pointM2.dir = JSON.parse(JSON.stringify(pointM3.dir));\n            }\n        }\n\n        //get bezier curve\n        const a = pointArr[pointArr.length - 3];\n        const b = pointArr[pointArr.length - 2];\n        const p1 = a;\n        const p2 = Vec2.add(a, Vec2.mul(a.dir, Vec2.dist(a, b) / 4));\n        const p3 = Vec2.sub(b, Vec2.mul(b.dir, Vec2.dist(a, b) / 4));\n        const p4 = b;\n\n\n        let pointLine;\n        if (callback) {\n            let curvePoints;\n            curvePoints = getBezierPoints(p1, p2, p3, p4, 20);\n            pointLine = new PointLine({points: curvePoints});\n        } else {\n            pointLine = new PointLine({points: [p1, p4]});\n        }\n\n        //interate over curve with spacing and callback\n        const len = pointLine.getLength();\n        let tempSpacing = mix(lastSpacing, spacing, clamp(lastDot / len, 0, 1));\n        let d = lastDot;\n        for (; d <= len; d += tempSpacing) {\n            tempSpacing = mix(lastSpacing, spacing, clamp(d / len, 0, 1));\n            const point = pointLine.getAtDist(d);\n            const angle = lastCallbackPoint ? pointsToAngleDeg(lastCallbackPoint, point) : undefined;\n            if (callback) {\n                callback({\n                    x: point.x,\n                    y: point.y,\n                    t: d / len,\n                    angle: angle,\n                    dAngle: lastCallbackPoint ? angle - lastAngle : 0\n                });\n            }\n            lastCallbackPoint = point;\n            lastAngle = angle;\n        }\n\n        if (callback) {\n            lastDot = d - len;\n        } else {\n            lastDot = 0;\n            controlsCallback({p1: p1, p2: p2, p3: p3, p4: p4});\n        }\n\n        lastSpacing = spacing;\n    };\n\n    this.addFinal = function(spacing, callback, controlsCallback) {\n        if (pointArr.length < 2) {\n            return;\n        }\n\n        const p1 = pointArr[pointArr.length - 2];\n        const p2 = pointArr[pointArr.length - 1];\n\n        const newP = Vec2.add(p2, Vec2.sub(p2, p1));\n\n        _this.add(newP.x, newP.y, spacing, callback, controlsCallback);\n    };\n\n};\n\n/**\n * from glfx.script by evanW:\n * from SplineInterpolator.cs in the Paint.NET source code\n *\n * points go 0 - 1. I think.\n *\n * @param points\n * @constructor\n */\nexport const SplineInterpolator = function (points) {\n    const n = points.length;\n    this.xa = [];\n    this.ya = [];\n    this.u = [];\n    this.y2 = [];\n    let i;\n\n    const first = points[0][0];\n    const last = points[points.length - 1][0];\n\n    points.sort(function (a, b) {\n        return a[0] - b[0];\n    });\n    for (i = 0; i < n; i++) {\n        this.xa.push(points[i][0]);\n        this.ya.push(points[i][1]);\n    }\n\n    this.u[0] = 0;\n    this.y2[0] = 0;\n\n    for (i = 1; i < n - 1; ++i) {\n        // This is the decomposition loop of the tridiagonal algorithm.\n        // y2 and u are used for temporary storage of the decomposed factors.\n        const wx = this.xa[i + 1] - this.xa[i - 1];\n        const sig = (this.xa[i] - this.xa[i - 1]) / wx;\n        const p = sig * this.y2[i - 1] + 2.0;\n\n        this.y2[i] = (sig - 1.0) / p;\n\n        const ddydx =\n            (this.ya[i + 1] - this.ya[i]) / (this.xa[i + 1] - this.xa[i]) -\n            (this.ya[i] - this.ya[i - 1]) / (this.xa[i] - this.xa[i - 1]);\n\n        this.u[i] = (6.0 * ddydx / wx - sig * this.u[i - 1]) / p;\n    }\n\n    this.y2[n - 1] = 0;\n\n    // This is the backsubstitution loop of the tridiagonal algorithm\n    for (i = n - 2; i >= 0; --i) {\n        this.y2[i] = this.y2[i] * this.y2[i + 1] + this.u[i];\n    }\n\n    this.getFirstX = function () {\n        return first;\n    };\n    this.getLastX = function () {\n        return last;\n    };\n};\n\nSplineInterpolator.prototype.interpolate = function (x) {\n    const n = this.ya.length;\n    let klo = 0;\n    let khi = n - 1;\n\n    // We will find the right place in the table by means of\n    // bisection. This is optimal if sequential calls to this\n    // routine are at random values of x. If sequential calls\n    // are in order, and closely spaced, one would do better\n    // to store previous values of klo and khi.\n    while (khi - klo > 1) {\n        const k = (khi + klo) >> 1;\n\n        if (this.xa[k] > x) {\n            khi = k;\n        } else {\n            klo = k;\n        }\n    }\n\n    const h = this.xa[khi] - this.xa[klo];\n    const a = (this.xa[khi] - x) / h;\n    const b = (x - this.xa[klo]) / h;\n\n    // Cubic spline polynomial is now evaluated.\n    return a * this.ya[klo] + b * this.ya[khi] +\n        ((a * a * a - a) * this.y2[klo] + (b * b * b - b) * this.y2[khi]) * (h * h) / 6.0;\n};\n\n/**\n * find x to y. simply by stepping through. suboptimal, so don't call often.\n * searches in x 0-1 range\n *\n * @param y\n * @param resolution\n */\nSplineInterpolator.prototype.findX = function (y, resolution) {\n    let x = null;\n    let dist = null;\n    for (let i = 0; i <= resolution; i++) {\n        const tempX = i / resolution;\n        const tempY = this.interpolate(tempX);\n        if (x === null) {\n            x = tempX;\n            dist = Math.abs(tempY - y);\n            continue;\n        }\n\n        const tempDist = Math.abs(tempY - y);\n\n        if (tempDist < dist) {\n            x = tempX;\n            dist = tempDist;\n        } else {\n            //distance increasing\n            break;\n        }\n    }\n    return x;\n};\n\n/**\n * input for a spline, following curve of quadratic function x^2 [0 - 1]\n * returns [[0, startVal], ..., [1, endVal]]\n * @param startVal\n * @param endVal\n * @param stepSize\n * @returns {[]}\n */\nexport const quadraticSplineInput = function (startVal, endVal, stepSize) {\n    function round(v, dec) {\n        return Math.round(v * Math.pow(10, dec)) / Math.pow(10, dec);\n    }\n\n    const resultArr = [];\n    for (let i = 0; i <= 1; i += stepSize) {\n        resultArr.push([round(i, 4), round(startVal + Math.pow(i, 2) * (endVal - startVal), 4)]);\n    }\n    return resultArr;\n};","\n\n\n// based on js color conversion http://www.webtoolkit.info/\n\n\nexport class HSV {\n    h: number;\n    s: number;\n    v: number;\n    constructor(h: number, s: number, v: number) {\n        this.h = Math.max(0, Math.min(360, h));\n        this.s = Math.max(0.001, Math.min(100, s)); //bug when 0\n        this.v = Math.max(0, Math.min(100, v));\n    }\n}\n\nexport class RGB {\n    r : number;\n    g: number;\n    b: number;\n    constructor(r: number, g: number, b: number) {\n        this.r = Math.max(0, Math.min(255, r));\n        this.g = Math.max(0, Math.min(255, g));\n        this.b = Math.max(0, Math.min(255, b));\n    }\n}\n\nexport class CMYK {\n    c: number;\n    m: number;\n    y: number;\n    k: number;\n    constructor(c: number, m: number, y: number, k: number) {\n        this.c = Math.max(0, Math.min(100, c));\n        this.m = Math.max(0, Math.min(100, m));\n        this.y = Math.max(0, Math.min(100, y));\n        this.k = Math.max(0, Math.min(100, k));\n    }\n}\n\nexport const ColorConverter = {\n\n    _RGBtoHSV: function (RGB: RGB): HSV {\n        const result = new HSV(0, 0, 0);\n\n        const r = RGB.r / 255;\n        const g = RGB.g / 255;\n        const b = RGB.b / 255;\n\n        const minVal = Math.min(r, g, b);\n        const maxVal = Math.max(r, g, b);\n        const delta = maxVal - minVal;\n\n        result.v = maxVal;\n\n        if (delta == 0) {\n            result.h = 0;\n            result.s = 0;\n        } else {\n            result.s = delta / maxVal;\n            const del_R = (((maxVal - r) / 6) + (delta / 2)) / delta;\n            const del_G = (((maxVal - g) / 6) + (delta / 2)) / delta;\n            const del_B = (((maxVal - b) / 6) + (delta / 2)) / delta;\n\n            if (r == maxVal) {\n                result.h = del_B - del_G;\n            } else if (g == maxVal) {\n                result.h = (1 / 3) + del_R - del_B;\n            } else if (b == maxVal) {\n                result.h = (2 / 3) + del_G - del_R;\n            }\n\n            if (result.h < 0) {\n                result.h += 1;\n            }\n            if (result.h > 1) {\n                result.h -= 1;\n            }\n        }\n\n        result.h = Math.round(result.h * 360);\n        result.s = Math.round(result.s * 100);\n        result.v = Math.round(result.v * 100);\n\n        return result;\n    },\n\n    _HSVtoRGB: function (HSV: HSV): RGB {\n        const result = new RGB(0, 0, 0);\n\n        let var_h, var_i, var_1, var_2, var_3, var_r, var_g, var_b;\n\n        const h = (HSV.h / 360) % 1;\n        const s = HSV.s / 100;\n        const v = HSV.v / 100;\n\n        if (s == 0) {\n            result.r = v * 255;\n            result.g = v * 255;\n            result.b = v * 255;\n        } else {\n            var_h = h * 6;\n            var_i = Math.floor(var_h);\n            var_1 = v * (1 - s);\n            var_2 = v * (1 - s * (var_h - var_i));\n            var_3 = v * (1 - s * (1 - (var_h - var_i)));\n\n            if (var_i == 0) {\n                var_r = v;\n                var_g = var_3;\n                var_b = var_1\n            } else if (var_i == 1) {\n                var_r = var_2;\n                var_g = v;\n                var_b = var_1\n            } else if (var_i == 2) {\n                var_r = var_1;\n                var_g = v;\n                var_b = var_3\n            } else if (var_i == 3) {\n                var_r = var_1;\n                var_g = var_2;\n                var_b = v\n            } else if (var_i == 4) {\n                var_r = var_3;\n                var_g = var_1;\n                var_b = v\n            } else {\n                var_r = v;\n                var_g = var_1;\n                var_b = var_2\n            }\n\n            result.r = var_r * 255;\n            result.g = var_g * 255;\n            result.b = var_b * 255;\n\n            result.r = Math.round(result.r);\n            result.g = Math.round(result.g);\n            result.b = Math.round(result.b);\n        }\n\n        return result;\n    },\n\n    _CMYKtoRGB: function (CMYK: CMYK): RGB {\n        const result = new RGB(0, 0, 0);\n\n        const c = CMYK.c / 100;\n        const m = CMYK.m / 100;\n        const y = CMYK.y / 100;\n        const k = CMYK.k / 100;\n\n        result.r = 1 - Math.min(1, c * (1 - k) + k);\n        result.g = 1 - Math.min(1, m * (1 - k) + k);\n        result.b = 1 - Math.min(1, y * (1 - k) + k);\n\n        result.r = Math.round(result.r * 255);\n        result.g = Math.round(result.g * 255);\n        result.b = Math.round(result.b * 255);\n\n        return result;\n    },\n\n    _RGBtoCMYK: function (RGB: RGB): CMYK {\n        const result = new CMYK(0, 0, 0, 0);\n\n        const r = RGB.r / 255;\n        const g = RGB.g / 255;\n        const b = RGB.b / 255;\n\n        result.k = Math.min(1 - r, 1 - g, 1 - b);\n        result.c = (1 - r - result.k) / (1 - result.k);\n        result.m = (1 - g - result.k) / (1 - result.k);\n        result.y = (1 - b - result.k) / (1 - result.k);\n\n        result.c = Math.round(result.c * 100);\n        result.m = Math.round(result.m * 100);\n        result.y = Math.round(result.y * 100);\n        result.k = Math.round(result.k * 100);\n\n        return result;\n    },\n\n    toRGB: function (o: RGB | HSV | CMYK): RGB {\n        if (o instanceof RGB) {\n            return o;\n        }\n        if (o instanceof HSV) {\n            return this._HSVtoRGB(o);\n        }\n        if (o instanceof CMYK) {\n            return this._CMYKtoRGB(o);\n        }\n    },\n\n    toHSV: function (o: RGB | HSV | CMYK): HSV {\n        if (o instanceof HSV) {\n            return o;\n        }\n        if (o instanceof RGB) {\n            return this._RGBtoHSV(o);\n        }\n        if (o instanceof CMYK) {\n            return this._RGBtoHSV(this._CMYKtoRGB(o));\n        }\n    },\n\n    toCMYK: function (o: RGB | HSV | CMYK): CMYK {\n        if (o instanceof CMYK) {\n            return o;\n        }\n        if (o instanceof RGB) {\n            return this._RGBtoCMYK(o);\n        }\n        if (o instanceof HSV) {\n            return this._RGBtoCMYK(this._HSVtoRGB(o));\n        }\n    },\n    toHexString: function (o: RGB): string {\n        if (o instanceof RGB || ('r' in o && 'g' in o && 'b' in o)) {\n            let ha = (parseInt('' + o.r)).toString(16);\n            let hb = (parseInt('' + o.g)).toString(16);\n            let hc = (parseInt('' + o.b)).toString(16);\n            if (ha.length == 1)\n                ha = '0' + ha;\n            if (hb.length == 1)\n                hb = '0' + hb;\n            if (hc.length == 1)\n                hc = '0' + hc;\n            return ha + hb + hc;\n        }\n    },\n    toRgbStr: function(rgbObj: {r: number, g: number, b: number}): string {\n        return 'rgb(' + Math.round(rgbObj.r) + ', ' + Math.round(rgbObj.g) + ', ' + Math.round(rgbObj.b) + ')';\n    },\n    toRgbaStr: function(rgbaObj: {r: number, g: number, b: number, a: number}): string {\n        return 'rgba(' + Math.round(rgbaObj.r) + ', ' + Math.round(rgbaObj.g) + ', ' + Math.round(rgbaObj.b) + ', ' + rgbaObj.a + ')';\n    },\n    hexToRGB: function(hexStr: string): RGB | null {\n        hexStr = hexStr.trim();\n        // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n        const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        hexStr = hexStr.replace(shorthandRegex, function(m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hexStr);\n        return result ? new RGB(\n            parseInt(result[1], 16),\n            parseInt(result[2], 16),\n            parseInt(result[3], 16)\n        ) : null;\n    }\n\n};\n\nexport function testIsWhiteBestContrast(rgbObj: {r: number, g: number, b: number}): boolean {\n    return (rgbObj.r * 0.299 + rgbObj.g * 0.587 + rgbObj.b * 0.114) < 125;\n}","import {addEventListener} from '../input/event-listener';\nimport {css} from './base';\nimport {BB} from '../bb';\n\n\nexport function appendTextDiv(target: HTMLElement, text: string): HTMLDivElement {\n    const div = document.createElement('div');\n    div.innerHTML = text;\n    target.appendChild(div);\n    return div;\n}\n\n/**\n * Is an input element focused.\n * Set attribute \"data-ignore-focus\" to \"true\" if its focus should be ignored.\n *\n * @param getAll - check all, even those with \"data-ignore-focus\" = \"true\"\n */\nexport function isInputFocused(getAll: boolean = false): boolean {\n    let result = document.activeElement && ['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName);\n    if (getAll) {\n        return result;\n    } else {\n        return result && !document.activeElement.getAttribute('data-ignore-focus');\n    }\n}\n\nexport function unfocusAnyInput(): void {\n    if (isInputFocused(true)) {\n        /*\n            Unfocus anything that is focused.\n\n            If an Input is focused in Firefox, and it gets detached from the DOM via a Node\n            that isn't its direct parent, then Firefox will keep anything attached to this\n            Input in memory. It will not be garbage collected until a new Input is focused.\n\n            Workaround: Temporarily create an input, focus it, detach it.\n             */\n        const focusEl = BB.el({\n            parent: document.body,\n            tagName: 'input',\n            css: {\n                opacity: '0',\n                width: '0',\n                height: '0',\n            }\n        }) as HTMLInputElement;\n        setTimeout(() => {\n            focusEl.select();\n            focusEl.focus();\n            focusEl.parentNode.removeChild(focusEl);\n        }, 10);\n    }\n}\n\n/**\n * clears text selection in window\n */\nexport function clearSelection(): void {\n    if (window.getSelection) {\n        const sel = window.getSelection();\n        if (sel) {\n            if (sel.empty) {\n                sel.empty();\n            } else if (sel.removeAllRanges) {\n                sel.removeAllRanges();\n            }\n        }\n    } else if ('selection' in document) {\n        (document as any).selection.empty();\n    }\n}\n\n/**\n * prevents being able to focus element.\n * warning: it creates a listener\n *\n * @param el - dom element\n */\nexport const makeUnfocusable = (function() {\n\n    function preventFocus(event: MouseEvent) {\n        event.preventDefault();\n        let didFocusRelated = false;\n        if (event.relatedTarget) {\n            try {\n                (event.relatedTarget as HTMLElement).focus();\n                didFocusRelated = true;\n            } catch(e) {\n                console.error('failed to focus');\n            }\n        }\n        if (!didFocusRelated) {\n            (event.currentTarget as HTMLElement).blur();\n        }\n    }\n\n    return function(el) {\n        el.setAttribute('tabindex', '-1');\n        addEventListener(el, 'focus', preventFocus);\n    };\n})();\n\n\nconst els: {\n    el: HTMLElement;\n    listeners: [string, any][];\n}[] = [];\n// window['els'] = els;\n\n/**\n *\n * Create DOM element - div by default\n * params = {\n * \t    parent: someOtherDiv,\n * \t    css: {\n * \t\t    width: \"500px\",\n * \t\t    backgroundColor: \"#fff\"\n * \t    },\n * \t    content: \"test\", //or  content: [divA, divB, divC]   or content: someDiv\n * \t    className: \"bla\",\n *      id: \"bla\"\n * }\n *\n *  If onClick or onChange is used, then BB.destroyEl MUST be called\n *  to prevent a memory leak.\n *\n * @param params\n */\nexport function el(\n    params: {\n        parent?: HTMLElement,\n        css?: { [key: string]: string },\n        custom?: { [key: string]: any },\n        content?: string | (HTMLElement | string | null)[] | HTMLElement | SVGElement,\n        textContent?: string,\n        className?: string,\n        title?: string,\n        id?: string,\n        tagName?: string,\n        onClick?: (e: Event) => void,\n        onChange?: (e: Event) => void,\n    }\n): HTMLElement {\n    const div = document.createElement(params.tagName ? params.tagName : 'div');\n    if (params.css) {\n        css(div, params.css);\n    }\n\n    if (params.content) {\n        if (typeof params.content === typeof 'aa') {\n            div.innerHTML = params.content as string;\n\n        } else if (Array.isArray(params.content)) {\n            BB.append(div, params.content);\n\n        } else {\n            div.appendChild(params.content as HTMLElement);\n\n        }\n    }\n    if (params.textContent) {\n        div.textContent = params.textContent;\n    }\n    if (params.className) {\n        div.className = params.className;\n    }\n    if (params.id) {\n        div.id = params.id;\n    }\n    if (params.parent) {\n        params.parent.appendChild(div);\n    }\n    if ('title' in params && params.title !== undefined) {\n        div.title = params.title;\n    }\n    const listeners = [];\n    if ('onClick' in params) {\n        addEventListener(div, 'click', params.onClick);\n        listeners.push(['click', params.onClick]);\n    }\n    if ('onChange' in params) {\n        addEventListener(div, 'change', params.onChange);\n        listeners.push(['change', params.onChange]);\n    }\n    if (listeners.length > 0) {\n        els.push({\n            el: div,\n            listeners: listeners,\n        })\n        /*div.style.backgroundColor = '#ff0';\n        div.style.border = '1px solid #ff0';*/\n    }\n    if ('custom' in params) {\n        const customKeyArr = Object.keys(params.custom);\n        for (let i = 0; i < customKeyArr.length; i++) {\n            div.setAttribute(customKeyArr[i], params.custom[customKeyArr[i]]);\n        }\n    }\n    return div;\n}\n\n/**\n * removes event listeners for Elements created via el()\n * @param el\n */\nexport function destroyEl(el: HTMLElement) {\n    for (let i = 0; i < els.length; i++) {\n        const item = els[i];\n        if (item.el === el) {\n            item.listeners.forEach(item => {\n                el.removeEventListener(item[0], item[1]);\n            });\n            els.splice(i, 1);\n            return;\n        }\n    }\n    // not found\n    return;\n}\n","\nexport class BbLog {\n\n    private static listeners: any[] = [];\n\n    constructor() {\n    }\n\n    static subscribe(listener) {\n        if (BbLog.listeners.includes(listener)) {\n            return;\n        }\n        BbLog.listeners.push(listener);\n    }\n\n    static unsubscribe(listener) {\n        for (let i = 0; i < BbLog.listeners.length; i++) {\n            if (listener === BbLog.listeners[i]) {\n                BbLog.listeners.splice(i, 1);\n                return;\n            }\n        }\n    }\n\n    static emit (msg) {\n        BbLog.listeners.forEach(item => {\n            item(msg);\n        });\n    }\n}","/**\n * LocalStorage wrapper that does not throw exceptions.\n * If cookies disabled in Safari localStorage interactions throw exception \"insecure operation\"\n */\nexport class LocalStorage {\n\n    private static error;\n\n    static getItem (key: string): string {\n        let result = null;\n        try {\n            result = localStorage.getItem(key);\n        } catch (e) {\n            this.error = e;\n        }\n        return result;\n    }\n\n    static setItem (key: string, value: string): void {\n        try {\n            localStorage.setItem(key, value);\n        } catch (e) {\n            this.error = e;\n        }\n    }\n\n    static removeItem (key: string): void {\n        try {\n            localStorage.removeItem(key);\n        } catch (e) {\n            this.error = e;\n        }\n    }\n\n    static getError (): any {\n        return this.error;\n    }\n}","import {DecoyKlHistory, klHistory} from './history/kl-history';\nimport {Popup, popup} from './ui/modals/popup';\nimport {dialogCounter} from './ui/modals/modal-count';\nimport {Checkbox} from './ui/base-components/checkbox';\nimport {input} from './ui/base-components/input';\nimport {Select} from './ui/base-components/select';\nimport {ImageToggle} from './ui/base-components/image-toggle';\nimport {ImageRadioList} from './ui/base-components/image-radio-list';\nimport {penPressureToggle} from './ui/base-components/pen-pressure-toggle';\nimport {KlSlider} from './ui/base-components/kl-slider';\nimport {calcSliderFalloffFactor} from './ui/base-components/slider-falloff';\nimport {HexColorDialog} from './ui/modals/color-slider-hex-dialog';\nimport {KlColorSlider} from './ui/base-components/kl-color-slider';\nimport {KlSmallColorSlider} from './ui/base-components/kl-color-slider-small';\nimport {PointSlider} from './ui/base-components/point-slider';\nimport {ColorOptions} from './ui/base-components/color-options';\nimport {Options} from './ui/base-components/options';\nimport {StatusOverlay} from './ui/components/status-overlay';\nimport {exportDialog} from './ui/modals/export-dialog-deprecated';\nimport {CropCopy} from './ui/components/crop-copy';\nimport {clipboardDialog} from './ui/modals/clipboard-dialog';\nimport {klLayerManager} from './ui/tool-tabs/kl-layer-manager';\nimport {WorkspaceSvgOverlay} from './canvas-ui/workspace-svg-overlay';\nimport {KlCanvasWorkspace} from './canvas-ui/kl-canvas-workspace';\nimport {KlCanvasPreview} from './canvas-ui/canvas-preview';\nimport {FreeTransform} from './ui/components/free-transform';\nimport {FreeTransformCanvas} from './ui/components/free-transform-canvas';\nimport {Cropper} from './ui/components/cropper';\nimport {LayerPreview} from './ui/components/layer-preview';\nimport {FittedImage} from './ui/components/fitted-image';\nimport {showImportAsLayerDialog} from './ui/modals/show-import-as-layer-dialog';\nimport {KlImageDropper} from './ui/components/kl-image-dropper';\nimport {OverlayToolspace} from './ui/components/overlay-toolspace';\nimport {ToolspaceTopRow} from './ui/components/toolspace-top-row';\nimport {ToolDropdown} from './ui/components/tool-dropdown';\nimport {ToolspaceToolRow} from './ui/components/toolspace-tool-row';\nimport {ToolspaceStabilizerRow} from './ui/components/toolspace-stabilizer-row';\nimport {TabRow} from './ui/components/tab-row';\nimport {HandUi} from './ui/tool-tabs/hand-ui';\nimport {FillUi} from './ui/tool-tabs/fill-ui';\nimport {TextUi} from './ui/tool-tabs/text-ui';\nimport {ShapeUi} from './ui/tool-tabs/shape-ui';\nimport {newImageDialog} from './ui/modals/new-image-dialog';\nimport {ToolspaceCollapser} from './ui/components/toolspace-collapser';\nimport {renderText} from './image-operations/render-text';\nimport {textToolDialog} from './ui/modals/text-tool-dialog';\nimport {showImportImageDialog} from './ui/modals/show-import-image-dialog';\nimport {floodFillBits} from './image-operations/flood-fill';\nimport * as PSD from './storage/psd';\nimport {drawShape, ShapeTool} from './image-operations/shape-tool';\nimport {KlCanvas} from './canvas/kl-canvas';\nimport * as indexedDb from './storage/indexed-db';\nimport {filterLib, filterLibStatus} from './filters/filters';\nimport {brushes} from './brushes/brushes';\nimport {brushesUI} from './brushes-ui/brushes-ui';\nimport {showIframePopup} from './ui/modals/show-iframe-popup';\nimport {RadioList} from './ui/base-components/radio-list';\nimport {BrowserStorageUi} from './ui/components/browser-storage-ui';\nimport {drawProject} from './canvas/draw-project';\nimport {ProjectStore} from './storage/project-store';\nimport {FileTab} from \"./ui/tool-tabs/file-tab\";\nimport {FilterTab} from \"./ui/tool-tabs/filter-tab\";\nimport {imgurUpload} from \"./ui/modals/imgur-upload\";\nimport {loadAgPsd} from \"./storage/ag-psd-wrapper\";\nimport {SaveReminder} from \"./ui/components/save-reminder\";\nimport {SaveToComputer} from \"./storage/save-to-computer\";\nimport {UndoRedoCatchup} from \"./history/undo-redo-catchup\";\nimport {setDbName} from './storage/indexed-db';\nimport {BrushSettingService} from './brushes-ui/brush-setting-service';\nimport {BoxToggle} from './ui/base-components/box-toggle';\nimport {SettingsTab} from './ui/tool-tabs/settings-tab';\nimport {ToolspaceScroller} from './ui/components/toolspace-scroller';\nimport {GradientUi} from './ui/tool-tabs/gradient-ui';\nimport {drawGradient, GradientTool} from './image-operations/gradient-tool';\n\n/**\n * paint tool functionality\n */\nexport const KL = {\n\n    // --- brushes ---\n    brushes,\n    brushesUI,\n    BrushSettingService,\n\n    // --- canvas ---\n    KlCanvas,\n    drawProject,\n\n    // --- canvas ui ---\n    WorkspaceSvgOverlay,\n    KlCanvasWorkspace,\n    KlCanvasPreview,\n\n    // --- filters ---\n    filterLibStatus,\n    filterLib,\n\n    // --- history ---\n    UndoRedoCatchup,\n\n    // --- image operations ---\n    renderText,\n    floodFillBits,\n    ShapeTool,\n    drawShape,\n    GradientTool,\n    drawGradient,\n\n    // --- storage ---\n    PSD,\n    setDbName,\n    indexedDb,\n    ProjectStore,\n    loadAgPsd,\n    SaveToComputer,\n\n    // --- ui - base components ---\n    calcSliderFalloffFactor,\n    Checkbox,\n    input,\n    Select,\n    ImageToggle,\n    ImageRadioList,\n    RadioList,\n    penPressureToggle,\n    KlSlider,\n    HexColorDialog,\n    KlColorSlider,\n    KlSmallColorSlider,\n    PointSlider,\n    ColorOptions,\n    Options,\n    BoxToggle,\n\n    // --- ui - components ---\n    StatusOverlay,\n    CropCopy,\n    FreeTransform,\n    FreeTransformCanvas,\n    Cropper,\n    LayerPreview,\n    FittedImage,\n    KlImageDropper,\n    OverlayToolspace,\n    ToolspaceTopRow,\n    ToolDropdown,\n    ToolspaceToolRow,\n    ToolspaceStabilizerRow,\n    TabRow,\n    ToolspaceCollapser,\n    BrowserStorageUi,\n    SaveReminder,\n    ToolspaceScroller,\n\n    // --- ui - modals ---\n    dialogCounter,\n    popup,\n    Popup,\n    exportDialog,\n    clipboardDialog,\n    showImportAsLayerDialog,\n    newImageDialog,\n    textToolDialog,\n    showImportImageDialog,\n    showIframePopup,\n    imgurUpload,\n\n    // --- ui - tool tabs ---\n    HandUi,\n    FillUi,\n    GradientUi,\n    TextUi,\n    ShapeUi,\n    FileTab,\n    FilterTab,\n    SettingsTab,\n    klLayerManager,\n\n\n    klHistory,\n    DecoyKlHistory,\n};","\nexport interface IHistoryEntry {\n    tool: string[];\n    action?: string;\n    params?: any[];\n\n    actions?: {\n        action: string;\n        params: any[];\n    }[]\n}\n\nexport interface IHistoryBroadcast {\n    bufferUpdate: IHistoryEntry;\n}\n\nexport type IHistoryListener = (p: IHistoryBroadcast | null) => void;\n\nlet historyInstance: boolean = false;\n\nexport interface KlHistoryInterface {\n    pause (b: boolean): void;\n    addListener (l: IHistoryListener): void;\n    push (e: IHistoryEntry): void;\n    undo (): (IHistoryEntry | null)[];\n    redo (): (IHistoryEntry | null)[];\n    getAll (): (IHistoryEntry | null)[];\n    canRedo (): boolean;\n    canUndo (): boolean;\n    getState (): number;\n    getActionNumber (): number;\n}\n\nexport class DecoyKlHistory implements KlHistoryInterface {\n    pause (b: boolean): void {}\n    addListener (l: IHistoryListener): void {}\n    push (e: IHistoryEntry): void {}\n    undo (): (IHistoryEntry | null)[] { return []; }\n    redo (): (IHistoryEntry | null)[] { return []; }\n    getAll (): (IHistoryEntry | null)[] { return []; }\n    canRedo (): boolean { return false; }\n    canUndo (): boolean { return false; }\n    getState (): number { return 0; }\n    getActionNumber (): number { return 0; }\n}\n\nexport class KlHistory implements KlHistoryInterface {\n\n    private state: number; // on .push state increments by one\n    private dataArr: (IHistoryEntry | null)[]; // null if beyond max undo to trigger garbage collection\n    private listeners: IHistoryListener[];\n    private pauseStack: number; // how often paused without unpause\n    private readonly max: number = 20; // max number undo steps\n    private maxState: number; // can't go backwards -> max state is the buffer image(klCanvas)\n    private actionNumber: number; // current action the user is on. untouched document = -1 because dataArr.length is 0\n    \n    private broadcast (p: IHistoryBroadcast | null): void {\n        setTimeout(() => {\n            for (let i = 0; i < this.listeners.length; i++) {\n                this.listeners[i](p);\n            }\n            this.state++;\n        }, 1);\n    }\n    \n    // ---- public ----\n    \n    constructor () {\n        if (historyInstance) {\n            throw new Error('klHistory already instantiated');\n        }\n        historyInstance = true;\n        this.state = 0;\n        this.dataArr = [];\n        this.listeners = [];\n        this.pauseStack = 0;\n        this.maxState = -1;\n        this.actionNumber = -1;\n    }\n\n    /**\n     * you need pause because there are sometimes actions that would cause other\n     * undo steps\n     * for example a filter that does something crazy with two layers and then merges them\n     * you want that to be one undo step, and prevent merging from causing its undo step.\n     * so while that filter is doing its magic you should pause possible undo steps that\n     * are caused by a part of its code(in this example: merging layers)\n     *\n     * @param b\n     */\n    pause (b: boolean): void {\n        if (b === false) {\n            this.pauseStack = Math.max(0, this.pauseStack - 1);\n        } else {\n            this.pauseStack++;\n        }\n    }\n\n    addListener (l: IHistoryListener): void {\n        this.listeners.push(l);\n    }\n\n    push (e: IHistoryEntry): void {\n        if (this.pauseStack > 0) {\n            return;\n        }\n        while (this.actionNumber < this.dataArr.length - 1) {\n            this.dataArr.pop();\n        }\n\n        //taking care of actions that shouldn't cause a new undo step\n        const top = this.dataArr[this.dataArr.length - 1];\n        if (e.action === 'layerOpacity' && top && top.action === 'layerOpacity' && top.params[0] === e.params[0]) {\n            this.dataArr[this.dataArr.length - 1] = e;\n            this.state++; //still needs to increment because something changed\n            return;\n        }\n        if (e.action === 'focusLayer' && top && top.action === 'focusLayer') {\n            this.dataArr[this.dataArr.length - 1] = e;\n            this.state++;\n            return;\n        }\n\n\n        this.dataArr[this.dataArr.length] = e;\n        this.actionNumber = this.dataArr.length - 1;\n        const maxBefore = this.maxState;\n        this.maxState = Math.max(this.maxState, this.actionNumber - this.max);\n        if (maxBefore < this.maxState) {\n            this.broadcast({bufferUpdate: this.dataArr[this.maxState]});\n        } else {\n            this.broadcast(null);\n        }\n        if (this.maxState >= 0) {\n            this.dataArr[this.maxState] = null; //to free some memory...imported images take a lot of space\n        }\n    }\n\n    undo (): (IHistoryEntry | null)[] {\n        let result;\n        if (this.canUndo()) {\n            result = [];\n            for (let i = this.maxState + 1; i < this.actionNumber; i++) {\n                result.push(this.dataArr[i]);\n            }\n            this.actionNumber--;\n            this.broadcast(null);\n        }\n\n        return result;\n    }\n\n    redo (): (IHistoryEntry | null)[] {\n        const result = [];\n        if (this.canRedo()) {\n            this.actionNumber++;\n            result.push(this.dataArr[this.actionNumber]);\n            this.broadcast(null);\n        }\n        return result;\n    }\n\n    getAll (): (IHistoryEntry | null)[] {\n        return [].concat(this.dataArr);\n    }\n\n    canRedo (): boolean {\n        return this.actionNumber < this.dataArr.length - 1;\n    }\n\n    canUndo (): boolean {\n        return this.actionNumber > this.maxState;\n    }\n\n    getState (): number {\n        return this.state;\n    }\n\n    /**\n     * actionNumber - number of undo-able actions a user has done (e.g. if drawn 5 lines total -> 5)\n     */\n    getActionNumber (): number {\n        return (this.actionNumber + 1);\n    }\n    \n}\n\nexport const klHistory = new KlHistory();\n","import {dialogCounter} from './modal-count';\nimport {BB} from '../../../bb/bb';\n// @ts-ignore\nimport checkImg from 'url:~/src/app/img/ui/check.svg';\n// @ts-ignore\nimport cancelImg from 'url:~/src/app/img/ui/cancel.svg';\nimport {LANG} from '../../../language/language';\nimport {IKeyString} from '../../../bb/bb.types';\n\nwindow.onscroll = (e) => {\n    e.preventDefault();\n}\n\nexport function popup (\n    p: {\n        target: HTMLElement;\n        div?: HTMLElement; // node with content\n        message: string; // can be html\n        callback?: (result: string) => void;\n        buttons?: string[]; // \"Ok\", and \"Cancel\" will be automatically translated\n        primaries?: string[];\n        type?: 'error' | 'warning' | 'upload' | 'ok'; // todo\n        closefunc?: (f: () => void) => void; // returns a function you can call to close (Cancel) the dialog\n        style?: IKeyString;\n        clickOnEnter?: string; // name of button - will be clicked if enter key pressed\n        autoFocus?: false | string; // name of  to automatically focus - default 'Ok' - false -> none\n        ignoreBackground?: boolean; // deafult false; if true clicking on background doesn't close\n    }\n): void {\n    dialogCounter.increase();\n    let isClosed = false;\n\n\n    // need this extra layer because chrome mobile otherwise scrolls the page and then glitches as the address bar goes away\n    const rootRootEl = BB.el({\n        parent: document.body,\n        css: {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            right: '0',\n            bottom: '0',\n            overflow: 'hidden',\n        }\n    });\n    const rootEl = BB.el({\n        parent: rootRootEl,\n        className: 'kl-popup',\n    });\n\n    const scrollContent = BB.el({\n        parent: rootEl,\n        css: {\n            width: '100%',\n            minHeight: '100%',\n            // padding: '10px 0',\n            position: 'relative',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            alignItems: 'center',\n        }\n    });\n\n    const bgEl = BB.el({\n        parent: scrollContent,\n        onClick: () => {\n            if (p.ignoreBackground) {\n                return;\n            }\n            close('Cancel');\n        },\n        css: {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            zIndex: '0',\n            width: '100%',\n            height: '100%',\n        }\n    });\n\n    const titleHeight = 40;\n    const xButton = BB.el({\n        tagName: 'button',\n        className: 'popup-x',\n        content: `<img alt=\"${LANG('modal-close')}\" height=\"20\" src=\"${cancelImg}\">`,\n        title: LANG('modal-close'),\n        onClick: () => {\n            close('Cancel');\n        },\n        css: {\n            width: titleHeight + 'px',\n            height: titleHeight + 'px',\n            lineHeight: titleHeight + 'px',\n            position: 'absolute',\n            right: '0',\n            top: '0',\n            background: 'none',\n            boxShadow: 'none',\n        }\n    });\n\n    const boxClasses = ['kl-popup-box'];\n    boxClasses.push('kl-popup-box--sm');\n    const boxEl = BB.el({\n        content: [\n            xButton,\n            BB.el({\n                content:p.message,\n                css: {\n                    marginBottom: p.div ? '10px' : null,\n                    marginRight: '15px',\n                }\n            }),\n            p.div,\n        ],\n        className: boxClasses.join(' '),\n        css: p.style ? p.style : null,\n    });\n\n    scrollContent.append(\n        BB.el({\n            css: {\n                flex: '0.5',\n            }\n        }),\n        boxEl,\n        BB.el({\n            css: {\n                flex: '1',\n            }\n        })\n    );\n\n    if (p.type === 'error') {\n        boxEl.classList.add('poperror');\n    }\n    if (p.type === 'ok') {\n        boxEl.classList.add('popok');\n    }\n    if (p.type === 'warning') {\n        boxEl.classList.add('popwarning');\n    }\n    if (p.type === 'upload') {\n        boxEl.classList.add('popupload');\n    }\n\n    const keyListener = new BB.KeyListener({\n        onDown: function(keyStr, e, comboStr) {\n            if (isClosed) {\n                return;\n            }\n            if (clickOnEnterBtn && comboStr === 'enter' && !BB.isInputFocused()) {\n                e.stopPropagation();\n                setTimeout(function() {\n                    clickOnEnterBtn.click();\n                }, 10);\n            }\n            if (comboStr === 'esc') {\n                e.stopPropagation();\n                close('Cancel');\n            }\n        }\n    });\n    // prevent ctrl scroll -> zooming page\n    const wheelPrevent = (event) => {\n        if (keyListener.isPressed('ctrl')) {\n            event.preventDefault();\n        }\n    };\n    BB.addEventListener(rootEl, 'wheel', wheelPrevent);\n    rootEl.onclick = BB.handleClick;\n\n    let autoFocus = null;\n    if (p.autoFocus) {\n        autoFocus = p.autoFocus;\n    } else if (p.autoFocus === false) {\n        autoFocus = null;\n    } else {\n        autoFocus = 'Ok';\n    }\n\n    const buttonRowEl = p.buttons && p.buttons.length > 0 ? BB.el({\n        parent: boxEl,\n        css: {\n            display: 'flex',\n            flexWrap: 'wrap',\n            justifyContent: 'flex-end',\n            marginTop: '12px', // 8px already via buttons\n            marginLeft: '-8px',\n        }\n    }) : null;\n    let clickOnEnterBtn;\n    const btnElArr = [];\n    if (p.buttons) {\n        p.buttons.forEach(buttonName => {\n            const btnClasses = ['kl-popup__btn'];\n            if (buttonName === 'Ok' || (p.primaries && p.primaries.includes(buttonName))) {\n                btnClasses.push('kl-button-primary');\n            }\n            let iconUrl;\n            let label = buttonName;\n            if (buttonName === 'Ok') {\n                label = LANG('modal-ok');\n                iconUrl = checkImg;\n            }\n            if (buttonName === 'Cancel') {\n                label = LANG('modal-cancel');\n                iconUrl = cancelImg;\n            }\n            let iconImg = null;\n            if (iconUrl) {\n                iconImg = BB.el({\n                    tagName: 'img',\n                    custom: {\n                        src: iconUrl,\n                        height: '17',\n                    }\n                });\n            }\n            const btn = BB.el({\n                parent: buttonRowEl,\n                tagName: 'button',\n                className: btnClasses.join(' '),\n                content: [iconImg, label],\n                onClick: () => {\n                    close(buttonName);\n                },\n            });\n            btnElArr.push(btn);\n            if (autoFocus === buttonName) {\n                setTimeout(() => {\n                    btn.focus();\n                    rootEl.scrollTo(0, 0);\n                }, 10);\n                setTimeout(() => {\n                    // safari needs a separate timeout\n                    rootEl.scrollTo(0, 0);\n                }, 20);\n            }\n            if (buttonName === p.clickOnEnter) {\n                clickOnEnterBtn = btn;\n            }\n        });\n    }\n\n    function close (value: string) {\n        if (isClosed) {\n            return;\n        }\n\n        isClosed = true;\n        BB.clearSelection();\n        BB.unfocusAnyInput();\n        document.body.removeChild(rootRootEl);\n        dialogCounter.decrease();\n        BB.destroyEl(xButton);\n        BB.destroyEl(bgEl);\n        keyListener.destroy();\n        BB.removeEventListener(rootEl, 'wheel', wheelPrevent);\n        rootEl.onclick = null;\n        btnElArr.forEach(item => {\n            BB.destroyEl(item);\n        });\n        btnElArr.splice(0, btnElArr.length);\n\n        if (p.callback) {\n            p.callback(value);\n        }\n    }\n\n    if (p.closefunc) {\n        p.closefunc(function () {\n            close('Cancel');\n        });\n    }\n\n}\n\n\n/**\n * popups that fill whole height, with some padding.\n * currently only used for iframe popups.\n *\n * p = {\n *      title: DOM Element | string, // optional (todo allow string)\n *      icon: 'ok', // optional todo\n *      content: DOM Element, // optional\n *      buttonArr: [ // optional todo\n *          'Ok',\n *          'Cancel'\n *      ],\n *      autoFocus: string | false, //todo\n *      clickOnEnter: string, //todo\n *      onClose: function(result: string), // optional (todo result)\n *\n *      //size and position\n *      width: 500,\n *      isMaxHeight: boolean //todo, currently always true\n * }\n *\n * @param p\n * @constructor\n */\nexport const Popup = function(p) {\n    dialogCounter.increase();\n    const parent = document.body;\n    const div = BB.el({\n        parent: parent,\n        className: 'g-root',\n        css: {\n            position: 'fixed',\n            left: '0',\n            top: '0',\n            bottom: '0',\n            right: '0',\n            background: 'rgba(0, 0, 0, 0.45)',\n            overflow: 'auto',\n            animationName: 'consoleIn',\n            animationDuration: '0.3s',\n            animationTimingFunction: 'ease-out'\n        }\n    });\n    div.onclick = BB.handleClick;\n\n    let updateInterval;\n\n    function close() {\n        dialogCounter.decrease();\n        div.onclick = null;\n        parent.removeChild(div);\n        clearInterval(updateInterval);\n        window.removeEventListener('resize', updatePos);\n        keyListener.destroy();\n        BB.destroyEl(xButton);\n        BB.destroyEl(bgEl);\n        if (p.onClose) {\n            p.onClose();\n        }\n    }\n\n    //background element registering clicks\n    const bgEl = BB.el({\n        parent: div,\n        css: {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            bottom: '0',\n            right: '0'\n        },\n        onClick: close\n    });\n\n    //the actual popup box\n    const popupEl = BB.el({\n        parent: div,\n        css: {\n            position: 'absolute',\n            width: (BB.isCssMinMaxSupported() ?\n                'min(calc(100% - 40px), ' + (p.width ? p.width : 400) + 'px)' :\n                (p.width ? p.width : 400) + 'px'),\n            height: 'calc(100% - 40px)',\n            background: '#eee',\n            borderRadius: '10px',\n            overflow: 'hidden',\n            boxShadow: 'rgba(0, 0, 0, 0.25) 0px 5px 60px'\n        }\n    });\n\n    //x and y position via script. flex not powerful enough imo\n    function updatePos() {\n        const elW = popupEl.offsetWidth;\n        const elH = popupEl.offsetHeight;\n\n        BB.css(popupEl, {\n            left: Math.max(0, (window.innerWidth - elW) / 2) + 'px',\n            top: Math.max(20, (window.innerHeight - elH) / 2 - (elH * 0.20)) + 'px'\n        });\n    }\n    //todo also update when popup changes size - resizeobserver and fallback\n    //updateInterval = setInterval(updatePos, 100);\n    updatePos();\n    window.addEventListener('resize', updatePos);\n\n    //title row in popup\n    const titleHeight = 40;\n    const titleEl = BB.el({\n        parent: popupEl,\n        css: {\n            height: titleHeight + 'px',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            paddingLeft: (titleHeight / 2) + 'px'\n        }\n    });\n    if (p.title) {\n        titleEl.appendChild(p.title);\n    }\n    const xButton = BB.el({\n        parent: titleEl,\n        tagName: 'button',\n        className: 'popup-x',\n        content: `<img alt=\"${LANG('modal-close')}\" height=\"20\" src=\"${cancelImg}\">`,\n        title: LANG('modal-close'),\n        onClick: close,\n        css: {\n            width: titleHeight + 'px',\n            height: titleHeight + 'px',\n            lineHeight: titleHeight + 'px',\n            background: 'none',\n            boxShadow: 'none',\n        },\n        custom: {\n            tabindex: '0',\n        }\n    });\n\n    const contentEl = BB.el({\n        parent: popupEl,\n        css: {\n            height: 'calc(100% - ' + titleHeight + 'px)'\n        }\n    });\n    if (p.content) {\n        contentEl.appendChild(p.content);\n    }\n\n    const keyListener = new BB.KeyListener({\n        onDown: function(keyStr, e) {\n            if (keyStr === 'esc') {\n                e.stopPropagation();\n                close();\n            }\n        }\n    });\n\n\n    // --- interface ---\n    this.close = function() {\n        close();\n    };\n};","\n// not the best\n\n/**\n * how many modals are open\n */\n\nexport class DialogCounter {\n    private listeners: ((v: number) => void)[] = [];\n    private count = 0;\n\n    private emit (): void {\n        this.listeners.forEach(item => {\n            item(this.count);\n        });\n    }\n\n    increase (v?: number): void {\n        if (v !== undefined) {\n            this.count += v;\n        } else {\n            this.count++;\n        }\n        this.emit();\n    }\n    decrease (v?: number): void {\n        if (v !== undefined) {\n            this.count -= v;\n        } else {\n            this.count--;\n        }\n        this.emit();\n    }\n    get (): number {\n        return this.count;\n    }\n    subscribe (listener: (v: number) => void): void {\n        this.listeners.push(listener);\n    }\n}\n\nexport const dialogCounter = new DialogCounter();\n","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"check.04f6f8b0.svg\" + \"?\" + Date.now();","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"cancel.8f01fb7c.svg\" + \"?\" + Date.now();","// @ts-ignore\nimport {english, languages, loadLanguage, TTranslationCode} from '../../languages/languages';\n\nexport const LS_LANGUAGE_KEY = 'klecks-language';\n\nexport class LanguageStrings {\n    private data: any;\n    private listeners: (() => void)[] = [];\n    private code: string;\n\n    // --- public ----\n    constructor () {\n        // need to use setLanguage for a different language\n        this.data = {...english};\n        this.code = 'en';\n    }\n\n    async setLanguage (langCode: string): Promise<void> {\n        if (langCode === 'en') {\n            this.data = {...english};\n        } else {\n            this.data = {...english, ...(await loadLanguage(langCode))};\n        }\n        this.code = langCode;\n        document.documentElement.setAttribute(\"lang\", langCode);\n        this.listeners.forEach(item => {\n            item();\n        });\n    }\n\n    get (code: TTranslationCode): string {\n        if (!(code in this.data)) {\n            throw new Error('translation code doesn\\'t exist: ' + code);\n        }\n        return this.data[code];\n    }\n\n    getLanguage (): {code: string; name: string} {\n        return languages.find(item => {\n            return item.code === this.code;\n        })\n    }\n\n    getCode (): string {\n        return this.code;\n    }\n\n    // get notified on language change\n    subscribe (subscriber: () => void) {\n        if (this.listeners.includes(subscriber)) {\n            return;\n        }\n        this.listeners.push(subscriber);\n    }\n\n    unsubscribe (subscriber: () => void) {\n        for (let i = 0; i < this.listeners.length; i++) {\n            if (subscriber === this.listeners[i]) {\n                this.listeners.splice(i, 1);\n                return;\n            }\n        }\n    }\n}\n\nlet activeLanguageCode: string = 'en'; // active language code\n{\n    const langs: string[] = []; // from highest to lowest priority\n    const navLangs = navigator.languages ? navigator.languages : [navigator.language];\n    navLangs.forEach(item => {\n        const split = item.split('-');\n        langs.push(item);\n        if (split.length === 2) {\n            langs.push(split[0]);\n        }\n    });\n    try {\n        if (localStorage.getItem(LS_LANGUAGE_KEY)) {\n            langs.unshift(localStorage.getItem(LS_LANGUAGE_KEY));\n        }\n    } catch (e) {\n        // likely cookies disabled in Safari\n    }\n    for (let i = 0; i < langs.length; i++) {\n        const lang = langs[i];\n        const found = languages.find(item => {\n            return item.code.toLowerCase() === lang.toLowerCase();\n        });\n        if (found) {\n            activeLanguageCode = found.code;\n            break;\n        }\n    }\n}\n\nexport const languageStrings = new LanguageStrings();\n\nexport const LANG = (code: TTranslationCode | null, replace?: {[key: string]: string}): string => {\n    if (replace) {\n        let result = languageStrings.get(code);\n        const keyArr = Object.keys(replace);\n        keyArr.forEach(key => {\n            result = result.replace(`{${key}}`, replace[key]);\n        });\n        return result;\n    } else {\n        return languageStrings.get(code);\n    }\n};\n\nexport const initLANG = () => languageStrings.setLanguage(activeLanguageCode);","// generated from src/languages. \"npm run lang:build\" to update\n\n// @ts-ignore\nimport dataEn from './en.json';\n\nexport const english = dataEn;\nexport const languages: {code: string; name: string}[] = [\n    {\n        code: 'en',\n        name: 'English',\n    },\n    {\n        code: 'de',\n        name: 'Deutsch',\n    },\n    {\n        code: 'ja',\n        name: '',\n    },\n    {\n        code: 'zh-CN',\n        name: '',\n    },\n    {\n        code: 'zh-TW',\n        name: '',\n    }\n];\nexport const loadLanguage = async (code: string) => {\n    if (code === 'en') {\n        return english;\n    } else if (code === 'de') {\n        // @ts-ignore\n        return await import('./de.json');\n    } else if (code === 'ja') {\n        // @ts-ignore\n        return await import('./ja.json');\n    } else if (code === 'zh-CN') {\n        // @ts-ignore\n        return await import('./zh-CN.json');\n    } else if (code === 'zh-TW') {\n        // @ts-ignore\n        return await import('./zh-TW.json');\n    }\n    throw new Error('unknown language code');\n};\n\nexport type TTranslationCode = \"switch-ui-left-right\" | // Switch left/right UI\n    \"toggle-show-tools\" | // Show/Hide Tools\n    \"scroll\" | // Scroll\n    \"donate\" | // Donate\n    \"home\" | // Home\n    \"modal-new-tab\" | // Open in new tab\n    \"tab-layers\" | // Layers\n    \"tab-edit\" | // Edit\n    \"tab-file\" | // File\n    \"tool-brush\" | // Brush\n    \"tool-paint-bucket\" | // Paint Bucket\n    \"tool-gradient\" | // Gradient\n    \"tool-shape\" | // Shape\n    \"tool-text\" | // Text\n    \"tool-hand\" | // Hand Tool\n    \"tool-zoom\" | // Zoom\n    \"tool-undo-redo\" | // Undo / Redo\n    \"undo\" | // Undo\n    \"redo\" | // Redo\n    \"brush-pen\" | // Pen\n    \"brush-blend\" | // Blend\n    \"brush-sketchy\" | // Sketchy\n    \"brush-pixel\" | // Pixel\n    \"brush-chemy\" | // Chemy\n    \"brush-smudge\" | // Smudge\n    \"brush-size\" | // Size\n    \"brush-blending\" | // Blending\n    \"brush-toggle-pressure\" | // Toggle Pressure Sensitivity\n    \"brush-pen-circle\" | // Circle\n    \"brush-pen-chalk\" | // Chalk\n    \"brush-pen-calligraphy\" | // Calligraphy\n    \"brush-pen-square\" | // Square\n    \"brush-sketchy-scale\" | // Scale\n    \"brush-pixel-dither\" | // Dither\n    \"brush-chemy-fill\" | // Fill\n    \"brush-chemy-stroke\" | // Stroke\n    \"brush-chemy-mirror-x\" | // Horizontal Symmetry\n    \"brush-chemy-mirror-y\" | // Vertical Symmetry\n    \"brush-chemy-gradient\" | // Gradient\n    \"brush-eraser-transparent-bg\" | // Transparent Background\n    \"stabilizer\" | // Stabilizer\n    \"stabilizer-title\" | // Stroke Stabilizer\n    \"eyedropper\" | // Eyedropper\n    \"secondary-color\" | // Secondary Color\n    \"manual-color-input\" | // Manual Color Input\n    \"mci-hex\" | // Hex\n    \"mci-copy\" | // Copy\n    \"modal-ok\" | // Ok\n    \"modal-cancel\" | // Cancel\n    \"modal-close\" | // Close\n    \"layers-active-layer\" | // Active Layer\n    \"layers-layer\" | // Layer\n    \"layers-copy\" | // copy\n    \"layers-blending\" | // Blending\n    \"layers-new\" | // New Layer\n    \"layers-remove\" | // Remove Layer\n    \"layers-duplicate\" | // Duplicate Layer\n    \"layers-merge\" | // Merge with layer below\n    \"layers-rename\" | // Rename\n    \"layers-blend-normal\" | // normal\n    \"layers-blend-darken\" | // darken\n    \"layers-blend-multiply\" | // multiply\n    \"layers-blend-color-burn\" | // color burn\n    \"layers-blend-lighten\" | // lighten\n    \"layers-blend-screen\" | // screen\n    \"layers-blend-color-dodge\" | // color dodge\n    \"layers-blend-overlay\" | // overlay\n    \"layers-blend-soft-light\" | // soft light\n    \"layers-blend-hard-light\" | // hard light\n    \"layers-blend-difference\" | // difference\n    \"layers-blend-exclusion\" | // exclusion\n    \"layers-blend-hue\" | // hue\n    \"layers-blend-saturation\" | // saturation\n    \"layers-blend-color\" | // color\n    \"layers-blend-luminosity\" | // luminosity\n    \"layers-rename-title\" | // Rename Layer\n    \"layers-rename-name\" | // Name\n    \"layers-rename-clear\" | // Clear Name\n    \"layers-rename-sketch\" | // Sketch\n    \"layers-rename-colors\" | // Colors\n    \"layers-rename-shading\" | // Shading\n    \"layers-rename-lines\" | // Lines\n    \"layers-rename-effects\" | // Effects\n    \"layers-rename-foreground\" | // Foreground\n    \"layers-merge-modal-title\" | // Merge/Mix Layers\n    \"layers-merge-description\" | // Merges the selected layer with the one underneath. Select the mix mode:\n    \"file-no-autosave\" | // No autosave, no cloud storage\n    \"file-new\" | // New\n    \"file-import\" | // Import\n    \"file-save\" | // Save\n    \"file-save-png\" | // Save PNG\n    \"file-save-psd\" | // Save PSD\n    \"file-save-layers\" | // Save Layers\n    \"file-copy\" | // Copy\n    \"file-copy-title\" | // Copy To Clipboard\n    \"file-share\" | // Share\n    \"file-storage\" | // Browser Storage\n    \"file-storage-thumb-title\" | // Restores when reopening page\n    \"file-storage-about\" | // About Browser Storage\n    \"file-storage-cant-access\" | // Can't access\n    \"file-storage-empty\" | // Empty\n    \"file-storage-store\" | // Store\n    \"file-storage-clear\" | // Clear\n    \"file-storage-storing\" | // Storing\n    \"file-storage-overwrite\" | // Overwrite\n    \"file-storage-min-ago\" | // {x}min ago\n    \"file-storage-hours-ago\" | // {x}h ago\n    \"file-storage-days-ago\" | // {x}d ago\n    \"file-storage-month-ago\" | // > 1month ago\n    \"file-storage-restored\" | // Restored from Browser Storage\n    \"file-storage-stored\" | // Stored to Browser Storage\n    \"file-storage-failed\" | // Failed to store to Browser Storage\n    \"file-storage-failed-1\" | // Failed to store. Possible causes:\n    \"file-storage-failed-2\" | // Out of disk space\n    \"file-storage-failed-3\" | // Storage disabled in incognito tab\n    \"file-storage-failed-4\" | // Browser doesn't support storage\n    \"file-storage-failed-clear\" | // Failed to clear.\n    \"file-upload\" | // Upload\n    \"cleared-layer\" | // Cleared layer\n    \"filled\" | // Filled\n    \"new-title\" | // New Image\n    \"new-current\" | // Current\n    \"new-fit\" | // Fit\n    \"new-oversize\" | // Oversize\n    \"new-square\" | // Square\n    \"new-landscape\" | // Landscape\n    \"new-portrait\" | // Portrait\n    \"new-screen\" | // Screen\n    \"new-video\" | // Video\n    \"new-din-paper\" | // DIN Paper\n    \"new-px\" | // px\n    \"new-ratio\" | // Ratio\n    \"upload-title\" | // Upload to Imgur\n    \"upload-link-notice\" | // Anyone with the link to your uploaded image will be able to view it.\n    \"upload-name\" | // Title\n    \"upload-title-untitled\" | // Untitled\n    \"upload-caption\" | // Caption\n    \"upload-tos\" | // Terms of Service\n    \"upload-tos-2\" | // for imgur.com\n    \"upload-submit\" | // Upload\n    \"upload-uploading\" | // Uploading...\n    \"upload-success\" | // Upload Successful\n    \"upload-failed\" | // Upload failed.\n    \"upload-delete\" | // To delete your image from Imgur visit:\n    \"cropcopy-title-copy\" | // Copy To Clipboard\n    \"cropcopy-title-crop\" | // Crop\n    \"cropcopy-click-hold\" | // Right-click or press hold to copy.\n    \"cropcopy-btn-copy\" | // To Clipboard\n    \"cropcopy-copied\" | // Copied.\n    \"cropcopy-btn-crop\" | // Apply Crop\n    \"crop-drag-to-crop\" | // Drag to crop\n    \"filter-crop-extend\" | // Crop/Extend\n    \"filter-flip\" | // Flip\n    \"filter-perspective\" | // Perspective\n    \"filter-resize\" | // Resize\n    \"filter-rotate\" | // Rotate\n    \"filter-transform\" | // Transform\n    \"filter-bright-contrast\" | // Bright/Contrast\n    \"filter-curves\" | // Curves\n    \"filter-hue-sat\" | // Hue/Saturation\n    \"filter-invert\" | // Invert\n    \"filter-tilt-shift\" | // Tilt Shift\n    \"filter-to-alpha\" | // To Alpha\n    \"filter-triangle-blur\" | // Triangle Blur\n    \"filter-unsharp-mask\" | // Unsharp Mask\n    \"filter-crop-title\" | // Crop / Extend\n    \"filter-crop-description\" | // Crop or extend the image.\n    \"filter-crop-left\" | // Left\n    \"filter-crop-right\" | // Right\n    \"filter-crop-top\" | // Top\n    \"filter-crop-bottom\" | // Bottom\n    \"filter-crop-rule-thirds\" | // Rule of Thirds\n    \"filter-crop-fill\" | // Fill\n    \"filter-flip-title\" | // Flip\n    \"filter-flip-description\" | // Flips layer or whole image.\n    \"filter-flip-horizontal\" | // Horizontal\n    \"filter-flip-vertical\" | // Vertical\n    \"filter-flip-image\" | // Flip Image\n    \"filter-flip-layer\" | // Flip Layer\n    \"filter-perspective-title\" | // Perspective\n    \"filter-perspective-description\" | // Transforms the selected layer.\n    \"filter-resize-title\" | // Resize\n    \"filter-resize-description\" | // Resizes the image.\n    \"filter-rotate-title\" | // Rotate\n    \"filter-rotate-description\" | // Rotates the image.\n    \"filter-transform-empty\" | // Layer is empty.\n    \"filter-transform-title\" | // Transform\n    \"filter-transform-description\" | // Transforms selected layer. Hold Shift for additional behavior.\n    \"filter-transform-rotation\" | // Rotation\n    \"filter-transform-flip\" | // Flip\n    \"filter-transform-center\" | // Center\n    \"filter-transform-constrain\" | // Constrain\n    \"filter-transform-snap\" | // Snap\n    \"filter-transform-snap-title\" | // Snap Rotation And Position\n    \"filter-bright-contrast-title\" | // Brightness / Contrast\n    \"filter-bright-contrast-description\" | // Change brightness and contrast for the selected layer.\n    \"filter-bright-contrast-brightness\" | // Brightness\n    \"filter-bright-contrast-contrast\" | // Contrast\n    \"filter-curves-title\" | // Curves\n    \"filter-curves-description\" | // Apply curves on the selected layer.\n    \"filter-curves-all\" | // All\n    \"filter-hue-sat-title\" | // Hue / Saturation\n    \"filter-hue-sat-description\" | // Change hue and saturation for the selected layer.\n    \"filter-hue-sat-hue\" | // Hue\n    \"filter-hue-sat-saturation\" | // Saturation\n    \"filter-applied\" | // applied\n    \"filter-tilt-shift-title\" | // Tilt Shift\n    \"filter-tilt-shift-description\" | // Applies tilt shift on the selected layer.\n    \"filter-tilt-shift-blur\" | // Blur Radius\n    \"filter-tilt-shift-gradient\" | // Gradient Radius\n    \"filter-to-alpha-title\" | // To Alpha\n    \"filter-to-alpha-description\" | // Generates alpha channel for selected layer from:\n    \"filter-to-alpha-inverted-lum\" | // Inverted Luminance\n    \"filter-to-alpha-lum\" | // Luminance\n    \"filter-to-alpha-replace\" | // Replace RGB\n    \"filter-triangle-blur-title\" | // Triangle Blur\n    \"filter-triangle-blur-description\" | // Applies triangle blur on the selected layer.\n    \"filter-unsharp-mask-title\" | // Unsharp Mask\n    \"filter-unsharp-mask-description\" | // Sharpens the selected layer by scaling pixels away from the average of their neighbors.\n    \"filter-unsharp-mask-strength\" | // Strength\n    \"filter-grid\" | // Grid\n    \"filter-grid-description\" | // Draws grid on selected layer.\n    \"filter-noise\" | // Noise\n    \"filter-noise-description\" | // Adds noise to selected layer.\n    \"filter-noise-scale\" | // Scale\n    \"filter-noise-alpha\" | // Alpha\n    \"filter-pattern\" | // Pattern\n    \"filter-pattern-description\" | // Generates pattern on selected layer. Drag the preview for further controls.\n    \"filter-distort\" | // Distort\n    \"filter-distort-description\" | // Distorts the selected layer.\n    \"filter-distort-phase\" | // Phase\n    \"filter-distort-stepsize\" | // Step Size\n    \"filter-distort-sync-xy\" | // Sync XY\n    \"filter-vanish-point\" | // Vanish Point\n    \"filter-vanish-point-title\" | // Vanishing Point\n    \"filter-vanish-point-description\" | // Adds vanishing point to selected layer. Drag preview to move.\n    \"filter-vanish-point-lines\" | // Lines\n    \"import-opening\" | // Opening file...\n    \"import-title\" | // Import Image\n    \"import-too-large\" | // Image too large, will be downscaled.\n    \"import-btn-as-layer\" | // As Layer\n    \"import-btn-as-image\" | // As Image\n    \"import-as-layer-title\" | // Import Image as New Layer\n    \"import-as-layer-description\" | // Adjust the position of the imported image.\n    \"import-as-layer-limit-reached\" | // Layer limit reached. Image will be placed on existing layer.\n    \"import-as-layer-fit\" | // Fit\n    \"import-flatten\" | // Flatten image\n    \"import-unsupported-file\" | // Unsupported file type. See Help for supported types.\n    \"import-broken-file\" | // Couldn't load image. File might be corrupted.\n    \"import-psd-unsupported\" | // Unsupported features. PSD had to be flattened.\n    \"import-psd-limited-support\" | // PSD support is limited. Flattened will more likely look correct.\n    \"import-psd-too-large\" | // Image exceeds maximum dimensions of {x} x {x} pixels. Unable to import.\n    \"import-psd-size\" | // Image size\n    \"hand-reset\" | // Reset\n    \"hand-fit\" | // Fit\n    \"bucket-tolerance\" | // Tolerance\n    \"bucket-sample\" | // Sample\n    \"bucket-sample-title\" | // Which layers to sample color from\n    \"bucket-sample-all\" | // All\n    \"bucket-sample-active\" | // Active\n    \"bucket-sample-above\" | // Above\n    \"bucket-grow\" | // Grow\n    \"bucket-grow-title\" | // Grow filled area (in pixels)\n    \"bucket-contiguous\" | // Contiguous\n    \"bucket-contiguous-title\" | // Only fill connected areas\n    \"gradient-linear\" | // Linear\n    \"gradient-linear-mirror\" | // Linear-Mirror\n    \"gradient-radial\" | // Radial\n    \"shape-stroke\" | // Stroke\n    \"shape-fill\" | // Fill\n    \"shape-rect\" | // Rectangle\n    \"shape-ellipse\" | // Ellipse\n    \"shape-line\" | // Line\n    \"shape-line-width\" | // Line Width\n    \"shape-outwards\" | // Outwards\n    \"shape-fixed\" | // Fixed 1:1\n    \"text-instruction\" | // Click canvas to place text\n    \"text-title\" | // Add Text\n    \"text-placeholder\" | // Your text (multiline Shift+Enter)\n    \"text-color\" | // Color\n    \"text-size\" | // Size\n    \"text-left\" | // Left\n    \"text-center\" | // Center\n    \"text-right\" | // Right\n    \"text-italic\" | // Italic\n    \"text-bold\" | // Bold\n    \"save-reminder-title\" | // Unsaved Work\n    \"save-reminder-text\" | // Image was not saved in {a} minutes{b}. Save now to prevent eventual loss.\n    \"save-reminder-save-psd\" | // Save As PSD\n    \"save-reminder-psd-layers\" | // PSD will remember all layers.\n    \"submit\" | // Submit\n    \"submit-title\" | // Submit Drawing\n    \"submit-prompt\" | // Submit drawing?\n    \"submit-submitting\" | // Submitting\n    \"embed-init-loading\" | // Loading app\n    \"embed-init-waiting\" | // Waiting for image\n    \"unsaved\" | // Unsaved\n    \"help\" | // Help\n    \"tab-settings\" | // Settings\n    \"settings-language\" | // Language\n    \"settings-preferred-language\" | // Preferred Language\n    \"settings-language-reload\" | // Will update after reloading.\n    \"licenses\" | // Licenses\n    \"source-code\" | // Source Code\n    \"auto\" | // auto\n    \"zoom-in\" | // Zoom In\n    \"zoom-out\" | // Zoom Out\n    \"radius\" | // Radius\n    \"constrain-proportions\" | // Constrain Proportions\n    \"width\" | // Width\n    \"height\" | // Height\n    \"opacity\" | // Opacity\n    \"red\" | // Red\n    \"green\" | // Green\n    \"blue\" | // Blue\n    \"eraser\" | // Eraser\n    \"center\" | // Center\n    \"background\" | // Background\n    \"scaling-algorithm\" | // Scaling Algorithm\n    \"algorithm-smooth\" | // Smooth\n    \"algorithm-pixelated\" | // Pixelated\n    \"preview\" | // Preview\n    \"angle-snap\" | // Snap\n    \"angle-snap-title\" | // 45 Angle Snapping\n    \"lock-alpha\" | // Lock Alpha\n    \"lock-alpha-title\" | // Locks layer's alpha channel\n    \"reverse\" | // Reverse\n    \"compare-before\" | // Before\n    \"compare-after\"; // After\n","{\"switch-ui-left-right\":\"Switch left/right UI\",\"toggle-show-tools\":\"Show/Hide Tools\",\"scroll\":\"Scroll\",\"donate\":\"Donate\",\"home\":\"Home\",\"modal-new-tab\":\"Open in new tab\",\"tab-layers\":\"Layers\",\"tab-edit\":\"Edit\",\"tab-file\":\"File\",\"tool-brush\":\"Brush\",\"tool-paint-bucket\":\"Paint Bucket\",\"tool-gradient\":\"Gradient\",\"tool-shape\":\"Shape\",\"tool-text\":\"Text\",\"tool-hand\":\"Hand Tool\",\"tool-zoom\":\"Zoom\",\"tool-undo-redo\":\"Undo / Redo\",\"undo\":\"Undo\",\"redo\":\"Redo\",\"brush-pen\":\"Pen\",\"brush-blend\":\"Blend\",\"brush-sketchy\":\"Sketchy\",\"brush-pixel\":\"Pixel\",\"brush-chemy\":\"Chemy\",\"brush-smudge\":\"Smudge\",\"brush-size\":\"Size\",\"brush-blending\":\"Blending\",\"brush-toggle-pressure\":\"Toggle Pressure Sensitivity\",\"brush-pen-circle\":\"Circle\",\"brush-pen-chalk\":\"Chalk\",\"brush-pen-calligraphy\":\"Calligraphy\",\"brush-pen-square\":\"Square\",\"brush-sketchy-scale\":\"Scale\",\"brush-pixel-dither\":\"Dither\",\"brush-chemy-fill\":\"Fill\",\"brush-chemy-stroke\":\"Stroke\",\"brush-chemy-mirror-x\":\"Horizontal Symmetry\",\"brush-chemy-mirror-y\":\"Vertical Symmetry\",\"brush-chemy-gradient\":\"Gradient\",\"brush-eraser-transparent-bg\":\"Transparent Background\",\"stabilizer\":\"Stabilizer\",\"stabilizer-title\":\"Stroke Stabilizer\",\"eyedropper\":\"Eyedropper\",\"secondary-color\":\"Secondary Color\",\"manual-color-input\":\"Manual Color Input\",\"mci-hex\":\"Hex\",\"mci-copy\":\"Copy\",\"modal-ok\":\"Ok\",\"modal-cancel\":\"Cancel\",\"modal-close\":\"Close\",\"layers-active-layer\":\"Active Layer\",\"layers-layer\":\"Layer\",\"layers-copy\":\"copy\",\"layers-blending\":\"Blending\",\"layers-new\":\"New Layer\",\"layers-remove\":\"Remove Layer\",\"layers-duplicate\":\"Duplicate Layer\",\"layers-merge\":\"Merge with layer below\",\"layers-rename\":\"Rename\",\"layers-blend-normal\":\"normal\",\"layers-blend-darken\":\"darken\",\"layers-blend-multiply\":\"multiply\",\"layers-blend-color-burn\":\"color burn\",\"layers-blend-lighten\":\"lighten\",\"layers-blend-screen\":\"screen\",\"layers-blend-color-dodge\":\"color dodge\",\"layers-blend-overlay\":\"overlay\",\"layers-blend-soft-light\":\"soft light\",\"layers-blend-hard-light\":\"hard light\",\"layers-blend-difference\":\"difference\",\"layers-blend-exclusion\":\"exclusion\",\"layers-blend-hue\":\"hue\",\"layers-blend-saturation\":\"saturation\",\"layers-blend-color\":\"color\",\"layers-blend-luminosity\":\"luminosity\",\"layers-rename-title\":\"Rename Layer\",\"layers-rename-name\":\"Name\",\"layers-rename-clear\":\"Clear Name\",\"layers-rename-sketch\":\"Sketch\",\"layers-rename-colors\":\"Colors\",\"layers-rename-shading\":\"Shading\",\"layers-rename-lines\":\"Lines\",\"layers-rename-effects\":\"Effects\",\"layers-rename-foreground\":\"Foreground\",\"layers-merge-modal-title\":\"Merge/Mix Layers\",\"layers-merge-description\":\"Merges the selected layer with the one underneath. Select the mix mode:\",\"file-no-autosave\":\"No autosave, no cloud storage\",\"file-new\":\"New\",\"file-import\":\"Import\",\"file-save\":\"Save\",\"file-save-png\":\"Save PNG\",\"file-save-psd\":\"Save PSD\",\"file-save-layers\":\"Save Layers\",\"file-copy\":\"Copy\",\"file-copy-title\":\"Copy To Clipboard\",\"file-share\":\"Share\",\"file-storage\":\"Browser Storage\",\"file-storage-thumb-title\":\"Restores when reopening page\",\"file-storage-about\":\"About Browser Storage\",\"file-storage-cant-access\":\"Can't access\",\"file-storage-empty\":\"Empty\",\"file-storage-store\":\"Store\",\"file-storage-clear\":\"Clear\",\"file-storage-storing\":\"Storing\",\"file-storage-overwrite\":\"Overwrite\",\"file-storage-min-ago\":\"{x}min ago\",\"file-storage-hours-ago\":\"{x}h ago\",\"file-storage-days-ago\":\"{x}d ago\",\"file-storage-month-ago\":\"> 1month ago\",\"file-storage-restored\":\"Restored from Browser Storage\",\"file-storage-stored\":\"Stored to Browser Storage\",\"file-storage-failed\":\"Failed to store to Browser Storage\",\"file-storage-failed-1\":\"Failed to store. Possible causes:\",\"file-storage-failed-2\":\"Out of disk space\",\"file-storage-failed-3\":\"Storage disabled in incognito tab\",\"file-storage-failed-4\":\"Browser doesn't support storage\",\"file-storage-failed-clear\":\"Failed to clear.\",\"file-upload\":\"Upload\",\"cleared-layer\":\"Cleared layer\",\"filled\":\"Filled\",\"new-title\":\"New Image\",\"new-current\":\"Current\",\"new-fit\":\"Fit\",\"new-oversize\":\"Oversize\",\"new-square\":\"Square\",\"new-landscape\":\"Landscape\",\"new-portrait\":\"Portrait\",\"new-screen\":\"Screen\",\"new-video\":\"Video\",\"new-din-paper\":\"DIN Paper\",\"new-px\":\"px\",\"new-ratio\":\"Ratio\",\"upload-title\":\"Upload to Imgur\",\"upload-link-notice\":\"Anyone with the link to your uploaded image will be able to view it.\",\"upload-name\":\"Title\",\"upload-title-untitled\":\"Untitled\",\"upload-caption\":\"Caption\",\"upload-tos\":\"Terms of Service\",\"upload-tos-2\":\"for imgur.com\",\"upload-submit\":\"Upload\",\"upload-uploading\":\"Uploading...\",\"upload-success\":\"Upload Successful\",\"upload-failed\":\"Upload failed.\",\"upload-delete\":\"To delete your image from Imgur visit:\",\"cropcopy-title-copy\":\"Copy To Clipboard\",\"cropcopy-title-crop\":\"Crop\",\"cropcopy-click-hold\":\"Right-click or press hold to copy.\",\"cropcopy-btn-copy\":\"To Clipboard\",\"cropcopy-copied\":\"Copied.\",\"cropcopy-btn-crop\":\"Apply Crop\",\"crop-drag-to-crop\":\"Drag to crop\",\"filter-crop-extend\":\"Crop/Extend\",\"filter-flip\":\"Flip\",\"filter-perspective\":\"Perspective\",\"filter-resize\":\"Resize\",\"filter-rotate\":\"Rotate\",\"filter-transform\":\"Transform\",\"filter-bright-contrast\":\"Bright/Contrast\",\"filter-curves\":\"Curves\",\"filter-hue-sat\":\"Hue/Saturation\",\"filter-invert\":\"Invert\",\"filter-tilt-shift\":\"Tilt Shift\",\"filter-to-alpha\":\"To Alpha\",\"filter-triangle-blur\":\"Triangle Blur\",\"filter-unsharp-mask\":\"Unsharp Mask\",\"filter-crop-title\":\"Crop / Extend\",\"filter-crop-description\":\"Crop or extend the image.\",\"filter-crop-left\":\"Left\",\"filter-crop-right\":\"Right\",\"filter-crop-top\":\"Top\",\"filter-crop-bottom\":\"Bottom\",\"filter-crop-rule-thirds\":\"Rule of Thirds\",\"filter-crop-fill\":\"Fill\",\"filter-flip-title\":\"Flip\",\"filter-flip-description\":\"Flips layer or whole image.\",\"filter-flip-horizontal\":\"Horizontal\",\"filter-flip-vertical\":\"Vertical\",\"filter-flip-image\":\"Flip Image\",\"filter-flip-layer\":\"Flip Layer\",\"filter-perspective-title\":\"Perspective\",\"filter-perspective-description\":\"Transforms the selected layer.\",\"filter-resize-title\":\"Resize\",\"filter-resize-description\":\"Resizes the image.\",\"filter-rotate-title\":\"Rotate\",\"filter-rotate-description\":\"Rotates the image.\",\"filter-transform-empty\":\"Layer is empty.\",\"filter-transform-title\":\"Transform\",\"filter-transform-description\":\"Transforms selected layer. Hold Shift for additional behavior.\",\"filter-transform-rotation\":\"Rotation\",\"filter-transform-flip\":\"Flip\",\"filter-transform-center\":\"Center\",\"filter-transform-constrain\":\"Constrain\",\"filter-transform-snap\":\"Snap\",\"filter-transform-snap-title\":\"Snap Rotation And Position\",\"filter-bright-contrast-title\":\"Brightness / Contrast\",\"filter-bright-contrast-description\":\"Change brightness and contrast for the selected layer.\",\"filter-bright-contrast-brightness\":\"Brightness\",\"filter-bright-contrast-contrast\":\"Contrast\",\"filter-curves-title\":\"Curves\",\"filter-curves-description\":\"Apply curves on the selected layer.\",\"filter-curves-all\":\"All\",\"filter-hue-sat-title\":\"Hue / Saturation\",\"filter-hue-sat-description\":\"Change hue and saturation for the selected layer.\",\"filter-hue-sat-hue\":\"Hue\",\"filter-hue-sat-saturation\":\"Saturation\",\"filter-applied\":\"applied\",\"filter-tilt-shift-title\":\"Tilt Shift\",\"filter-tilt-shift-description\":\"Applies tilt shift on the selected layer.\",\"filter-tilt-shift-blur\":\"Blur Radius\",\"filter-tilt-shift-gradient\":\"Gradient Radius\",\"filter-to-alpha-title\":\"To Alpha\",\"filter-to-alpha-description\":\"Generates alpha channel for selected layer from:\",\"filter-to-alpha-inverted-lum\":\"Inverted Luminance\",\"filter-to-alpha-lum\":\"Luminance\",\"filter-to-alpha-replace\":\"Replace RGB\",\"filter-triangle-blur-title\":\"Triangle Blur\",\"filter-triangle-blur-description\":\"Applies triangle blur on the selected layer.\",\"filter-unsharp-mask-title\":\"Unsharp Mask\",\"filter-unsharp-mask-description\":\"Sharpens the selected layer by scaling pixels away from the average of their neighbors.\",\"filter-unsharp-mask-strength\":\"Strength\",\"filter-grid\":\"Grid\",\"filter-grid-description\":\"Draws grid on selected layer.\",\"filter-noise\":\"Noise\",\"filter-noise-description\":\"Adds noise to selected layer.\",\"filter-noise-scale\":\"Scale\",\"filter-noise-alpha\":\"Alpha\",\"filter-pattern\":\"Pattern\",\"filter-pattern-description\":\"Generates pattern on selected layer. Drag the preview for further controls.\",\"filter-distort\":\"Distort\",\"filter-distort-description\":\"Distorts the selected layer.\",\"filter-distort-phase\":\"Phase\",\"filter-distort-stepsize\":\"Step Size\",\"filter-distort-sync-xy\":\"Sync XY\",\"filter-vanish-point\":\"Vanish Point\",\"filter-vanish-point-title\":\"Vanishing Point\",\"filter-vanish-point-description\":\"Adds vanishing point to selected layer. Drag preview to move.\",\"filter-vanish-point-lines\":\"Lines\",\"import-opening\":\"Opening file...\",\"import-title\":\"Import Image\",\"import-too-large\":\"Image too large, will be downscaled.\",\"import-btn-as-layer\":\"As Layer\",\"import-btn-as-image\":\"As Image\",\"import-as-layer-title\":\"Import Image as New Layer\",\"import-as-layer-description\":\"Adjust the position of the imported image.\",\"import-as-layer-limit-reached\":\"Layer limit reached. Image will be placed on existing layer.\",\"import-as-layer-fit\":\"Fit\",\"import-flatten\":\"Flatten image\",\"import-unsupported-file\":\"Unsupported file type. See Help for supported types.\",\"import-broken-file\":\"Couldn't load image. File might be corrupted.\",\"import-psd-unsupported\":\"Unsupported features. PSD had to be flattened.\",\"import-psd-limited-support\":\"PSD support is limited. Flattened will more likely look correct.\",\"import-psd-too-large\":\"Image exceeds maximum dimensions of {x} x {x} pixels. Unable to import.\",\"import-psd-size\":\"Image size\",\"hand-reset\":\"Reset\",\"hand-fit\":\"Fit\",\"bucket-tolerance\":\"Tolerance\",\"bucket-sample\":\"Sample\",\"bucket-sample-title\":\"Which layers to sample color from\",\"bucket-sample-all\":\"All\",\"bucket-sample-active\":\"Active\",\"bucket-sample-above\":\"Above\",\"bucket-grow\":\"Grow\",\"bucket-grow-title\":\"Grow filled area (in pixels)\",\"bucket-contiguous\":\"Contiguous\",\"bucket-contiguous-title\":\"Only fill connected areas\",\"gradient-linear\":\"Linear\",\"gradient-linear-mirror\":\"Linear-Mirror\",\"gradient-radial\":\"Radial\",\"shape-stroke\":\"Stroke\",\"shape-fill\":\"Fill\",\"shape-rect\":\"Rectangle\",\"shape-ellipse\":\"Ellipse\",\"shape-line\":\"Line\",\"shape-line-width\":\"Line Width\",\"shape-outwards\":\"Outwards\",\"shape-fixed\":\"Fixed 1:1\",\"text-instruction\":\"Click canvas to place text\",\"text-title\":\"Add Text\",\"text-placeholder\":\"Your text (multiline Shift+Enter)\",\"text-color\":\"Color\",\"text-size\":\"Size\",\"text-left\":\"Left\",\"text-center\":\"Center\",\"text-right\":\"Right\",\"text-italic\":\"Italic\",\"text-bold\":\"Bold\",\"save-reminder-title\":\"Unsaved Work\",\"save-reminder-text\":\"Image was not saved in {a} minutes{b}. Save now to prevent eventual loss.\",\"save-reminder-save-psd\":\"Save As PSD\",\"save-reminder-psd-layers\":\"PSD will remember all layers.\",\"submit\":\"Submit\",\"submit-title\":\"Submit Drawing\",\"submit-prompt\":\"Submit drawing?\",\"submit-submitting\":\"Submitting\",\"embed-init-loading\":\"Loading app\",\"embed-init-waiting\":\"Waiting for image\",\"unsaved\":\"Unsaved\",\"help\":\"Help\",\"tab-settings\":\"Settings\",\"settings-language\":\"Language\",\"settings-preferred-language\":\"Preferred Language\",\"settings-language-reload\":\"Will update after reloading.\",\"licenses\":\"Licenses\",\"source-code\":\"Source Code\",\"auto\":\"auto\",\"zoom-in\":\"Zoom In\",\"zoom-out\":\"Zoom Out\",\"radius\":\"Radius\",\"constrain-proportions\":\"Constrain Proportions\",\"width\":\"Width\",\"height\":\"Height\",\"opacity\":\"Opacity\",\"red\":\"Red\",\"green\":\"Green\",\"blue\":\"Blue\",\"eraser\":\"Eraser\",\"center\":\"Center\",\"background\":\"Background\",\"scaling-algorithm\":\"Scaling Algorithm\",\"algorithm-smooth\":\"Smooth\",\"algorithm-pixelated\":\"Pixelated\",\"preview\":\"Preview\",\"angle-snap\":\"Snap\",\"angle-snap-title\":\"45 Angle Snapping\",\"lock-alpha\":\"Lock Alpha\",\"lock-alpha-title\":\"Locks layer's alpha channel\",\"reverse\":\"Reverse\",\"compare-before\":\"Before\",\"compare-after\":\"After\"}","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('d3gnI') + \"de.bc2c59f6.js\" + \"?\" + Date.now()).catch(err => {delete module.bundle.cache[module.id]; throw err;})).then(() => module.bundle.root('gPCVN'));","\"use strict\";\n\nvar cacheLoader = require('../cacheLoader');\n\nmodule.exports = cacheLoader(function (bundle) {\n  return new Promise(function (resolve, reject) {\n    // Don't insert the same script twice (e.g. if it was already in the HTML)\n    var existingScripts = document.getElementsByTagName('script');\n\n    if ([].concat(existingScripts).some(function isCurrentBundle(script) {\n      return script.src === bundle;\n    })) {\n      resolve();\n      return;\n    }\n\n    var preloadLink = document.createElement('link');\n    preloadLink.href = bundle;\n    preloadLink.rel = 'preload';\n    preloadLink.as = 'script';\n    document.head.appendChild(preloadLink);\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.src = bundle;\n\n    script.onerror = function (e) {\n      var error = new TypeError(\"Failed to fetch dynamically imported module: \".concat(bundle, \". Error: \").concat(e.message));\n      script.onerror = script.onload = null;\n      script.remove();\n      reject(error);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n});","\"use strict\";\n\nvar cachedBundles = {};\nvar cachedPreloads = {};\nvar cachedPrefetches = {};\n\nfunction getCache(type) {\n  switch (type) {\n    case 'preload':\n      return cachedPreloads;\n\n    case 'prefetch':\n      return cachedPrefetches;\n\n    default:\n      return cachedBundles;\n  }\n}\n\nmodule.exports = function (loader, type) {\n  return function (bundle) {\n    var cache = getCache(type);\n\n    if (cache[bundle]) {\n      return cache[bundle];\n    }\n\n    return cache[bundle] = loader.apply(null, arguments).catch(function (e) {\n      delete cache[bundle];\n      throw e;\n    });\n  };\n};","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('d3gnI') + \"ja.e641fff7.js\" + \"?\" + Date.now()).catch(err => {delete module.bundle.cache[module.id]; throw err;})).then(() => module.bundle.root('hU4y7'));","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('d3gnI') + \"zh-CN.21b77a10.js\" + \"?\" + Date.now()).catch(err => {delete module.bundle.cache[module.id]; throw err;})).then(() => module.bundle.root('iRXNP'));","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('d3gnI') + \"zh-TW.dfa4013e.js\" + \"?\" + Date.now()).catch(err => {delete module.bundle.cache[module.id]; throw err;})).then(() => module.bundle.root('1YTLX'));","import {BB} from '../../../bb/bb';\n\n/**\n * Checkbox - with label\n */\nexport class Checkbox {\n\n    private element: HTMLElement;\n    private check: HTMLInputElement;\n    private doHighlight: boolean;\n\n    // --- public ---\n\n    constructor (params: {\n        init?: boolean; // default false\n        label: string;\n        callback: (boolean) => void;\n        allowTab?: boolean; // default false\n        title?: string;\n        doHighlight?: boolean; // default false\n        css?: any;\n    }) {\n        this.doHighlight = params.doHighlight;\n\n        this.element = BB.el({\n            className: 'kl-checkbox'\n        });\n\n        const innerEl = BB.el({\n            parent: this.element,\n            tagName: 'label',\n            className: 'kl-checkbox__inner'\n        });\n\n        this.check = BB.el({\n            parent: innerEl,\n            tagName: 'input',\n            css: {\n                marginLeft: '0',\n                display: 'inline-block'\n            },\n            custom: {\n                type: 'checkbox'\n            }\n        }) as HTMLInputElement;\n        this.check.checked = params.init;\n        if (this.doHighlight && this.check.checked) {\n            this.element.classList.add('kl-checkbox--highlight');\n        }\n        if (!params.allowTab) {\n            this.check.tabIndex = -1;\n        }\n\n        if (params.title) {\n            innerEl.title = params.title;\n        }\n\n        const label = document.createElement('div');\n        label.style.display = 'inline-block';\n        label.innerHTML = params.label;\n        (label as any).allowClick = true;\n        innerEl.appendChild(label);\n\n        this.check.onchange = () => {\n            if (this.doHighlight) {\n                this.element.classList.toggle('kl-checkbox--highlight', this.check.checked);\n            }\n            params.callback(this.check.checked);\n            setTimeout(() => {\n                this.check.blur();\n            }, 0);\n        };\n        if (params.css) {\n            BB.css(this.element, params.css);\n        }\n    }\n\n    getValue(): boolean {\n        return this.check.checked;\n    }\n\n    setValue(b: boolean) {\n        this.check.checked = !!b;\n        if (this.doHighlight) {\n            this.element.classList.toggle('kl-checkbox--highlight', this.check.checked);\n        }\n    }\n\n    getElement(): HTMLElement {\n        return this.element;\n    }\n\n    destroy() {\n        this.check.onchange = null;\n    }\n\n}\n","import {BB} from '../../../bb/bb';\nimport {IKeyString} from '../../../bb/bb.types';\n\nexport const input = function (params: {\n    type?: 'button' | 'checkbox' | 'number' | 'text' | 'color'; // default text\n    min?: number;\n    max?: number;\n    callback: (val: string) => void;\n    init: string | number;\n    css?: IKeyString;\n}) {\n    const result = document.createElement('input');\n    if (params.type) {\n        try {\n            result.type = params.type;\n        } catch(e) {} // ie can't deal with number\n    } else {\n        result.type = 'text';\n    }\n    if (params.min !== undefined) {\n        result.min = '' + params.min;\n    }\n    if (params.max !== undefined) {\n        result.max = '' + params.max;\n    }\n    result.value = '' + params.init;\n    if (params.callback) {\n        result.onchange = function() {\n            params.callback(result.value);\n        };\n    }\n    if (params.css) {\n        BB.css(result, params.css);\n    }\n\n    return result;\n};","import {BB} from '../../../bb/bb';\nimport {IKeyString} from '../../../bb/bb.types';\n\n/**\n * A select dropdown\n */\nexport class Select {\n\n    private selectEl: HTMLSelectElement;\n    private optionArr: ([string, string] | null)[]; // [value, label]\n    private changeListener: (event) => void;\n    private onChange: (val: string) => void;\n\n    \n    // --- public ---\n    constructor (p: {\n        isFocusable?: boolean; // default false\n        optionArr: ([string, string] | null)[], // [value, label]\n        initValue?: string; // default null\n        onChange: (val: string) => void;\n        css?: IKeyString;\n        title?: string;\n    }) {\n        this.selectEl = BB.el({\n            tagName: 'select',\n            title: p.title,\n            css: {\n                cursor: 'pointer',\n                fontSize: '15px',\n                padding: '3px',\n                background: '#fff', // makes safari pay attention to font-size\n                //webkitAppearance: 'none'\n                colorScheme: 'only light', // chrome doesn't properly invert the text color\n            }\n        }) as HTMLSelectElement;\n        if (p.css) {\n            BB.css(this.selectEl, p.css);\n        }\n\n        const isFocusable = p.isFocusable;\n        if (!isFocusable) {\n            this.selectEl.tabIndex = -1;\n        }\n        this.optionArr = p.optionArr;\n        for (let i = 0; i < this.optionArr.length; i++) {\n            if (this.optionArr[i] === null) {\n                continue;\n            }\n            const option = document.createElement('option');\n            option.value = this.optionArr[i][0];\n            option.textContent = this.optionArr[i][1];\n            this.selectEl.append(option);\n        }\n        this.onChange = p.onChange;\n        this.changeListener = (e) => {\n            if (!isFocusable) {\n                this.selectEl.blur();\n            }\n            this.onChange(this.selectEl.value);\n        };\n        this.selectEl.addEventListener('change', this.changeListener);\n        this.selectEl.value = 'initValue' in p ? p.initValue : null;\n    }\n\n    setValue (val) {\n        this.selectEl.value = val;\n    }\n\n    getValue () {\n        return this.selectEl.value;\n    }\n\n    setDeltaValue (delta) {\n        let index = 0;\n        for (let i = 0; i < this.optionArr.length; i++) {\n            if ('' + this.optionArr[i][0] === this.selectEl.value) {\n                index = i;\n                break;\n            }\n        }\n        index = Math.max(0, Math.min(this.optionArr.length -1, index + delta));\n        this.selectEl.value = this.optionArr[index][0];\n        this.onChange(this.selectEl.value);\n    }\n\n    getElement () {\n        return this.selectEl;\n    }\n\n    destroy = () => {\n        this.selectEl.removeEventListener('change', this.changeListener);\n    }\n    \n}\n","import {BB} from '../../../bb/bb';\n\n\n/**\n * Toggle button with an image\n *\n * p = {\n *     initValue: boolean,\n *     title: string,\n *     isRadio: boolean, // if true, can't click when active\n *     onChange: function(boolean)\n * }\n *\n * @param p\n * @constructor\n */\nexport const ImageToggle = function(p) {\n    let isActive = !!p.initValue;\n    const div = BB.el({\n        className: 'image-toggle',\n        title: p.title,\n        css: {\n            backgroundImage: \"url('\" + p.image + \"')\"\n        },\n        onClick: function(e) {\n            e.preventDefault();\n            if (p.isRadio && isActive) {\n                return;\n            }\n            isActive = !isActive;\n            update();\n            p.onChange(isActive);\n        },\n    });\n\n    function update() {\n        div.classList.toggle('image-toggle-active', isActive);\n    }\n\n    update();\n\n    // --- interface ---\n    this.setValue = function(b) {\n        isActive = !!b;\n        update();\n    };\n    this.getElement = function() {\n        return div;\n    };\n    this.getValue = function() {\n        return isActive;\n    };\n    this.destroy = () => {\n        BB.destroyEl(div);\n    };\n\n};","import {BB} from '../../../bb/bb';\nimport {ImageToggle} from './image-toggle';\n\n/**\n * Radio input group. each one has an image\n *\n * p = {\n *     optionArr: {\n *         id: string,\n *         title: string,\n *         image: string,\n *     }[],\n *     initId: string,\n *     sizePx: number,\n *     onChange: function(id: string): void\n * }\n *\n * @param p\n */\nexport const ImageRadioList = function(p) {\n\n    const div = BB.el({\n        className: 'image-radio-wrapper',\n        css: {\n            display: 'flex'\n        }\n    });\n\n    let activeIndex;\n    const optionArr = [];\n\n    function select(index, id) {\n        activeIndex = index;\n        for (let i = 0; i < optionArr.length; i++) {\n            optionArr[i].setValue(i === activeIndex);\n        }\n        p.onChange(id);\n    }\n\n    function createOption(index, o) {\n        if (o.id === p.initId) {\n            activeIndex = index;\n        }\n        const radioEl = new ImageToggle({\n            image: o.image,\n            title: o.title,\n            initValue: o.id === p.initId,\n            isRadio: true,\n            onChange: function() {\n                select(index, o.id);\n            }\n        });\n        div.appendChild(radioEl.getElement());\n\n        return radioEl;\n\n    }\n\n    for (let i = 0; i < p.optionArr.length; i++) {\n        optionArr.push(createOption(i, p.optionArr[i]));\n    }\n\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n    this.getValue = function() {\n        return p.optionArr[activeIndex].id;\n    };\n    this.destroy = () => {\n        optionArr.forEach(item => {\n            item.destroy();\n        })\n    };\n};","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport iconImg from 'url:~/src/app/img/ui/brush-pressure.svg';\nimport {LANG} from '../../../language/language';\n\n\n/**\n * small toggle button with a pen icon - representing toggling pressure sensitivity\n * @param isChecked - boolean - initial value\n * @param changeCallback - function(isChecked boolean) - called on change\n * @returns {HTMLElement} - the toggle button\n */\nexport const penPressureToggle = function(isChecked, changeCallback) {\n\n    const toggleDiv = BB.el({\n        css: {\n            cssFloat: 'right',\n            borderRadius: '3px',\n            width: '18px',\n            height: '18px',\n            backgroundImage: 'url(\"' + iconImg + '\")',\n            backgroundSize: 'contain',\n            backgroundRepeat: 'no-repeat',\n            cursor: 'pointer',\n            boxSizing: 'border-box',\n            colorScheme: 'only light',\n        }\n    });\n\n    if (!BB.hasPointerEvents) {\n        toggleDiv.style.display = 'none';\n    }\n\n    function redraw() {\n        if (isChecked) {\n            BB.css(toggleDiv, {\n                backgroundColor: '#fff',\n                opacity: '0.9',\n                border: '1px solid var(--active-highlight-color)'\n            });\n        } else {\n            BB.css(toggleDiv, {\n                backgroundColor: 'transparent',\n                opacity: '0.5',\n                border: '1px solid #666'\n            });\n        }\n    }\n\n    toggleDiv.title = LANG('brush-toggle-pressure');\n    toggleDiv.onclick = function() {\n        isChecked = !isChecked;\n        redraw();\n        changeCallback(isChecked);\n    };\n\n    redraw();\n    changeCallback(isChecked);\n\n    return toggleDiv;\n};","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"brush-pressure.bbb8031a.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {calcSliderFalloffFactor} from './slider-falloff';\nimport {IKlSliderConfig} from '../../kl.types';\nimport {languageStrings} from '../../../language/language';\nimport {DoubleTapper, EventChain} from '../../../bb/input/event-chain';\nimport {KlSliderManualInput} from './kl-slider-manual-input';\n\n/**\n * Horizontal slider, can be changed by dragging anywhere on it. Has a label & value.\n * e.g. used for brush size\n *\n * left mouse button - set absolute value\n * right mouse button - change relative value\n * drag mouse vertically away - high precision mode\n * double-click/tap slider -> manual input mode\n *\n * Values can be spline interpolated\n * On change callback can be debounced\n *\n */\nexport class KlSlider {\n\n    /*\n    Three types of values\n    - value - the actual value, when using setValue(), getValue(), and what is emitted\n    - displayValue - the number that the user sees on the slider and in the manual input field\n        - might be further formatted with formatFunc\n        - also might be the same as value, if no toDisplayValue function provided\n    - sliderValue - the draggable position of the slider, 0 - 1\n     */\n\n    private value: number;\n\n    private elementWidth: number;\n    private elementHeight: number;\n    private isEnabled: boolean;\n\n    private min: number; // min value\n    private max: number; // max value\n    private useSpline: boolean;\n    private splineInterpolator: any; // todo type\n    private resolution: number;\n\n    private isChangeOnFinal: boolean;\n    private formatFunc: null | ((val: number) => number);\n\n    private onChange: (val: number) => void;\n    private valueToDisplayValue: (value: number) => number;\n    private displayValueToValue: (displayValue: number) => number;\n\n\n    private roolEl: HTMLElement;\n    private sliderWrapperEl: HTMLElement;\n    private textEl: HTMLElement; // displays label, displayValue\n    private label: string;\n    private control: HTMLElement;\n    private manualInput: null | KlSliderManualInput;\n    private manualInputRoundDigits: number;\n\n    private pointerListener: any; // todo type\n    private pointerListenerTimeout: any;\n\n    private eventResMs: null | number;\n    private emitValue: null | number = null; // next value for interval\n    private emitInterval: null | any; // interval of eventResMs which calls onChange()\n\n    private valueToSliderValue(value: number): number {\n        if (this.useSpline) {\n            return this.splineInterpolator.findX(value, Math.floor(this.resolution));\n        }\n        return (value - this.min) / (this.max - this.min);\n    }\n\n    private sliderValuetoValue(sliderValue: number): number {\n        let result = this.min + sliderValue * (this.max - this.min);\n        if (this.useSpline) {\n            result = this.splineInterpolator.interpolate(sliderValue);\n        }\n        return result;\n    }\n\n    private updateLabel(): void {\n        let displayValue: number | string = this.valueToDisplayValue(this.value);\n        displayValue = this.formatFunc ? this.formatFunc(displayValue) : Math.round(displayValue);\n        displayValue = displayValue.toLocaleString(languageStrings.getCode());\n        this.textEl.innerHTML = this.label + '&nbsp;&nbsp;<span style=\"font-weight:bold\">' + displayValue + '</span>';\n\n        const sliderValue = this.valueToSliderValue(this.value);\n        this.control.style.width = (sliderValue * this.elementWidth) + 'px';\n    }\n\n    private emit(isFinal: boolean): void {\n        if (!isFinal && this.isChangeOnFinal) {\n            return;\n        }\n\n        if (isFinal || !this.eventResMs) {\n            this.onChange(this.value);\n            if (this.emitInterval) {\n                clearInterval(this.emitInterval);\n                this.emitInterval = null;\n            }\n            return;\n        }\n\n        if (this.emitInterval) {\n            this.emitValue = this.value;\n\n        } else {\n            this.onChange(this.value);\n\n            this.emitInterval = setInterval(() => {\n                if (this.emitValue === null) {\n                    clearInterval(this.emitInterval);\n                    this.emitInterval = null;\n                } else {\n                    this.onChange(this.emitValue);\n                    this.emitValue = null;\n                }\n            }, this.eventResMs);\n        }\n    }\n\n    private updateEnable(): void {\n        BB.css(this.sliderWrapperEl, {\n            opacity: this.isEnabled ? null : '0.5',\n            pointerEvents: this.isEnabled ? null : 'none',\n        });\n        if (this.manualInput) {\n            this.manualInput.setIsEnabled(this.isEnabled);\n        }\n    }\n\n    private showManualInput(): void {\n\n        this.manualInput = new KlSliderManualInput(\n            this.valueToDisplayValue(this.value),\n            this.valueToDisplayValue(this.min),\n            this.valueToDisplayValue(this.max),\n            this.sliderWrapperEl.getBoundingClientRect(),\n            (val) => {\n                val = this.displayValueToValue(val);\n                this.setValue(BB.clamp(val, this.min, this.max));\n                this.onChange(this.value);\n            },\n            () => {\n                BB.css(this.sliderWrapperEl, {\n                    display: null,\n                });\n                this.roolEl.removeChild(this.manualInput.getElement());\n                this.manualInput.destroy();\n                this.manualInput = null;\n            },\n            (this.manualInputRoundDigits && this.manualInputRoundDigits > 0) ? this.manualInputRoundDigits : 0,\n        );\n        this.roolEl.append(this.manualInput.getElement());\n        setTimeout(() => {\n            this.manualInput.focus();\n        });\n        BB.css(this.sliderWrapperEl, {\n            display: 'none',\n        });\n    }\n\n\n    // --- public ---\n\n    constructor (\n        p: {\n            label: string,\n            width: number, // px\n            height: number, // px\n            min: number, // min value\n            max: number,\n            value: number,\n            resolution?: number, // int, if you want spline.findX() to use a custom resolution\n            curve?: 'quadratic' | any[], // optional. array is BB.SplineInterpolator points. 0-1\n            formatFunc?: (val: number) => number, // function to display a different number than value\n            onChange?: (val: number) => void,\n            isChangeOnFinal?: boolean, // only fire onChange on pointerUp\n            eventResMs?: number, // frequency of change events\n            isEnabled?: boolean, // default = true\n            manualInputRoundDigits?: number, // default 0, how value should be rounded for manual input\n            toDisplayValue?: (value: number) => number,\n            toValue?: (displayValue: number) => number,\n        }\n    ) {\n        const _this = this;\n        this.isEnabled = p.isEnabled !== false;\n        this.manualInputRoundDigits = p.manualInputRoundDigits;\n        this.useSpline = !!p.curve;\n\n        if (!p.label) {\n            throw new Error('KlSlider missing params');\n        }\n        if (p.min != 0 && p.max != 0 && p.value != 0) {\n            if (!p.min || !p.max || !p.value) {\n                throw new Error('KlSlider broken params');\n            }\n        }\n        if (p.min >= p.max) {\n            throw new Error('KlSlider broken params');\n        }\n\n        this.min = p.min;\n        this.max = p.max;\n        this.value = BB.clamp(p.value, this.min, this.max);\n        this.elementWidth = p.width;\n        this.elementHeight = p.height;\n        this.resolution = p.resolution ? p.resolution : this.elementWidth * 2;\n\n        this.onChange = p.onChange ? p.onChange : () => {};\n        if (!this.displayValueToValue !== !this.valueToDisplayValue) {\n            throw new Error('both or neither have to be set, toValue and toDisplayValue');\n        }\n        this.displayValueToValue = p.toValue ? p.toValue : (displayValue) => displayValue;\n        this.valueToDisplayValue = p.toDisplayValue ? p.toDisplayValue : (value) => value;\n        this.isChangeOnFinal = !!p.isChangeOnFinal;\n        this.formatFunc = p.formatFunc;\n        this.eventResMs = p.eventResMs;\n\n        if (this.useSpline) {\n            const curveArr = p.curve === 'quadratic' ? BB.quadraticSplineInput(this.min, this.max, 0.1) : p.curve;\n            this.splineInterpolator = new BB.SplineInterpolator(curveArr);\n        }\n\n        this.roolEl = BB.el({\n            css: {\n                display: 'flex',\n            }\n        });\n        this.sliderWrapperEl = BB.el({\n            parent: this.roolEl,\n            className: 'sliderWrapper',\n            css: {\n                overflow: 'hidden',\n                position: 'relative',\n                width: this.elementWidth + 'px',\n                height: this.elementHeight + 'px',\n                userSelect: 'none'\n            }\n        });\n        this.roolEl.oncontextmenu = function () {\n            return false;\n        };\n        this.label = p.label;\n        const labelFontSize = this.elementHeight - 14;\n        this.textEl = BB.el({\n            content: this.label,\n            css: {\n                position: 'absolute',\n                left: '7px',\n                top: (this.elementHeight / 2 - labelFontSize / 2 + 1) + 'px',\n                lineHeight: labelFontSize + 'px',\n                fontSize: labelFontSize + 'px',\n                pointerEvents: 'none'\n            }\n        });\n        this.control = BB.el({\n            className: 'sliderInner',\n            css: {\n                position: 'absolute',\n                left: '0',\n                top: '0',\n                width: (this.valueToSliderValue(this.value) * this.elementWidth) + 'px',\n                height: this.elementHeight + 'px',\n            }\n        });\n        const controlInner = document.createElement('div');\n\n        this.sliderWrapperEl.append(this.control, this.textEl);\n        this.control.append(controlInner);\n\n        this.updateEnable();\n\n\n        const doubleTapper = new DoubleTapper({\n            onDoubleTap: () => {\n                this.showManualInput();\n            }\n        })\n        doubleTapper.setAllowedButtonArr(['left', 'right']);\n        const eventChain = new EventChain({\n            chainArr: [\n                doubleTapper\n            ]\n        });\n\n        let virtualVal;\n        const onPointer = (event) => {\n            event.eventPreventDefault();\n\n            if (!this.isEnabled) {\n                return;\n            }\n\n            if (event.type === 'pointerdown') {\n\n                // unfocus manual slider input\n                BB.unfocusAnyInput();\n\n                this.sliderWrapperEl.className = 'sliderWrapper sliderWrapperActive';\n\n                if (event.button === 'left') {\n                    let sliderValue = event.relX / this.elementWidth;\n                    sliderValue = Math.max(0, Math.min(1, sliderValue));\n                    this.value = this.sliderValuetoValue(sliderValue);\n                    this.updateLabel();\n                    this.emit(false);\n                }\n                virtualVal = this.valueToSliderValue(this.value);\n            }\n\n            if (event.type === 'pointermove' && ['left', 'right'].includes(event.button)) {\n\n                let deltaX = event.dX;\n                const deltaY = Math.abs(event.pageY - event.downPageY);\n                const factor = calcSliderFalloffFactor(deltaY, event.button === 'right');\n                deltaX *= factor;\n                deltaX /= this.elementWidth;\n\n                virtualVal += deltaX;\n\n                let sliderValue = Math.max(0, Math.min(1, virtualVal));\n                this.value = this.sliderValuetoValue(sliderValue);\n                this.updateLabel();\n                this.emit(false);\n            }\n\n            if (event.type === 'pointerup') {\n                this.sliderWrapperEl.className = 'sliderWrapper';\n                this.emit(true);\n            }\n\n        }\n\n        this.pointerListenerTimeout = setTimeout(() => {\n            this.pointerListener = new BB.PointerListener({\n                target: this.sliderWrapperEl,\n                maxPointers: 1,\n                fixScribble: true,\n                onPointer: (e) => {\n                    onPointer(e);\n                    eventChain.chainIn(e);\n                },\n                onWheel: (event) => {\n                    let sliderValue = this.valueToSliderValue(this.value);\n                    sliderValue = BB.clamp(sliderValue - event.deltaY / 40, 0, 1);\n                    this.value = this.sliderValuetoValue(sliderValue);\n                    this.updateLabel();\n                    this.onChange(this.value);\n                }\n            });\n            this.updateLabel();\n        }, 1);\n    }\n\n    changeSliderValue(f: number): void {\n        if (!this.isEnabled) {\n            return;\n        }\n        let sliderValue = this.valueToSliderValue(this.value);\n        sliderValue = BB.clamp(sliderValue + f, 0, 1);\n        this.value = this.sliderValuetoValue(sliderValue);\n        this.updateLabel();\n        this.onChange(this.value);\n    }\n\n    setValue (v: number): void {\n        this.value = BB.clamp(v, this.min, this.max);\n        this.updateLabel();\n    }\n\n    getValue (): number {\n        return this.value;\n    }\n\n    update (config: IKlSliderConfig): void {\n        this.min = config.min;\n        this.max = config.max;\n        this.useSpline = !!config.curve;\n        if (this.useSpline) {\n            const curveArr = config.curve === 'quadratic' ? BB.quadraticSplineInput(this.min, this.max, 0.1) : config.curve;\n            this.splineInterpolator = new BB.SplineInterpolator(curveArr);\n        } else {\n            this.splineInterpolator = null;\n        }\n        this.setIsEnabled(!config.isDisabled);\n    }\n\n    setIsEnabled (e: boolean): void {\n        this.isEnabled = !!e;\n        this.updateEnable();\n    }\n\n    destroy (): void {\n        clearTimeout(this.pointerListenerTimeout);\n        if (this.pointerListener) {\n            this.pointerListener.destroy();\n        }\n        if (this.manualInput) {\n            this.manualInput.destroy();\n        }\n        if (this.emitInterval) {\n            clearInterval(this.emitInterval);\n        }\n    }\n\n    getElement (): HTMLElement {\n        return this.roolEl;\n    }\n\n}\n","\n\n/**\n * to make sliders more finegrained.\n * @param deltaY number - how far pointer moved away vertically since down\n * @returns {number} the factor 0-1. 0 -> infinite movement for change of 1. 1 -> 1px for change of 1\n */\nexport const calcSliderFalloffFactor = function(deltaY, isRightButton) {\n    let result = Math.min(10, 1 + Math.pow(Math.floor(deltaY / 50), 2));\n    if (isRightButton) {\n        result *= 2;\n    }\n    return 1 / result;\n};\n","import {BB} from '../../../bb/bb';\nimport {input} from './input';\n\n/**\n * Used by KlSlider. Allows user to type in value in input (type=number) field, instead of dragging with mouse.\n * Input goes away when losing focus, or when pressing Enter/Escape.\n */\nexport class KlSliderManualInput {\n\n    private input: HTMLInputElement;\n    private isEnabled: boolean;\n    private scrollBefore: { x: number, y: number }; // window scroll position on creation\n    private lastValue: number; // last emitted value\n    private isClosed: boolean = false;\n\n    private emit(): void {\n        if (this.lastValue !== Number(this.input.value)) {\n            this.onChange(Number(this.input.value));\n            this.lastValue = Number(this.input.value);\n        }\n    }\n\n    private privateOnClose(): void {\n        if (this.isClosed) {\n            return;\n        }\n        this.isClosed = true;\n\n        this.emit();\n        this.onClose();\n        setTimeout(() => {\n            // because iPad keyboard changes the scroll position\n            window.scrollTo(this.scrollBefore.x, this.scrollBefore.y);\n            this.scrollBefore = null;\n        });\n    }\n\n    // --- public ---\n\n    constructor(\n        value: number, // initial value (displayValue)\n        min: number,\n        max: number,\n        rect: DOMRect, // size of input field\n        private onChange: (displayValue: number) => void,\n        private onClose: () => void,\n        roundDigits?: number,\n    ) {\n\n        this.input = input({\n            type: 'number',\n            init: value,\n            min,\n            max,\n            callback: (val) => {\n                this.emit();\n            },\n        });\n        if (roundDigits !== 0) {\n            this.input.setAttribute('step', 'any');\n        }\n        this.input.onblur = () => {\n            this.privateOnClose();\n        };\n        this.input.addEventListener('keyup', (e) => {\n            if (['Enter', 'Escape'].includes(e.key)) {\n                this.privateOnClose();\n            } else {\n                this.emit();\n            }\n        });\n        this.input.addEventListener('wheel', () => this.emit());\n\n        this.scrollBefore = {\n            x: window.scrollX,\n            y: window.scrollY,\n        };\n\n        let currentValue;\n        if (roundDigits || roundDigits === 0) {\n            currentValue = BB.round(value, roundDigits);\n        } else {\n            currentValue = value;\n        }\n        this.lastValue = currentValue;\n        this.input.value = '' + currentValue;\n\n        BB.css(this.input, {\n            width: rect.width + 'px',\n            height: rect.height + 'px',\n        });\n    }\n\n    getElement() {\n        return this.input;\n    }\n\n    setIsEnabled(b: boolean): void {\n        this.isEnabled = !!b;\n    }\n\n    focus(): void {\n        this.input.focus();\n        this.input.select();\n    }\n\n    destroy(): void {\n        BB.destroyEl(this.input);\n    }\n}","import {BB} from '../../../bb/bb';\nimport {input} from '../base-components/input';\nimport {popup} from './popup';\nimport {LANG} from '../../../language/language';\n// @ts-ignore\nimport copyImg from 'url:~/src/app/img/ui/copy.svg';\n\n/**\n * dialog for manually inputting the color\n * @param p {color: rgbObj, onClose: function(rgbObj | null)}\n * @constructor\n */\nexport const HexColorDialog = function (p) {\n\n    let lastValidRgb = new BB.RGB(p.color.r, p.color.g, p.color.b);\n\n    const div = BB.el({});\n\n    const previewEl = BB.el({\n        css: {\n            width: '20px',\n            height: '20px',\n            marginBottom: '10px',\n            boxShadow: 'inset 0 0 0 1px #fff, 0 0 0 1px #000',\n            background: '#' + BB.ColorConverter.toHexString(lastValidRgb),\n            colorScheme: 'only light',\n        }\n    });\n    div.appendChild(previewEl);\n\n\n    // --- Hex ---\n    const hexRowEl = BB.el({\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            marginBottom: '15px'\n        }\n    });\n    const hexLabel = BB.el({\n        content: LANG('mci-hex'),\n        css: {\n            width: '60px'\n        }\n    });\n    const hexInput = input({\n        init: '#' + BB.ColorConverter.toHexString(lastValidRgb),\n        css: {\n            width: '80px'\n        },\n        callback: function() {\n            let rgbObj = BB.ColorConverter.hexToRGB(hexInput.value);\n            if (rgbObj === null) {\n                rgbObj = lastValidRgb;\n                hexInput.value = '#' + BB.ColorConverter.toHexString(lastValidRgb);\n            } else {\n                lastValidRgb = rgbObj;\n            }\n            previewEl.style.background = '#' + BB.ColorConverter.toHexString(rgbObj);\n\n            for (let i = 0; i < rgbArr.length; i++) {\n                rgbArr[i].update();\n            }\n        }\n    });\n    const copyButton = BB.el({\n        tagName: 'button',\n        content: '<img src=\"' + copyImg + '\" height=\"20\"/>',\n        title: LANG('mci-copy'),\n        css: {\n            marginLeft: '10px'\n        },\n        onClick: function() {\n            hexInput.select();\n            document.execCommand('copy');\n        }\n    });\n    hexRowEl.appendChild(hexLabel);\n    hexRowEl.appendChild(hexInput);\n    hexRowEl.appendChild(copyButton);\n    div.appendChild(hexRowEl);\n    setTimeout(function () {\n        hexInput.focus();\n        hexInput.select();\n    }, 0);\n\n\n    // --- R G B ---\n    function createRgbInputRow(labelStr, attributeStr) {\n        const result: any = {};\n\n        const rowEl = BB.el({\n            css: {\n                display: 'flex',\n                alignItems: 'center',\n                marginTop: '5px',\n            }\n        });\n        const labelEl = BB.el({\n            content: labelStr,\n            css: {\n                width: '60px'\n            }\n        });\n\n        const inputEl = input({\n            init: lastValidRgb[attributeStr],\n            min: 0,\n            max: 255,\n            type: 'number',\n            css: {\n                width: '80px'\n            },\n            callback: function() {\n                if (inputEl.value === '' || parseFloat(inputEl.value) < 0 || parseFloat(inputEl.value) > 255) {\n                    result.update();\n                    return;\n                }\n                inputEl.value = '' + Math.round(parseFloat(inputEl.value));\n                lastValidRgb[attributeStr] = inputEl.value;\n                previewEl.style.background = '#' + BB.ColorConverter.toHexString(lastValidRgb);\n                hexInput.value = '#' + BB.ColorConverter.toHexString(lastValidRgb);\n            }\n        });\n\n        rowEl.appendChild(labelEl);\n        rowEl.appendChild(inputEl);\n        div.appendChild(rowEl);\n\n\n        result.update = function() {\n            inputEl.value = lastValidRgb[attributeStr];\n        };\n        result.destroy = () => {\n            inputEl.onchange = null;\n        };\n        return result;\n    }\n    const rgbArr = [];\n    rgbArr.push(createRgbInputRow(LANG('red'), 'r'));\n    rgbArr.push(createRgbInputRow(LANG('green'), 'g'));\n    rgbArr.push(createRgbInputRow(LANG('blue'), 'b'));\n\n\n    popup({\n        target: document.body,\n        message: `<b>${LANG('manual-color-input')}</b>`,\n        div: div,\n        autoFocus: false,\n        clickOnEnter: 'Ok',\n        buttons: ['Ok', 'Cancel'],\n        callback: function (resultStr) {\n            BB.destroyEl(copyButton);\n            rgbArr.forEach(item => item.destroy());\n            rgbArr.splice(0, rgbArr.length);\n\n            p.onClose(resultStr === 'Ok' ? BB.ColorConverter.hexToRGB(hexInput.value) : null);\n        }\n    });\n\n};","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"copy.b1df5ac8.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {HexColorDialog} from '../modals/color-slider-hex-dialog';\nimport {calcSliderFalloffFactor} from './slider-falloff';\n// @ts-ignore\nimport eyedropperImg from 'url:~/src/app/img/ui/tool-picker.svg';\nimport {LANG} from '../../../language/language';\n\n/**\n * big main HS+V color slider\n * 2 elements: slider, and colorpreview(output) + eyedropper\n *\n * p = {\n *     width: number,\n *     height: number, // hue slider and output height\n *     svHeight: number,\n *     startValue: rgb, // 0-255\n *     onPick: function(rgb)\n * }\n *\n * @param p\n * @constructor\n */\nexport const KlColorSlider = function (p) {\n\n    const _this = this;\n    let pickCallback = function(result?) {};\n    const div = document.createElement('div');\n    div.style.position = 'relative';\n    div.className = 'colorSlider';\n    const outputDiv = BB.el({\n        css: {\n            display: 'flex',\n            alignItems: 'center'\n        }\n    });\n    const width = p.width;\n    let svHeight = p.svHeight;\n    const height = p.height;\n    const emitColor = p.onPick;\n\n    let primaryColorRGB = {\n        r: parseInt(p.startValue.r, 10),\n        g: parseInt(p.startValue.g, 10),\n        b: parseInt(p.startValue.b, 10)\n    };\n    let primaryColorHSV = BB.ColorConverter.toHSV(p.startValue); // BB.HSV\n    let secondaryColorRGB = {r: 255, g: 255, b: 255};\n    let secondaryColorHSV = BB.ColorConverter._RGBtoHSV(secondaryColorRGB); // BB.HSV\n\n    const svWrapper = BB.el({});\n    const svSvg = new DOMParser().parseFromString('<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\"> <defs> <linearGradient id=\"value\" gradientTransform=\"rotate(90)\"> <stop offset=\"0\" stop-color=\"rgba(0,0,0,0)\"/> <stop offset=\"100%\" stop-color=\"rgba(0,0,0,1)\"/> </linearGradient> <linearGradient id=\"hue\" gradientTransform=\"rotate(0)\"> <stop offset=\"0\" stop-color=\"#fff\"/> <stop id=\"hue-stop\" offset=\"100%\" stop-color=\"#f00\"/> </linearGradient> </defs> <rect x=\"0\" y=\"0\" width=\"100\" height=\"100\" fill=\"url(\\'#hue\\')\"/> <rect x=\"0\" y=\"0\" width=\"100\" height=\"100\" fill=\"url(\\'#value\\')\"/></svg>', 'image/svg+xml').documentElement;\n    const hueStop = (svSvg as any).getElementById('hue-stop');\n    BB.setAttributes(hueStop, {\n        'stop-color': '#f0f'\n    });\n    BB.css(svSvg, {\n        width: width + 'px',\n        height: svHeight + 'px'\n    });\n    svWrapper.appendChild(svSvg);\n\n    const divH = document.createElement('div');\n    BB.css(divH, {\n        position: 'relative',\n        height: height + 'px'\n    });\n    const divPreview = document.createElement('div');\n    const controlH = document.createElement('div');\n\n    const enabled = true;\n\n    function updatePrimaryHSV(hsv) {\n        if (hsv.s === 0) {\n            primaryColorHSV = new BB.HSV(primaryColorHSV.h, hsv.s, hsv.v);\n        } else {\n            primaryColorHSV = new BB.HSV(hsv.h, hsv.s, hsv.v);\n        }\n    }\n\n    function createHueBg(targetEl) {\n        const im = new Image();\n        BB.css(im, {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            display: 'none',\n            pointerEvents: 'none'\n        });\n        const cv = BB.canvas(width, height);\n        const ctx = cv.getContext('2d');\n        const gradH = ctx.createLinearGradient(0, 0, width, 0);\n        for (let i = 0; i < 1; i += 0.01) {\n            const col = BB.ColorConverter.toRGB(new BB.HSV(i * 360, 100, 100));\n            let ha = (parseInt('' + col.r)).toString(16);\n            let hb = (parseInt('' + col.g)).toString(16);\n            let hc = (parseInt('' + col.b)).toString(16);\n            if (ha.length === 1)\n                ha = '0' + ha;\n            if (hb.length === 1)\n                hb = '0' + hb;\n            if (hc.length === 1)\n                hc = '0' + hc;\n            gradH.addColorStop(i, '#' + ha + hb + hc);\n        }\n        ctx.fillStyle = gradH;\n        ctx.fillRect(0, 0, width, height);\n\n        targetEl.appendChild(im);\n        im.alt = 'hue';\n        im.src = cv.toDataURL('image/png');\n        im.style.display = 'block';\n    }\n\n\n    function updateSVCanvas() {\n        const rgb = BB.ColorConverter.toRGB(new BB.HSV(primaryColorHSV.h, 100, 100));\n        BB.setAttributes(hueStop, {\n            'stop-color': '#' + BB.ColorConverter.toHexString(rgb)\n        });\n    }\n\n    function updateSVPointer() {\n\n        const left = primaryColorHSV.s / 100 * width - 7;\n        const top = (1 - primaryColorHSV.v / 100) * svHeight - 6;\n        BB.css(pointerSV, {\n            left: left + 'px',\n            top: top + 'px'\n        });\n    }\n\n    function setColPreview() {\n        divPreview.style.backgroundColor = 'rgb(' + primaryColorRGB.r + ',' + primaryColorRGB.g + ',' + primaryColorRGB.b + ')';\n\n        if (BB.testIsWhiteBestContrast(primaryColorRGB)) {\n            BB.css(pickerButton, {\n                filter: 'invert(1)'\n            });\n            BB.css(hexButton, {\n                filter: 'invert(1)'\n            });\n        } else{\n            BB.css(pickerButton, {\n                filter: ''\n            });\n            BB.css(hexButton, {\n                filter: ''\n            });\n        }\n\n    }\n\n    updateSVCanvas();\n    div.style.width = width + 'px';\n    div.oncontextmenu = function () {\n        return false;\n    };\n\n    const SVContainer = document.createElement('div');\n    BB.css(SVContainer, {\n        width: width + 'px',\n        height: svHeight + 'px',\n        overflow: 'hidden',\n        display: 'block',\n        position: 'relative',\n        cursor: 'crosshair',\n        boxShadow: 'rgb(188, 188, 188) 0 0 0 1px'\n    });\n\n    const pointerSV = document.createElement('div');\n    BB.css(pointerSV, {\n        width: '12px',\n        height: '12px',\n        borderRadius: '6px',\n        position: 'absolute',\n        pointerEvents: 'none',\n        boxShadow: '0px 0px 0 1px #000, inset 0px 0px 0 1px #fff'\n    });\n\n    SVContainer.appendChild(svWrapper);\n    SVContainer.appendChild(pointerSV);\n    updateSVPointer();\n    div.appendChild(SVContainer);\n    div.appendChild(divH);\n    outputDiv.appendChild(divPreview);\n    BB.css(divPreview, {\n        display: 'flex',\n        justifyContent: 'space-between',\n        width: (height * 2.5) + 'px',\n        height: height + 'px',\n        //position: \"relative\",\n        boxShadow: 'rgb(188, 188, 188) 0 0 0 1px',\n        colorScheme: 'only light',\n    });\n\n    BB.css(divH, {\n        overflow: 'hidden',\n        position: 'relative',\n        width: width + 'px',\n        height: height + 'px',\n        cursor: 'ew-resize',\n        boxShadow: 'rgb(188, 188, 188) 0 0 0 1px',\n        marginTop: '1px',\n        marginBottom: '1px'\n    });\n\n    //divH.className = \"svSlider\";\n    BB.css(controlH, {\n        width: '1px',\n        height: height + 'px',\n        background: '#000',\n        borderLeft: '1px solid #fff',\n        position: 'absolute',\n        top: '0',\n        left: parseInt('' + (primaryColorHSV.h / 360 * width - 1)) + 'px'\n    });\n\n\n    const virtualHSV = {\n        h: 0,\n        s: 0,\n        v: 0\n    };\n    let svPointerListener;\n    let hPointerListener;\n\n\n    const pickerButton = BB.el({\n        title: LANG('eyedropper') + ' [Alt]',\n        className: 'color-picker-preview-button',\n        css: {\n            width: '30px',\n            height: '30px',\n            backgroundImage: 'url(' + eyedropperImg + ')',\n            backgroundRepeat:  'no-repeat',\n            backgroundSize: '70%',\n            backgroundPosition: 'center'\n        }\n    });\n    let isPicking = false;\n\n\n    pickerButton.onclick = function () {\n        if (isPicking === false) {\n            pickerButton.classList.remove('color-picker-preview-button-hover');\n            pickerButton.classList.add('color-picker-preview-button-active');\n            isPicking = true;\n            pickCallback(true);\n        } else {\n            pickCallback(false);\n            _this.pickingDone();\n        }\n    };\n    const pickerButtonPointerListener = new BB.PointerListener({\n        target: pickerButton,\n        onEnterLeave: function(isOver) {\n            if (isPicking) {\n                return;\n            }\n            pickerButton.classList.toggle('color-picker-preview-button-hover', isOver);\n        }\n    });\n    divPreview.appendChild(pickerButton);\n\n\n    const hexButton = BB.el({\n        content: '#',\n        className: 'color-picker-preview-button',\n        title: LANG('manual-color-input'),\n        css: {\n            height: '100%',\n            width: height + 'px',\n            lineHeight: height + 'px',\n            fontSize: (height * 0.65) + 'px'\n        },\n        onClick: function() {\n            HexColorDialog({\n                color: new BB.RGB(primaryColorRGB.r, primaryColorRGB.g, primaryColorRGB.b),\n                onClose: function(rgbObj) {\n                    if (!rgbObj) {\n                        return;\n                    }\n                    _this.setColor(rgbObj);\n                    emitColor(new BB.RGB(primaryColorRGB.r, primaryColorRGB.g, primaryColorRGB.b));\n                }\n            });\n        }\n    });\n    const hexButtonPointerListener = new BB.PointerListener({\n        target: hexButton,\n        onEnterLeave: function(isOver) {\n            hexButton.classList.toggle('color-picker-preview-button-hover', isOver);\n        }\n    });\n    divPreview.appendChild(hexButton);\n\n    setColPreview();\n\n\n    setTimeout(function() {\n        createHueBg(divH);\n        divH.appendChild(controlH);\n        svPointerListener = new BB.PointerListener({\n            target: svWrapper,\n            maxPointers: 1,\n            fixScribble: true,\n            onPointer: function(event) {\n                if (event.type === 'pointerdown') {\n\n                    // prevent manual slider input keeping focus on iPad\n                    BB.unfocusAnyInput();\n\n                    BB.css(SVContainer, {\n                        boxShadow: '0px 0px 0px 1px rgb(255,255,255)',\n                        zIndex: '1'\n                    });\n\n                    if (event.button === 'left') {\n\n                        virtualHSV.s = event.relX / width * 100;\n                        virtualHSV.v = 100 - event.relY / svHeight * 100;\n\n                        primaryColorHSV = new BB.HSV(primaryColorHSV.h, virtualHSV.s, virtualHSV.v);\n                        primaryColorRGB = BB.ColorConverter.toRGB(primaryColorHSV);\n\n                        updateSVPointer();\n                        setColPreview();\n                        emitColor(BB.ColorConverter.toRGB(primaryColorHSV));\n                    } else {\n                        virtualHSV.s = primaryColorHSV.s;\n                        virtualHSV.v = primaryColorHSV.v;\n                    }\n                }\n\n                if (event.type === 'pointermove' && ['left', 'right'].includes(event.button)) {\n\n                    let factor = 1;\n                    if (event.button === 'right') {\n                        factor = 0.5;\n                    }\n\n                    virtualHSV.s += event.dX / width * 100 * factor;\n                    virtualHSV.v -= event.dY / svHeight * 100 * factor;\n\n                    primaryColorHSV = new BB.HSV(primaryColorHSV.h, virtualHSV.s, virtualHSV.v);\n                    primaryColorRGB = BB.ColorConverter.toRGB(primaryColorHSV);\n                    updateSVPointer();\n                    setColPreview();\n                    emitColor(BB.ColorConverter.toRGB(primaryColorHSV));\n\n                }\n\n                if (event.type === 'pointerup') {\n                    BB.css(SVContainer, {\n                        boxShadow: '0 0 0 1px rgb(188, 188, 188)',\n                        zIndex: '0'\n                    });\n                }\n\n            }\n        });\n        hPointerListener = new BB.PointerListener({\n            target: divH,\n            maxPointers: 1,\n            fixScribble: true,\n            onPointer: function(event) {\n\n                if (event.type === 'pointerdown') {\n\n                    // prevent manual slider input keeping focus on iPad\n                    BB.unfocusAnyInput();\n\n                    BB.css(divH, {\n                        boxShadow: '0px 0px 0px 1px rgba(255,255,255,1)'\n                    });\n\n                    if (event.button === 'left') {\n\n                        virtualHSV.h = event.relX / width * 359.99;\n\n                        primaryColorHSV = new BB.HSV(virtualHSV.h, primaryColorHSV.s, primaryColorHSV.v);\n                        primaryColorRGB = BB.ColorConverter.toRGB(primaryColorHSV);\n                        controlH.style.left = (Math.round(primaryColorHSV.h / 359.99 * width) - 1) + 'px';\n                        updateSVCanvas();\n                        setColPreview();\n                        emitColor(BB.ColorConverter.toRGB(primaryColorHSV));\n                    } else {\n                        virtualHSV.h = primaryColorHSV.h;\n                    }\n                }\n\n                if (event.type === 'pointermove' && ['left', 'right'].includes(event.button)) {\n\n                    const deltaY = Math.abs(event.pageY - event.downPageY);\n                    const factor = calcSliderFalloffFactor(deltaY, event.button === 'right');\n\n                    virtualHSV.h += event.dX / width * 359.99 * factor;\n\n                    if (event.button === 'right') {\n                        virtualHSV.h = virtualHSV.h % 359.99;\n                        if (virtualHSV.h < 0) {\n                            virtualHSV.h += 359.99;\n                        }\n                    }\n                    virtualHSV.h = Math.min(359.99, virtualHSV.h);\n                    primaryColorHSV = new BB.HSV(virtualHSV.h, primaryColorHSV.s, primaryColorHSV.v);\n                    primaryColorRGB = BB.ColorConverter.toRGB(primaryColorHSV);\n                    controlH.style.left = (Math.round(primaryColorHSV.h / 359.99 * width) - 1) + 'px';\n                    updateSVCanvas();\n                    setColPreview();\n                    emitColor(BB.ColorConverter.toRGB(primaryColorHSV));\n\n                }\n\n                if (event.type === 'pointerup') {\n                    BB.css(divH, {\n                        boxShadow: 'rgb(188, 188, 188) 0 0 0 1px'\n                    });\n                }\n            }\n        });\n    }, 1);\n\n\n    // --- second color ---\n\n    const secondaryColorBtn = BB.el({\n        parent: outputDiv,\n        title: LANG('secondary-color') + ' [X]',\n        css: {\n            cursor: 'pointer',\n            marginLeft: '5px',\n            width: '22px',\n            height: '22px',\n            boxShadow: 'rgb(188, 188, 188) 0px 0px 0px 1px',\n            colorScheme: 'only light',\n        },\n        onClick: function(e) {\n            e.preventDefault();\n            swapColors();\n        }\n    });\n    function updateSecondaryColor() {\n        secondaryColorBtn.style.backgroundColor = BB.ColorConverter.toRgbStr(secondaryColorRGB);\n    }\n    function swapColors() {\n        // swap hsv\n        let tmp: any = secondaryColorHSV;\n        secondaryColorHSV = primaryColorHSV;\n        updatePrimaryHSV(tmp);\n        // swap rgb\n        tmp = secondaryColorRGB;\n        secondaryColorRGB = primaryColorRGB;\n        primaryColorRGB = tmp;\n\n        controlH.style.left = parseInt('' + (primaryColorHSV.h / 359 * width - 1)) + 'px';\n        updateSVCanvas();\n        updateSVPointer();\n        setColPreview();\n        updateSecondaryColor();\n\n        emitColor(new BB.RGB(primaryColorRGB.r, primaryColorRGB.g, primaryColorRGB.b));\n    }\n    updateSecondaryColor();\n\n\n\n    // --- interface ---\n\n    this.setColor = function (c) {\n        primaryColorRGB = {r: parseInt(c.r, 10), g: parseInt(c.g, 10), b: parseInt(c.b, 10)};\n        updatePrimaryHSV(BB.ColorConverter.toHSV(c));\n        controlH.style.left = parseInt('' + (primaryColorHSV.h / 359 * width - 1)) + 'px';\n        updateSVCanvas();\n        updateSVPointer();\n        setColPreview();\n    };\n\n    this.getColor = function () {\n        return new BB.RGB(primaryColorRGB.r, primaryColorRGB.g, primaryColorRGB.b);\n    };\n\n    this.getSecondaryRGB = function() {\n        return new BB.RGB(secondaryColorRGB.r, secondaryColorRGB.g, secondaryColorRGB.b);\n    };\n\n    this.setPickCallback = function (func) {\n        pickCallback = func;\n    };\n\n    this.pickingDone = function () {\n        if (!isPicking) {\n            return;\n        }\n        isPicking = false;\n        pickerButton.classList.remove('color-picker-preview-button-active');\n    };\n\n    this.enable = function (e) {\n        if (e) {\n            div.style.pointerEvents = '';\n            div.style.opacity = '1';\n            outputDiv.style.pointerEvents = '';\n            outputDiv.style.opacity = '1';\n        } else {\n            div.style.pointerEvents = 'none';\n            div.style.opacity = '0.5';\n            outputDiv.style.pointerEvents = 'none';\n            outputDiv.style.opacity = '0.5';\n        }\n    };\n\n    this.setHeight = function (h) {\n        h = parseInt('' +(h - height * 2 - 3), 10);\n        if (h === svHeight) {\n            return;\n        }\n        svHeight = h;\n        BB.css(svSvg, {\n            width: width + 'px',\n            height: svHeight + 'px'\n        });\n        SVContainer.style.height = svHeight + 'px';\n        updateSVPointer();\n    };\n\n    this.swapColors = function() {\n        swapColors();\n    };\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.getOutputElement = function() {\n        return outputDiv;\n    }\n\n};","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tool-picker.54196984.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {calcSliderFalloffFactor} from './slider-falloff';\n\n\n/**\n * a small color slider\n *\n * params {\n * \t width: 200,\n * \t heightSV: 200,\n * \t heightH: 10,\n * \t color: {r,g,b}\n * \t callback: function(c){}\n * }\n *\n * @param params\n * @constructor\n */\nexport const KlSmallColorSlider = function (params) {\n    const div = document.createElement('div');\n    div.oncontextmenu = function(e) {\n        e.preventDefault();\n    };\n    let color = BB.ColorConverter.toHSV(new BB.RGB(params.color.r, params.color.g, params.color.b));\n    BB.css(div, {\n        width: params.width + 'px',\n        position: 'relative',\n        overflow: 'hidden',\n        userSelect: 'none'\n    });\n\n    const canvasSV = BB.canvas(10, 10);\n    canvasSV.style.width = params.width + 'px';\n    canvasSV.style.height = params.heightSV + 'px';\n    canvasSV.style.cursor = 'crosshair';\n\n    function updateSV() {\n        const ctx = canvasSV.getContext('2d');\n        for (let i = 0; i < canvasSV.height; i += 1) {\n            const gradient1 = ctx.createLinearGradient(0, 0, canvasSV.width, 0);\n\n            const colleft = BB.ColorConverter.toRGB(new BB.HSV(color.h, 1, 100 - (i / canvasSV.height * 100.0)));\n            const colright = BB.ColorConverter.toRGB(new BB.HSV(color.h, 100, 100 - (i / canvasSV.height * 100.0)));\n            gradient1.addColorStop(0, '#' + BB.ColorConverter.toHexString(colleft));\n            gradient1.addColorStop(1, '#' + BB.ColorConverter.toHexString(colright));\n            ctx.fillStyle = '#ff0000'; //needed for chrome...otherwise alpha problem\n            ctx.fillStyle = gradient1;\n            ctx.fillRect(0, i, canvasSV.width, 1);\n        }\n    }\n\n    updateSV();\n\n    const canvasH = BB.canvas(params.width, params.heightH);\n    canvasH.style.cursor = 'ew-resize';\n    (function () {\n        const ctx = canvasH.getContext('2d');\n\n        const gradH = ctx.createLinearGradient(0, 0, params.width, 0);\n        for (let i = 0; i < 1; i += 0.01) {\n            const col = BB.ColorConverter.toRGB(new BB.HSV(i * 360, 100, 100));\n            gradH.addColorStop(i, 'rgba(' + parseInt('' + col.r) + ', ' + parseInt('' + col.g) + ', ' + parseInt('' + col.b) + ', 1)');\n        }\n        ctx.fillStyle = gradH;\n        ctx.fillRect(0, 0, params.width, params.heightH);\n\n    })();\n    BB.css(canvasSV, {\n        width: params.width + 'px',\n        height: params.heightSV + 'px',\n        overflow: 'hidden',\n        position: 'relative'\n    });\n    canvasSV.style.cssFloat = 'left';\n    canvasH.style.cssFloat = 'left';\n\n    div.appendChild(canvasSV);\n    div.appendChild(canvasH);\n\n    const pointerSV = document.createElement('div');\n    BB.css(pointerSV, {\n        width: '8px',\n        height: '8px',\n        borderRadius: '8px',\n        position: 'absolute',\n        pointerEvents: 'none',\n        boxShadow: '0 0 0 1px #000, inset 0 0 0 1px #fff'\n    });\n    div.appendChild(pointerSV);\n\n    const pointerH = document.createElement('div');\n    BB.css(pointerH, {\n        width: '0',\n        height: params.heightH + 'px',\n        borderLeft: '1px solid #fff',\n        borderRight: '1px solid #000',\n        position: 'absolute',\n        top: params.heightSV + 'px',\n        pointerEvents: 'none'\n    });\n    div.appendChild(pointerH);\n\n\n    function updateSVPointer() {\n        const left = color.s / 100 * params.width - 4;\n        const top = (1 - color.v / 100) * params.heightSV - 4;\n        BB.css(pointerSV, {\n            left: left + 'px',\n            top: top + 'px'\n        });\n        /*if (top < params.heightSV/3) {\n        pointerSV.style.border = \"1px solid rgba(0,0,0,1)\";\n    } else {\n        pointerSV.style.border = \"1px solid rgba(255,255,255,1)\";\n    }*/\n    }\n\n    function updateHPointer() {\n        pointerH.style.left = (color.h / 359.999 * params.width - 1) + 'px';\n    }\n\n    updateSVPointer();\n    updateHPointer();\n\n    const virtualHSV = {\n        h: 0,\n        s: 0,\n        v: 0\n    };\n\n    let svPointerId = null;\n    const svPointerListener = new BB.PointerListener({\n        target: canvasSV,\n        maxPointers: 1,\n        fixScribble: true,\n        onPointer: function(event) {\n\n            if (event.type === 'pointerdown') {\n\n                // prevent manual slider input keeping focus on iPad\n                BB.unfocusAnyInput();\n\n                svPointerId = event.pointerId;\n                if (event.button === 'left') {\n\n                    virtualHSV.s = event.relX / params.width * 100;\n                    virtualHSV.v = 100 - event.relY / params.heightSV * 100;\n\n                    color = new BB.HSV(color.h, virtualHSV.s, virtualHSV.v);\n\n                    updateSVPointer();\n                    params.callback(BB.ColorConverter.toRGB(color));\n                } else {\n                    virtualHSV.s = color.s;\n                    virtualHSV.v = color.v;\n                }\n            }\n\n            if (event.type === 'pointermove' && ['left', 'right'].includes(event.button) && svPointerId === event.pointerId) {\n\n                let factor = 1;\n                if (event.button === 'right') {\n                    factor = 0.5;\n                }\n\n                virtualHSV.s += event.dX / params.width * 100 * factor;\n                virtualHSV.v -= event.dY / params.heightSV * 100 * factor;\n\n                color = new BB.HSV(color.h, virtualHSV.s, virtualHSV.v);\n                updateSVPointer();\n                params.callback(BB.ColorConverter.toRGB(color));\n\n            }\n            if (event.type === 'pointerup') {\n                svPointerId = null;\n            }\n\n        }\n    });\n\n    let hPointerId = null;\n    const hPointerListener = new BB.PointerListener({\n        target: canvasH,\n        maxPointers: 1,\n        fixScribble: true,\n        onPointer: function(event) {\n\n            if (event.type === 'pointerdown') {\n                hPointerId = event.pointerId;\n                if (event.button === 'left') {\n\n                    virtualHSV.h = event.relX / params.width * 359.99;\n\n                    color = new BB.HSV(virtualHSV.h, color.s, color.v);\n                    updateSV();\n                    updateHPointer();\n                    params.callback(BB.ColorConverter.toRGB(color));\n                } else {\n                    virtualHSV.h = color.h;\n                }\n            }\n\n            if (event.type === 'pointermove' && ['left', 'right'].includes(event.button) && hPointerId === event.pointerId) {\n\n                const deltaY = Math.abs(event.pageY - event.downPageY);\n                const factor = calcSliderFalloffFactor(deltaY, event.button === 'right');\n\n                virtualHSV.h += event.dX / params.width * 359.99 * factor;\n\n                if (event.button === 'right') {\n                    virtualHSV.h = virtualHSV.h % 359.99;\n                    if (virtualHSV.h < 0) {\n                        virtualHSV.h += 359.99;\n                    }\n                }\n                virtualHSV.h = Math.min(359.99, virtualHSV.h);\n                color = new BB.HSV(virtualHSV.h, color.s, color.v);\n                updateSV();\n                updateHPointer();\n                params.callback(BB.ColorConverter.toRGB(color));\n\n            }\n            if (event.type === 'pointerup') {\n                hPointerId = null;\n            }\n        }\n    });\n\n\n    const cleardiv = document.createElement('div');\n    cleardiv.style.clear = 'both';\n    div.appendChild(cleardiv);\n\n    // --- interface ---\n    this.setColor = function (c) {\n        color = BB.ColorConverter.toHSV(new BB.RGB(c.r, c.g, c.b));\n        updateSV();\n        updateSVPointer();\n        updateHPointer();\n    };\n    this.getColor = function () {\n        return BB.ColorConverter.toRGB(color);\n    };\n    this.getElement = function() {\n        return div;\n    };\n    this.destroy = function() {\n        svPointerListener.destroy();\n        hPointerListener.destroy();\n    };\n    this.end = function() {\n        svPointerId = null;\n        hPointerId = null;\n    };\n\n};","import {BB} from '../../../bb/bb';\n\n\n/**\n * a slider that looks like this\n * ------O----\n *\n * param: {init, width, pointSize, callback(value, isFirst, isLast)}\n *\n * @param param\n * @constructor\n */\nexport const PointSlider = function(param) {\n\n    const div = document.createElement('div');\n    div.style.position = 'relative';\n    const sliderLine = BB.el({});\n    const sliderPoint = BB.el({\n        css: {\n            colorScheme: 'only light',\n        }\n    });\n    div.appendChild(sliderLine);\n    div.appendChild(sliderPoint);\n    let sliderPos;\n    let isDragging = false;\n\n    //sliderLine\n    {\n        BB.css(sliderLine, {\n            marginTop: parseInt('' + (param.pointSize / 2 - 1)) + 'px',\n            height: '2px',\n            background: '#aaa',\n            width: param.width + 'px'\n        });\n    }\n    //sliderPoint\n    const touchAreaEl = BB.el({ // expand clickable area\n        parent: sliderPoint,\n        css: {\n            // background: 'rgba(255,0,0,0.4)',\n            margin: '-7px 0 0 -7px',\n            width: 'calc(100% + 14px)',\n            height: 'calc(100% + 7px)',\n        }\n    });\n\n    function redrawPoint() {\n        sliderPoint.style.left = sliderPos + 'px';\n        if (isDragging) {\n            sliderPoint.style.boxShadow = '0 0 6px rgba(0,0,0,1)';\n        } else {\n            sliderPoint.style.boxShadow = '0 0 3px rgba(0,0,0,0.8)';\n        }\n    }\n    function getValue() {\n        return sliderPos /  (param.width - param.pointSize);\n    }\n\n    let pointerListener;\n    {\n        let isFirst;\n        sliderPos = BB.clamp(param.init * (param.width - param.pointSize), 0, param.width - param.pointSize);\n        BB.css(sliderPoint, {\n            position: 'absolute',\n            top: '0px',\n            backgroundColor: '#eaeaea',\n            boxShadow: '0 0 3px rgba(0,0,0,0.8)',\n            width: param.pointSize + 'px',\n            height: param.pointSize + 'px',\n            borderRadius: param.pointSize + 'px',\n            cursor: 'ew-resize',\n            transition: 'box-shadow 0.2s ease-in-out'\n        });\n        redrawPoint();\n        let imaginaryPos;\n        pointerListener = new BB.PointerListener({\n            target: sliderPoint,\n            fixScribble: true,\n            onPointer: function(event) {\n                if (event.type === 'pointerdown' && event.button === 'left') {\n                    isFirst = true;\n                    isDragging = true;\n                    imaginaryPos = sliderPos;\n                    redrawPoint();\n                    event.eventStopPropagation();\n                } else if (event.type === 'pointermove' && event.button === 'left') {\n                    event.eventStopPropagation();\n                    imaginaryPos = imaginaryPos + event.dX;\n                    sliderPos = parseInt('' + BB.clamp(imaginaryPos, 0, param.width - param.pointSize));\n                    redrawPoint();\n                    param.callback(getValue(), isFirst, false);\n                    isFirst = false;\n                }\n                if (event.type === 'pointerup') {\n                    event.eventStopPropagation();\n                    isDragging = false;\n                    redrawPoint();\n                    param.callback(getValue(), false, true);\n                }\n            }\n        })\n    }\n\n    // --- interface ---\n    this.getEl = function() {\n        return div;\n    };\n    this.setActive = function(isActive) {\n        if (isActive) {\n            sliderPoint.style.backgroundColor = '#fff';\n        } else {\n            sliderPoint.style.backgroundColor = '#eaeaea';\n        }\n    };\n    this.destroy = function() {\n        pointerListener.destroy();\n    };\n};","import {BB} from '../../../bb/bb';\n\n/**\n * UI to pick between colors in colorArr. can display full transparent (checkerboard).\n * Can't deal with 0.5 alpha.\n * Rectangular buttons.\n *\n * p = {\n *     colorArr: rgba[], // duplicates are removed\n *     onChange: func(rgbaObj),\n *     label: string,\n *     initialIndex: int// optional, index before duplicates were removed\n * }\n *\n * @param p\n * @constructor\n */\nexport const ColorOptions = function(p) {\n    const div = BB.el({\n        content: p.label ? p.label : '',\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            colorScheme: 'only light',\n        }\n    });\n\n    let selectedIndex = 0;\n    const colorArr = [];\n    const buttonArr = [];\n    const buttonSize = 22;\n    const checkerUrl = BB.createCheckerDataUrl(5);\n\n    // build colorArr while removing duplicates\n    for (let i = 0; i < p.colorArr.length; i++) {\n        const item = p.colorArr[i];\n        let found = false;\n        for (let e = 0; e < colorArr.length; e++) {\n            const sItem = colorArr[e];\n            if (sItem === null || item === null) {\n                continue;\n            }\n            if (sItem.r === item.r && sItem.g === item.g && sItem.b === item.b && sItem.a === item.a) {\n                found = true;\n                break;\n            }\n        }\n        if (found) {\n            continue;\n        }\n        colorArr.push(item);\n        if ('initialIndex' in p && p.initialIndex === i) {\n            selectedIndex = colorArr.length - 1;\n        }\n    }\n\n    for (let i = 0; i < colorArr.length; i++) {\n        (function(i) {\n\n            const colorButton = BB.el({\n                content: colorArr[i] ? '' : 'X',\n                css: {\n                    width: buttonSize + 'px',\n                    height: buttonSize + 'px',\n                    backgroundColor: colorArr[i] ? BB.ColorConverter.toRgbaStr(colorArr[i]) : 'transparent',\n                    marginLeft: '7px',\n                    boxShadow: '0 0 0 1px #aaa',\n                    cursor: 'pointer',\n                    userSelect: 'none',\n                    textAlign: 'center',\n                    lineHeight: (buttonSize + 1) + 'px',\n                    color: '#aaa'\n                }\n            });\n            if (colorArr[i] && colorArr[i].a === 0) {\n                colorButton.style.backgroundImage = 'url(' + checkerUrl + ')';\n            }\n\n            colorButton.onclick = function(e) {\n                e.preventDefault();\n                selectedIndex = i;\n                update();\n                p.onChange(colorArr[i]);\n            };\n\n            (colorButton as any).setIsSelected = function(b) {\n                if (b) {\n                    BB.css(colorButton, {\n                        boxShadow: '0 0 0 2px var(--active-highlight-color), 0 0 5px 0 var(--active-highlight-color)',\n                        pointerEvents: 'none'\n                    });\n                } else {\n                    BB.css(colorButton, {\n                        boxShadow: '0 0 0 1px #aaa',\n                        pointerEvents: ''\n                    });\n                }\n            };\n\n\n            div.appendChild(colorButton);\n            buttonArr.push(colorButton);\n        })(i);\n    }\n\n\n    function update() {\n        for (let i = 0; i < buttonArr.length; i++) {\n            buttonArr[i].setIsSelected(i === selectedIndex);\n        }\n    }\n    update();\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n\n    this.destroy = () => {\n        buttonArr.forEach(item => {\n            item.onclick = null;\n        });\n        buttonArr.splice(0, buttonArr.length);\n    };\n};","import {BB} from '../../../bb/bb';\n\n/**\n * selectable options\n * p = {\n *     optionArr: {\n *          id: string,\n *          label: string | HTMLElement\n *     }[],\n *     initialId?: string,\n *     onChange: function(id string): void,\n *     changeOnInit?: boolean, // trigger change on creation\n * }\n *\n * @param p\n * @constructor\n */\nexport const Options = function(p) {\n    const div = BB.el({});\n\n    const wrapperEl = BB.el({\n        parent: div,\n        className: 'kl-option-wrapper',\n        css: {\n            display: 'flex'\n        }\n    });\n\n    const optionArr: {\n        id: string;\n        el: HTMLElement;\n    }[] = [];\n    let selectedId = 'initialId' in p ? p.initialId : p.optionArr[0].id;\n\n    function createOption(o) {\n        const optionObj = {\n            id: o.id,\n            el: null,\n        };\n\n        const classArr = ['kl-option'];\n        if (p.isSmall) {\n            classArr.push('kl-option--small');\n        }\n        if (typeof o.label !== 'string') {\n            classArr.push('kl-option--custom-el');\n            BB.css(o.label, {\n                display: 'block',\n                pointerEvents: 'none',\n            });\n        }\n\n        optionObj.el = BB.el({\n            parent: wrapperEl,\n            content: o.label,\n            className: classArr.join(' '),\n            onClick: function() {\n                if (selectedId !== optionObj.id) {\n                    selectedId = optionObj.id;\n                    update();\n                    p.onChange(selectedId);\n                }\n            }\n        });\n\n        if (o.title) {\n            optionObj.el.title = o.title;\n        }\n\n        optionArr.push(optionObj);\n    }\n\n    function update() {\n        for (let i = 0; i < optionArr.length; i++) {\n            optionArr[i].el.classList.toggle('kl-option-selected', optionArr[i].id === selectedId);\n        }\n    }\n\n    for (let i = 0; i < p.optionArr.length; i++) {\n        createOption(p.optionArr[i]);\n    }\n\n    update();\n\n    if (p.changeOnInit) {\n        setTimeout(function() {\n            p.onChange(selectedId);\n        }, 0);\n    }\n\n    function getIndex() {\n        for (let i = 0; i < optionArr.length; i++) {\n            if (optionArr[i].id === selectedId) {\n                return i;\n            }\n        }\n    }\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n    this.getValue = function() {\n        return selectedId;\n    }\n    this.next = function() {\n        selectedId = optionArr[(getIndex() + 1) % optionArr.length].id;\n        update();\n        p.onChange(selectedId);\n    };\n    this.previous = function() {\n        selectedId = optionArr[(optionArr.length + getIndex() - 1) % optionArr.length].id;\n        update();\n        p.onChange(selectedId);\n    };\n    this.destroy = () => {\n        optionArr.forEach(item => {\n            BB.destroyEl(item.el);\n        });\n        optionArr.splice(0, optionArr.length);\n    };\n};","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport angleSvg from 'url:~/src/app/img/ui/angle.svg';\n\n\ntype TUiState = 'left' | 'right';\n\n/**\n * display little messages at the top of KlWorkspace\n */\nexport class StatusOverlay {\n\n    private el: HTMLDivElement;\n    private innerEl: HTMLDivElement;\n    private angleIm: HTMLImageElement;\n    private innerInnerEl: HTMLDivElement;\n    private isWide: boolean;\n    private uiState: TUiState;\n\n    private timeout: number;\n    private timeout2: number;\n    private timeout3: number;\n\n    private updateUiState() {\n        if (!this.el) {\n            return;\n        }\n        setTimeout(()=>{}, 100);\n        if (this.uiState === 'left') {\n            this.el.style.left = '271px';\n        } else {\n            this.el.style.removeProperty('left');\n        }\n    }\n\n    private init() {\n        this.el = BB.el({\n            className: \"top-overlay g-root\",\n            onClick: BB.handleClick,\n        }) as HTMLDivElement;\n\n        if (this.isWide) {\n            this.el.style.width = '100%';\n        }\n\n        this.updateUiState();\n\n        this.innerEl = BB.el({\n            className: 'top-overlay-inner',\n        }) as HTMLDivElement\n\n\n        this.angleIm = new Image();\n        this.angleIm.src = angleSvg;\n        BB.css(this.angleIm, {\n            verticalAlign: 'bottom',\n            width: '20px',\n            height: '20px',\n            marginLeft: '5px',\n            borderRadius: '10px'\n        });\n\n        this.innerInnerEl = document.createElement('div');\n        this.innerInnerEl.style.display = 'inline-block';\n\n        this.innerEl.appendChild(this.innerInnerEl);\n        this.innerEl.appendChild(this.angleIm);\n        this.el.appendChild(this.innerEl);\n        document.body.appendChild(this.el);\n        this.el.style.display = \"none\";\n    }\n\n\n    // --- public ---\n\n    constructor () {\n        this.init();\n    }\n\n    setWide(b: boolean) {\n        this.isWide = !!b;\n\n        if (!this.el) {\n            return;\n        }\n\n        if (this.isWide) {\n            this.el.style.width = '100%';\n            this.el.style.left = '';\n        } else {\n            this.el.style.removeProperty('width');\n            this.el.style.left = this.uiState === 'left' ? '271px' : '';\n        }\n    }\n\n    setUiState(state: TUiState) {\n        this.uiState = state;\n        this.updateUiState();\n    }\n\n    out(msg: string | {type: 'transform', angleDeg: number, scale: number}, doPulse?: boolean) {\n\n        if (msg && typeof msg === 'object') {\n\n            if (msg.type === 'transform') {\n                this.angleIm.style.display = 'inline-block';\n                this.angleIm.style.transform = 'rotate(' + msg.angleDeg + 'deg)';\n\n                if (msg.angleDeg % 90 === 0) {\n                    this.angleIm.style.boxShadow = 'inset 0 0 0 1px rgba(255, 255, 255, 0.7)';\n                } else {\n                    this.angleIm.style.boxShadow = '';\n                }\n\n                this.innerInnerEl.innerHTML = Math.round(msg.scale * 100) + \"%\";\n\n\n            } else {\n                this.angleIm.style.display = 'none';\n            }\n\n\n\n        } else if (typeof msg === 'string') {\n            this.angleIm.style.display = 'none';\n            this.innerInnerEl.innerHTML = msg;\n        }\n\n        if (doPulse) {\n            this.innerEl.style.animation = '';\n            setTimeout(\n                () => this.innerEl.style.animation = 'top-overlay-pulse 0.5s ease-out',\n                20\n            );\n            if (this.timeout3) {\n                clearTimeout(this.timeout3);\n            }\n            this.timeout3 = window.setTimeout(\n                () => this.innerEl.style.animation = '',\n                520\n            );\n        }\n\n\n\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n        }\n        if (this.timeout2) {\n            clearTimeout(this.timeout2);\n        }\n        this.el.style.animationName = doPulse ? 'consoleInFast' : \"consoleIn\";\n        this.el.style.opacity = \"1\";\n        this.timeout = window.setTimeout(() => {\n            this.el.style.opacity = \"0\";\n            this.el.style.animationName = \"consoleOut\";\n            this.timeout2 = window.setTimeout(() => {\n                this.el.style.display = \"none\";\n                this.timeout2 = 0;\n            }, 450);\n            this.timeout = 0;\n        }, 1200);\n        this.el.style.display = \"flex\";\n    }\n\n\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"angle.aba27c2c.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {popup} from './popup';\n\nexport function exportDialog(parent, image) {\n    let boxSize, aboutCloseFunc, aboutDiv, closed, aniToggle, imageContainer, coverImage, coverSize,\n        text, holding, aniTimeout, halfBoxSize;\n    boxSize = 22 * 2;\n    halfBoxSize = 22;\n    aboutCloseFunc = function () {\n    };\n    closed = false;\n    aniToggle = false;\n    aboutDiv = document.createElement(\"div\");\n    BB.css(aboutDiv, {\n        width: (7 * boxSize) + \"px\"\n    });\n\n    imageContainer = document.createElement(\"div\");\n    coverImage = new Image();\n    coverImage.src = image.src;\n\n    imageContainer.appendChild(coverImage);\n    imageContainer.appendChild(image);\n\n    BB.css(imageContainer, {\n        width: (6 * boxSize) + \"px\",\n        height: (4 * boxSize) + \"px\",\n        marginTop: (boxSize / 2 - 1) + \"px\",\n        marginLeft: (boxSize / 2 - 1) + \"px\",\n        position: \"relative\",\n        overflow: \"hidden\",\n        boxShadow: \"0 0 10px 4px rgba(255,255,255, 0)\",\n        border: \"1px solid rgba(255, 255, 255, 1)\",\n        transition: \"box-shadow 0.7s linear\"\n    });\n    BB.css(image, {\n        position: \"absolute\",\n        left: '0',\n        top: '0',\n        width: (6 * boxSize) + \"px\",\n        height: (4 * boxSize) + \"px\",\n        opacity: '0'\n    });\n    coverSize = {\n        width: (6 * boxSize),\n        height: (6 * boxSize / image.width) * image.height\n    };\n    if (coverSize.height < (4 * boxSize)) {\n        coverSize.height = (4 * boxSize);\n        coverSize.width = (coverSize.height / image.height) * image.width;\n    }\n    BB.css(coverImage, {\n        position: \"absolute\",\n        top: (2 * boxSize) + \"px\",\n        left: (3 * boxSize) + \"px\",\n        width: coverSize.width + \"px\",\n        height: coverSize.height + \"px\",\n        marginLeft: (-coverSize.width / 2) + \"px\",\n        marginTop: (-coverSize.height / 2) + \"px\"\n    });\n\n    function animation() {\n        if (closed) {\n            return;\n        }\n        aniToggle = !aniToggle;\n        if (aniToggle) {\n            BB.css(imageContainer, {\n                border: \"1px solid rgba(0, 0, 0, 1)\"\n            });\n        } else {\n            BB.css(imageContainer, {\n                border: \"1px solid rgba(200, 200, 200, 1)\"\n            });\n        }\n        setTimeout(animation, 510);\n    }\n\n    animation();\n\n    text = document.createElement(\"div\");\n    text.innerHTML = \"Right-Click or Press-Hold on the image, then save.\";\n    text.ontouchstart = function () {\n        return false;\n    };\n    BB.css(text, {\n        fontSize: (boxSize / 2.5) + \"px\",\n        color: \"#666\",\n        padding: \"10px\",\n        textAlign: \"center\"\n    });\n\n    aboutDiv.appendChild(imageContainer);\n    aboutDiv.appendChild(text);\n\n    holding = false;\n    image.ontouchstart = function () {\n        BB.css(imageContainer, {\n            boxShadow: \"0 0 10px 8px rgba(0,255,255, 1)\"\n        });\n        holding = true;\n        aniTimeout = setTimeout(function () {\n            holding = false;\n            BB.css(imageContainer, {\n                boxShadow: \"0 0 10px 4px rgba(0,255,255, 0)\"\n            });\n        }, 1500);\n    };\n    image.ontouchmove = function () {\n        BB.css(imageContainer, {\n            boxShadow: \"0 0 10px 4px rgba(0,255,255, 0)\"\n        });\n        holding = false;\n        clearTimeout(aniTimeout);\n    };\n    image.ontouchend = function () {\n        BB.css(imageContainer, {\n            boxShadow: \"0 0 10px 4px rgba(0,255,255, 0)\"\n        });\n        holding = false;\n        clearTimeout(aniTimeout);\n    };\n\n    popup({\n        target: parent,\n        message: \"<b>Save Image</b>\",\n        div: aboutDiv,\n        buttons: [\"Close\"],\n        callback: function (result) {\n            closed = true;\n        }\n    });\n}","import {BB} from '../../../bb/bb';\n\n/**\n * element that lets you crop an image and copy it via right click\n *\n * param = {\n *     width: number,\n *     height: number,\n *     canvas: image | canvas,\n *     isNotCopy: boolean,\n *     onChange: function(width, height)\n * }\n *\n * @param param object\n * @constructor\n */\nexport function CropCopy(param) {\n    const div = document.createElement('div');\n    BB.css(div, {\n        position: 'relative',\n        height: param.height + 'px',\n        width: param.width + 'px',\n        overflow: 'hidden',\n        colorScheme: 'only light',\n    });\n    div.style.position = 'relative';\n\n    let crop;\n    function resetCrop() {\n        crop = {\n            x: 0,\n            y: 0,\n            width: param.canvas.width,\n            height: param.canvas.height\n        };\n    }\n    resetCrop();\n\n\n    function updateCroppedCanvas() {\n        croppedCanvas.width = Math.round(crop.width);\n        croppedCanvas.height = Math.round(crop.height);\n        let ctx = croppedCanvas.getContext('2d');\n        ctx.drawImage(param.canvas, Math.round(-crop.x), Math.round(-crop.y));\n        if (croppedImage) {\n            croppedImage.src = croppedCanvas.toDataURL('image/png');\n        }\n\n        if (param.onChange) {\n            param.onChange(croppedCanvas.width, croppedCanvas.height);\n        }\n    }\n    function updateSelectionRect() {\n        BB.css(selectionRect, {\n            left: (thumbX + crop.x * scaleW) + 'px',\n            top: (thumbY + crop.y * scaleH) + 'px',\n            width: (crop.width * scaleW) + 'px',\n            height: (crop.height * scaleH) + 'px'\n        });\n        if (param.onChange) {\n            param.onChange(Math.round(crop.width), Math.round(crop.height));\n        }\n    }\n    function isInsideSelectionRect(p) {\n        let rect = {\n            x: Math.round(thumbX + crop.x * scaleW),\n            y: Math.round(thumbY + crop.y * scaleH),\n            width: Math.round(crop.width * scaleW),\n            height: Math.round(crop.height * scaleH)\n        };\n        return BB.isInsideRect(p, rect);\n    }\n\n    const croppedCanvas = BB.canvas();\n    let eventTarget = croppedCanvas;\n    let croppedImage = null;\n    if (!param.isNotCopy) { //navigator.appName === 'Microsoft Internet Explorer') { //i would prefer not using an image\n        croppedImage = new Image();\n        eventTarget = croppedImage;\n    }\n    BB.css(eventTarget, {\n        height: param.height + 'px',\n        width: param.width + 'px'\n    });\n    div.appendChild(eventTarget);\n    updateCroppedCanvas();\n\n    const padding = 20;\n    const previewWrapper = BB.el({\n        css: {\n            width: param.width + 'px',\n            height: param.height + 'px',\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            pointerEvents: 'none'\n        }\n    });\n    div.appendChild(previewWrapper);\n    BB.createCheckerDataUrl(4, function(v) {\n        previewWrapper.style.backgroundImage = 'url('+v+')';\n    });\n\n    const thumbSize = BB.fitInto(param.canvas.width, param.canvas.height, param.width - padding * 2, param.height - padding * 2, 1);\n    const thumbCanvas = BB.canvas(Math.round(thumbSize.width), Math.round(thumbSize.height));\n    thumbCanvas.style.imageRendering = 'pixelated';\n    const scaleW = thumbCanvas.width / param.canvas.width;\n    const scaleH = thumbCanvas.height / param.canvas.height;\n    const thumbCtx = thumbCanvas.getContext('2d');\n    thumbCtx.imageSmoothingEnabled = false;\n    thumbCtx.drawImage(param.canvas, 0, 0, thumbCanvas.width, thumbCanvas.height);\n    previewWrapper.appendChild(thumbCanvas);\n    const thumbX = parseInt('' + ((param.width - thumbCanvas.width) / 2));\n    const thumbY = parseInt('' + ((param.height - thumbCanvas.height) / 2));\n    BB.css(thumbCanvas, {\n        position: 'absolute',\n        left: thumbX + \"px\",\n        top: thumbY + \"px\"\n    });\n\n    const selectionRect = BB.el({\n        css: {\n            position: 'absolute',\n            boxShadow: '0 0 0 1px #fff, 0 0 0 2px #000, 0 0 40px 1px #000',\n        }\n    });\n    previewWrapper.appendChild(selectionRect);\n    updateSelectionRect();\n\n\n    function toOriginalSpace(p) {\n        return {\n            x: BB.clamp((p.x - thumbX) / scaleW, 0, param.canvas.width),\n            y: BB.clamp((p.y - thumbY) / scaleH, 0, param.canvas.height),\n        };\n    }\n    //gen crop from thumb-space points\n    function genCrop(p1, p2) {\n        let topLeftP = {\n            x: Math.min(p1.x, p2.x),\n            y: Math.min(p1.y, p2.y)\n        };\n        let bottomRightP = {\n            x: Math.max(p1.x, p2.x),\n            y: Math.max(p1.y, p2.y)\n        };\n        let origTopLeftP = toOriginalSpace(topLeftP);\n        let origBottomRightP = toOriginalSpace(bottomRightP);\n        origTopLeftP.x = Math.floor(origTopLeftP.x);\n        origTopLeftP.y = Math.floor(origTopLeftP.y);\n        origBottomRightP.x = Math.ceil(origBottomRightP.x);\n        origBottomRightP.y = Math.ceil(origBottomRightP.y);\n        return {\n            x: origTopLeftP.x,\n            y: origTopLeftP.y,\n            width: origBottomRightP.x - origTopLeftP.x,\n            height: origBottomRightP.y - origTopLeftP.y\n        };\n    }\n\n    function isReset() {\n        return crop.x === 0 && crop.y === 0 && crop.width === param.canvas.width && crop.height === param.canvas.height;\n    }\n\n    let startP;\n    let startCrop = null;\n    let isDragging = false;\n    let didMove = false;\n    let updateCropTimeout;\n    const pointerListener = new BB.PointerListener({\n        target: eventTarget,\n        fixScribble: true,\n        onPointer: function(event) {\n            let fullPos;\n            if (event.type === 'pointerdown' && event.button === 'left') {\n                event.eventPreventDefault();\n                isDragging = true;\n                startP = {\n                    x: event.relX,\n                    y: event.relY\n                };\n                if (!isReset() && isInsideSelectionRect(startP)) {\n                    startCrop = {\n                        x: crop.x,\n                        y: crop.y,\n                        width: crop.width,\n                        height: crop.height\n                    };\n                } else {\n                    crop = genCrop(startP, startP);\n                }\n            } else if (event.type === 'pointermove' && event.button === 'left') {\n                event.eventPreventDefault();\n                didMove = true;\n                if (startCrop) {\n                    crop.x = startCrop.x + Math.round((event.relX - startP.x) / scaleW);\n                    crop.y = startCrop.y + Math.round((event.relY - startP.y) / scaleH);\n                    crop.x = BB.clamp(crop.x, 0, param.canvas.width - crop.width);\n                    crop.y = BB.clamp(crop.y, 0, param.canvas.height - crop.height);\n                } else {\n                    crop = genCrop(startP, {x: event.relX, y: event.relY});\n                }\n                updateSelectionRect();\n            } else if (event.type === 'pointerup' && startP) {\n                event.eventPreventDefault();\n                isDragging = false;\n                startCrop = null;\n                startP = null;\n                if (crop.width === 0 || crop.height === 0 || !didMove) {\n                    resetCrop();\n                    updateSelectionRect();\n                }\n                didMove = false;\n                updateCropTimeout = setTimeout(updateCroppedCanvas, 1);\n            }\n        }\n    });\n\n    const keyListener = new BB.KeyListener({\n        onDown: function(keyStr, e, comboStr) {\n            if (isDragging) {\n                return;\n            }\n            let doUpdate = false;\n\n            let stepSize = Math.max(1, 1 / scaleW);\n            let shiftIsPressed = keyListener.isPressed('shift');\n\n            if (keyStr === 'left') {\n                if (shiftIsPressed) {\n                    crop.width = BB.clamp(crop.width - stepSize, 1, param.canvas.width - crop.x);\n                } else {\n                    crop.x = BB.clamp(crop.x - stepSize, 0, param.canvas.width - crop.width);\n                }\n                doUpdate = true;\n            }\n            if (keyStr === 'right') {\n                if (shiftIsPressed) {\n                    crop.width = BB.clamp(crop.width + stepSize, 1, param.canvas.width - crop.x);\n                } else {\n                    crop.x = BB.clamp(crop.x + stepSize, 0, param.canvas.width - crop.width);\n                }\n                doUpdate = true;\n            }\n            if (keyStr === 'up') {\n                if (shiftIsPressed) {\n                    crop.height = BB.clamp(crop.height - stepSize, 1, param.canvas.height - crop.y);\n                } else {\n                    crop.y = BB.clamp(crop.y - stepSize, 0, param.canvas.height - crop.height);\n                }\n                doUpdate = true;\n            }\n            if (keyStr === 'down') {\n                if (shiftIsPressed) {\n                    crop.height = BB.clamp(crop.height + stepSize, 1, param.canvas.height - crop.y);\n                } else {\n                    crop.y = BB.clamp(crop.y + stepSize, 0, param.canvas.height - crop.height);\n                }\n                doUpdate = true;\n            }\n\n            if (doUpdate) {\n                e.preventDefault();\n                updateSelectionRect();\n                clearTimeout(updateCropTimeout);\n                updateCropTimeout = setTimeout(updateCroppedCanvas, 100);\n            }\n        }\n    });\n\n    this.getEl = function() {\n        return div;\n    };\n    this.reset = function() {\n        resetCrop();\n        updateCroppedCanvas();\n        updateSelectionRect();\n    };\n    this.destroy = function() {\n        eventTarget.style.removeProperty('width');\n        eventTarget.style.removeProperty('height');\n        keyListener.destroy();\n        pointerListener.destroy();\n    };\n    this.isReset = function() {\n        return isReset();\n    };\n    this.getRect = function() {\n        return JSON.parse(JSON.stringify(crop));\n    };\n    this.getCroppedImage = function() {\n        return croppedCanvas;\n    };\n}\n","import {BB} from '../../../bb/bb';\nimport {popup} from './popup';\nimport {CropCopy} from '../components/crop-copy';\nimport {LANG} from '../../../language/language';\n\n/// <reference path=\"./types.d.ts\" />\n\n/**\n *\n * @param parent\n * @param fullCanvas\n * @param cropCallback\n * @param output - BB.Output\n * @param showCrop - boolean - show crop button\n */\nexport function clipboardDialog(parent, fullCanvas, cropCallback, output, showCrop) {\n\n    let clipboardItemIsSupported = false;\n    try {\n        clipboardItemIsSupported = !!ClipboardItem;\n    } catch (e) {}\n\n    const div = document.createElement(\"div\");\n    const isSmall = window.innerWidth < 550 || window.innerHeight < 550;\n\n    let topWrapper = BB.el({\n        content: LANG('crop-drag-to-crop') + (clipboardItemIsSupported ? '' : '<br>' + LANG('cropcopy-click-hold')),\n        css: {\n            textAlign: 'center'\n        }\n    });\n    div.appendChild(topWrapper);\n\n\n    let cropCopy = new CropCopy({\n        width: isSmall ? 340 : 540,\n        height: isSmall ? 300 : 350,\n        canvas: fullCanvas,\n        clipboardItemIsSupported\n    });\n    BB.css(cropCopy.getEl(), {\n        marginTop: '10px',\n        marginLeft: '-20px',\n        borderTop: '1px solid #bbb',\n        borderBottom: '1px solid #bbb'\n    });\n    div.appendChild(cropCopy.getEl());\n\n    function toClipboard() {\n        const imgURL = cropCopy.getCroppedImage().toDataURL('image/png');\n        setTimeout(async function() {\n            try {\n                const data = await fetch(imgURL);\n                const blob = await data.blob();\n                await (navigator.clipboard as any).write([\n                    new ClipboardItem({\n                        [blob.type]: blob\n                    } as any) // todo check is possible?\n                ]);\n                setTimeout(function() {\n                    output.out(LANG('cropcopy-copied'), true);\n                }, 200);\n            } catch (err) {\n                console.error(err.name, err.message);\n            }\n        }, 0);\n    }\n\n    let keyListener = new BB.KeyListener({\n        onDown: function(keyStr, KeyEvent, comboStr) {\n            if (comboStr === 'ctrl+c') {\n                toClipboard();\n                closefunc();\n            }\n        }\n    });\n\n    let closefunc;\n    function blur() {\n        closefunc();\n    }\n    BB.addEventListener(window, \"blur\", blur);\n\n    const buttonArr = [];\n    if (clipboardItemIsSupported) {\n        buttonArr.push(LANG('cropcopy-btn-copy'));\n    }\n    if (showCrop) {\n        buttonArr.push(LANG('cropcopy-btn-crop'));\n    }\n    buttonArr.push('Cancel');\n\n    popup({\n        target: parent,\n        message: '<b>' + (showCrop ? `${LANG('cropcopy-title-copy')} / ${LANG('cropcopy-title-crop')}` : `${LANG('cropcopy-title-copy')}`) + '</b>',\n        div: div,\n        style: isSmall ? {} : {\n            width: \"500px\"\n        },\n        buttons: buttonArr,\n        primaries: [LANG('cropcopy-btn-copy')],\n        callback: function (result) {\n            if (result === LANG('cropcopy-btn-copy')) {\n                toClipboard();\n            } else if (result === LANG('cropcopy-btn-crop')) {\n                let rectObj = cropCopy.getRect();\n                cropCallback({\n                    left: Math.round(-rectObj.x),\n                    right: Math.round(rectObj.x + rectObj.width - fullCanvas.width),\n                    top: Math.round(-rectObj.y),\n                    bottom: Math.round(rectObj.y + rectObj.height - fullCanvas.height)\n                });\n            }\n            BB.removeEventListener(window, \"blur\", blur);\n            cropCopy.destroy();\n            keyListener.destroy();\n        },\n        clickOnEnter: LANG('cropcopy-btn-copy'),\n        closefunc: function (func) {\n            closefunc = func;\n        }\n    });\n}","import {BB} from '../../../bb/bb';\nimport {popup} from '../modals/popup';\nimport {klHistory} from '../../history/kl-history';\nimport {Options} from '../base-components/options';\nimport {Select} from '../base-components/select';\nimport {PointSlider} from '../base-components/point-slider';\n// @ts-ignore\nimport addLayerImg from 'url:~/src/app/img/ui/add-layer.svg';\n// @ts-ignore\nimport duplicateLayerImg from 'url:~/src/app/img/ui/duplicate-layer.svg';\n// @ts-ignore\nimport mergeLayerImg from 'url:~/src/app/img/ui/merge-layers.svg';\n// @ts-ignore\nimport removeLayerImg from 'url:~/src/app/img/ui/remove-layer.svg';\n// @ts-ignore\nimport renameLayerImg from 'url:~/src/app/img/ui/rename-layer.svg';\nimport {KlCanvas, MAX_LAYERS} from '../../canvas/kl-canvas';\nimport {IMixMode} from '../../kl.types';\nimport {LANG} from '../../../language/language';\nimport {translateBlending} from '../../canvas/translate-blending';\n\n\nexport function klLayerManager(p_canvas: KlCanvas, p_func, p_rootDiv) {\n    let klCanvas: KlCanvas = p_canvas;\n    let layerElArr = [];\n    let layerHeight = 35;\n    let layerSpacing = 0;\n    let width = 250;\n    let oldHistoryState;\n    let updatefunc = p_func;\n    let uiState = 'right'; // 'left | 'right'\n\n\n    let largeThumbDiv = BB.el({\n        onClick: BB.handleClick,\n        css: {\n            position: \"absolute\",\n            right: \"280px\",\n            top: \"500px\",\n            background: \"#aaa\",\n            boxShadow: \"1px 1px 3px rgba(0,0,0,0.3)\",\n            pointerEvents: \"none\",\n            padding: '0',\n            border: \"1px solid #aaa\",\n            transition: \"opacity 0.3s ease-out\",\n            userSelect: 'none',\n            colorScheme: 'only light',\n        }\n    });\n    BB.createCheckerDataUrl(4, function(url) {\n        largeThumbDiv.style.backgroundImage = \"url(\" + url + \")\";\n    });\n    let largeThumbCanvas = BB.canvas(200, 200);\n    largeThumbCanvas.style.display = \"block\";\n    largeThumbDiv.appendChild(largeThumbCanvas);\n    let largeThumbTimeout, largeThumbInTimeout;\n    let largeThumbInDocument = false;\n\n\n    let klCanvasLayerArr = klCanvas.getLayers();\n    let selectedSpotIndex = klCanvasLayerArr.length - 1;\n    let div = document.createElement(\"div\");\n    div.style.marginRight = \"10px\";\n    div.style.marginBottom = \"10px\";\n    div.style.marginLeft = \"10px\";\n    div.style.marginTop = \"10px\";\n    div.style.cursor = \"default\";\n\n    let listdiv = document.createElement(\"div\");\n    BB.css(listdiv, {\n        width: width + \"px\",\n        position: \"relative\"\n\n    });\n\n\n    function renameLayer(layer) {\n        let div = document.createElement('div');\n\n        let label = BB.el({\n            content: LANG('layers-rename-name') + ':',\n            css: {\n                marginRight: '5px'\n            }\n        });\n\n        const row = BB.el({\n            css: {\n                display: 'flex',\n            }\n        });\n        let input = document.createElement('input');\n        input.value = klCanvas.getLayer(layer).name;\n        input.setAttribute('data-ignore-focus', 'true');\n        const clearBtn = BB.el({\n            tagName: 'Button',\n            content: '<img src=\"' + removeLayerImg + '\" height=\"20\"/>',\n            title: LANG('layers-rename-clear'),\n            css: {\n                marginLeft: '10px',\n            },\n            onClick: () => {\n                input.value = '';\n                input.focus();\n            }\n        });\n        const suggestions = [\n            LANG('layers-rename-sketch'),\n            LANG('layers-rename-colors'),\n            LANG('layers-rename-shading'),\n            LANG('layers-rename-lines'),\n            LANG('layers-rename-effects'),\n            LANG('background'),\n            LANG('layers-rename-foreground'),\n        ];\n        const suggestionBtns = [];\n        const row2 = BB.el({\n            css: {\n                display: 'flex',\n                flexWrap: 'wrap',\n                marginTop: '5px',\n                marginLeft: '-5px',\n            }\n        }) as HTMLDivElement;\n        suggestions.forEach(item => {\n            const btn = BB.el({\n                parent: row2,\n                tagName: 'Button',\n                content: item,\n                onClick: () => {\n                    input.value = btn.textContent;\n                },\n                css: {\n                    margin: '5px 0 0 5px',\n                }\n            });\n            suggestionBtns.push(btn);\n        });\n\n        div.appendChild(label);\n        label.append(row, row2);\n        row.append(input, clearBtn);\n\n        setTimeout(function() {\n            input.focus();\n            input.select();\n        }, 10);\n\n        popup({\n            target: p_rootDiv,\n            message: `<b>${LANG('layers-rename-title')}</b>`,\n            div: div,\n            buttons: [LANG('layers-rename'), 'Cancel'],\n            primaries: [LANG('layers-rename')],\n            callback: function (val) {\n                BB.destroyEl(clearBtn);\n                suggestionBtns.forEach(item => {\n                    BB.destroyEl(item);\n                });\n                suggestionBtns.splice(0, suggestionBtns.length);\n                if (val === LANG('layers-rename')) {\n                    if (input.value === klCanvas.getLayer(layer).name) {\n                        return;\n                    }\n                    klCanvas.renameLayer(layer, input.value);\n                    createLayerList();\n                    klHistory.pause(true);\n                    updatefunc(layer);\n                    klHistory.pause(false);\n                }\n            },\n            clickOnEnter: LANG('layers-rename')\n        });\n    }\n\n\n    let layerListEl = BB.el({});\n\n    (div as any).disableButtons = function(){}; //probably remove\n    (div as any).enableButtons = function(){}; //probably remove\n    let addnewBtn = document.createElement(\"button\");\n    let duplicateBtn = document.createElement(\"button\");\n    let mergeBtn = document.createElement(\"button\");\n    let removeBtn = document.createElement(\"button\");\n    let renameBtn = document.createElement(\"button\");\n\n    function createButtons() {\n        let div = document.createElement(\"div\");\n        function async() {\n            BB.makeUnfocusable(addnewBtn);\n            BB.makeUnfocusable(duplicateBtn);\n            BB.makeUnfocusable(mergeBtn);\n            BB.makeUnfocusable(removeBtn);\n            BB.makeUnfocusable(renameBtn);\n\n            addnewBtn.style.cssFloat = 'left';\n            duplicateBtn.style.cssFloat = 'left';\n            mergeBtn.style.cssFloat = 'left';\n            removeBtn.style.cssFloat = 'left';\n            renameBtn.style.cssFloat = 'left';\n\n            addnewBtn.title = LANG('layers-new');\n            duplicateBtn.title = LANG('layers-duplicate');\n            removeBtn.title = LANG('layers-remove');\n            mergeBtn.title = LANG('layers-merge');\n            renameBtn.title = LANG('layers-rename-title');\n\n            addnewBtn.style.paddingLeft = \"5px\";\n            addnewBtn.style.paddingRight = \"3px\";\n\n            removeBtn.style.paddingLeft = \"5px\";\n            removeBtn.style.paddingRight = \"3px\";\n\n            duplicateBtn.style.paddingLeft = \"5px\";\n            duplicateBtn.style.paddingRight = \"3px\";\n\n            mergeBtn.style.paddingLeft = \"5px\";\n            mergeBtn.style.paddingRight = \"3px\";\n\n            renameBtn.style.height = \"30px\";\n            renameBtn.style.lineHeight = \"20px\";\n\n            addnewBtn.innerHTML = \"<img src='\" + addLayerImg + \"' height='20'/>\";\n            duplicateBtn.innerHTML = \"<img src='\" + duplicateLayerImg + \"' height='20'/>\";\n            mergeBtn.innerHTML = \"<img src='\" + mergeLayerImg + \"' height='20'/>\";\n            removeBtn.innerHTML = \"<img src='\" + removeLayerImg + \"' height='20'/>\";\n            renameBtn.innerHTML = \"<img src='\" + renameLayerImg + \"' height='20'/>\";\n            addnewBtn.style.marginRight = \"5px\";\n            removeBtn.style.marginRight = \"5px\";\n            duplicateBtn.style.marginRight = \"5px\";\n            mergeBtn.style.marginRight = \"5px\";\n            div.appendChild(addnewBtn);\n            div.appendChild(removeBtn);\n            div.appendChild(duplicateBtn);\n            div.appendChild(mergeBtn);\n            div.appendChild(renameBtn);\n            div.appendChild(BB.el({\n                css: {\n                    clear: 'both'\n                }\n            }));\n\n            let clearboth = document.createElement(\"div\");\n            clearboth.style.clear = \"both\";\n            clearboth.style.height = \"10px\";\n            div.appendChild(clearboth);\n\n\n            addnewBtn.onclick = function () {\n                if (klCanvas.addLayer(selectedSpotIndex) === false) {\n                    return;\n                }\n                klCanvasLayerArr = klCanvas.getLayers();\n\n                if (klCanvasLayerArr.length === MAX_LAYERS) {\n                    addnewBtn.disabled = true;\n                    duplicateBtn.disabled = true;\n                }\n                removeBtn.disabled = false;\n                selectedSpotIndex = selectedSpotIndex + 1;\n                createLayerList();\n                klHistory.pause(true);\n                updatefunc(selectedSpotIndex);\n                klHistory.pause(false);\n            };\n            duplicateBtn.onclick = function () {\n                if (klCanvas.duplicateLayer(selectedSpotIndex) === false) {\n                    return;\n                }\n                klCanvasLayerArr = klCanvas.getLayers();\n                if (klCanvasLayerArr.length === MAX_LAYERS) {\n                    addnewBtn.disabled = true;\n                    duplicateBtn.disabled = true;\n                }\n                removeBtn.disabled = false;\n                selectedSpotIndex++;\n                createLayerList();\n                klHistory.pause(true);\n                updatefunc(selectedSpotIndex);\n                klHistory.pause(false);\n            };\n            removeBtn.onclick = function () {\n                if (layerElArr.length <= 1) {\n                    return;\n                }\n\n                klCanvas.removeLayer(selectedSpotIndex);\n                if (selectedSpotIndex > 0) {\n                    selectedSpotIndex--;\n                }\n                klCanvasLayerArr = klCanvas.getLayers();\n                createLayerList();\n                klHistory.pause(true);\n                updatefunc(selectedSpotIndex);\n                klHistory.pause(false);\n                if (klCanvasLayerArr.length === 1) {\n                    removeBtn.disabled = true;\n                }\n                if (klCanvasLayerArr.length < MAX_LAYERS) {\n                    addnewBtn.disabled = false;\n                    duplicateBtn.disabled = false;\n                }\n            };\n            mergeBtn.onclick = function () {\n                if (selectedSpotIndex <= 0) {\n                    return;\n                }\n\n                function mergeDialog(p) {\n                    let div = document.createElement(\"div\");\n                    div.innerHTML = LANG('layers-merge-description');\n\n                    let options = new Options({\n                        optionArr: [\n                            {id: p.mixModeStr, label: translateBlending(p.mixModeStr)},\n                            {id: 'source-in', label: 'source-in'},\n                            {id: 'source-out', label: 'source-out'},\n                            {id: 'source-atop', label: 'source-atop'},\n                            {id: 'destination-in', label: 'destination-in'},\n                            {id: 'destination-out', label: 'destination-out'},\n                            {id: 'destination-atop', label: 'destination-atop'},\n                            {id: 'xor', label: 'xor'}\n                        ],\n                        initId: p.mixModeStr,\n                        onChange: function(id) {\n                            update();\n                        },\n                        isSmall: true\n                    });\n                    options.getElement().style.marginTop = '5px';\n                    div.appendChild(options.getElement());\n\n                    const thumbDimensions = BB.fitInto(p.topCanvas.width, p.topCanvas.height, 200, 200, 1);\n                    let preview = BB.canvas(thumbDimensions.width, thumbDimensions.height);\n                    preview.title = LANG('preview');\n                    let spacer = document.createElement(\"div\");\n                    spacer.innerHTML = \"<br/>\";\n                    spacer.style.clear = \"both\";\n                    div.appendChild(spacer);\n                    div.appendChild(preview);\n                    BB.css(preview, {\n                        display: \"block\",\n                        marginLeft: \"auto\",\n                        marginRight: \"auto\",\n                        colorScheme: 'only light',\n                    });\n                    preview.style.boxShadow = \"0 0 3px rgba(0,0,0,0.5)\";\n                    BB.createCheckerDataUrl(4, function(url) {\n                        preview.style.backgroundImage = \"url(\" + url + \")\";\n                    });\n\n                    let alphaCanvas = BB.copyCanvas(preview);\n                    alphaCanvas.getContext(\"2d\").drawImage(p.topCanvas, 0, 0, alphaCanvas.width, alphaCanvas.height);\n                    BB.convertToAlphaChannelCanvas(alphaCanvas);\n\n                    function update() {\n                        let ctx = preview.getContext(\"2d\");\n                        ctx.save();\n                        ctx.clearRect(0, 0, preview.width, preview.height);\n                        if (preview.width > p.topCanvas.width) {\n                            ctx.imageSmoothingEnabled = false;\n                        }\n                        ctx.drawImage(p.bottomCanvas, 0, 0, preview.width, preview.height);\n\n                        if (options.getValue() === 'as-alpha') {\n                            ctx.globalCompositeOperation = 'destination-in';\n                            ctx.globalAlpha = p.topOpacity;\n                            ctx.drawImage(alphaCanvas, 0, 0, preview.width, preview.height);\n                        } else {\n                            ctx.globalCompositeOperation = options.getValue();\n                            ctx.globalAlpha = p.topOpacity;\n                            ctx.drawImage(p.topCanvas, 0, 0, preview.width, preview.height);\n                        }\n                        ctx.restore();\n                    }\n\n                    update();\n\n\n                    let keyListener = new BB.KeyListener({\n                        onDown: function(keyStr) {\n                            if (keyStr === 'right') {\n                                options.next();\n                            }\n                            if (keyStr === 'left') {\n                                options.previous();\n                            }\n                        }\n                    });\n\n                    popup({\n                        target: p_rootDiv,\n                        message: `<b>${LANG('layers-merge-modal-title')}</b>`,\n                        div: div,\n                        buttons: [\"Ok\", \"Cancel\"],\n                        clickOnEnter: 'Ok',\n                        callback: function (val) {\n                            keyListener.destroy();\n                            options.destroy();\n                            if (val === \"Ok\") {\n                                p.callback(options.getValue());\n                            }\n                        }\n                    });\n                }\n                mergeDialog({\n                    topCanvas: klCanvasLayerArr[selectedSpotIndex].context.canvas,\n                    bottomCanvas: klCanvasLayerArr[selectedSpotIndex - 1].context.canvas,\n                    topOpacity: klCanvas.getLayer(selectedSpotIndex).opacity,\n                    mixModeStr: klCanvasLayerArr[selectedSpotIndex].mixModeStr,\n                    callback: function (mode) {\n                        klCanvas.mergeLayers(selectedSpotIndex, selectedSpotIndex - 1, mode);\n                        klCanvasLayerArr = klCanvas.getLayers();\n                        selectedSpotIndex--;\n                        if (klCanvasLayerArr.length === 1) {\n                            removeBtn.disabled = true;\n                        }\n                        if (klCanvasLayerArr.length < MAX_LAYERS) {\n                            addnewBtn.disabled = false;\n                            duplicateBtn.disabled = false;\n                        }\n                        createLayerList();\n                        klHistory.pause(true);\n                        updatefunc(selectedSpotIndex);\n                        klHistory.pause(false);\n                    }\n                });\n            };\n\n            renameBtn.onclick = function () {\n                renameLayer(selectedSpotIndex);\n            };\n        }\n        setTimeout(async, 1);\n        return div;\n    }\n    div.appendChild(createButtons());\n\n    let modeWrapper;\n    let modeSelect;\n    {\n        modeWrapper = BB.el({\n            content: LANG('layers-blending') + '&nbsp;',\n            css: {\n                fontSize: '15px'\n            }\n        });\n\n        modeSelect = new Select({\n            optionArr: [\n                'source-over',\n                null,\n                'darken',\n                'multiply',\n                'color-burn',\n                null,\n                'lighten',\n                'screen',\n                'color-dodge',\n                null,\n                'overlay',\n                'soft-light',\n                'hard-light',\n                null,\n                'difference',\n                'exclusion',\n                null,\n                'hue',\n                'saturation',\n                'color',\n                'luminosity',\n            ].map((item: IMixMode) => {\n                return item ? [item, translateBlending(item)] : null;\n            }),\n            onChange: function(val) {\n                klCanvas.setMixMode(selectedSpotIndex, val as IMixMode);\n                (div as any).update(selectedSpotIndex);\n            },\n            css: {\n                marginBottom: '10px'\n            }\n        });\n\n        modeWrapper.appendChild(modeSelect.getElement());\n        div.appendChild(modeWrapper);\n\n    }\n\n\n    function createLayerList() {\n        oldHistoryState = klHistory.getState();\n        function createLayerEntry(index) {\n            let layerName = klCanvas.getLayer(index).name;\n            let opacity = klCanvasLayerArr[index].opacity;\n            let layercanvas = klCanvasLayerArr[index].context.canvas;\n\n            let layer = document.createElement(\"div\");\n            layer.className = \"layerBox\";\n            layerElArr[index] = layer;\n            (layer as any).posY = ((klCanvasLayerArr.length - 1) * 35 - index * 35);\n            BB.css(layer, {\n                width: \"250px\",\n                height: \"34px\",\n                backgroundColor: \"rgb( 220, 220, 220)\",\n                border: \"1px solid #aaa\",\n                position: \"absolute\",\n                left: \"0 px\",\n                top: (layer as any).posY + \"px\",\n                transition: \"all 0.1s linear\",\n                borderRadius: \"5px\",\n                boxSizing: 'border-box'\n            });\n            let innerLayer = document.createElement(\"div\");\n            BB.css(innerLayer, {\n                position: \"relative\"\n            });\n\n            let container1 = document.createElement(\"div\");\n            BB.css(container1, {\n                width: \"250px\",\n                height: \"34px\"\n            });\n            let container2 = document.createElement(\"div\");\n            layer.appendChild(innerLayer);\n            innerLayer.appendChild(container1);\n            innerLayer.appendChild(container2);\n\n            (layer as any).spot = index;\n\n            //thumb\n            {\n                let thumbDimensions = BB.fitInto(layercanvas.width, layercanvas.height, 30, 30, 1);\n                let thumb = (layer as any).thumb = BB.canvas(thumbDimensions.width, thumbDimensions.height);\n\n                let thc = thumb.getContext(\"2d\");\n                thc.save();\n                if (thumb.width > layercanvas.width) {\n                    thc.imageSmoothingEnabled = false;\n                }\n                thc.drawImage(layercanvas, 0, 0, thumb.width, thumb.height);\n                thc.restore();\n                BB.css((layer as any).thumb, {\n                    position: \"absolute\",\n                    left: ((32 - (layer as any).thumb.width) / 2) + \"px\",\n                    top: ((32 - (layer as any).thumb.height) / 2) + \"px\",\n                    colorScheme: 'only light',\n                });\n                BB.createCheckerDataUrl(4, function(url) {\n                    thumb.style.backgroundImage = \"url(\" + url + \")\";\n                });\n            }\n\n            //layerlabel\n            {\n                (layer as any).label = document.createElement(\"div\");\n                (layer as any).lname = layerName;\n                (layer as any).label.append((layer as any).lname);\n\n                BB.css((layer as any).label, {\n                    position: \"absolute\",\n                    left: (1 + 32 + 5) + \"px\",\n                    top: 1 + \"px\",\n                    fontSize: \"13px\",\n                    width: \"170px\",\n                    height: \"20px\",\n                    overflow: \"hidden\",\n                    color: \"#666\",\n                    whiteSpace: 'nowrap'\n                });\n\n                (layer as any).label.ondblclick = function() {\n                    renameLayer((layer as any).spot);\n                };\n            }\n            //layerlabel\n            {\n                (layer as any).opacityLabel = document.createElement(\"div\");\n                (layer as any).opacity = opacity;\n                (layer as any).opacityLabel.append(parseInt('' + ((layer as any).opacity * 100)) + \"%\");\n\n                BB.css((layer as any).opacityLabel, {\n                    position: \"absolute\",\n                    left: (250 - 1 - 5 - 50) + \"px\",\n                    top: 1 + \"px\",\n                    fontSize: \"13px\",\n                    textAlign: \"right\",\n                    width: \"50px\",\n                    color: \"#666\",\n                    transition: \"color 0.2s ease-in-out\"\n                });\n            }\n\n            let oldOpacity;\n            let opacitySlider = new PointSlider({\n                init: (layer as any).opacity,\n                width: 204,\n                pointSize: 14,\n                callback: function(sliderValue, isFirst, isLast) {\n                    if (isFirst) {\n                        oldOpacity = klCanvas.getLayer((layer as any).spot).opacity;\n                        klHistory.pause(true);\n                        return;\n                    }\n                    if (isLast) {\n                        klHistory.pause(false);\n                        if (oldOpacity !== sliderValue) {\n                            klCanvas.layerOpacity((layer as any).spot, sliderValue);\n                        }\n                        return;\n                    }\n                    (layer as any).opacityLabel.innerHTML = Math.round(sliderValue * 100) + \"%\";\n                    klCanvas.layerOpacity((layer as any).spot, sliderValue);\n                }\n            });\n            BB.css(opacitySlider.getEl(), {\n                position: 'absolute',\n                left: '39px',\n                top: '17px'\n            });\n            (layer as any).opacitySlider = opacitySlider;\n\n            //larger layer preview - hover\n            BB.setEventListener((layer as any).thumb, 'onpointerover', function (e) {\n                if (e.buttons !== 0 && (!e.pointerType || e.pointerType !== 'touch')) { //shouldn't show while dragging\n                    return;\n                }\n\n                let thumbDimensions = BB.fitInto(layercanvas.width, layercanvas.height, 250, 250, 1);\n\n                if (largeThumbCanvas.width !== thumbDimensions.width || largeThumbCanvas.height !== thumbDimensions.height) {\n                    largeThumbCanvas.width = thumbDimensions.width;\n                    largeThumbCanvas.height = thumbDimensions.height;\n                }\n                let ctx = largeThumbCanvas.getContext(\"2d\");\n                ctx.save();\n                if (largeThumbCanvas.width > layercanvas.width) {\n                    ctx.imageSmoothingEnabled = false;\n                }\n                ctx.imageSmoothingQuality = 'high';\n                ctx.clearRect(0, 0, largeThumbCanvas.width, largeThumbCanvas.height);\n                ctx.drawImage(layercanvas, 0, 0, largeThumbCanvas.width, largeThumbCanvas.height);\n                ctx.restore();\n                BB.css(largeThumbDiv, {\n                    top: (e.clientY - largeThumbCanvas.height / 2) + \"px\",\n                    opacity: '0'\n                });\n                if (largeThumbInDocument === false) {\n                    document.body.appendChild(largeThumbDiv);\n                    largeThumbInDocument = true;\n                }\n                clearTimeout(largeThumbInTimeout);\n                largeThumbInTimeout = setTimeout(function () {\n                    BB.css(largeThumbDiv, {\n                        opacity: '1'\n                    });\n                }, 20);\n                clearTimeout(largeThumbTimeout);\n            });\n            BB.setEventListener((layer as any).thumb, 'onpointerout', function () {\n                clearTimeout(largeThumbInTimeout);\n                BB.css(largeThumbDiv, {\n                    opacity: '0'\n                });\n                clearTimeout(largeThumbTimeout);\n                largeThumbTimeout = setTimeout(function () {\n                    if (!largeThumbInDocument) {\n                        return;\n                    }\n                    document.body.removeChild(largeThumbDiv);\n                    largeThumbInDocument = false;\n                }, 300);\n            });\n\n            container1.appendChild((layer as any).thumb);\n            container1.appendChild((layer as any).label);\n            container1.appendChild((layer as any).opacityLabel);\n            container1.appendChild(opacitySlider.getEl());\n            let dragstart = false;\n            let freshSelection = false;\n\n            //events for moving layers up and down\n            function dragEventHandler(event) {\n                if (event.type === 'pointerdown' && event.button === 'left') {\n                    BB.css(layer, {\n                        transition: \"box-shadow 0.3s ease-in-out\"\n                    });\n                    //dragContainer.appendChild(layer);\n                    layer.style.zIndex = '1';\n                    lastpos = (layer as any).spot;\n                    freshSelection = false;\n                    if (!(layer as any).isSelected) {\n                        freshSelection = true;\n                        (div as any).activateLayer((layer as any).spot);\n                    }\n                    dragstart = true;\n\n                } else if (event.type === 'pointermove' && event.button === 'left') {\n\n                    if (dragstart) {\n                        dragstart = false;\n                        BB.css(layer, {\n                            boxShadow: \"1px 3px 5px rgba(0,0,0,0.4)\"\n                        });\n                    }\n                    (layer as any).posY += event.dY;\n                    let corrected = Math.max(0, Math.min((klCanvasLayerArr.length - 1) * (35), (layer as any).posY));\n                    layer.style.top = corrected + \"px\";\n                    updateLayersVerticalPosition((layer as any).spot, posToSpot((layer as any).posY));\n\n                }\n                if (event.type === 'pointerup') {\n                    BB.css(layer, {\n                        transition: \"all 0.1s linear\"\n                    });\n                    setTimeout(function () {\n                        BB.css(layer, {\n                            boxShadow: \"\"\n                        });\n                    }, 20);\n                    (layer as any).posY = Math.max(0, Math.min((klCanvasLayerArr.length - 1) * (35), (layer as any).posY));\n                    //regularContainer.appendChild(layer);\n                    layer.style.zIndex = \"\";\n                    let newSpot = posToSpot((layer as any).posY);\n                    let oldSpot = (layer as any).spot;\n                    move((layer as any).spot, newSpot);\n                    if (oldSpot != newSpot) {\n                        klHistory.pause(true);\n                        updatefunc(selectedSpotIndex);\n                        klHistory.pause(false);\n                    }\n                    if (oldSpot === newSpot && freshSelection) {\n                        updatefunc(selectedSpotIndex);\n                    }\n                    freshSelection = false;\n                }\n            }\n\n            (layer as any).pointerListener = new BB.PointerListener({\n                target: container1,\n                maxPointers: 1,\n                onPointer: dragEventHandler\n            });\n\n            layerListEl.appendChild(layer);\n        }\n        layerElArr = [];\n        while (layerListEl.firstChild) {\n            let child = layerListEl.firstChild;\n            (child as any).pointerListener.destroy();\n            (child as any).opacitySlider.destroy();\n            layerListEl.removeChild(child);\n        }\n        for (let i = 0; i < klCanvasLayerArr.length; i++) {\n            createLayerEntry(i);\n        }\n        (div as any).activateLayer(selectedSpotIndex);\n        updateHeight();\n    }\n\n\n    listdiv.appendChild(layerListEl);\n    div.appendChild(listdiv);\n\n\n    function posToSpot(p) {\n        let result = parseInt('' + ((p) / (layerHeight + layerSpacing) + 0.5));\n        result = Math.min(klCanvasLayerArr.length - 1, Math.max(0, result));\n        result = klCanvasLayerArr.length - result - 1;\n        return result;\n    }\n\n    let lastpos = 0;\n\n    //update css position of all layers that are not being dragged, while dragging\n    function updateLayersVerticalPosition(id, newspot) {\n        newspot = Math.min(klCanvasLayerArr.length - 1, Math.max(0, newspot));\n        if (newspot === lastpos) {\n            return;\n        }\n        for (let i = 0; i < klCanvasLayerArr.length; i++) {\n            if (layerElArr[i].spot === id) { // <- here\n                continue;\n            }\n            let posy = layerElArr[i].spot;\n            if (layerElArr[i].spot > id) {\n                posy--;\n            }\n            if (posy >= newspot) {\n                posy++;\n            }\n            layerElArr[i].posY = (layerHeight + layerSpacing) * (klCanvasLayerArr.length - posy - 1);\n            layerElArr[i].style.top = layerElArr[i].posY + \"px\";\n        }\n        lastpos = newspot;\n    }\n\n    function move(oldSpotIndex, newSpotIndex) {\n        if (isNaN(oldSpotIndex) || isNaN(newSpotIndex)) {\n            throw 'layermanager - invalid move';\n        }\n        for (let i = 0; i < klCanvasLayerArr.length; i++) {\n            (function (i) {\n                let posy = layerElArr[i].spot; // <- here\n                if (layerElArr[i].spot === oldSpotIndex) {\n                    posy = newSpotIndex;\n                } else {\n                    if (layerElArr[i].spot > oldSpotIndex)\n                        posy--;\n                    if (posy >= newSpotIndex)\n                        posy++;\n                }\n                layerElArr[i].spot = posy;\n                layerElArr[i].posY = (layerHeight + layerSpacing) * (klCanvasLayerArr.length - posy - 1);\n                layerElArr[i].style.top = layerElArr[i].posY + \"px\";\n            }(i));\n        }\n        if (oldSpotIndex === newSpotIndex) {\n            return;\n        }\n        klCanvas.moveLayer(selectedSpotIndex, newSpotIndex - oldSpotIndex);\n        klCanvasLayerArr = klCanvas.getLayers();\n        selectedSpotIndex = newSpotIndex;\n        mergeBtn.disabled = selectedSpotIndex === 0;\n    }\n\n\n    //updating the thumbs in interval\n    //don't update when: manager not visible || layer didn't change || is drawing\n    let updateThumbsInterval = setInterval(function() {\n        if (div.style.display !== \"block\") {\n            return;\n        }\n\n        let historyState = klHistory.getState();\n        if (historyState === oldHistoryState) {\n            return;\n        }\n        oldHistoryState = historyState;\n\n        for (let i = 0; i < layerElArr.length; i++) {\n            if (selectedSpotIndex === layerElArr[i].spot && klCanvasLayerArr[layerElArr[i].spot]) { // second check, because might be out of date\n                let ctx = layerElArr[i].thumb.getContext(\"2d\");\n                ctx.save();\n                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n                if (klCanvasLayerArr[layerElArr[i].spot].context.canvas.width < layerElArr[i].thumb.width) {\n                    ctx.imageSmoothingEnabled = false;\n                }\n                ctx.drawImage(klCanvasLayerArr[layerElArr[i].spot].context.canvas, 0, 0, layerElArr[i].thumb.width, layerElArr[i].thumb.height);\n                ctx.restore();\n            }\n        }\n\n    }, 1);\n\n    function updateHeight() {\n        layerListEl.style.height = (layerElArr.length * 35) + 'px';\n    }\n\n    // ---- interface ----\n\n    (div as any).update = function (activeLayerSpotIndex) {\n        klCanvasLayerArr = klCanvas.getLayers();\n        if (activeLayerSpotIndex || activeLayerSpotIndex === 0) {\n            selectedSpotIndex = activeLayerSpotIndex;\n        }\n        removeBtn.disabled = klCanvasLayerArr.length === 1;\n        if (klCanvasLayerArr.length === MAX_LAYERS) {\n            addnewBtn.disabled = true;\n            duplicateBtn.disabled = true;\n        } else {\n            addnewBtn.disabled = false;\n            duplicateBtn.disabled = false;\n        }\n        setTimeout(function() {\n            createLayerList();\n        }, 1);\n    };\n    (div as any).getSelected = function () {\n        return selectedSpotIndex;\n    };\n    (div as any).activateLayer = function (spotIndex) {\n        if (spotIndex < 0 || spotIndex > layerElArr.length - 1) {\n            throw 'invalid spotIndex ' + spotIndex + ', layerElArr.length ' + layerElArr.length;\n        }\n        selectedSpotIndex = spotIndex;\n        modeSelect.setValue(klCanvasLayerArr[selectedSpotIndex].mixModeStr);\n        for (let i = 0; i < layerElArr.length; i++) {\n            if (selectedSpotIndex === layerElArr[i].spot) {\n                layerElArr[i].style.backgroundColor = \"rgb( 250, 250, 250)\";\n                layerElArr[i].label.style.color = \"#000\";\n                layerElArr[i].style.boxShadow = \"\";\n                layerElArr[i].style.border = \"1px solid var(--active-highlight-color)\";\n                layerElArr[i].opacitySlider.setActive(true);\n                layerElArr[i].isSelected = true;\n            } else {\n                layerElArr[i].style.backgroundColor = \"rgb( 220, 220, 220)\";\n                layerElArr[i].label.style.color = \"#666\";\n                layerElArr[i].style.boxShadow = \"\";\n                layerElArr[i].style.border = \"1px solid rgb(158, 158, 158)\";\n                layerElArr[i].opacitySlider.setActive(false);\n                layerElArr[i].isSelected = false;\n            }\n        }\n        mergeBtn.disabled = selectedSpotIndex === 0;\n    };\n    (div as any).setUiState = function(stateStr) {\n        uiState = '' + stateStr;\n\n        if (uiState === 'left') {\n            BB.css(largeThumbDiv, {\n                left: '280px',\n                right: ''\n            });\n        } else {\n            BB.css(largeThumbDiv, {\n                left: '',\n                right: '280px'\n            });\n        }\n    };\n\n    createLayerList();\n\n    return div;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"add-layer.2b356a02.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"duplicate-layer.35a88297.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"merge-layers.47516fd8.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"remove-layer.6d1452f5.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"rename-layer.129b7a9b.svg\" + \"?\" + Date.now();","import {BB} from '../../bb/bb';\nimport {floodFillBits} from '../image-operations/flood-fill';\nimport {drawShape} from '../image-operations/shape-tool';\nimport {IRenderTextParam, renderText} from '../image-operations/render-text';\nimport {IGradient, IKlProject, IMixMode, IRGB, IShapeToolObject} from '../kl.types';\nimport {DecoyKlHistory, KlHistoryInterface} from '../history/kl-history';\nimport {drawProject} from './draw-project';\nimport {LANG} from '../../language/language';\nimport {drawGradient} from '../image-operations/gradient-tool';\n\n\nconst allowedMixModes = [\n    'source-over',\n    'darken',\n    'multiply',\n    'color-burn',\n    'lighten',\n    'screen',\n    'color-dodge',\n    'overlay',\n    'soft-light',\n    'hard-light',\n    'difference',\n    'exclusion',\n    'hue',\n    'saturation',\n    'color',\n    'luminosity',\n];\n\nexport const MAX_LAYERS = 16;\n\ninterface KlCanvasLayer extends HTMLCanvasElement {\n    name: string;\n    mixModeStr: IMixMode;\n    opacity: number;\n    compositeObj?: {\n        draw: (ctx: CanvasRenderingContext2D) => void;\n    },\n    index: number; // certain brushes need to know\n}\n\n/**\n * The image/canvas that the user paints on\n * Has layers. layers have names and opacity.\n *\n * Interacts with the history you specify (for undo/redo)\n */\nexport class KlCanvas {\n\n    // todo changeListener consistent concept\n    // todo history interaction, consistent concept - currently have to look at code to know if something pushes on history\n\n    private width: number;\n    private height: number;\n    private layerCanvasArr: KlCanvasLayer[];\n    private pickCanvas: HTMLCanvasElement; // canvas to draw into for color picker\n    private history: KlHistoryInterface;\n    private changeListenerArr:  (() => void)[]; // subscribers get notified when opacity changes\n\n\n    private init (w: number, h: number): void {\n        if (!w || !h || isNaN(w) || isNaN(h) || w < 1 || h < 1) {\n            throw new Error('init - invalid canvas size: ' + w + ', ' + h);\n        }\n        this.width = w;\n        this.height = h;\n    }\n\n    private emitChange (): void {\n        // some changes don't get captured by the history - e.g. changing opacity as the user drags the slider\n        this.changeListenerArr.forEach(item => item());\n    }\n\n    private updateIndices (): void {\n        this.layerCanvasArr.forEach((item, index) => {\n            item.index = index;\n        });\n    }\n\n    // ---- public ----\n\n    constructor (\n        params: {\n            projectObj: {\n                width: number;\n                height: number;\n                layers: {\n                    name: string;\n                    opacity: number;\n                    image: HTMLImageElement | HTMLCanvasElement; // already loaded!\n                }[];\n            }\n        } | {\n            // creates blank KlCanvas, 0 layers\n            width: number;\n            height: number;\n        } | {\n            copy: KlCanvas;\n        },\n        private layerNrOffset: number = 0,\n    ) {\n        this.layerCanvasArr = [];\n        this.pickCanvas = BB.canvas(1, 1);\n        this.history = new DecoyKlHistory();\n        if ('copy' in params) {\n            this.width = 1;\n            this.height = 1;\n        } else {\n            if ('width' in params && 'height' in params) {\n                this.width = params.width;\n                this.height = params.height;\n            } else {\n                this.width = 1;\n                this.height = 1;\n            }\n        }\n        this.init(this.width, this.height);\n\n        this.changeListenerArr = [];\n\n        if ('copy' in params) {\n            try {\n                this.copy(params.copy);\n            } catch (e) {\n                this.destroy();\n                throw e;\n            }\n        } else if ('projectObj' in params) {\n            const origLayers = [].concat(params.projectObj.layers);\n            this.init(params.projectObj.width, params.projectObj.height);\n\n            if (!origLayers.length) {\n                throw new Error('project.layers needs at least 1 layer');\n            }\n\n            for (let i = 0; i < origLayers.length; i++) {\n                if (origLayers[i].mixModeStr && !allowedMixModes.includes(origLayers[i].mixModeStr)) {\n                    throw new Error('unknown mixModeStr ' + origLayers[i].mixModeStr);\n                }\n\n                this.addLayer();\n                this.layerOpacity(i, origLayers[i].opacity);\n                this.layerCanvasArr[i].name = origLayers[i].name;\n                this.layerCanvasArr[i].mixModeStr = origLayers[i].mixModeStr ? origLayers[i].mixModeStr : 'source-over';\n                this.layerCanvasArr[i].getContext(\"2d\").drawImage(origLayers[i].image, 0, 0);\n            }\n        }\n        this.updateIndices();\n    }\n\n    setHistory (h: KlHistoryInterface): void {\n        this.history = h;\n    }\n\n    /**\n     * Resets canvas -> 1 layer, 100% opacity,\n     * unless layers provided.\n     * @param p\n     */\n    reset (\n        p: {\n            width: number;\n            height: number;\n            color?: IRGB; // optional - fill color\n            image?: HTMLImageElement | HTMLCanvasElement; // image drawn on layer\n            layerName?: string; // if via image\n            layers?: {\n                name: string;\n                opacity: number;\n                mixModeStr: IMixMode;\n                image: HTMLCanvasElement;\n            }[];\n        }\n    ): void | number {\n        if (!p.width || !p.height || p.width < 1 || p.height < 1 || isNaN(p.width) || isNaN(p.height) ) {\n            throw new Error('invalid canvas size');\n        }\n\n        this.history.pause(true);\n\n        this.width = p.width;\n        this.height = p.height;\n\n        this.layerCanvasArr.splice(1, Math.max(0, this.layerCanvasArr.length - 1));\n\n        if (p.layers) {\n            for (let i = 0; i < p.layers.length; i++) {\n                let item = p.layers[i];\n                if (!this.layerCanvasArr[i]) {\n                    this.addLayer();\n                }\n                this.layerCanvasArr[i].name = item.name;\n                this.layerCanvasArr[i].width = this.width;\n                this.layerCanvasArr[i].height = this.height;\n                this.layerCanvasArr[i].mixModeStr = item.mixModeStr ? item.mixModeStr : 'source-over';\n                this.layerCanvasArr[i].getContext(\"2d\").drawImage(item.image, 0, 0);\n                this.layerOpacity(i, item.opacity);\n            }\n        } else {\n            this.layerCanvasArr[0].name = p.layerName ? p.layerName : LANG('layers-layer') + \" 1\";\n            this.layerCanvasArr[0].width = this.width;\n            this.layerCanvasArr[0].height = this.height;\n            this.layerCanvasArr[0].mixModeStr = 'source-over';\n            this.layerOpacity(0, 1);\n            if (p.color) {\n                this.layerFill(0, p.color);\n            } else if (p.image) {\n                this.layerCanvasArr[0].getContext(\"2d\").drawImage(p.image, 0, 0);\n            }\n        }\n        this.updateIndices();\n\n        this.history.pause(false);\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"reset\",\n            params: [p] // dont screw with p\n        });\n\n        return this.layerCanvasArr.length - 1;\n    }\n\n    isLayerLimitReached (): boolean {\n        return this.layerCanvasArr.length >= MAX_LAYERS;\n    }\n\n    getWidth (): number {\n        return this.width;\n    }\n\n    getHeight (): number {\n        return this.height;\n    }\n\n    copy (toCopyCanvas: KlCanvas): void {\n        if (\n            toCopyCanvas.getWidth() < 1 ||\n            toCopyCanvas.getHeight() < 1 ||\n            isNaN(toCopyCanvas.getWidth()) ||\n            isNaN(toCopyCanvas.getHeight())\n        ) {\n            throw new Error('invalid canvas size');\n        }\n\n        // keep existing canvases\n\n        let origLayers = toCopyCanvas.getLayers();\n\n        while (this.layerCanvasArr.length > origLayers.length) {\n            this.removeLayer(this.layerCanvasArr.length - 1);\n        }\n\n        if (toCopyCanvas.getWidth() != this.width || toCopyCanvas.getHeight() != this.height) {\n            this.init(toCopyCanvas.getWidth(), toCopyCanvas.getHeight());\n        }\n        for (let i = 0; i < origLayers.length; i++) {\n            if (i >= this.layerCanvasArr.length) {\n                this.addLayer();\n            } else {\n                this.layerCanvasArr[i].width = this.width;\n                this.layerCanvasArr[i].height = this.height;\n            }\n            this.layerOpacity(i, origLayers[i].opacity);\n            this.layerCanvasArr[i].name = origLayers[i].name;\n            this.layerCanvasArr[i].mixModeStr = origLayers[i].mixModeStr;\n            this.layerCanvasArr[i].getContext(\"2d\").drawImage(origLayers[i].context.canvas, 0, 0);\n        }\n        this.updateIndices();\n    }\n\n    getLayerCount (): number {\n        return this.layerCanvasArr.length;\n    }\n\n    resize (w: number, h: number, algorithm: 'smooth' | 'pixelated' = 'smooth'): boolean {\n        if (!w || !h || (w === this.width && h === this.height) || isNaN(w) || isNaN(h) || w < 1 || h < 1) {\n            return false;\n        }\n        w = Math.max(w, 1);\n        h = Math.max(h, 1);\n\n        let tmp1, tmp2;\n\n        if (algorithm === 'pixelated') {\n            tmp1 = BB.canvas(w, h);\n            let tmp1Ctx = tmp1.getContext('2d');\n            tmp1Ctx.imageSmoothingEnabled = false;\n            for (let i = 0; i < this.layerCanvasArr.length; i++) {\n                if (i > 0) {\n                    tmp1Ctx.clearRect(0, 0, w, h);\n                }\n                let layerCanvas = this.layerCanvasArr[i];\n                tmp1Ctx.drawImage(layerCanvas, 0, 0, w, h);\n                layerCanvas.width = w;\n                layerCanvas.height = h;\n                let layerContext = layerCanvas.getContext('2d');\n                layerContext.drawImage(tmp1, 0, 0);\n            }\n\n        } else if (algorithm === 'smooth') {\n            tmp1 = BB.canvas();\n            tmp2 = BB.canvas();\n            for (let i = 0; i < this.layerCanvasArr.length; i++) {\n                BB.resizeCanvas(this.layerCanvasArr[i], w, h, tmp1, tmp2);\n            }\n        } else {\n            throw new Error('unknown resize algorithm');\n        }\n\n        this.width = w;\n        this.height = h;\n        return true;\n    }\n\n    /**\n     * crop / extend\n     * @param p\n     */\n    resizeCanvas (p: {\n        left: number;\n        top: number;\n        right: number;\n        bottom: number;\n        fillColor?: IRGB\n    }): void {\n\n        const newW = Math.round(p.left) + this.width + Math.round(p.right);\n        const newH = Math.round(p.top) + this.height + Math.round(p.bottom);\n        const offX = Math.round(p.left);\n        const offY = Math.round(p.top);\n\n        if (isNaN(newW) || isNaN(newH) || newW < 1 || newH < 1) {\n            throw new Error('KlCanvas.resizeCanvas - invalid canvas size');\n        }\n\n        for (let i = 0; i < this.layerCanvasArr.length; i++) {\n            const ctemp = BB.canvas(this.width, this.height);\n            let layerCanvas = this.layerCanvasArr[i];\n            let layerCtx = this.layerCanvasArr[i].getContext(\"2d\");\n            ctemp.getContext(\"2d\").drawImage(layerCanvas, 0, 0);\n\n            this.layerCanvasArr[i].width = newW;\n            this.layerCanvasArr[i].height = newH;\n\n            layerCtx.save();\n            if (i === 0 && p.fillColor) {\n                layerCtx.fillStyle = BB.ColorConverter.toRgbStr(p.fillColor);\n                layerCtx.fillRect(0, 0, newW, newH);\n                layerCtx.clearRect(offX, offY, this.width, this.height);\n            }\n            layerCtx.drawImage(ctemp, offX, offY);\n            layerCtx.restore();\n        }\n        this.width = newW;\n        this.height = newH;\n    }\n\n    /**\n     * will be inserted on top of selected\n     * @param selected\n     */\n    addLayer (selected?: number): false | number {\n        if (this.isLayerLimitReached()) {\n            return false;\n        }\n        let canvas = BB.canvas(this.width, this.height);\n        if (!canvas.getContext('2d')) {\n            throw new Error('kl-create-canvas-error');\n        }\n\n        (canvas as any).mixModeStr = 'source-over';\n\n        if (selected === undefined) {\n            this.layerCanvasArr[this.layerCanvasArr.length] = canvas as any;\n            selected = Math.max(0, this.layerCanvasArr.length - 1);\n        } else {\n            this.layerCanvasArr.splice(selected + 1, 0, canvas as any);\n            selected++;\n        }\n\n        (canvas as any).name = LANG('layers-layer') + \" \" + (this.layerCanvasArr.length + this.layerNrOffset);\n        this.history.pause(true);\n        this.layerOpacity(selected, 1);\n        this.history.pause(false);\n        this.updateIndices();\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"addLayer\",\n            params: [selected - 1]\n        });\n        return selected;\n    }\n\n    duplicateLayer (i: number): false | number {\n        if (!this.layerCanvasArr[i] || this.isLayerLimitReached()) {\n            return false;\n        }\n        let canvas = BB.canvas(this.width, this.height);\n        this.layerCanvasArr.splice(i + 1, 0, canvas as any);\n\n        (canvas as any).name = this.layerCanvasArr[i].name + \" \" + LANG('layers-copy');\n        (canvas as any).mixModeStr = this.layerCanvasArr[i].mixModeStr;\n        canvas.getContext(\"2d\").drawImage(this.layerCanvasArr[i], 0, 0);\n        this.history.pause(true);\n        this.layerOpacity(i + 1, this.layerCanvasArr[i].opacity);\n        this.history.pause(false);\n\n        this.updateIndices();\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"duplicateLayer\",\n            params: [i]\n        });\n        return i + 1;\n    }\n\n    getLayerContext (i: number, doReturnNull?: boolean): CanvasRenderingContext2D | null {\n        if (this.layerCanvasArr[i]) {\n            return this.layerCanvasArr[i].getContext(\"2d\");\n        }\n        if (doReturnNull) {\n            return null;\n        }\n        throw new Error(\"layer of index \" + i + \" not found (in \" + this.layerCanvasArr.length + \" layers)\");\n    }\n\n    removeLayer (i: number): false | number {\n        if (this.layerCanvasArr[i]) {\n            this.layerCanvasArr.splice(i, 1);\n            this.updateIndices();\n        } else {\n            return false;\n        }\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"removeLayer\",\n            params: [i]\n        });\n\n        return Math.max(0, i - 1);\n    }\n\n    renameLayer (i: number, name: string): boolean {\n        if (this.layerCanvasArr[i]) {\n            this.layerCanvasArr[i].name = name;\n        } else {\n            return false;\n        }\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"renameLayer\",\n            params: [i, name]\n        });\n\n        return true;\n    }\n\n    layerOpacity (i: number, o: number): void {\n        if (!this.layerCanvasArr[i]) {\n            return;\n        }\n        o = Math.max(0, Math.min(1, o));\n        this.layerCanvasArr[i].opacity = o;\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"layerOpacity\",\n            params: [i, o]\n        });\n\n        this.emitChange();\n    }\n\n    moveLayer (i: number, d: number): void | number {\n        if (d === 0) {\n            return;\n        }\n        if (this.layerCanvasArr[i]) {\n            const temp = this.layerCanvasArr[i];\n            this.layerCanvasArr.splice(i, 1);\n            const targetIndex = Math.max(0, Math.min(i + d, this.layerCanvasArr.length));\n            this.layerCanvasArr.splice(targetIndex, 0, temp);\n            this.updateIndices();\n            this.history.push({\n                tool: [\"canvas\"],\n                action: \"moveLayer\",\n                params: [i, d]\n            });\n            return targetIndex;\n        }\n    }\n\n    mergeLayers (layerBottomIndex: number, layerTopIndex: number, mixModeStr: IMixMode | 'as-alpha'): void | number {\n        if (\n            !this.layerCanvasArr[layerBottomIndex] ||\n            !this.layerCanvasArr[layerTopIndex] ||\n            layerBottomIndex === layerTopIndex\n        ) {\n            return;\n        }\n        //order messed up\n        if (layerBottomIndex > layerTopIndex) {\n            let temp = layerBottomIndex;\n            layerBottomIndex = layerTopIndex;\n            layerTopIndex = temp;\n        }\n\n        let topOpacity = this.layerCanvasArr[layerTopIndex].opacity;\n        if (topOpacity !== 0 && topOpacity) {\n            let ctx = this.layerCanvasArr[layerBottomIndex].getContext(\"2d\");\n            ctx.save();\n\n            if (mixModeStr === 'as-alpha') { // todo remove this?\n\n                BB.convertToAlphaChannelCanvas(this.layerCanvasArr[layerTopIndex]);\n                ctx.globalCompositeOperation = 'destination-in';\n                ctx.globalAlpha = topOpacity;\n                this.layerCanvasArr[layerBottomIndex].getContext(\"2d\").drawImage(this.layerCanvasArr[layerTopIndex], 0, 0);\n\n            } else {\n\n                if (mixModeStr) {\n                    ctx.globalCompositeOperation = mixModeStr;\n                }\n                ctx.globalAlpha = topOpacity;\n                this.layerCanvasArr[layerBottomIndex].getContext(\"2d\").drawImage(this.layerCanvasArr[layerTopIndex], 0, 0);\n\n            }\n\n            ctx.restore();\n\n            // workaround for chrome bug https://bugs.chromium.org/p/chromium/issues/detail?id=1281185\n            // TODO remove if chrome updated\n            if (mixModeStr) {\n                ctx.save();\n                ctx.fillStyle = \"rgba(0,0,0,0.01)\";\n                ctx.fillRect(-0.9999999, -0.9999999, 1, 1);\n                ctx.restore();\n            }\n        }\n        this.updateIndices();\n        this.history.pause(true);\n        this.removeLayer(layerTopIndex);\n        this.history.pause(false);\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"mergeLayers\",\n            params: [layerBottomIndex, layerTopIndex, mixModeStr]\n        });\n\n        return layerBottomIndex;\n    }\n\n    rotate (deg: number): void {\n        while (deg < 0) {\n            deg += 360;\n        }\n        deg %= 360;\n        if (deg % 90 != 0 || deg === 0)\n            return;\n        let temp = BB.canvas();\n        if (deg === 0 || deg === 180) {\n            temp.width = this.width;\n            temp.height = this.height;\n        } else if (deg === 90 || deg === 270) {\n            temp.width = this.height;\n            temp.height = this.width;\n        }\n        let ctx = temp.getContext(\"2d\");\n        for (let i = 0; i < this.layerCanvasArr.length; i++) {\n            ctx.clearRect(0, 0, temp.width, temp.height);\n            ctx.save();\n            ctx.translate(temp.width / 2, temp.height / 2);\n            ctx.rotate(deg * Math.PI / 180);\n            if (deg === 180) {\n                ctx.drawImage(this.layerCanvasArr[i], -temp.width / 2, -temp.height / 2);\n            } else if (deg === 90 || deg === 270) {\n                ctx.drawImage(this.layerCanvasArr[i], -temp.height / 2, -temp.width / 2);\n            }\n            this.layerCanvasArr[i].width = temp.width;\n            this.layerCanvasArr[i].height = temp.height;\n            this.layerCanvasArr[i].getContext(\"2d\").clearRect(0, 0, this.layerCanvasArr[i].width, this.layerCanvasArr[i].height);\n            this.layerCanvasArr[i].getContext(\"2d\").drawImage(temp, 0, 0);\n            ctx.restore();\n        }\n        this.width = temp.width;\n        this.height = temp.height;\n    }\n\n    flip (isHorizontal: boolean, isVertical: boolean, layerIndex: number): void {\n        if (!isHorizontal && !isVertical) {\n            return;\n        }\n\n        let temp = BB.canvas(this.width, this.height);\n        temp.width = this.width;\n        temp.height = this.height;\n        let tempCtx = temp.getContext(\"2d\");\n\n        for (let i = 0; i < this.layerCanvasArr.length; i++) {\n\n            if ( (layerIndex || layerIndex === 0) && i !== layerIndex) {\n                continue;\n            }\n\n            tempCtx.save();\n            tempCtx.clearRect(0, 0, temp.width, temp.height);\n            tempCtx.translate(temp.width / 2, temp.height / 2);\n            tempCtx.scale((isHorizontal ? -1 : 1), (isVertical ? -1 : 1));\n            tempCtx.drawImage(this.layerCanvasArr[i], -temp.width / 2, -temp.height / 2);\n            tempCtx.restore();\n\n            this.layerCanvasArr[i].getContext(\"2d\").clearRect(0, 0, this.layerCanvasArr[i].width, this.layerCanvasArr[i].height);\n            this.layerCanvasArr[i].getContext(\"2d\").drawImage(temp, 0, 0);\n        }\n    }\n\n    layerFill (layerIndex: number, colorObj: IRGB, compositeOperation?: string): void {\n        let ctx = this.layerCanvasArr[layerIndex].getContext(\"2d\");\n        ctx.save();\n        if (compositeOperation) {\n            ctx.globalCompositeOperation = compositeOperation as GlobalCompositeOperation;\n        }\n        ctx.fillStyle = \"rgba(\" + colorObj.r + \",\" + colorObj.g + \",\" + colorObj.b + \",1)\";\n        ctx.fillRect(0, 0, this.layerCanvasArr[layerIndex].width, this.layerCanvasArr[layerIndex].height);\n        ctx.restore();\n\n        // workaround for chrome bug https://bugs.chromium.org/p/chromium/issues/detail?id=1281185\n        // TODO remove if chrome updated\n        ctx.save();\n        ctx.fillStyle = \"rgba(0,0,0,0.01)\";\n        ctx.fillRect(-0.9999999, -0.9999999, 1, 1);\n        ctx.restore();\n\n        /*if (!document.getElementById('testocanvas')) {\n            layerCanvasArr[layerIndex].id = 'testocanvas';\n            document.body.appendChild(layerCanvasArr[layerIndex]);\n            BB.css(layerCanvasArr[layerIndex], {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                zIndex: '1111111',\n                transform: 'scale(0.2)',\n                border: '10px solid red',\n            });\n        }\n        if (!document.getElementById('testocanvas')) {\n            let c = document.createElement('canvas');\n            c.width = 1000;\n            c.height = 1000;\n            let ctx2 = c.getContext('2d');\n            ctx2.drawImage(layerCanvasArr[layerIndex], 0, 0);\n            c.id = 'testocanvas';\n            document.body.appendChild(c);\n            BB.css(c, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                zIndex: '1111111',\n                transform: 'scale(0.2)',\n                border: '10px solid red',\n            });\n        }*/\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"layerFill\",\n            params: [layerIndex, colorObj, compositeOperation]\n        });\n    }\n\n    floodFill (\n        layerIndex: number, // index of layer to be filled\n        x: number, // starting point\n        y: number,\n        rgb: IRGB | null, // fill color, if null -> erase\n        opacity: number,\n        tolerance: number,\n        sampleStr: 'current' | 'all' | 'above',\n        grow: number, // int >= 0 - radius around filled area that is to be filled too\n        isContiguous: boolean,\n    ): void {\n        if (x < 0 || y < 0 || x >= this.width || y >= this.height || opacity === 0) {\n            return;\n        }\n        tolerance = Math.round(tolerance);\n\n        if (!(['above', 'current', 'all'].includes(sampleStr))) {\n            throw new Error('invalid sampleStr');\n        }\n\n        let result;\n\n        let srcCtx;\n        let srcImageData;\n        let srcData;\n\n        let targetCtx;\n        let targetImageData;\n        let targetData;\n\n\n        if (sampleStr === 'all') {\n\n            let srcCanvas = this.layerCanvasArr.length === 1 ? this.layerCanvasArr[0] : this.getCompleteCanvas(1);\n            srcCtx = srcCanvas.getContext('2d');\n            srcImageData = srcCtx.getImageData(0, 0, this.width, this.height);\n            srcData = srcImageData.data;\n            result = floodFillBits(srcData, this.width, this.height, x, y, tolerance, Math.round(grow), isContiguous);\n\n            srcCanvas = null;\n            srcCtx = null;\n            srcImageData = null;\n            srcData = null;\n\n            targetCtx = this.layerCanvasArr[layerIndex].getContext('2d');\n            targetImageData = targetCtx.getImageData(0, 0, this.width, this.height);\n\n        } else {\n            let srcIndex = sampleStr === 'above' ? layerIndex + 1 : layerIndex;\n\n            if (srcIndex >= this.layerCanvasArr.length) {\n                return;\n            }\n\n            srcCtx = this.layerCanvasArr[srcIndex].getContext('2d');\n            srcImageData = srcCtx.getImageData(0, 0, this.width, this.height);\n            srcData = srcImageData.data;\n            result = floodFillBits(srcData, this.width, this.height, x, y, tolerance, Math.round(grow), isContiguous);\n\n            if (layerIndex !== srcIndex) {\n                srcCtx = null;\n                srcImageData = null;\n                srcData = null;\n            }\n\n            targetCtx = layerIndex === srcIndex ? srcCtx : this.layerCanvasArr[layerIndex].getContext('2d');\n            targetImageData = layerIndex === srcIndex ? srcImageData : targetCtx.getImageData(0, 0, this.width, this.height);\n\n        }\n\n        targetData = targetImageData.data;\n        if (rgb) {\n            if (opacity === 1) {\n                for (let i = 0; i < this.width * this.height; i++) {\n                    if (result.data[i] === 255) {\n                        targetData[i * 4] = rgb.r;\n                        targetData[i * 4 + 1] = rgb.g;\n                        targetData[i * 4 + 2] = rgb.b;\n                        targetData[i * 4 + 3] = 255;\n                    }\n                }\n            } else {\n                for (let i = 0; i < this.width * this.height; i++) {\n                    if (result.data[i] === 255) {\n                        targetData[i * 4] = BB.mix(targetData[i * 4], rgb.r, opacity);\n                        targetData[i * 4 + 1] = BB.mix(targetData[i * 4 + 1], rgb.g, opacity);\n                        targetData[i * 4 + 2] = BB.mix(targetData[i * 4 + 2], rgb.b, opacity);\n                        targetData[i * 4 + 3] = BB.mix(targetData[i * 4 + 3], 255, opacity);\n                    }\n                }\n            }\n        } else { // erase\n            if (opacity === 1) {\n                for (let i = 0; i < this.width * this.height; i++) {\n                    if (result.data[i] === 255) {\n                        targetData[i * 4 + 3] = 0;\n                    }\n                }\n            } else {\n                for (let i = 0; i < this.width * this.height; i++) {\n                    if (result.data[i] === 255) {\n                        targetData[i * 4 + 3] = BB.mix(targetData[i * 4 + 3], 0, opacity);\n                    }\n                }\n            }\n        }\n        targetCtx.putImageData(targetImageData, 0, 0);\n\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"replaceLayer\",\n            params: [layerIndex, targetImageData]\n        });\n    }\n\n    /**\n     * draw shape via BB.drawShape\n     * @param layerIndex\n     * @param shapeObj\n     */\n    drawShape (layerIndex: number, shapeObj: IShapeToolObject): void {\n        if (shapeObj.x1 === shapeObj.x2 && shapeObj.y1 === shapeObj.y2) {\n            return;\n        }\n        drawShape(this.layerCanvasArr[layerIndex].getContext(\"2d\"), shapeObj);\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"drawShape\",\n            params: [layerIndex, BB.copyObj(shapeObj)],\n        });\n    }\n\n    drawGradient(layerIndex: number, gradientObj: IGradient): void {\n        drawGradient(this.layerCanvasArr[layerIndex].getContext(\"2d\"), gradientObj);\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"drawGradient\",\n            params: [layerIndex, BB.copyObj(gradientObj)],\n        });\n    }\n\n    text (layerIndex: number, p: IRenderTextParam): void {\n        renderText(this.layerCanvasArr[layerIndex], BB.copyObj(p));\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"text\",\n            params: [layerIndex, BB.copyObj(p)],\n        });\n    }\n\n    replaceLayer (layerIndex: number, imageData: ImageData): void {\n        let ctx = this.layerCanvasArr[layerIndex].getContext(\"2d\");\n        ctx.putImageData(imageData, 0, 0);\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"replaceLayer\",\n            params: [layerIndex, imageData],\n        });\n    }\n\n    clearLayer (layerIndex: number): void {\n        let ctx = this.layerCanvasArr[layerIndex].getContext(\"2d\");\n        ctx.save();\n        ctx.clearRect(0, 0, this.layerCanvasArr[layerIndex].width, this.layerCanvasArr[layerIndex].height);\n        ctx.restore();\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"clearLayer\",\n            params: [layerIndex]\n        });\n    }\n\n    getLayers (): {\n        context: CanvasRenderingContext2D;\n        opacity: number;\n        name: string;\n        mixModeStr: IMixMode;\n    }[] {\n        return this.layerCanvasArr.map(item => {\n            return {\n                context: item.getContext(\"2d\"),\n                opacity: item.opacity,\n                name: item.name,\n                mixModeStr: item.mixModeStr,\n            };\n        });\n    }\n\n    getLayersFast (): {\n        canvas: KlCanvasLayer;\n        opacity: number;\n        name: string;\n        mixModeStr: IMixMode;\n    }[] {\n        return this.layerCanvasArr.map(item => {\n            return {\n                canvas: item,\n                opacity: item.opacity,\n                name: item.name,\n                mixModeStr: item.mixModeStr,\n            };\n        });\n    }\n\n    getLayerIndex (canvasObj: HTMLCanvasElement, doReturnNull?: boolean): null | number {\n        for (let i = 0; i < this.layerCanvasArr.length; i++) {\n            if (this.layerCanvasArr[i] === canvasObj) {\n                return i;\n            }\n        }\n        if (!doReturnNull) {\n            throw new Error(\"layer not found (in \" + this.layerCanvasArr.length + \" layers)\");\n        }\n        return null;\n    }\n\n    getLayer (index: number, doReturnNull?: boolean): null | {\n        context: CanvasRenderingContext2D;\n        opacity: number;\n        name: string;\n        id: number;\n    } {\n        if (this.layerCanvasArr[index]) {\n            return {\n                context: this.layerCanvasArr[index].getContext(\"2d\"),\n                opacity: this.layerCanvasArr[index].opacity,\n                name: this.layerCanvasArr[index].name,\n                id: index,\n            };\n        }\n        if (!doReturnNull) {\n            throw new Error(\"layer of index \" + index + \" not found (in \" + this.layerCanvasArr.length + \" layers)\");\n        }\n        return null;\n    }\n\n    getColorAt (x: number, y: number): IRGB {\n        x = Math.floor(x);\n        y = Math.floor(y);\n        let ctx = this.pickCanvas.getContext(\"2d\");\n        ctx.save();\n        ctx.imageSmoothingEnabled = false;\n        ctx.clearRect(0, 0, 1, 1);\n        for (let i = 0; i < this.layerCanvasArr.length; i++) {\n            ctx.globalAlpha = this.layerCanvasArr[i].opacity;\n            ctx.globalCompositeOperation = this.layerCanvasArr[i].mixModeStr;\n            ctx.drawImage(this.layerCanvasArr[i], -x, -y);\n        }\n        ctx.restore();\n        let imData = ctx.getImageData(0, 0, 1, 1);\n        return new BB.RGB(imData.data[0], imData.data[1], imData.data[2]);\n    }\n\n    getCompleteCanvas (factor: number): HTMLCanvasElement {\n        return drawProject(this.getProject(), factor);\n    }\n\n    getProject (): IKlProject {\n        return {\n            width: this.width,\n            height: this.height,\n            layers: this.layerCanvasArr.map(layer => {\n                return {\n                    name: layer.name,\n                    opacity: layer.opacity,\n                    mixModeStr: layer.mixModeStr,\n                    image: layer,\n                };\n            }),\n        };\n    }\n\n    addChangeListener (func: () => void): void {\n        if (this.changeListenerArr.includes(func)) {\n            return;\n        }\n        this.changeListenerArr.push(func);\n    }\n\n    removeChangeListener (func: () => void): void {\n        for (let i = 0; i < this.changeListenerArr.length; i++) {\n            if (this.changeListenerArr[i] === func) {\n                this.changeListenerArr.splice(i, 1);\n                return;\n            }\n        }\n    }\n\n    setMixMode (layerIndex: number, mixModeStr: IMixMode): void {\n        if (!this.layerCanvasArr[layerIndex]) {\n            throw new Error('invalid layer');\n        }\n        this.layerCanvasArr[layerIndex].mixModeStr = mixModeStr;\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"setMixMode\",\n            params: [layerIndex, '' + mixModeStr],\n        });\n    }\n\n    /**\n     * Set composite drawing step for KlCanvasWorkspace.\n     * To apply temporary manipulations to a layer.\n     *\n     * @param layerIndex\n     * @param compositeObj\n     */\n    setComposite (\n        layerIndex: number,\n        compositeObj: null | {\n            draw: (ctx: CanvasRenderingContext2D) => void;\n        }\n    ): void {\n        if (!this.layerCanvasArr[layerIndex]) {\n            throw new Error('invalid layer');\n        }\n        this.layerCanvasArr[layerIndex].compositeObj = compositeObj;\n    }\n\n    destroy (): void {\n        if (this.layerCanvasArr === null) {\n            return;\n        }\n        this.layerCanvasArr.forEach(canvas => {\n            BB.freeCanvas(canvas);\n        });\n        this.layerCanvasArr = null;\n    }\n\n}\n","\n/**\n * Flood fill. Tried https://github.com/binarymax/floodfill.js/ but it implemented tolerance wrong, and had bugs.\n * So, my own implementation. can handle tolerance, grow, opacity.\n * Needs to be optimized.\n */\n\n/**\n * Set values in data within rect to 254, unless they're 255\n *\n * @param data Uint8Array\n * @param width int\n * @param x0 int\n * @param y0 int\n * @param x1 int >x0\n * @param y1 int >y0\n */\nfunction fillRect(data, width, x0, y0, x1, y1) {\n    for (let x = x0; x <= x1; x++) {\n        for (let y = y0; y <= y1; y++) {\n            if (data[y * width + x] === 255) {\n                continue;\n            }\n            data[y * width + x] = 254;\n        }\n    }\n}\n\nlet mx, my;\n\n/**\n * Get index i moved by dX, dY. in array with dimensions width height.\n * Returns null if outside bounds.\n *\n * @param width int\n * @param height int\n * @param i int\n * @param dX int\n * @param dY int\n * @returns {null|*}\n */\nfunction moveIndex(width, height, i, dX, dY) {\n    mx = i % width + dX;\n    my = Math.floor(i / width) + dY;\n\n    if (mx < 0 || my < 0 || mx >= width || my >= height) {\n        return null;\n    }\n\n    return my * width + mx;\n}\n\n/**\n * If pixel can be filled (within tolerance) will be set 255 and returns true.\n * returns false if already filled, or i is null\n *\n * @param srcArr Uint8Array rgba\n * @param targetArr Uint8Array\n * @param width int\n * @param height int\n * @param initRgba rgba\n * @param tolerance int 0 - 255\n * @param i int - srcArr index\n * @returns {boolean}\n */\nfunction testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, i) {\n    if (i === null || targetArr[i] === 255) {\n        return false;\n    }\n\n    if (\n        srcArr[i * 4] === initRgba[0] &&\n        srcArr[i * 4 + 1] === initRgba[1] &&\n        srcArr[i * 4 + 2] === initRgba[2] &&\n        srcArr[i * 4 + 3] === initRgba[3]\n    ) {\n        targetArr[i] = 255;\n        return true;\n    }\n\n    if (\n        tolerance > 0 &&\n        Math.abs(srcArr[i * 4] - initRgba[0]) <= tolerance &&\n        Math.abs(srcArr[i * 4 + 1] - initRgba[1]) <= tolerance &&\n        Math.abs(srcArr[i * 4 + 2] - initRgba[2]) <= tolerance &&\n        Math.abs(srcArr[i * 4 + 3] - initRgba[3]) <= tolerance\n    ) {\n        targetArr[i] = 255;\n        return true;\n    }\n\n    return false;\n}\n\n\n/**\n *\n * @param srcArr Uint8Array rgba\n * @param targetArr Uint8Array\n * @param width int\n * @param height int\n * @param px int\n * @param py int\n * @param tolerance int 0 - 255\n * @param grow int >= 0\n * @param isContiguous boolean\n */\nfunction floodFill(srcArr, targetArr, width, height, px, py, tolerance, grow, isContiguous) {\n\n    let initRgba = [\n        srcArr[(py * width + px) * 4],\n        srcArr[(py * width + px) * 4 + 1],\n        srcArr[(py * width + px) * 4 + 2],\n        srcArr[(py * width + px) * 4 + 3]\n    ];\n\n    if (isContiguous) {\n        let q = [];\n        q.push(py * width + px);\n        targetArr[py * width + px] = 255;\n\n        let i, e;\n        while (q.length) {\n            i = q.pop();\n\n            // queue up unfilled neighbors\n            e = moveIndex(width, height, i, -1, 0); // left\n            testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, e) && q.push(e);\n\n            e = moveIndex(width, height, i, 1, 0); // right\n            testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, e) && q.push(e);\n\n            e = moveIndex(width, height, i, 0, -1); // up\n            testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, e) && q.push(e);\n\n            e = moveIndex(width, height, i, 0, 1); // bottom\n            testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, e) && q.push(e);\n        }\n    } else {\n        for (let i = 0; i < width * height; i++) {\n            testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, i);\n        }\n    }\n\n\n    // grow\n    if (grow === 0) {\n        return;\n    }\n\n    // how does it grow? it finds all pixel at the edge.\n    // then depending on what kind of edge it is, it draws a rectangle into target\n    // the rectangle has the value 254, or else it mess it all up.\n    // after it's all done, replaces it with 255\n    let x0, x1, y0, y1;\n    let l, tl, t, tr, r, br, b, bl; // left, top left, top, top right, etc.\n    for (let x = 0; x < width; x++) {\n        for (let y = 0; y < height; y++) {\n            if (targetArr[y * width + x] !== 255) {\n                continue;\n            }\n\n            // bounds of rectangle\n            x0 = x;\n            x1 = x;\n            y0 = y;\n            y1 = y;\n\n            l = targetArr[(y) * width + x - 1] !== 255;\n            tl = targetArr[(y - 1) * width + x - 1] !== 255;\n            t = targetArr[(y - 1) * width + x] !== 255;\n            tr = targetArr[(y - 1) * width + x + 1] !== 255;\n            r = targetArr[(y) * width + x + 1] !== 255;\n            br = targetArr[(y + 1) * width + x + 1] !== 255;\n            b = targetArr[(y + 1) * width + x] !== 255;\n            bl = targetArr[(y + 1) * width + x - 1] !== 255;\n\n            if (l) { // left\n                x0 = x - grow;\n            }\n            if (l && tl && t) { // top left\n                x0 = x - grow;\n                y0 = y - grow;\n            }\n            if (t) { // top\n                y0 = Math.min(y0, y - grow);\n            }\n            if (t && tr && r) { // top right\n                y0 = Math.min(y0, y - grow);\n                x1 = x + grow;\n            }\n            if (r) { // right\n                x1 = Math.max(x1, x + 1 * grow);\n            }\n            if (r && br && b) { // bottom right\n                x1 = Math.max(x1, x + 1 * grow);\n                y1 = Math.max(y1, y + 1 * grow);\n            }\n            if (b) { // bottom\n                y1 = Math.max(y1, y + 1 * grow);\n            }\n            if (b && bl && l) { // bottom left\n                x0 = Math.min(x0, x - 1 * grow);\n                y1 = Math.max(y1, y + 1 * grow);\n            }\n\n            if (!l && !tl && !t && !tr && !r && !br && !b && !bl) {\n                continue;\n            }\n\n            fillRect(\n                targetArr,\n                width,\n                Math.max(0, x0),\n                Math.max(0, y0),\n                Math.min(width - 1, x1),\n                Math.min(height - 1, y1)\n            );\n        }\n    }\n    for (let i = 0; i < width * height; i++) {\n        if (targetArr[i] === 254) {\n            targetArr[i] = 255;\n        }\n    }\n\n}\n\n\n/**\n * Does flood fill, and returns that. an array - 0 not filled. 255 filled\n *\n * returns {\n *     data: Uint8Array\n * }\n *\n * @param rgbaArr Uint8Array rgba\n * @param width int\n * @param height int\n * @param x int\n * @param y int\n * @param tolerance int 0 - 255\n * @param grow int >= 0\n * @param isContiguous boolean\n * @returns {{data: Uint8Array}}\n */\nexport function floodFillBits(rgbaArr, width, height, x, y, tolerance, grow, isContiguous) {\n    x = Math.round(x);\n    y = Math.round(y);\n\n    let resultArr = new Uint8Array(new ArrayBuffer(width * height));\n\n    floodFill(rgbaArr, resultArr, width, height, x, y, tolerance, grow, isContiguous);\n\n    return {\n        data: resultArr\n    }\n}\n","import {BB} from '../../bb/bb';\nimport {IRGB, IShapeToolObject} from '../kl.types';\n\n\n/**\n * Input processor for shape tool.\n * Coordinates are in canvas space.\n * angleRad is the angle of the canvas.\n *\n * @param p - {onShape: func(isDone, x1, y1, x2, y2, angleRad)}\n * @constructor\n */\nexport function ShapeTool(p) {\n\n    let downX, downY, downAngleRad;\n\n    this.onDown = function(x, y, angleRad) {\n        downX = x;\n        downY = y;\n        downAngleRad = angleRad;\n    };\n\n    this.onMove = function(x, y) {\n        p.onShape(false, downX, downY, x, y, downAngleRad);\n    };\n\n    this.onUp = function(x, y) {\n        p.onShape(true, downX, downY, x, y, downAngleRad);\n    };\n}\n\nfunction applyDefaults(obj: any, defaults: any): void {\n    for (const property in defaults) {\n        if (!(property in obj)) {\n            obj[property] = defaults[property];\n        }\n    }\n}\n\n/**\n * Draw a shape (rectangle, ellipse, line)\n *\n * @param ctx\n * @param shapeObj\n */\nexport function drawShape(\n    ctx: CanvasRenderingContext2D,\n    shapeObj: IShapeToolObject,\n) {\n    shapeObj = BB.copyObj(shapeObj);\n    applyDefaults(shapeObj, {\n        angleRad: 0,\n        isOutwards: false,\n        opacity: 1,\n        isEraser: false,\n        doLockAlpha: false,\n    });\n\n    if (['rect', 'ellipse', 'line'].includes(shapeObj.type)) {\n        const lineWidth = Math.round(shapeObj.lineWidth);\n        const angleDeg = shapeObj.angleRad * 180 / Math.PI;\n\n        // --- prep color ---\n        let colorRGB: IRGB = shapeObj.isEraser ? {r: 255, g: 255, b: 255} : (shapeObj.fillRgb ? shapeObj.fillRgb : shapeObj.strokeRgb);\n\n\n        // --- prep canvas ---\n        ctx.save();\n        if (shapeObj.opacity) {\n            ctx.globalAlpha = shapeObj.opacity;\n        }\n        if (shapeObj.isEraser) {\n            ctx.globalCompositeOperation = 'destination-out';\n        }\n        if (shapeObj.doLockAlpha) {\n            ctx.globalCompositeOperation = 'source-atop';\n        }\n        ctx.rotate(-shapeObj.angleRad);\n        if (shapeObj.fillRgb) {\n            ctx.fillStyle = BB.ColorConverter.toRgbStr(colorRGB);\n        } else if (shapeObj.strokeRgb) {\n            ctx.strokeStyle = BB.ColorConverter.toRgbStr(colorRGB);\n            ctx.lineWidth = lineWidth;\n        }\n\n        let x1 = shapeObj.x1;\n        let y1 = shapeObj.y1;\n        let x2 = shapeObj.x2;\n        let y2 = shapeObj.y2;\n\n        // --- angle snapping ---\n        if (shapeObj.isAngleSnap) {\n            let r1 = BB.rotate(x1, y1, shapeObj.angleRad / Math.PI * 180);\n            let r2 = BB.rotate(x2, y2, shapeObj.angleRad / Math.PI * 180);\n\n            let pAngleDeg = BB.pointsToAngleDeg(r1, r2) + 90;\n            let pAngleDegSnapped = Math.round(pAngleDeg / 45) * 45;\n            let rotated = BB.rotateAround({x: x1, y: y1}, {x: x2, y: y2}, pAngleDegSnapped - pAngleDeg);\n            x2 = rotated.x;\n            y2 = rotated.y;\n\n            // needs to be perfect if p1->p2 aligns with canvas x- or y-axis\n            if ((angleDeg + pAngleDegSnapped) % 90 === 0) {\n                if (Math.round((angleDeg - pAngleDegSnapped) / 90) % 2 === 0) { // up or down\n                    x2 = x1;\n                } else { // left or right\n                    y2 = y1;\n                }\n            }\n        }\n\n        let x = x1;\n        let y = y1;\n        let dX = x2 - x1;\n        let dY = y2 - y1;\n\n        // --- 1:1 ratio ---\n        if (shapeObj.type !== 'line' && shapeObj.isFixedRatio) {\n            let r1 = BB.rotate(shapeObj.x1, shapeObj.y1, shapeObj.angleRad / Math.PI * 180);\n            let r2 = BB.rotate(shapeObj.x2, shapeObj.y2, shapeObj.angleRad / Math.PI * 180);\n\n            let rx = r1.x;\n            let ry = r1.y;\n            let rdX = r2.x - r1.x;\n            let rdY = r2.y - r1.y;\n\n            if (Math.abs(rdX) < Math.abs(rdY)) {\n                rdY = Math.abs(rdX) * (rdY < 0 ? -1 : 1);\n            } else {\n                rdX = Math.abs(rdY) * (rdX < 0 ? -1 : 1);\n            }\n            r2.x = rx + rdX;\n            r2.y = ry + rdY;\n\n            r1 = BB.rotate(r1.x, r1.y, -shapeObj.angleRad / Math.PI * 180);\n            r2 = BB.rotate(r2.x, r2.y, -shapeObj.angleRad / Math.PI * 180);\n\n            x1 = r1.x;\n            y1 = r1.y;\n            x2 = r2.x;\n            y2 = r2.y;\n\n            x = x1;\n            y = y1;\n            dX = x2 - x1;\n            dY = y2 - y1;\n        }\n\n        // outwards modifier\n        if (shapeObj.isOutwards) {\n            x -= dX;\n            y -= dY;\n            dX *= 2;\n            dY *= 2;\n\n            x1 = x;\n            y1 = y;\n            x2 = x + dX;\n            y2 = y + dY;\n        }\n\n        let p1;\n        let p2;\n        if (shapeObj.type === 'line') { // --- line ---\n\n            // rounded\n            const x1r = Math.round(x1);\n            const y1r = Math.round(y1);\n            const x2r = Math.round(x2);\n            const y2r = Math.round(y2);\n\n            // floored\n            const x1f = Math.floor(x1);\n            const y1f = Math.floor(y1);\n            const x2f = Math.floor(x2);\n            const y2f = Math.floor(y2);\n\n            if (lineWidth % 2 === 0) {\n\n                if (y1r === y2r) {\n                    p1 = {\n                        x: x1f,\n                        y: y1r,\n                    };\n                    p2 = {\n                        x: x2f,\n                        y: y2r,\n                    };\n\n                    if (x1f < x2f) {\n                        p2.x += 1;\n                    } else {\n                        p1.x += 1;\n                    }\n                } else if (x1r === x2r) {\n                    p1 = {\n                        x: x1r,\n                        y: y1f,\n                    };\n                    p2 = {\n                        x: x2r,\n                        y: y2f,\n                    };\n\n                    if (y1f < y2f) {\n                        p2.y += 1;\n                    } else {\n                        p1.y += 1;\n                    }\n                } else {\n                    p1 = {\n                        x: x1,\n                        y: y1,\n                    };\n                    p2 = {\n                        x: x2,\n                        y: y2,\n                    };\n                }\n\n            } else {\n                p1 = {\n                    x: x1f,\n                    y: y1f,\n                };\n                p2 = {\n                    x: x2f,\n                    y: y2f,\n                };\n                if (y1f === y2f) {\n                    if (x1f < x2f) {\n                        p2.x += 1;\n                    } else {\n                        p1.x += 1;\n                    }\n                    p1.y += 0.5;\n                    p2.y += 0.5;\n                } else if (x1f === x2f) {\n                    if (y1f < y2f) {\n                        p2.y += 1;\n                    } else {\n                        p1.y += 1;\n                    }\n                    p1.x += 0.5;\n                    p2.x += 0.5;\n                } else {\n                    p1.x = x1;\n                    p1.y = y1;\n                    p2.x = x2;\n                    p2.y = y2;\n                }\n            }\n\n            p1 = BB.rotate(p1.x, p1.y, shapeObj.angleRad / Math.PI * 180);\n            p2 = BB.rotate(p2.x, p2.y, shapeObj.angleRad / Math.PI * 180);\n\n            ctx.beginPath();\n            ctx.moveTo(p1.x, p1.y);\n            ctx.lineTo(p2.x, p2.y);\n            ctx.stroke();\n\n        } else if (shapeObj.type === 'rect') { // --- rect ---\n\n            // floored\n            const x1f = Math.floor(x1);\n            const y1f = Math.floor(y1);\n            const x2f = Math.floor(x2);\n            const y2f = Math.floor(y2);\n\n            if (angleDeg % 90 === 0) {\n                if (shapeObj.fillRgb) {\n                    if (x1 % 1 === 0) {\n                        x1 += 1;\n                    }\n                    if (y1 % 1 === 0) {\n                        y1 += 1;\n                    }\n                    if (x2 % 1 === 0) {\n                        x2 += 1;\n                    }\n                    if (y2 % 1 === 0) {\n                        y2 += 1;\n                    }\n\n                    p1 = {\n                        x: x1 < x2 ? x1f : x2f,\n                        y: y1 < y2 ? y1f : y2f,\n                    };\n                    p2 = {\n                        x: Math.ceil((x1 < x2 ? x2 : x1) - p1.x),\n                        y: Math.ceil((y1 < y2 ? y2 : y1) - p1.y),\n                    };\n                    p2.x = p1.x + p2.x;\n                    p2.y = p1.y + p2.y;\n\n                } else {\n                    if (lineWidth % 2 === 0) {\n                        p1 = {\n                            x: x1f,\n                            y: y1f,\n                        };\n                        p2 = {\n                            x: x2f,\n                            y: y2f,\n                        };\n                    } else {\n                        p1 = {\n                            x: x1f + 0.5,\n                            y: y1f + 0.5,\n                        };\n                        p2 = {\n                            x: x2f + 0.5,\n                            y: y2f + 0.5,\n                        };\n                    }\n                }\n            } else {\n                p1 = {\n                    x: x1,\n                    y: y1,\n                };\n                p2 = {\n                    x: x2,\n                    y: y2,\n                };\n            }\n\n            p1 = BB.rotate(p1.x, p1.y, shapeObj.angleRad / Math.PI * 180);\n            p2 = BB.rotate(p2.x, p2.y, shapeObj.angleRad / Math.PI * 180);\n            p2.x = p2.x - p1.x;\n            p2.y = p2.y - p1.y;\n\n            if (shapeObj.fillRgb) {\n                ctx.fillRect(p1.x, p1.y, p2.x, p2.y);\n            } else {\n                ctx.strokeRect(p1.x, p1.y, p2.x, p2.y);\n            }\n\n        } else {  // --- circle ---\n            p1 = BB.rotate(x1, y1, shapeObj.angleRad / Math.PI * 180);\n            p2 = BB.rotate(x2, y2, shapeObj.angleRad / Math.PI * 180);\n            x = p1.x;\n            y = p1.y;\n            dX = p2.x - p1.x;\n            dY = p2.y - p1.y;\n\n            ctx.beginPath();\n            ctx.ellipse(x + dX / 2, y + dY / 2, Math.abs(dX / 2), Math.abs(dY / 2), 0, 0, Math.PI * 2);\n            if (shapeObj.fillRgb) {\n                ctx.fill();\n            } else {\n                ctx.stroke();\n            }\n        }\n\n\n        ctx.restore();\n\n    } else {\n        throw new Error('unknown shape');\n    }\n}","import {BB} from '../../bb/bb';\nimport {IRect} from '../../bb/bb.types';\n\nexport interface IRenderTextParam {\n    textStr: string; // text to be drawn. can contain newlines\n    x: number;\n    y: number;\n    size: number;\n    font: 'serif' | 'monospace' | 'sans-serif' | 'cursive' | 'fantasy'; // default sans-serif\n    align: 'left' | 'center' | 'right'; // default 'left'\n    isBold: boolean; // default false\n    isItalic: boolean; // default false\n    angleRad: number; // default 0 - rotates around x y\n    lineHeight?: number; // pixels\n    color: string;\n    isDebug?: boolean;\n}\n\n\n/**\n * Draw text on a canvas.\n *\n * @param canvas\n * @param p\n * @returns - bounds. coords relative to p.x p.y\n */\nexport function renderText(canvas: HTMLCanvasElement, p: IRenderTextParam): IRect {\n\n    // always at least a space. so bounds aren't just a dot\n    let textStr = p.textStr === '' ? ' ' : p.textStr;\n\n    // --- create el ---\n    // create an actual dom element. figure out where exactly each letter is positioned.\n    // that way multiline is feasible. canvas can't do multiline or text-align\n    let outer = BB.el({\n        css: {\n            position: 'fixed',\n            left: '0',\n            top: '0',\n            width: '100000px',\n            fontSize: p.size + 'px',\n            lineHeight: p.lineHeight ? p.lineHeight + 'px' : 'default',\n        }\n    });\n    let div = BB.el({\n        parent: outer,\n        css: {\n            display: 'inline-block',\n            textAlign: p.align ? p.align : 'left',\n            fontFamily: p.font ? p.font : 'sans-serif',\n            fontSize: p.size + 'px',\n            fontWeight: p.isBold ? 'bold' : 'normal',\n            fontStyle: p.isItalic ? 'italic' : 'normal',\n            lineHeight: p.lineHeight ? p.lineHeight + 'px' : 'default',\n\n\n            opacity: '0',\n            pointerEvents: 'none'\n        }\n    });\n    let spanStr = '';\n    let replaceObj = {\n        \"\\n\": '<br>',\n        \" \": '&nbsp;',\n        \"\t\": '&nbsp;&nbsp;&nbsp;&nbsp;',\n    };\n    for (let i = 0; i < textStr.length; i++) {\n        if (textStr[i] === \"\\n\") {\n            div.appendChild(BB.el({\n                tagName: 'span',\n                textContent: spanStr,\n                css: {\n                    whiteSpace: 'pre'\n                }\n            }));\n            spanStr = '';\n            div.appendChild(BB.el({\n                tagName: 'br'\n            }));\n            continue;\n        }\n        spanStr += textStr[i].replace(\"\\t\", '    ');\n    }\n    div.appendChild(BB.el({\n        tagName: 'span',\n        textContent: spanStr,\n        css: {\n            whiteSpace: 'pre'\n        }\n    }));\n    document.body.appendChild(outer);\n\n\n    // --- determine bounds ---\n    let bounds = {\n        x0: 99999999,\n        y0: 99999999,\n        x1: 0,\n        y1: 0\n    }\n    for (let i = 0; i < div.children.length; i++) {\n        let el = div.children[i] as HTMLElement;\n        bounds.x0 = Math.min(bounds.x0, el.offsetLeft);\n        bounds.y0 = Math.min(bounds.y0, el.offsetTop);\n        bounds.x1 = Math.max(bounds.x1, el.offsetLeft + el.offsetWidth);\n        bounds.y1 = Math.max(bounds.y1, el.offsetTop + el.offsetHeight);\n    }\n\n    // --- draw ---\n    let ctx = canvas.getContext('2d');\n    ctx.save();\n\n    let font = [];\n    if (p.isItalic) {\n        font.push('italic');\n    }\n    if (p.isBold) {\n        font.push('bold');\n    }\n    font.push(p.size + 'px ' + (p.font ? p.font : 'sans-serif'));\n    ctx.font = font.join(' ');\n    ctx.fillStyle = p.color ? p.color : '#000';\n\n    let x = p.x;\n    let y = p.y;\n    if (p.align === 'right') {\n        x += -bounds.x1 + bounds.x0;\n    }\n    if (p.align === 'center') {\n        x += (-bounds.x1 + bounds.x0) / 2;\n    }\n    ctx.translate(p.x, p.y);\n    ctx.rotate(p.angleRad ? -p.angleRad : 0);\n    ctx.translate(-p.x, -p.y);\n    ctx.translate(x, y);\n\n    // fill\n    for (let i = 0; i < div.children.length; i++) {\n        let el = div.children[i] as HTMLElement;\n\n        //ctx.fillText(el.innerText, 0, 0);\n        ctx.fillText(el.innerText, el.offsetLeft, el.offsetTop);\n    }\n\n    if (p.isDebug) {\n        ctx.lineWidth = 1;\n        ctx.strokeRect(0, -p.size * 0.85, bounds.x1, bounds.y1);\n        ctx.restore();\n        ctx.fillRect(p.x - 1, p.y - 1, 2, 2);\n    } else {\n        ctx.restore();\n    }\n\n    document.body.removeChild(outer);\n\n    return {\n        x: x - p.x,\n        y: y - p.y -p.size * 0.85,\n        width: bounds.x1 - bounds.x0,\n        height: bounds.y1 - bounds.y0\n    };\n}","import {BB} from '../../bb/bb';\nimport {IKlProject} from '../kl.types';\n\nexport function drawProject(project: IKlProject, factor) {\n    let resultCanvas = BB.canvas(\n        Math.max(1, Math.round(project.width * factor)),\n        Math.max(1, Math.round(project.height * factor))\n    );\n    let ctx = resultCanvas.getContext(\"2d\");\n    ctx.save();\n    if (factor > 1) {\n        ctx.imageSmoothingEnabled = false;\n    }\n    for (let i = 0; i < project.layers.length; i++) {\n        if (project.layers[i].opacity === 0) {\n            continue;\n        }\n        ctx.globalAlpha = project.layers[i].opacity;\n        ctx.globalCompositeOperation = project.layers[i].mixModeStr ? project.layers[i].mixModeStr : 'source-over';\n        ctx.drawImage(project.layers[i].image, 0, 0, resultCanvas.width, resultCanvas.height);\n    }\n    ctx.restore();\n    return resultCanvas;\n}","import {IGradient} from '../kl.types';\nimport {BB} from '../../bb/bb';\n\n\ntype TOnGradient = (isDone: boolean, x1: number, y1: number, x2: number, y2: number, angleRad: number) => void;\n\n/**\n * Input processor for gradient tool.\n * Coordinates are in canvas space.\n * angleRad is the angle of the canvas.\n */\nexport class GradientTool {\n    private downX: number;\n    private downY: number;\n    private downAngleRad: number;\n    private onGradient: TOnGradient;\n\n    // ---- public ----\n    constructor(\n        p: {\n            onGradient: TOnGradient;\n        }\n    ) {\n        this.onGradient = p.onGradient;\n    }\n\n    onDown(x: number, y: number, angleRad: number): void {\n        this.downX = x;\n        this.downY = y;\n        this.downAngleRad = angleRad;\n    }\n\n    onMove(x: number, y: number): void {\n        this.onGradient(false, this.downX, this.downY, x, y, this.downAngleRad);\n    }\n\n    onUp(x: number, y: number): void {\n        this.onGradient(true, this.downX, this.downY, x, y, this.downAngleRad);\n    }\n}\n\nexport function drawGradient(\n    ctx: CanvasRenderingContext2D,\n    gradientObj: IGradient,\n): void {\n    ctx.save();\n\n    let x1 = gradientObj.x1;\n    let y1 = gradientObj.y1;\n    let x2 = gradientObj.x2;\n    let y2 = gradientObj.y2;\n\n    if (gradientObj.doSnap) {\n        const angleDeg = gradientObj.angleRad * 180 / Math.PI;\n\n        let r1 = BB.rotate(x1, y1, gradientObj.angleRad / Math.PI * 180);\n        let r2 = BB.rotate(x2, y2, gradientObj.angleRad / Math.PI * 180);\n\n        let pAngleDeg = BB.pointsToAngleDeg(r1, r2) + 90;\n        let pAngleDegSnapped = Math.round(pAngleDeg / 45) * 45;\n        let rotated = BB.rotateAround({x: x1, y: y1}, {x: x2, y: y2}, pAngleDegSnapped - pAngleDeg);\n        x2 = rotated.x;\n        y2 = rotated.y;\n\n        // needs to be perfect if p1->p2 aligns with canvas x- or y-axis\n        if ((angleDeg + pAngleDegSnapped) % 90 === 0) {\n            if (Math.round((angleDeg - pAngleDegSnapped) / 90) % 2 === 0) { // up or down\n                x2 = x1;\n            } else { // left or right\n                y2 = y1;\n            }\n        }\n    }\n\n    let baseColor = gradientObj.color1;\n    if (gradientObj.isEraser && gradientObj.doLockAlpha) {\n        baseColor = {r: 255, g: 255, b: 255};\n    }\n    let color1 = BB.copyObj(baseColor);\n    color1.a = gradientObj.opacity;\n    let color2 = BB.copyObj(baseColor);\n    color2.a = 0;\n    if (gradientObj.isReversed) {\n        const temp = color1;\n        color1 = color2;\n        color2 = temp;\n    }\n\n    let gradient;\n    if (gradientObj.type === 'linear') {\n        gradient = ctx.createLinearGradient(x1, y1, x2, y2);\n        gradient.addColorStop(0, BB.ColorConverter.toRgbaStr(color1));\n        gradient.addColorStop(1, BB.ColorConverter.toRgbaStr(color2));\n\n    } else if (gradientObj.type === 'linear-mirror') {\n        const d = {\n            x: x2 - x1,\n            y: y2 - y1,\n        };\n        gradient = ctx.createLinearGradient(x1 - d.x,y1 - d.y, x2, y2);\n        gradient.addColorStop(0, BB.ColorConverter.toRgbaStr(color2));\n        gradient.addColorStop(0.5, BB.ColorConverter.toRgbaStr(color1));\n        gradient.addColorStop(1, BB.ColorConverter.toRgbaStr(color2));\n\n    } else if (gradientObj.type === 'radial') {\n        const r = BB.Vec2.dist(\n            {x: x1, y: y1},\n            {x: x2, y: y2},\n        );\n        gradient = ctx.createRadialGradient(x1, y1, 0, x1, y1, r);\n        gradient.addColorStop(0, BB.ColorConverter.toRgbaStr(color1));\n        gradient.addColorStop(1, BB.ColorConverter.toRgbaStr(color2));\n    }\n\n    ctx.fillStyle = gradient;\n    if (gradientObj.isEraser) {\n        ctx.globalCompositeOperation = 'destination-out';\n    }\n    if (gradientObj.doLockAlpha) {\n        ctx.globalCompositeOperation = 'source-atop';\n    }\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n\n    ctx.restore();\n}","import {IMixMode} from '../kl.types';\nimport {LANG} from '../../language/language';\nimport {TTranslationCode} from '../../../languages/languages';\n\nexport function translateBlending(blendMode?: IMixMode): string {\n    if (!blendMode) {\n        return LANG('layers-blend-normal');\n    }\n\n    const codes: {\n        [key: string]: TTranslationCode\n    } = {\n        'source-over': 'layers-blend-normal',\n        'darken': 'layers-blend-darken',\n        'multiply': 'layers-blend-multiply',\n        'color-burn': 'layers-blend-color-burn',\n        'lighten': 'layers-blend-lighten',\n        'screen': 'layers-blend-screen',\n        'color-dodge': 'layers-blend-color-dodge',\n        'overlay': 'layers-blend-overlay',\n        'soft-light': 'layers-blend-soft-light',\n        'hard-light': 'layers-blend-hard-light',\n        'difference': 'layers-blend-difference',\n        'exclusion': 'layers-blend-exclusion',\n        'hue': 'layers-blend-hue',\n        'saturation': 'layers-blend-saturation',\n        'color': 'layers-blend-color',\n        'luminosity': 'layers-blend-luminosity',\n    };\n\n    if (!(blendMode in codes)) {\n        throw new Error('unknown blend mode');\n    }\n    return LANG(codes[blendMode]);\n}","import {BB} from '../../bb/bb';\nimport {IRGB} from '../kl.types';\n\n/**\n * Overlay for KlCanvasWorkspace.\n * - brush circle\n * - eyedropper circle\n * - compass needle (rotation hud)\n */\nexport class WorkspaceSvgOverlay {\n    private rootElement: SVGElement;\n    private brushCircleOuter: SVGElement;\n    private brushCircleInner: SVGElement;\n    private pickerPreviewBorder: SVGElement;\n    private pickerPreviewCol: SVGElement;\n    private readonly compassSize: number;\n    private compass: SVGElement;\n    private compassInner: SVGElement;\n    private compassBaseCircle: SVGElement;\n    private compassLineCircle: SVGElement;\n    private compassUpperTriangle: SVGElement;\n    private compassLowerTriangle: SVGElement;\n\n    // ---- public ----\n\n    constructor (\n        p: {\n            width: number;\n            height: number;\n        }\n    ) {\n        this.rootElement = BB.createSvg({\n            elementType: 'svg',\n            width: '' + p.width,\n            height: '' + p.height,\n        });\n        BB.css(this.rootElement, {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            pointerEvents: 'none',\n            userSelect: 'none'\n        });\n\n        //brush circles\n        this.brushCircleOuter = BB.createSvg({\n            elementType: 'circle',\n            r: '10',\n            stroke: 'rgba(0,0,0,0.7)',\n            'stroke-width': '1',\n            fill: 'none',\n        });\n        this.brushCircleInner = BB.createSvg({\n            elementType: 'circle',\n            r: '9',\n            stroke: 'rgba(255,255,255,0.7)',\n            'stroke-width': '1',\n            fill: 'none',\n        });\n        this.rootElement.append(this.brushCircleOuter, this.brushCircleInner);\n\n        //color picker preview circle\n        this.pickerPreviewBorder = BB.createSvg({\n            elementType: 'circle',\n            r: '47',\n            stroke: 'black',\n            'stroke-width': '22',\n            fill: 'none',\n        });\n        this.pickerPreviewBorder.style.opacity = '0';\n        this.pickerPreviewCol = BB.createSvg({\n            elementType: 'circle',\n            r: '47',\n            stroke: 'black',\n            'stroke-width': '20',\n            fill: 'none',\n        });\n        this.pickerPreviewCol.style.opacity = '0';\n        this.rootElement.append(this.pickerPreviewBorder, this.pickerPreviewCol);\n\n\n        //rotation compass\n        this.compassSize = 30;\n        this.compass = BB.createSvg({\n            elementType: 'g',\n            transform: 'translate(' + (p.width/2) + ', ' + (p.height/2) + ')',\n        });\n        BB.css(this.compass, {\n            transition: 'opacity 0.25s ease-in-out',\n            opacity: '0',\n        });\n        this.compassInner = BB.createSvg({\n            elementType: 'g',\n            transform: 'rotate(45)',\n        });\n        this.compassBaseCircle = BB.createSvg({\n            elementType: 'circle',\n            fill: 'rgba(0,0,0,0.9)',\n            stroke: 'none',\n            cx: '0',\n            cy: '0',\n            r: '' + this.compassSize,\n        });\n        this.compassLineCircle = BB.createSvg({\n            elementType: 'circle',\n            fill: 'none',\n            stroke: 'rgba(255,255,255,0.75)',\n            'stroke-width': '1',\n            cx: '0',\n            cy: '0',\n            r: '' + (this.compassSize * 0.9),\n        });\n        this.compassUpperTriangle = BB.createSvg({\n            elementType: 'path',\n            fill: '#f00',\n            stroke: 'none',\n            d: 'M -'+(this.compassSize * 0.25)+',0 '+(this.compassSize * 0.25)+',0 0,-'+(this.compassSize * 0.9)+' z',\n        });\n        this.compassLowerTriangle = BB.createSvg({\n            elementType: 'path',\n            fill: '#fff',\n            stroke: 'none',\n            d: 'M -'+(this.compassSize * 0.25)+',0 '+(this.compassSize * 0.25)+',0 0,'+(this.compassSize * 0.9)+' z',\n        });\n\n        this.compassInner.append(\n            this.compassBaseCircle,\n            this.compassLineCircle,\n            this.compassUpperTriangle,\n            this.compassLowerTriangle\n        );\n        this.compass.append(this.compassInner);\n        this.rootElement.append(this.compass);\n    }\n\n    getElement (): SVGElement {\n        return this.rootElement;\n    }\n\n    setSize (width: number, height: number): void {\n        this.rootElement.setAttribute('width', '' + width);\n        this.rootElement.setAttribute('height', '' + height);\n        this.compass.setAttribute('transform', 'translate(' + (width/2) + ', ' + (height/2) + ')');\n    }\n\n    updateCursor (p: {\n        x?: number;\n        y?: number;\n        radius?: number;\n        isVisible?: boolean;\n    }): void {\n        if ('x' in p) {\n            this.brushCircleOuter.setAttribute('cx', '' + p.x);\n            this.brushCircleInner.setAttribute('cx', '' + p.x);\n        }\n        if ('y' in p) {\n            this.brushCircleOuter.setAttribute('cy', '' + p.y);\n            this.brushCircleInner.setAttribute('cy', '' + p.y);\n        }\n        if ('radius' in p) {\n            this.brushCircleOuter.setAttribute('r', '' + Math.max(0, p.radius));\n            this.brushCircleInner.setAttribute('r', '' + Math.max(0, p.radius - 1));\n        }\n        if ('isVisible' in p) {\n            this.brushCircleOuter.style.opacity = p.isVisible ? '1' : '0';\n            this.brushCircleInner.style.opacity = p.isVisible ? '1' : '0';\n        }\n    }\n\n    updateColorPreview (p: {\n        x?: number;\n        y?: number;\n        color?: IRGB;\n        isVisible?: boolean;\n    }): void {\n        if ('x' in p) {\n            this.pickerPreviewCol.setAttribute('cx', '' + p.x);\n            this.pickerPreviewBorder.setAttribute('cx', '' + p.x);\n        }\n        if ('y' in p) {\n            this.pickerPreviewCol.setAttribute('cy', '' + p.y);\n            this.pickerPreviewBorder.setAttribute('cy', '' + p.y);\n        }\n        if ('color' in p) {\n            this.pickerPreviewCol.setAttribute('stroke', BB.ColorConverter.toRgbStr(p.color));\n            let borderColor = BB.testIsWhiteBestContrast(p.color) ? 'rgba(255,255,255,0.5)' : 'rgba(0,0,0,0.5)'\n            this.pickerPreviewBorder.setAttribute('stroke', borderColor);\n        }\n        if ('isVisible' in p) {\n            this.pickerPreviewCol.style.opacity = p.isVisible ? '1' : '0';\n            this.pickerPreviewBorder.style.opacity = p.isVisible ? '1' : '0';\n        }\n    }\n\n    updateCompass (p: {\n        angleDeg?: number;\n        isVisible?: boolean;\n    }): void {\n        if ('angleDeg' in p) {\n            this.compassInner.setAttribute('transform', 'rotate(' + p.angleDeg + ')');\n            this.compassLineCircle.style.opacity = p.angleDeg % 90 === 0 ? '1' : '0';\n        }\n        if ('isVisible' in p) {\n            this.compass.style.opacity = p.isVisible ? '1' : '0';\n        }\n    }\n\n}\n","import {BB} from '../../bb/bb';\nimport {IRGB, ITransform} from '../kl.types';\nimport {WorkspaceSvgOverlay} from './workspace-svg-overlay';\nimport {klHistory} from '../history/kl-history';\n// @ts-ignore\nimport pickerImg from 'url:~/src/app/img/ui/cursor-picker.png';\n// @ts-ignore\nimport zoomEwImg from 'url:~/src/app/img/ui/cursor-zoom-ew.png';\n// @ts-ignore\nimport fillImg from 'url:~/src/app/img/ui/cursor-fill.png';\n// @ts-ignore\nimport textImg from 'url:~/src/app/img/ui/cursor-text.png';\nimport {IPressureInput, IVector2D} from '../../bb/bb.types';\nimport {KlCanvas} from '../canvas/kl-canvas';\nimport {KeyListener} from '../../bb/input/key-listener';\nimport {KL} from '../kl';\n\nexport interface IViewChangeEvent {\n    changed: ('scale' | 'angle')[];\n    angle: number;\n    scale: number;\n}\n\ntype TModeStr = 'draw' | 'pick' | 'hand' | 'shape' | 'fill' | 'gradient' | 'text'; // | 'transform' | 'select'\n\nconst MIN_SCALE = 1 / 16;\nconst MAX_SCALE = 64;\nenum TMode {\n    Draw,\n    Hand,\n    HandGrabbing,\n    Pick,\n    Zoom,\n    Rotate,\n    Rotating,\n    Fill,\n    Gradient,\n    Text,\n    Shape,\n}\nconst ANIMATION_SPEED = 0.3; // rate of transition towards targetTransform\n\n/**\n * Work area that displays the KlCanvas.\n * - pan, zoom, rotate (also via multi-touch)\n * - input modes: drawing, hand, pick, fill, text // transform, select\n * - drawing input events\n * - view change events\n * - eyedropper input events (pick)\n * - draws cursor, eyedropper overlay\n *\n * subscribes to klCanvas changes\n * listens to kl history for changes\n * and you can manually trigger redraw\n */\nexport class KlCanvasWorkspace {\n\n    private rootEl: HTMLElement;\n    private klCanvas: KlCanvas;\n    private renderTargetCanvas: HTMLCanvasElement;\n    private renderTargetCtx: CanvasRenderingContext2D;\n    private renderWidth: number;\n    private renderHeight: number;\n    private compositeCanvas: HTMLCanvasElement; // for drawing klcanvas layer composite\n    private compositeCtx: CanvasRenderingContext2D;\n    private doResizeCanvas: boolean;\n    private oldTransformObj: ITransform;\n    private targetTransformObj: ITransform; // animation target\n    private highResTransformObj: ITransform; // animated, internal high res\n    private renderedTransformObj: ITransform; // same as highRes, but rounded - what's actually displayed\n    private cursorPos: IVector2D;\n    private usesCssCursor: boolean;\n    private bgVisible: boolean;\n    private transformIsDirty: boolean;\n    private doAnimateTranslate: boolean;\n    private svgOverlay: WorkspaceSvgOverlay;\n    private emptyCanvas: HTMLCanvasElement;\n    private keyListener: KeyListener;\n    private currentMode: TMode;\n    private globalMode: TMode;\n    private renderTime: number; // for debugging - average ms per render()\n    private lastDrawEvent: IPressureInput | null; // previous drawing input\n    private linetoolProcessor: any; // todo type - BB.EventChain.LinetoolProcessor\n    private pointer: IVector2D | null; // position of cursor\n    private isDrawing: boolean;\n    private inputProcessorObj: any; // todo type\n    private currentInputProcessor: any; // todo type\n    private angleIsExtraSticky: boolean;\n    private pinchZoomer: any; // todo type - BB.EventChain.PinchZoomer\n    private mainDoubleTapper: any; // todo type - BB.EventChain.DoubleTapper - todo docs\n    private middleDoubleTapper: any; // todo type - BB.EventChain.DoubleTapper - todo docs\n    private twoFingerTap: any; // todo type - BB.EventChain.NFingerTapper\n    private threeFingerTap: any; // todo type - BB.EventChain.NFingerTapper\n    private pointerEventChain: any; // todo type - BB.EventChain.EventChain\n    private pointerListener: any; // todo type - BB.PointerListener\n    private brushRadius: number;\n    private animationFrameRequested: boolean;\n    private lastRenderedState: number; // KlHistory state - to detect if there are changes to draw\n    private lastRenderTime: number; // ms from performance.now()\n    private hideBrushCursorTimeout: number;\n    private onViewChange: (e:  IViewChangeEvent) => void;\n\n    private getRenderedTransform (): ITransform {\n        // rounded x & y so canvas is less blurry.\n        const result = this.renderedTransformObj;\n        result.x = this.highResTransformObj.x;\n        result.y = this.highResTransformObj.y;\n        result.scale = this.highResTransformObj.scale;\n        result.angle = this.highResTransformObj.angle;\n\n        if (result.angle % (Math.PI / 2) === 0 && result.scale % 1 === 0) {\n            result.x = Math.round(result.x);\n            result.y = Math.round(result.y);\n        }\n\n        return result;\n    }\n\n    private updateChangeListener (): void {\n        this.klCanvas.addChangeListener(() => {\n            this.lastRenderedState = -1;\n            this.reqFrame();\n        });\n    }\n\n    private updateCursor (modeInt: TMode, doForce?: boolean): void {\n        if (modeInt === this.currentMode && !doForce) {\n            return;\n        }\n        const oldMode = this.currentMode;\n        this.currentMode = modeInt;\n        this.lastRenderedState = -1;\n        if (this.currentMode === TMode.Draw) {\n            this.rootEl.style.cursor = 'crosshair';\n        } else if (this.currentMode === TMode.Hand) {\n            this.rootEl.style.cursor = 'grab';\n        } else if (this.currentMode === TMode.HandGrabbing) {\n            this.rootEl.style.cursor = 'grabbing';\n        } else if (this.currentMode === TMode.Pick) {\n            this.rootEl.style.cursor = \"url('\" + pickerImg + \"') 0 15, crosshair\";\n        } else if (this.currentMode === TMode.Zoom) {\n            this.rootEl.style.cursor = \"url('\" + zoomEwImg + \"') 7 7, zoom-in\";\n        } else if (this.currentMode === TMode.Rotate) {\n            this.rootEl.style.cursor = \"grab\";\n        } else if (this.currentMode === TMode.Rotating) {\n            this.rootEl.style.cursor = \"grabbing\";\n        } else if (this.currentMode === TMode.Fill) {\n            this.rootEl.style.cursor = \"url('\" + fillImg + \"') 1 12, crosshair\";\n        } else if (this.currentMode === TMode.Gradient) {\n            this.rootEl.style.cursor = 'crosshair';\n        } else if (this.currentMode === TMode.Text) {\n            this.rootEl.style.cursor = \"url('\" + textImg + \"') 1 12, crosshair\";\n        } else if (this.currentMode === TMode.Shape) {\n            this.rootEl.style.cursor = 'crosshair';\n        }\n\n        if ([TMode.Draw, TMode.Pick, TMode.Fill, TMode.Text, TMode.Shape].includes(this.globalMode)) {\n            const oldIsHand = [TMode.Hand, TMode.HandGrabbing].includes(oldMode);\n            const currentIsHand = [TMode.Hand, TMode.HandGrabbing].includes(this.currentMode);\n            if (!oldIsHand && currentIsHand) {\n                this.mainDoubleTapper.setAllowedPointerTypeArr(['mouse', 'pen', 'touch']);\n            }\n            if (oldIsHand && !currentIsHand) {\n                this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n            }\n        }\n\n        if (this.currentMode !== TMode.Pick) {\n            this.svgOverlay.updateColorPreview({isVisible: false});\n        }\n    }\n\n    /**\n     * returns false if no change of zoom\n     * @param stepNum\n     * @param centerX\n     * @param centerY\n     * @private\n     */\n    private internalZoomByStep (stepNum: number, centerX: number, centerY: number): boolean {\n        const step = Math.log2(this.targetTransformObj.scale);\n\n        let newStep = step / Math.abs(stepNum);\n        newStep += stepNum > 0 ? 1 : -1;\n        newStep = Math.round(newStep);\n        newStep *= Math.abs(stepNum);\n        const newScale = Math.max(MIN_SCALE, Math.min(MAX_SCALE, Math.pow(2, newStep)));\n\n        //has zoomed?\n        if (newScale === this.targetTransformObj.scale) {\n            return false;\n        }\n\n\n        const effectiveFactor = newScale / this.targetTransformObj.scale;\n        this.targetTransformObj.scale = newScale;\n\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(centerX, centerY));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(effectiveFactor));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-centerX, -centerY));\n\n        let origin = [this.targetTransformObj.x, this.targetTransformObj.y, 0, 1];\n        origin = BB.Matrix.multiplyMatrixAndPoint(matrix, origin);\n        this.targetTransformObj.x = origin[0];\n        this.targetTransformObj.y = origin[1];\n\n        this.transformIsDirty = true;\n\n        return true;\n    }\n\n    /**\n     * mixes two transform objects. modifies A\n     * @param transformA\n     * @param transformB\n     * @param blendFactor 0 -> A, 1 -> B\n     * @private\n     */\n    private mixTransformObj (transformA: ITransform, transformB: ITransform, blendFactor: number): void {\n        if (transformA.angle === transformB.angle) {\n            transformA.scale = BB.mix(transformA.scale, transformB.scale, blendFactor);\n            transformA.x = BB.mix(transformA.x, transformB.x, blendFactor);\n            transformA.y = BB.mix(transformA.y, transformB.y, blendFactor);\n            transformA.angle = BB.mix(transformA.angle, transformB.angle, blendFactor);\n            return;\n        }\n\n        const w = this.klCanvas.getWidth();\n        const h = this.klCanvas.getHeight();\n\n        // --- determine centerPosA, centerPosB ---\n        const centerPosA = this.canvasToWorkspaceCoord({\n            x: w / 2,\n            y: h / 2\n        }, transformA);\n        const centerPosB = this.canvasToWorkspaceCoord({\n            x: w / 2,\n            y: h / 2\n        }, transformB);\n\n        // --- centerPosMixed ---\n        transformA.x = BB.mix(centerPosA.x , centerPosB.x, blendFactor);\n        transformA.y = BB.mix(centerPosA.y , centerPosB.y, blendFactor);\n\n        // --- scale and angle ---\n        transformA.scale = BB.mix(transformA.scale, transformB.scale, blendFactor);\n        transformA.angle = BB.mix(transformA.angle, transformB.angle, blendFactor);\n\n        // --- x and y ---\n        const mixedPos = this.canvasToWorkspaceCoord({\n            x: -w / 2,\n            y: -h / 2\n        }, transformA);\n        transformA.x = mixedPos.x;\n        transformA.y = mixedPos.y;\n    }\n\n    private render (): void {\n        if (this.doResizeCanvas) {\n            this.doResizeCanvas = false;\n            this.renderTargetCanvas.width = this.renderWidth;\n            this.renderTargetCanvas.height = this.renderHeight;\n        }\n        this.renderContext(this.renderTargetCtx);\n    }\n\n    /**\n     * is the gray background that surrounds canvas visible?\n     * @private\n     */\n    private testBgVisible (): boolean {\n        //bring workspace points (corners of workspace) into canvas coordinate system\n        //then check if any corner point is outside of the canvas -> that means the bg is visible\n\n        const workspacePointArr = [\n            [0, 0], // top left\n            [this.renderWidth, 0], // top right\n            [this.renderWidth, this.renderHeight], // bottom right\n            [0, this.renderHeight], // bottom left\n        ];\n\n        const art = this.getRenderedTransform();\n\n        //setup transformation matrix\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(1/art.scale));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(-art.angle));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-art.x, -art.y));\n\n        //transform points, then test if outside of canvas\n        for (let i = 0; i < workspacePointArr.length; i++) {\n            let coords = [workspacePointArr[i][0], workspacePointArr[i][1], 0, 1];\n            coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n\n            if (\n                !(0 <= coords[0] && coords[0] <= this.klCanvas.getWidth() &&\n                    0 <= coords[1] && coords[1] <= this.klCanvas.getHeight())\n            ){\n                //if not inside -> bg visible\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private renderContext (ctx: CanvasRenderingContext2D): void {\n        const w = this.klCanvas.getWidth();\n        const h = this.klCanvas.getHeight();\n\n        const art = this.getRenderedTransform();\n\n        if (art.scale >= 4 || (art.scale === 1 && art.angle === 0)) {\n            ctx.imageSmoothingEnabled = false;\n        } else {\n            ctx.imageSmoothingEnabled = true;\n            ctx.imageSmoothingQuality  = 'low'; // art.scale >= 1 ? 'low' : 'medium';\n        }\n        //ctx.imageSmoothingEnabled = false;\n        //renderTargetCtx.globalCompositeOperation  = 'multiply';\n\n\n\n        ctx.save();\n        {\n            if (this.bgVisible) {\n                ctx.fillStyle = 'rgb(158,158,158)'; // 'rgb(185,185,185)';\n                ctx.fillRect(0, 0, this.renderWidth, this.renderHeight);\n            } else {\n                ctx.clearRect(0, 0, this.renderWidth, this.renderHeight);\n            }\n\n\n\n            if (this.bgVisible) {\n                ctx.save();\n\n                ctx.translate(art.x, art.y);\n                ctx.scale(art.scale, art.scale);\n                ctx.rotate(art.angle);\n\n                ctx.imageSmoothingEnabled = false;\n\n                //outline\n                const borderSize = 1;\n                ctx.globalAlpha = 0.2;\n                ctx.drawImage(\n                    this.emptyCanvas,\n                    -borderSize / art.scale,\n                    -borderSize / art.scale,\n                    w + borderSize * 2 / art.scale,\n                    h + borderSize * 2 / art.scale\n                );\n                ctx.globalAlpha = 1;\n\n                //erase\n                ctx.globalCompositeOperation = 'destination-out';\n                ctx.drawImage(this.emptyCanvas, 0, 0, w, h);\n\n                ctx.restore();\n            }\n\n            /*const region = new Path2D();\n            region.rect(80, 10, 20, 130);\n            ctx.clip(region);*/\n\n            ctx.translate(art.x, art.y);\n            ctx.scale(art.scale, art.scale);\n            ctx.rotate(art.angle);\n\n            const layerArr = this.klCanvas.getLayersFast();\n            for (let i = 0; i < layerArr.length; i++) {\n                if (layerArr[i].opacity > 0) {\n                    ctx.globalAlpha = layerArr[i].opacity;\n                    ctx.globalCompositeOperation = layerArr[i].mixModeStr;\n\n                    if (layerArr[i].canvas.compositeObj) {\n                        if (this.compositeCanvas.width !== layerArr[i].canvas.width || this.compositeCanvas.height !== layerArr[i].canvas.height) {\n                            this.compositeCanvas.width = layerArr[i].canvas.width;\n                            this.compositeCanvas.height = layerArr[i].canvas.height;\n                        } else {\n                            this.compositeCtx.clearRect(0, 0, this.compositeCanvas.width, this.compositeCanvas.height);\n                        }\n                        this.compositeCtx.drawImage(layerArr[i].canvas, 0, 0);\n                        layerArr[i].canvas.compositeObj.draw(this.compositeCtx);\n                        ctx.drawImage(this.compositeCanvas, 0, 0, w, h);\n                    } else {\n                        ctx.drawImage(layerArr[i].canvas, 0, 0, w, h);\n                    }\n                }\n            }\n            ctx.globalAlpha = 1;\n\n\n\n        }\n        ctx.restore();\n\n        // rotation hud\n        if (TMode.Rotate === this.currentMode || TMode.Rotating === this.currentMode) {\n            this.svgOverlay.updateCompass({\n                isVisible: true,\n                angleDeg: art.angle / Math.PI * 180\n            });\n        } else {\n            this.svgOverlay.updateCompass({\n                isVisible: false\n            });\n        }\n    }\n\n    private workspaceToCanvasCoord (p: IVector2D): IVector2D {\n        const art = this.getRenderedTransform();\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(1/art.scale));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(-art.angle));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-art.x, -art.y));\n\n        let coords = [p.x, p.y, 0, 1];\n        coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n\n        return {\n            x: coords[0],\n            y: coords[1],\n        };\n    }\n\n    private canvasToWorkspaceCoord (p: IVector2D, transformObj: ITransform): IVector2D {\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(transformObj.x, transformObj.y));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(transformObj.angle));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(transformObj.scale));\n\n        let coords = [p.x, p.y, 0, 1];\n        coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n\n        return {\n            x: coords[0],\n            y: coords[1],\n        };\n    }\n\n    private snapAngleRad (angleRad: number, snapDegIncrement: number, maxDistDeg: number): number {\n        let angleDeg = angleRad * 180 / Math.PI;\n        const modDeg = Math.abs(angleDeg % snapDegIncrement);\n        const dist = Math.min(modDeg, snapDegIncrement - modDeg);\n\n        if (dist <= maxDistDeg) {\n            angleDeg = Math.round(angleDeg / snapDegIncrement) * snapDegIncrement;\n        }\n\n        return angleDeg / 180 * Math.PI;\n    }\n\n    /**\n     * angle always in range [-PI, PI]\n     * @param angleRad\n     * @private\n     */\n    private minimizeAngleRad (angleRad: number): number {\n        angleRad = angleRad % (2 * Math.PI);\n        if (angleRad > Math.PI) {\n            angleRad -= 2 * Math.PI;\n        } else if (angleRad < -Math.PI) {\n            angleRad += 2 * Math.PI;\n        }\n        return angleRad;\n    }\n\n    private resetInputProcessor (): void {\n        this.currentInputProcessor = null;\n        this.updateCursor(this.globalMode);\n        this.reqFrame(true);\n    }\n\n    private reqFrame (doRedrawCanvas?: boolean): void {\n        this.animationFrameRequested = true;\n        if (doRedrawCanvas) {\n            this.lastRenderedState = -1;\n        }\n    }\n\n    private updateLoop (): void {\n        window.requestAnimationFrame(() => this.updateLoop());\n        const newState = klHistory.getState();\n        const doRender = this.lastRenderedState < newState;\n\n        //handle variable framerate\n        const nowTime = performance.now();\n        const elapsedFrames = (nowTime - this.lastRenderTime) * 60 / 1000; //how many frames elapsed since last render if fps were 60fps\n        this.lastRenderTime = nowTime;\n\n        if (this.animationFrameRequested || doRender) {\n            this.animationFrameRequested = false;\n            this.checkChange(elapsedFrames);\n        }\n    }\n\n    private checkChange (elapsedFrames: number): void {\n\n        const newState = klHistory.getState();\n        const doRender = this.lastRenderedState < newState ||\n            this.highResTransformObj.scale !== this.targetTransformObj.scale ||\n            this.highResTransformObj.x !== this.targetTransformObj.x ||\n            this.highResTransformObj.y !== this.targetTransformObj.y;\n\n        //update transform\n        if (\n            !this.doAnimateTranslate &&\n            (\n                this.highResTransformObj.scale === this.targetTransformObj.scale ||\n                Math.abs(this.highResTransformObj.scale - this.targetTransformObj.scale) < 0.008 * this.targetTransformObj.scale\n            )\n        ) {\n            this.highResTransformObj.scale = this.targetTransformObj.scale;\n            this.highResTransformObj.x = this.targetTransformObj.x;\n            this.highResTransformObj.y = this.targetTransformObj.y;\n            this.highResTransformObj.angle = this.targetTransformObj.angle;\n            if (this.transformIsDirty) {\n                this.transformIsDirty = false;\n                this.bgVisible = this.testBgVisible();\n            }\n\n            this.svgOverlay.updateCursor({radius: this.brushRadius * this.highResTransformObj.scale});\n        } else if (\n            (this.highResTransformObj.x === this.targetTransformObj.x || Math.abs(this.highResTransformObj.x - this.targetTransformObj.x) < 0.5) &&\n            (this.highResTransformObj.y === this.targetTransformObj.y || Math.abs(this.highResTransformObj.y - this.targetTransformObj.y) < 0.5) &&\n            (\n                this.highResTransformObj.scale === this.targetTransformObj.scale ||\n                Math.abs(this.highResTransformObj.scale - this.targetTransformObj.scale) < 0.008 * this.targetTransformObj.scale\n            )\n        ) {\n            this.highResTransformObj.scale = this.targetTransformObj.scale;\n            this.highResTransformObj.x = this.targetTransformObj.x;\n            this.highResTransformObj.y = this.targetTransformObj.y;\n            this.highResTransformObj.angle = this.targetTransformObj.angle;\n            this. doAnimateTranslate = false;\n            if (this.transformIsDirty) {\n                this.transformIsDirty = false;\n                this.bgVisible = this.testBgVisible();\n            }\n\n            this.svgOverlay.updateCursor({radius: this.brushRadius * this.highResTransformObj.scale});\n        } else {\n            this.reqFrame(); //probably needs another frame\n            const blendFactor = Math.min(1, ANIMATION_SPEED * elapsedFrames);\n            this.mixTransformObj(this.highResTransformObj, this.targetTransformObj, blendFactor);\n            this.bgVisible = true; // spare yourself the calculation\n            this.svgOverlay.updateCursor({radius: this.brushRadius * this.highResTransformObj.scale});\n        }\n\n        if (this.pointer && this.currentMode == TMode.Draw && !this.usesCssCursor) {\n            this.svgOverlay.updateCursor({\n                x: this.pointer.x,\n                y: this.pointer.y,\n                isVisible: true\n            });\n        } else {\n            this.svgOverlay.updateCursor({isVisible: false});\n        }\n\n\n        if (doRender) {\n            //console.log('scale', this.renderedTransform.scale, 'x', this.renderedTransform.x, 'y', this.renderedTransform.y);\n            this.lastRenderedState = newState;\n            const start = performance.now();\n            this.render();\n            this.renderTime = BB.mix(this.renderTime, performance.now() - start, 0.05);\n        }\n        //setTimeout(this.checkChange, 100);\n\n\n\n        if (doRender) {\n\n            //console.log('rendertime ms: ', this.renderTime);\n        }\n\n    }\n\n    // ---- public ----\n\n    constructor (\n        p: {\n            klCanvas: any; // todo\n            width: number;\n            height: number;\n            onDraw: (val) => void; // todo\n            onPick: (rgb: IRGB, isPointerup: boolean) => void;\n            onFill: (canvasX: number, canvasY: number) => void;\n            onGradient: (type: 'down' | 'up' | 'move', canvasX: number, canvasY: number, angleRad: number) => void;\n            onText: (canvasX: number, canvasY: number, angleRad: number) => void;\n            onShape: (type: 'down' | 'up' | 'move', canvasX: number, canvasY: number, angleRad: number) => void;\n            onViewChange: (e:  IViewChangeEvent) => void;\n            onUndo: () => void;\n            onRedo: () => void;\n        }\n    ) {\n        const _this = this;\n        this.rootEl = BB.el({\n            css: {\n                position: 'absolute',\n                left: '0',\n                right: '0',\n                top: '0',\n                bottom: '0',\n                cursor: 'crosshair',\n                userSelect: 'none',\n                colorScheme: 'only light',\n            }\n        });\n        this.klCanvas = p.klCanvas;\n        this.onViewChange = p.onViewChange;\n        this.renderTargetCanvas = BB.canvas(p.width, p.height);\n        this.renderTargetCtx = this.renderTargetCanvas.getContext('2d');\n        this.renderWidth = p.width;\n        this.renderHeight = p.height;\n        this.compositeCanvas = BB.canvas(1, 1); // for drawing klcanvas layer composite\n        this.compositeCtx = this.compositeCanvas.getContext('2d');\n        this.doResizeCanvas = false;\n        this.oldTransformObj = null;\n        this.targetTransformObj = {\n            x: 0,\n            y: 0,\n            scale: 1,\n            angle: 0\n        };\n        this.highResTransformObj = {\n            x: 0,\n            y: 0,\n            scale: 1,\n            angle: 0\n        };\n        this.renderedTransformObj = {\n            x: null,\n            y: null,\n            scale: null,\n            angle: null\n        };\n        this.cursorPos = {\n            x: 0,\n            y: 0\n        };\n        this.usesCssCursor = false;\n        this.bgVisible = true;\n        this.transformIsDirty = true;\n        this.doAnimateTranslate = true;\n\n        this.svgOverlay = new WorkspaceSvgOverlay({\n            width: p.width,\n            height: p.height\n        });\n\n        BB.css(this.renderTargetCanvas, {\n            userSelect: 'none',\n            pointerEvents: 'none',\n        });\n        BB.createCheckerDataUrl(8, (url) => {\n            this.renderTargetCanvas.style.background = \"url(\" + url + \")\";\n        });\n        this.rootEl.appendChild(this.renderTargetCanvas);\n        this.rootEl.appendChild(this.svgOverlay.getElement());\n        BB.addEventListener(this.rootEl, 'touchend', (e) => {\n            e.preventDefault();\n            return false;\n        });\n        BB.addEventListener(this.rootEl, 'contextmenu', (e) => {\n            e.preventDefault();\n            return false;\n        });\n        BB.addEventListener(this.rootEl, 'dragstart', (e) => {\n            e.preventDefault();\n            return false;\n        });\n\n        this.emptyCanvas = BB.canvas(1, 1);\n        {\n            const ctx = this.emptyCanvas.getContext('2d');\n            ctx.fillRect(0, 0, 1, 1);\n        }\n\n        this.keyListener = new BB.KeyListener({\n            onDown: (keyStr, event, comboStr, isRepeat) => {\n\n                if (KL.dialogCounter.get() > 0 || BB.isInputFocused(true)) {\n                    return;\n                }\n                if (keyStr === 'alt') {\n                    event.preventDefault();\n                }\n                if (isRepeat) {\n                    return;\n                }\n\n                if (this.currentInputProcessor) {\n                    this.currentInputProcessor.onKeyDown(keyStr, event, comboStr, isRepeat);\n\n                } else {\n\n                    if ([TMode.Draw, TMode.Pick, TMode.Fill, TMode.Gradient, TMode.Text, TMode.Shape].includes(this.globalMode) && comboStr === 'space') {\n                        this.currentInputProcessor = this.inputProcessorObj.spaceHand;\n                        this.currentInputProcessor.onKeyDown(keyStr, event, comboStr, isRepeat);\n                        return;\n                    }\n\n                    if ([TMode.Draw, TMode.Hand, TMode.Fill, TMode.Gradient, TMode.Text, TMode.Shape].includes(this.globalMode) && comboStr === 'alt') {\n                        this.currentInputProcessor = this.inputProcessorObj.altPicker;\n                        this.currentInputProcessor.onKeyDown(keyStr, event, comboStr, isRepeat);\n                        return;\n                    }\n\n                    if (['r', 'shift+r'].includes(comboStr)) {\n                        this.currentInputProcessor = this.inputProcessorObj.rotate;\n                        this.currentInputProcessor.onKeyDown(keyStr, event, comboStr, isRepeat);\n                        return;\n                    }\n\n                    if ('z' === comboStr) {\n                        this.currentInputProcessor = this.inputProcessorObj.zoom;\n                        this.currentInputProcessor.onKeyDown(keyStr, event, comboStr, isRepeat);\n                        return;\n                    }\n\n                }\n\n            },\n            onUp: (keyStr, event, oldComboStr) => {\n                // prevent menu bar in Firefox\n                if (keyStr === 'alt') {\n                    event.preventDefault();\n                }\n\n                if (this.currentInputProcessor) {\n                    this.currentInputProcessor.onKeyUp(keyStr, event, oldComboStr);\n                }\n            }\n        });\n\n        this.updateChangeListener();\n\n        this.currentMode = TMode.Draw;\n        this.globalMode = TMode.Draw;\n\n        this.renderTime = 0;\n\n        this.lastDrawEvent = null;\n\n        this.linetoolProcessor = new BB.EventChain.LinetoolProcessor({\n            onDraw: (event) => {\n                const getMatrix = () => {\n                    const art = this.getRenderedTransform();\n                    let matrix = BB.Matrix.getIdentity();\n                    matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(1/art.scale));\n                    matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(-art.angle));\n                    matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-art.x, -art.y));\n                    return matrix;\n                };\n\n                if (event.type === 'line' && !this.lastDrawEvent) {\n                    const matrix = getMatrix();\n                    let coords = [event.x1, event.y1, 0, 1];\n                    coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n                    this.lastDrawEvent = {\n                        x: coords[0],\n                        y: coords[1],\n                        pressure: event.pressure1\n                    };\n                    return;\n                }\n\n                if ('x' in event || 'x0' in event) {\n\n                    const matrix = getMatrix();\n\n                    if ('x' in event) { //down or move\n                        let coords = [event.x, event.y, 0, 1];\n                        coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n                        event.x = coords[0];\n                        event.y = coords[1];\n                    }\n                    if ('x0' in event) { //line\n                        event.x0 = this.lastDrawEvent.x;\n                        event.y0 = this.lastDrawEvent.y;\n                        event.pressure0 = this.lastDrawEvent.pressure;\n                        let coords = [event.x1, event.y1, 0, 1];\n                        coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n                        event.x1 = coords[0];\n                        event.y1 = coords[1];\n\n                        this.lastDrawEvent = {\n                            x: event.x1,\n                            y: event.y1,\n                            pressure: event.pressure1,\n                        };\n                    }\n                }\n\n\n                if (['down', 'move'].includes(event.type)) {\n                    this.lastDrawEvent = event;\n                }\n                p.onDraw(event);\n            }\n        });\n\n        this.pointer = null;\n        this.isDrawing = false;\n\n\n        this.inputProcessorObj = {\n            draw: {\n                onPointer: (val) => {\n\n                    this.reqFrame();\n                    this.updateCursor(TMode.Draw);\n\n                    const comboStr = this.keyListener.getComboStr();\n\n                    const event: any = {\n                        scale: this.highResTransformObj.scale\n                    };\n                    event.shiftIsPressed = comboStr === 'shift';\n                    event.pressure = val.pressure;\n                    event.isCoalesced = !!val.isCoalesced;\n\n                    if (val.type === 'pointerdown') {\n\n                        this.isDrawing = true;\n                        event.type = 'down';\n\n                    } else if (val.button) {\n                        event.type = 'move';\n\n                    } else if (val.type === 'pointerup') {\n\n                        this.isDrawing = false;\n                        event.type = 'up';\n\n                        this.linetoolProcessor.process(event);\n                        this.resetInputProcessor();\n                        return;\n                    } else {\n                        return;\n                    }\n\n                    event.x = val.relX;\n                    event.y = val.relY;\n\n                    this.linetoolProcessor.process(event);\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            fill: {\n                onPointer: (event) => {\n\n                    this.reqFrame();\n                    this.updateCursor(TMode.Fill);\n\n                    if (event.type === 'pointerdown') {\n                        const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n                        p.onFill(Math.floor(coord.x), Math.floor(coord.y));\n\n                    } else if (event.type === 'pointerup') {\n                        this.resetInputProcessor();\n                        return;\n\n                    }\n\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            gradient: {\n                onPointer: (event) => {\n\n                    this.reqFrame();\n                    this.updateCursor(TMode.Gradient);\n                    const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n\n                    if (event.type === 'pointerdown') {\n                        this.isDrawing = true;\n                        p.onGradient('down', coord.x, coord.y, this.renderedTransformObj.angle);\n\n                    } else if (event.type === 'pointermove') {\n                        p.onGradient('move', coord.x, coord.y, this.renderedTransformObj.angle);\n\n                    } else if (event.type === 'pointerup') {\n                        this.isDrawing = false;\n                        p.onGradient('up', coord.x, coord.y, this.renderedTransformObj.angle);\n                        this.resetInputProcessor();\n\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            text: {\n                onPointer: (event) => {\n\n                    this.reqFrame();\n                    this.updateCursor(TMode.Text);\n\n                    if (event.type === 'pointerdown') {\n                        const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n                        p.onText(Math.floor(coord.x), Math.floor(coord.y), this.renderedTransformObj.angle);\n\n                    } else if (event.type === 'pointerup') {\n                        this.resetInputProcessor();\n                        return;\n\n                    }\n\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            shape: {\n                onPointer: (event) => {\n\n                    this.reqFrame();\n                    this.updateCursor(TMode.Shape);\n                    const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n\n                    if (event.type === 'pointerdown') {\n                        this.isDrawing = true;\n                        p.onShape('down', coord.x, coord.y, this.renderedTransformObj.angle);\n\n                    } else if (event.type === 'pointermove') {\n                        p.onShape('move', coord.x, coord.y, this.renderedTransformObj.angle);\n\n                    } else if (event.type === 'pointerup') {\n                        this.isDrawing = false;\n                        p.onShape('up', coord.x, coord.y, this.renderedTransformObj.angle);\n                        this.resetInputProcessor();\n\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            hand: {\n                onPointer: (event) => {\n                    this.updateCursor(TMode.Hand);\n                    if (['left', 'middle'].includes(event.button)) {\n                        this.updateCursor(TMode.HandGrabbing);\n                        this.targetTransformObj.x += event.dX;\n                        this.targetTransformObj.y += event.dY;\n                        this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n                        this.doAnimateTranslate = false;\n                        this.transformIsDirty = true;\n                        this.reqFrame(true);\n                    } else if (event.type === 'pointerup') {\n                        this.resetInputProcessor();\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            spaceHand: {\n                onPointer: (event) => {\n                    this.updateCursor(TMode.Hand);\n                    if (['left', 'middle'].includes(event.button)) {\n                        this.updateCursor(TMode.HandGrabbing);\n                        this.targetTransformObj.x += event.dX;\n                        this.targetTransformObj.y += event.dY;\n                        this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n                        this.doAnimateTranslate = false;\n                        this.transformIsDirty = true;\n                        this.reqFrame(true);\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n                    if (comboStr !== 'space') {\n                        this.resetInputProcessor();\n                    } else {\n                        this.updateCursor(TMode.Hand);\n                    }\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n                    this.resetInputProcessor();\n                }\n            },\n            zoom: {\n                onPointer: (event) => {\n                    this.updateCursor(TMode.Zoom);\n\n                    if (event.button === 'left' && !event.isCoalesced && event.dX != 0) {\n\n                        const offsetX = event.pageX - event.relX;\n                        const offsetY = event.pageY - event.relY;\n\n                        this.internalZoomByStep(event.dX / 175, event.downPageX - offsetX, event.downPageY - offsetY);\n                        this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n                        this.lastRenderedState = -1;\n                        this.reqFrame();\n\n                        this.onViewChange({\n                            changed: ['scale'],\n                            angle: this.targetTransformObj.angle,\n                            scale: this.targetTransformObj.scale\n                        });\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n                    if (comboStr !== 'z') {\n                        this.resetInputProcessor();\n                    } else {\n                        this.updateCursor(TMode.Zoom);\n                    }\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n                    this.resetInputProcessor();\n                }\n            },\n            picker: {\n                onPointer: (event) => {\n                    this.updateCursor(TMode.Pick);\n                    if (\n                        (['left', 'right'].includes(event.button) && !event.isCoalesced) ||\n                        event.type === 'pointerup'\n                    ) {\n                        const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n                        const pickedColor = this.klCanvas.getColorAt(coord.x, coord.y);\n                        p.onPick(pickedColor, event.type === 'pointerup');\n                        this.svgOverlay.updateColorPreview({\n                            x: event.relX,\n                            y: event.relY,\n                            color: pickedColor,\n                            isVisible: event.type !== 'pointerup'\n                        });\n\n                        if (event.type === 'pointerup') {\n                            this.resetInputProcessor();\n                        }\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            altPicker: {\n                onPointer: (event) => {\n                    this.updateCursor(TMode.Pick);\n                    if (\n                        (['left', 'right'].includes(event.button) && !event.isCoalesced) ||\n                        event.type === 'pointerup'\n                    ) {\n                        const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n                        const pickedColor = this.klCanvas.getColorAt(coord.x, coord.y);\n                        p.onPick(pickedColor, event.type === 'pointerup');\n                        this.svgOverlay.updateColorPreview({\n                            x: event.relX,\n                            y: event.relY,\n                            color: pickedColor,\n                            isVisible: event.type !== 'pointerup'\n                        });\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n                    if (comboStr !== 'alt') {\n                        this.resetInputProcessor();\n                    } else {\n                        this.updateCursor(TMode.Pick);\n                    }\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n                    this.resetInputProcessor();\n                }\n            },\n            rotate: {\n                onPointer: (event) => {\n                    this.updateCursor(event.button === 'left' ? TMode.Rotating : TMode.Rotate);\n\n                    if (event.type === 'pointerdown' && event.button === 'left') {\n                        this.oldTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n                    } else if (event.button === 'left' && !event.isCoalesced && this.oldTransformObj) {\n\n\n                        const offsetX = event.pageX - event.relX;\n                        const offsetY = event.pageY - event.relY;\n                        //rotation done around center\n                        const centerObj = {\n                            x: this.renderWidth / 2,\n                            y: this.renderHeight / 2\n                        };\n\n                        const startAngleRad = BB.Vec2.angle(centerObj, {x: event.downPageX - offsetX, y: event.downPageY - offsetY});\n                        const angleRad = BB.Vec2.angle(centerObj, {x: event.pageX - offsetX, y: event.pageY - offsetY});\n                        let dAngleRad = angleRad - startAngleRad;\n\n                        //apply angle\n                        this.targetTransformObj = JSON.parse(JSON.stringify(this.oldTransformObj));\n                        this.targetTransformObj.angle += dAngleRad;\n\n                        if (this.keyListener.isPressed('shift')) {\n                            this.targetTransformObj.angle = Math.round(this.targetTransformObj.angle / Math.PI * 8) * Math.PI / 8; //snap the angle to 45/2 degs\n                            dAngleRad = this.targetTransformObj.angle - this.oldTransformObj.angle;\n                        }\n\n                        this.targetTransformObj.angle = this.minimizeAngleRad(this.targetTransformObj.angle);\n\n                        //rotate transform.xy\n                        let matrix = BB.Matrix.getIdentity();\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(centerObj.x, centerObj.y));\n                        //matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(effectiveFactor));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(dAngleRad));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-centerObj.x, -centerObj.y));\n                        //matrix = multiplyMatrices(matrix, createTranslationMatrix(val.x - val.startX, val.y - val.startY));\n\n                        let origin = [this.targetTransformObj.x, this.targetTransformObj.y, 0, 1];\n                        origin = BB.Matrix.multiplyMatrixAndPoint(matrix, origin);\n                        this.targetTransformObj.x = origin[0];\n                        this.targetTransformObj.y = origin[1];\n\n                        this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n\n                        this.transformIsDirty = true;\n                        this.lastRenderedState = -1;\n                        this.reqFrame();\n\n                        this.onViewChange({\n                            changed: ['angle'],\n                            scale: this.targetTransformObj.scale,\n                            angle: this.targetTransformObj.angle\n                        });\n\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n                    if (['r', 'r+shift', 'shift+r', 'r+left', 'r+right', 'r+left+right', 'r+right+left', 'r+up'].includes(comboStr)) {\n                        this.updateCursor(TMode.Rotate);\n                    } else {\n                        this.resetInputProcessor();\n                    }\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n                    const comboStr = this.keyListener.getComboStr();\n                    if (['r', 'r+shift', 'shift+r', 'r+left', 'r+right', 'r+left+right', 'r+right+left', 'r+up'].includes(comboStr)) {\n                        this.updateCursor(TMode.Rotate);\n                    } else {\n                        this.resetInputProcessor();\n                    }\n                }\n            }\n        };\n        this.currentInputProcessor = null;\n\n\n        this.angleIsExtraSticky = false;\n        this.pinchZoomer = new BB.EventChain.PinchZoomer({\n            onPinch: (event) => {\n\n                if (event.type === 'move') {\n\n                    if (!this.oldTransformObj) {\n                        this.oldTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n                        this.angleIsExtraSticky = this.targetTransformObj.angle % (Math.PI / 2) === 0;\n                    }\n\n                    this.targetTransformObj = JSON.parse(JSON.stringify(this.oldTransformObj));\n\n                    event.scale = Math.max(MIN_SCALE, Math.min(MAX_SCALE, this.targetTransformObj.scale * event.scale)) / this.targetTransformObj.scale;\n\n                    this.targetTransformObj.scale *= event.scale;\n                    this.targetTransformObj.angle += event.angleRad;\n                    this.targetTransformObj.angle = this.minimizeAngleRad(\n                        this.snapAngleRad(\n                            this.targetTransformObj.angle,\n                            90,\n                            this.angleIsExtraSticky ? 12 : 4\n                        )\n                    );\n                    if (this.targetTransformObj.angle % (Math.PI / 2) !== 0) {\n                        this.angleIsExtraSticky = false;\n                    }\n                    //targetTransformObj.angle = minimizeAngleRad(snapAngleRad(targetTransformObj.angle, 90, 7));\n                    event.angleRad = this.targetTransformObj.angle - this.oldTransformObj.angle;\n\n                    //calc translation\n                    {\n                        let matrix = BB.Matrix.getIdentity();\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(event.relX, event.relY));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(event.scale));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(event.angleRad));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-event.relX, -event.relY));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(event.relX - event.downRelX, event.relY - event.downRelY));\n\n\n                        let origin = [this.targetTransformObj.x, this.targetTransformObj.y, 0, 1];\n                        origin = BB.Matrix.multiplyMatrixAndPoint(matrix, origin);\n\n                        this.targetTransformObj.x = origin[0];\n                        this.targetTransformObj.y = origin[1];\n\n                    }\n\n                    this.highResTransformObj = BB.copyObj(this.targetTransformObj);\n\n                    //if (event.scale !== 1) {\n                    this.onViewChange({\n                        changed: ['scale', 'angle'],\n                        scale: this.targetTransformObj.scale,\n                        angle: this.targetTransformObj.angle\n                    });\n                    //}\n                    this.reqFrame();\n                    this.transformIsDirty = true;\n                    this.lastRenderedState = -1;\n\n\n                } else if (event.type === 'end') {\n                    this.oldTransformObj = null;\n                }\n\n\n            }\n        });\n\n        const onDoubleTap = (event) => {\n            if (_this.fitView()) {\n                this.lastRenderedState = -1;\n                this.reqFrame();\n            } else {\n                // zoom 2 steps further\n\n                let didZoom = this.internalZoomByStep(\n                    2,\n                    event.relX,\n                    event.relY,\n                );\n                if (didZoom) {\n                    this.onViewChange({\n                        changed: ['scale'],\n                        angle: this.targetTransformObj.angle,\n                        scale: this.targetTransformObj.scale\n                    });\n                }\n\n                //updateCursor(TMode.Draw, true);\n                this.lastRenderedState = -1;\n            }\n        }\n\n        this.mainDoubleTapper = new BB.EventChain.DoubleTapper({ onDoubleTap });\n        this.middleDoubleTapper = new BB.EventChain.DoubleTapper({ onDoubleTap });\n        this.middleDoubleTapper.setAllowedButtonArr(['middle']);\n\n\n        this.twoFingerTap = new BB.EventChain.NFingerTapper({\n            fingers: 2,\n            onTap: () => {\n                p.onUndo();\n            }\n        });\n        this.threeFingerTap = new BB.EventChain.NFingerTapper({\n            fingers: 3,\n            onTap: () => {\n                p.onRedo();\n            }\n        });\n\n\n        this.pointerEventChain = new BB.EventChain.EventChain({\n            chainArr: [\n                this.twoFingerTap,\n                this.threeFingerTap,\n                this.mainDoubleTapper,\n                this.middleDoubleTapper,\n                this.pinchZoomer,\n                new BB.EventChain.OnePointerLimiter(),\n                new BB.EventChain.CoalescedExploder()\n            ]\n        });\n        this.pointerEventChain.setChainOut((event) => {\n\n            this.cursorPos.x = event.relX;\n            this.cursorPos.y = event.relY;\n            if (event.type === 'pointerup' && event.pointerType === 'touch') {\n                this.pointer = null;\n                this.lastRenderedState = -1;\n                this.reqFrame();\n            } else {\n                if (!this.pointer) {\n                    this.pointer = { x: 0, y: 0 };\n                }\n                this.pointer.x = event.relX;\n                this.pointer.y = event.relY;\n            }\n\n            if (this.currentInputProcessor) {\n                this.currentInputProcessor.onPointer(event);\n\n            } else {\n\n                let comboStr = this.keyListener.getComboStr();\n\n                if (this.globalMode === TMode.Draw) {\n\n                    if (['', 'shift', 'ctrl'].includes(comboStr) && event.type === 'pointerdown' && event.button === 'left') {\n                        this.currentInputProcessor = this.inputProcessorObj.draw;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Draw);\n                        this.reqFrame();\n                    }\n\n                } else if (this.globalMode === TMode.Hand) {\n\n                    if (event.type === 'pointerdown' && ['left', 'middle'].includes(event.button)) {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Hand);\n                    }\n\n                } else if (this.globalMode === TMode.Pick) {\n\n                    if (event.type === 'pointerdown' && ['left', 'right'].includes(event.button)) {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Pick);\n                    }\n\n                } else if (this.globalMode === TMode.Fill) {\n\n                    if (event.type === 'pointerdown' && event.button === 'left') {\n                        this.currentInputProcessor = this.inputProcessorObj.fill;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Fill);\n                        this.reqFrame();\n                    }\n\n                } else if (this.globalMode === TMode.Gradient) {\n\n                    if (['', 'shift', 'ctrl'].includes(comboStr) && event.type === 'pointerdown' && event.button === 'left') {\n                        this.currentInputProcessor = this.inputProcessorObj.gradient;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Gradient);\n                        this.reqFrame();\n                    }\n\n                } else if (this.globalMode === TMode.Text) {\n\n                    if (event.type === 'pointerdown' && event.button === 'left') {\n                        this.currentInputProcessor = this.inputProcessorObj.text;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Text);\n                        this.reqFrame();\n                    }\n\n                } else if (this.globalMode === TMode.Shape) {\n\n                    if (['', 'shift', 'ctrl'].includes(comboStr) && event.type === 'pointerdown' && event.button === 'left') {\n                        this.currentInputProcessor = this.inputProcessorObj.shape;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Shape);\n                        this.reqFrame();\n                    }\n\n                }\n\n\n            }\n\n        });\n\n        //prevent ctrl scroll -> zooming page\n        BB.addEventListener(this.rootEl, 'wheel', (event) => {\n            event.preventDefault();\n        });\n\n\n        setTimeout(() => {\n            this.pointerListener = new BB.PointerListener({\n                target: this.rootEl,\n                fixScribble: true,\n                onPointer: (e) => {\n                    if (e.type === 'pointerdown' && e.button === 'middle') {\n                        try {\n                            e.eventPreventDefault();\n                        } catch (e) {}\n                    }\n                    // prevent manual slider input keeping focus on iPad\n                    if (e.type === 'pointerdown') {\n                        BB.unfocusAnyInput();\n                    }\n                    /*if (e.type === 'pointermove') {\n                        BB.throwOut(JSON.stringify(e));\n                    }*/\n\n                    this.pointerEventChain.chainIn(e)\n                },\n                onWheel: (wheelEvent) => {\n\n                    if (this.isDrawing) {\n                        return;\n                    }\n\n                    this.reqFrame();\n                    let didZoom = this.internalZoomByStep(\n                        -wheelEvent.deltaY / (this.keyListener.isPressed('shift') ? 8 : 2),\n                        wheelEvent.relX,\n                        wheelEvent.relY\n                    );\n                    if (didZoom) {\n                        this.onViewChange({\n                            changed: ['scale'],\n                            angle: this.targetTransformObj.angle,\n                            scale: this.targetTransformObj.scale\n                        });\n                    }\n\n                    //updateCursor(TMode.Draw, true);\n                    this.lastRenderedState = -1;\n\n\n                },\n                onEnterLeave: (isOver) => {\n                    if (!isOver) {\n                        if (!this.isDrawing) {\n                            this.pointer = null;\n                            this.lastRenderedState = -1;\n                        }\n                    }\n                },\n                maxPointers: 4\n            });\n        }, 1);\n\n        this.brushRadius = 1;\n\n        this.animationFrameRequested = false;\n\n\n\n\n        //setup rendering\n        this.lastRenderedState = -2;\n        this.lastRenderTime = performance.now();\n\n        window.requestAnimationFrame(() => this.updateLoop());\n\n        this.resetView();\n    }\n\n\n    getElement (): HTMLElement {\n        return this.rootEl;\n    }\n\n    setCanvas (klC: KlCanvas): void {\n        this.klCanvas = klC;\n        this.lastDrawEvent = null;\n        this.resetView();\n\n        this.updateChangeListener();\n\n        this.lastRenderedState = -1;\n        this.reqFrame();\n    }\n\n    /**\n     * set size of workspace area in pixels\n     * @param width\n     * @param height\n     */\n    setSize (width: number, height: number): void {\n        const oldWidth = this.renderWidth;\n        const oldHeight = this.renderHeight;\n\n        if (width === oldWidth && height === oldHeight) {\n            return;\n        }\n\n        this.doResizeCanvas = true;\n        this.renderWidth = width;\n        this.renderHeight = height;\n\n        this.svgOverlay.setSize(width, height);\n\n        this.targetTransformObj.x += (width - oldWidth) / 2;\n        this.targetTransformObj.y += (height - oldHeight) / 2;\n\n        this.highResTransformObj.x = this.targetTransformObj.x;\n        this.highResTransformObj.y = this.targetTransformObj.y;\n\n        this.bgVisible = this.testBgVisible();\n\n        this.lastRenderedState = -1;\n        this.reqFrame();\n    }\n\n    setMode (modeStr: TModeStr): void {\n        //only sets the base mode\n        if (modeStr === 'draw') {\n            this.globalMode = TMode.Draw;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n        if (modeStr === 'fill') {\n            this.globalMode = TMode.Fill;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n        if (modeStr === 'gradient') {\n            this.globalMode = TMode.Gradient;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n        if (modeStr === 'text') {\n            this.globalMode = TMode.Text;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n        if (modeStr === 'shape') {\n            this.globalMode = TMode.Shape;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n        if (modeStr === 'hand') {\n            this.globalMode = TMode.Hand;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['mouse', 'pen', 'touch']);\n        }\n        if (modeStr === 'pick') {\n            this.globalMode = TMode.Pick;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n    }\n\n    getMode(): TModeStr {\n        if (this.globalMode === TMode.Draw) {\n            return 'draw';\n        }\n        if (this.globalMode === TMode.Fill) {\n            return 'fill';\n        }\n        if (this.globalMode === TMode.Gradient) {\n            return 'gradient';\n        }\n        if (this.globalMode === TMode.Text) {\n            return 'text';\n        }\n        if (this.globalMode === TMode.Shape) {\n            return 'shape';\n        }\n        if (this.globalMode === TMode.Hand) {\n            return 'hand';\n        }\n        if (this.globalMode === TMode.Pick) {\n            return 'pick';\n        }\n    }\n\n    setEnabled (b: boolean): void {\n        // todo\n    }\n\n    setCursorSize (diameter: number): void {\n        this.brushRadius = diameter / 2;\n\n        this.svgOverlay.updateCursor({radius: this.brushRadius * this.highResTransformObj.scale});\n\n        if (this.pointer === null) {\n            clearTimeout(this.hideBrushCursorTimeout);\n\n            this.svgOverlay.updateCursor({\n                x: this.renderWidth / 2,\n                y: this.renderHeight / 2,\n                isVisible: true\n            });\n\n            // @ts-ignore\n            this.hideBrushCursorTimeout = setTimeout(() => {\n                if (this.pointer !== null) {\n                    return;\n                }\n                this.svgOverlay.updateCursor({isVisible: false});\n            }, 500);\n        }\n    }\n\n    zoomByStep (stepNum: number): void {\n        if (!this.internalZoomByStep(stepNum, this.renderWidth / 2, this.renderHeight / 2)) {\n            return;\n        }\n\n        this.lastRenderedState = -1;\n        this.reqFrame();\n\n        this.onViewChange({\n            changed: ['scale'],\n            angle: this.targetTransformObj.angle,\n            scale: this.targetTransformObj.scale\n        });\n    }\n\n    resetView (doAnimate?: boolean): void {\n        this.targetTransformObj.scale = 1;\n        this.targetTransformObj.angle = 0;\n\n        this.targetTransformObj.x = (this.renderWidth - this.klCanvas.getWidth()) / 2;\n        this.targetTransformObj.y = (this.renderHeight - this.klCanvas.getHeight()) / 2;\n\n        if (!doAnimate) {\n            this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n        } else {\n            this.doAnimateTranslate = true;\n            this.transformIsDirty = true;\n        }\n\n        this.bgVisible = this.testBgVisible();\n        this.reqFrame();\n\n        if (doAnimate) {\n            this.onViewChange({\n                changed: ['scale', 'angle'],\n                scale: this.targetTransformObj.scale,\n                angle: this.targetTransformObj.angle\n            });\n        }\n    }\n\n    /**\n     * fit into view. center. snap angle. padding\n     * returns true if transform changes\n     */\n    fitView (): boolean {\n        // determine new transform\n        const newAngle = this.snapAngleRad(this.targetTransformObj.angle, 90, 90);\n\n        //calc width and height of bounds\n        const canvasPointsArr = [\n            [0, 0], // top left\n            [this.klCanvas.getWidth(), 0], // top right\n            [this.klCanvas.getWidth(), this.klCanvas.getHeight()], // bottom right\n            [0, this.klCanvas.getHeight()], // bottom left\n            [this.klCanvas.getWidth() / 2, this.klCanvas.getHeight() / 2], // center\n        ];\n\n        //setup transformation matrix\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(newAngle));\n\n        //rotate points\n        for (let i = 0; i < canvasPointsArr.length; i++) {\n            let coords = [canvasPointsArr[i][0], canvasPointsArr[i][1], 0, 1];\n            coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n            canvasPointsArr[i][0] = coords[0];\n            canvasPointsArr[i][1] = coords[1];\n        }\n\n        const boundsObj = {\n            x0: null,\n            y0: null,\n            x1: null,\n            y1: null\n        };\n        for (let i = 0; i < canvasPointsArr.length; i++) {\n            if (boundsObj.x0 === null || canvasPointsArr[i][0] < boundsObj.x0) {\n                boundsObj.x0 = canvasPointsArr[i][0];\n            }\n            if (boundsObj.y0 === null || canvasPointsArr[i][1] < boundsObj.y0) {\n                boundsObj.y0 = canvasPointsArr[i][1];\n            }\n            if (boundsObj.x1 === null || canvasPointsArr[i][0] > boundsObj.x1) {\n                boundsObj.x1 = canvasPointsArr[i][0];\n            }\n            if (boundsObj.y1 === null || canvasPointsArr[i][1] > boundsObj.y1) {\n                boundsObj.y1 = canvasPointsArr[i][1];\n            }\n        }\n        const boundsWidth = boundsObj.x1 - boundsObj.x0;\n        const boundsHeight = boundsObj.y1 - boundsObj.y0;\n\n        //fit bounds\n        const padding = 0;\n        const { width: fitWidth } = BB.fitInto(\n            boundsWidth,\n            boundsHeight, \n            this.renderWidth - padding, \n            this.renderHeight - padding, \n            1\n        );\n\n        //determine scale\n        const factor = fitWidth / boundsWidth;\n\n        const newTargetTransformObj = {\n            angle: newAngle,\n            x: (this.renderWidth / 2) - (canvasPointsArr[4][0] - canvasPointsArr[0][0]) * factor,\n            y: (this.renderHeight / 2) - (canvasPointsArr[4][1] - canvasPointsArr[0][1]) * factor,\n            scale: factor,\n        };\n\n        if (\n            newTargetTransformObj.angle === this.targetTransformObj.angle &&\n            Math.abs(newTargetTransformObj.x - this.targetTransformObj.x) < 0.0000000001 &&\n            Math.abs(newTargetTransformObj.y - this.targetTransformObj.y) < 0.0000000001 &&\n            newTargetTransformObj.scale === this.targetTransformObj.scale\n        ) {\n            return false;\n        }\n        this.targetTransformObj = newTargetTransformObj;\n\n        this.doAnimateTranslate = true;\n        this.transformIsDirty = true;\n        this.reqFrame();\n\n        this.onViewChange({\n            changed: ['scale', 'angle'],\n            scale: this.targetTransformObj.scale,\n            angle: this.targetTransformObj.angle\n        });\n        return true;\n    }\n\n    setAngle (angleDeg: number, isRelative?: boolean): void {\n        //rotation done around center\n        const centerObj = {\n            x: this.renderWidth / 2,\n            y: this.renderHeight / 2\n        };\n\n        const oldAngleRad = this.targetTransformObj.angle;\n        const angleRad = angleDeg / 180 * Math.PI;\n\n        if (isRelative) {\n            this.targetTransformObj.angle += angleRad;\n        } else {\n            this.targetTransformObj.angle = angleRad;\n        }\n\n        this.targetTransformObj.angle = this.minimizeAngleRad(\n            this.snapAngleRad(\n                this.targetTransformObj.angle,\n                90,\n                4\n            )\n        );\n\n        //rotate transform.xy\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(centerObj.x, centerObj.y));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(this.targetTransformObj.angle - oldAngleRad));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-centerObj.x, -centerObj.y));\n\n        let origin = [this.targetTransformObj.x, this.targetTransformObj.y, 0, 1];\n        origin = BB.Matrix.multiplyMatrixAndPoint(matrix, origin);\n        this.targetTransformObj.x = origin[0];\n        this.targetTransformObj.y = origin[1];\n\n        this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n        this.transformIsDirty = true;\n        this.reqFrame(true);\n    }\n\n    /**\n     * translate canvas by viewport pixels\n     * @param tx\n     * @param ty\n     */\n    translateView (tx: number, ty: number): void {\n        const scale = 40;\n\n        this.targetTransformObj.x += tx * scale;\n        this.targetTransformObj.y += ty * scale;\n\n        this.transformIsDirty = true;\n        this.doAnimateTranslate = true;\n        this.reqFrame(true);\n    }\n\n    getIsDrawing (): boolean {\n        return this.isDrawing;\n    }\n\n    getScale (): number {\n        return this.targetTransformObj.scale;\n    }\n\n    getAngleDeg (): number {\n        return this.targetTransformObj.angle * 180 / Math.PI;\n    }\n\n    getMaxScale (): number {\n        return MAX_SCALE;\n    }\n\n    getMinScale (): number {\n        return MIN_SCALE;\n    }\n\n    requestFrame (): void {\n        this.lastRenderedState = -1;\n        this.reqFrame();\n    }\n\n    setLastDrawEvent (x: number | null, y?: number, pressure?: number): void {\n        if (x === null) {\n            this.lastDrawEvent = null;\n            return;\n        }\n\n        if (!this.lastDrawEvent) {\n            this.lastDrawEvent = {x: 0, y: 0, pressure: 0};\n        }\n        this.lastDrawEvent.x = x;\n        this.lastDrawEvent.y = y;\n        this.lastDrawEvent.pressure = pressure;\n    }\n\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"cursor-picker.9d4082ab.png\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"cursor-zoom-ew.0898df17.png\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"cursor-fill.efbe9462.png\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"cursor-text.1788d825.png\" + \"?\" + Date.now();","import {BB} from '../../bb/bb';\nimport {IKlBasicLayer} from '../kl.types';\n\n/**\n * preview of image with layers. can do mix modes and opacity.\n * creates a canvas.\n *\n * p = {\n *     width: 123,\n *     height: 123,\n *     layers: [// can be changed after the fact\n *         {\n *             image: Canvas,\n *             opacity: 1,\n *             mixModeStr: 'source-over'\n *         }\n *     ]\n * }\n *\n * @param p\n * @constructor\n */\nexport function KlCanvasPreview(\n    p: {\n        width: number;\n        height: number;\n        layers: IKlBasicLayer[];\n    }\n) {\n    const scale = p.width / p.layers[0].image.width;\n    const width = scale > 1 ? p.layers[0].image.width : p.width;\n    const height = scale > 1 ? p.layers[0].image.height : p.height;\n\n    let canvas = BB.canvas(width, height);\n    canvas.style.backgroundImage = 'url(' + BB.createCheckerDataUrl(8) + ')';\n    let ctx = canvas.getContext('2d');\n\n    BB.css(canvas, {\n        width: '100%',\n        height: '100%',\n        imageRendering: scale > 1 ? 'pixelated' : null,\n    });\n\n    function render() {\n        ctx.save();\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        for (let i = 0; i < p.layers.length; i++) {\n            ctx.globalAlpha = p.layers[i].opacity;\n            ctx.globalCompositeOperation = p.layers[i].mixModeStr;\n            if (canvas.width > p.layers[i].image.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(p.layers[i].image, 0, 0, canvas.width, canvas.height);\n        }\n        ctx.restore();\n    }\n\n    setTimeout(render, 0);\n\n    // --- interface ---\n    this.getElement = function() {\n        return canvas;\n    };\n\n    this.render = function() {\n        render();\n    };\n}","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport rotateImg from 'url:~/src/app/img/ui/cursor-rotate.png';\nimport {KeyListener} from '../../../bb/input/key-listener';\nimport {IVector2D} from '../../../bb/bb.types';\n\nexport interface ITransform {\n    x: number; // center of transform region. image space\n    y: number;\n    width: number; // size of transform region. image space\n    height: number;\n    angleDeg: number; // angle of transform region. degrees\n}\n\n\n/**\n * snap entire transform to pixel grid. changes transform\n *\n * for x y:\n * If a dimension has an even size, it be an integer.\n * If it's uneven, it's sits exactly half way between two pixels.\n *\n * @param transform\n */\nfunction snapToPixel(transform: ITransform): void {\n    if (Math.abs(transform.angleDeg) % 90 !== 0) {\n        return;\n    }\n\n    transform.width = Math.round(transform.width);\n    transform.height = Math.round(transform.height);\n    // 0 is original orientation.\n    // At 90 and 270 width and height become swapped due to different orientation.\n    const whSwapped = Math.abs(transform.angleDeg - 90) % 180 === 0;\n    transform.x = ((whSwapped ? transform.height : transform.width) % 2 === 0) ? Math.round(transform.x) : Math.round(transform.x - 0.5) + 0.5;\n    transform.y = ((whSwapped ? transform.width : transform.height) % 2 === 0)  ? Math.round(transform.y) : Math.round(transform.y - 0.5) + 0.5;\n}\n\nfunction copyTransform(transform: ITransform): ITransform {\n    return {\n        x: transform.x,\n        y: transform.y,\n        width: transform.width,\n        height: transform.height,\n        angleDeg: transform.angleDeg,\n    };\n}\n\n/**\n * image space to transform space\n * - origin of transform space is at center of transform bounds.\n * - same scale as image space. -> one unit is x: 1/width, y: 1/height\n * - up is where transform points up\n * - x goes right\n * - y goes down\n * @param x\n * @param y\n * @param transform\n */\nfunction toTransformSpace (x: number, y: number, transform: ITransform): IVector2D {\n    let px, py;\n    px = x - transform.x;\n    py = y - transform.y;\n\n    const rot = BB.rotateAround({x: 0, y: 0},\n        {x: px, y: py},\n        -transform.angleDeg);\n    px = rot.x;\n    py = rot.y;\n\n    return {\n        x: px,\n        y: py,\n    };\n}\n\n/**\n * transform space to image space\n * @param x\n * @param y\n * @param transform\n */\nfunction toImageSpace(x: number, y: number, transform: ITransform): IVector2D {\n    const rot = BB.rotateAround({x: 0, y: 0},\n        {x: x, y: y},\n        transform.angleDeg);\n    return {\n        x: rot.x + transform.x,\n        y: rot.y + transform.y,\n    };\n}\n\n\n\n/**\n * Free Transform UI\n * rotate, scale, translate\n *\n * - if rotation is multiple of 90 it will snap to pixels, to be more useful for pixel art\n * - when rotation goes from non-multiple of 90 to a multiple, it will snap position and width height to pixels\n * - transform.x, transform.y can sit between pixels (by 0.5) if width or height is odd number.\n *      - this is what complicates things\n * - if transform region small, corner grips move out of the way\n *\n * iX iY, iP.x, iP.y - i indicates image space\n * tX tY, tP.x, tP.y - t indicates transform space\n *\n * Not sure if can be used for navigable canvas. (especially if canvas rotates view)\n * Probably can't be extended for distort. Needs a different approach.\n *\n * --- DOM structure ---\n * rootEl {\n * \ttransEl [\n * \t\tboundsEl\n * \t\tedges[]\n * \t\tcorners[] - round grips in the corner of transform region\n * \t\tangleGrip\n * \t]\n * }\n *\n */\nexport class FreeTransform {\n\n    // --- private ---\n    private readonly transform: ITransform; // coordinates and dimensions of transformation\n    private isConstrained: boolean;\n    private ratio: number; // aspect ratio of transform\n    private readonly scale: number;\n    private readonly scaled = { // scaled coordinates and dimensions for screenspace\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        corners: [{x: 0, y: 0}], // in transform space\n    };\n    private readonly minSnapDist = 7; // minimal snapping distance in px screenspace\n    private snappingEnabled: boolean;\n    private readonly snapX: number[];\n    private readonly snapY: number[];\n    private readonly callback: (transform: ITransform) => void;\n\n\n    private readonly cornerCursors = ['nw', 'n', 'ne', 'e', 'se', 's', 'sw', 'w'];\n    private readonly gripSize = 14;\n    private readonly edgeSize = 10;\n\n    private readonly rootEl: HTMLElement; // sits at origin of image\n    private readonly transEl: HTMLElement; // at middle of transform. rotates\n    private readonly boundsEl: HTMLElement; // draggable bounds rectangle with outline\n    private readonly corners: {\n        i: number; // index in corners array\n        el: HTMLElement; // draggable corner circle in DOM\n        x: number; // unscaled position (transform space)\n        y: number;\n        virtualPos: IVector2D; // unscaled temporary position (image space)\n        updateDOM: () => void; // update styling in DOM\n        pointerListener: any;\n    }[] = [];\n    private keyListener: KeyListener;\n    private boundsPointerListener: any; // BB.PointerListener\n    private anglePointerListener: any; // BB.PointerListener\n    private readonly edges: { // derive position from corners\n        el: HTMLElement;\n        updateDOM: () => void;\n        pointerListener: any;\n    }[] = [];\n    private readonly angleGrip: {\n        el: HTMLElement,\n        x: number; // transform space\n        y: number;\n        snap: boolean,\n        updateDOM: () => void,\n    };\n\n    private updateScaled(): void {\n        this.scaled.x = this.transform.x * this.scale;\n        this.scaled.y = this.transform.y * this.scale;\n        this.scaled.width = this.transform.width * this.scale;\n        this.scaled.height = this.transform.height * this.scale;\n        this.scaled.corners = this.corners.map((item) => {\n            return {x: item.x * this.scale, y: item.y * this.scale};\n        });\n    }\n\n    /**\n     * Returns snapped point, if ix, iy snaps. If no snapping, returns point unchanged.\n     * both in image space\n     *\n     * @param iX - image space\n     * @param iY - image space\n     * @private\n     */\n    private snapCorner (iX: number, iY: number): IVector2D {\n        if (!this.snappingEnabled) {\n            return {x: iX, y: iY};\n        }\n        let dist: number;\n        const snap: {\n            x: number;\n            y: number;\n            dist: {\n                x: number;\n                y: number;\n            }\n        } = {\n            x: null,\n            y: null,\n            dist: {\n                x: null,\n                y: null,\n            }\n        };\n        for (let e = 0; e < this.snapX.length; e++) {\n            dist = Math.abs(iX - this.snapX[e]);\n            if (dist < this.minSnapDist / this.scale) {\n                if (snap.x === null || dist < snap.dist.x) {\n                    snap.x = this.snapX[e];\n                    snap.dist.x = dist;\n                }\n            }\n        }\n        for (let e = 0; e < this.snapY.length; e++) {\n            dist = Math.abs(iY - this.snapY[e]);\n            if (dist < this.minSnapDist / this.scale) {\n                if (snap.y === null || dist < snap.dist.y) {\n                    snap.y = this.snapY[e];\n                    snap.dist.y = dist;\n                }\n            }\n        }\n\n        if (snap.x === null && snap.y === null) {\n            return {\n                x: iX,\n                y: iY,\n            };\n        }\n        return {\n            x: snap.x ?? iX,\n            y: snap.y ?? iY,\n        };\n    }\n\n    /**\n     * If constrained return nearest corner pos that fits aspect ratio\n     *\n     * @param cornerIndex\n     * @param iX\n     * @param iY\n     * @private\n     */\n    private constrainCorner (cornerIndex: number, iX: number, iY: number): IVector2D {\n        if (!this.isConstrained) {\n            return {\n                x: iX,\n                y: iY,\n            };\n        }\n        const flip = this.transform.width * this.transform.height < 0 ? -1 : 1;\n        return BB.projectPointOnLine(\n            {x: this.transform.x, y: this.transform.y},\n            toImageSpace(this.ratio, flip * ([0, 2].includes(cornerIndex) ? 1 : -1), this.transform),\n            {x: iX, y: iY}\n        );\n    }\n\n    /**\n     * Update corners according to width height.\n     * Not their DOM.\n     */\n    private updateCornerPositions (): void {\n        this.corners[0].x = (-this.transform.width / 2); // top left\n        this.corners[0].y = (-this.transform.height / 2);\n\n        this.corners[1].x = (this.transform.width / 2); // top right\n        this.corners[1].y = (-this.transform.height / 2);\n\n        this.corners[2].x = (this.transform.width / 2); // bottom right\n        this.corners[2].y = (this.transform.height / 2);\n\n        this.corners[3].x = (-this.transform.width / 2); // bottom left\n        this.corners[3].y = (this.transform.height / 2);\n    }\n\n    /**\n     * If constrained and dragging an edge, restore aspect ratio\n     * Updates corner positions.\n     *\n     * @param widthChanged\n     * @param heightChanged\n     * @private\n     */\n    private restoreRatio (widthChanged: boolean, heightChanged: boolean): void {\n        if (!this.isConstrained) {\n            return;\n        }\n        const angle90 = Math.abs(this.transform.angleDeg) % 90 === 0;\n        const whSwapped = Math.abs(this.transform.angleDeg - 90) % 180 === 0;\n        if (heightChanged && !widthChanged) {\n            const newHeight = Math.abs(this.corners[3].y - this.corners[0].y);\n            let newWidth = this.ratio * newHeight;\n            if (angle90) {\n                newWidth = (whSwapped ? this.transform.y % 1 : this.transform.x % 1) === 0 ?\n                    BB.roundEven(newWidth) : BB.roundUneven(newWidth);\n            }\n            if (this.corners[1].x - this.corners[0].x < 0) {\n                newWidth *= -1;\n            }\n            this.corners[0].x = -newWidth / 2;\n            this.corners[3].x = -newWidth / 2;\n            this.corners[1].x = newWidth / 2;\n            this.corners[2].x = newWidth / 2;\n        }\n        if (!heightChanged && widthChanged) {\n            const newWidth = Math.abs(this.corners[0].x - this.corners[1].x);\n            let newHeight = newWidth / this.ratio;\n            if (angle90) {\n                newHeight = (whSwapped ? this.transform.x % 1 : this.transform.y % 1) === 0  ?\n                    BB.roundEven(newHeight) : BB.roundUneven(newHeight);\n            }\n            if (this.corners[3].y - this.corners[0].y < 0) {\n                newHeight *= -1;\n            }\n            this.corners[0].y = -newHeight / 2;\n            this.corners[1].y = -newHeight / 2;\n            this.corners[2].y = newHeight / 2;\n            this.corners[3].y = newHeight / 2;\n        }\n    }\n\n\n    /**\n     * update transform based on corners\n     * @private\n     */\n    private updateTransformViaCorners (): void {\n\n        // calc transform center in image space\n        const rot = BB.rotateAround(\n            {x: 0, y: 0},\n            {\n                x: (this.corners[0].x + this.corners[1].x) / 2,\n                y: (this.corners[0].y + this.corners[3].y) / 2,\n            },\n            this.transform.angleDeg\n        );\n        this.transform.x = rot.x + this.transform.x;\n        this.transform.y = rot.y + this.transform.y;\n\n        // update size\n        this.transform.width = this.corners[1].x - this.corners[0].x;\n        this.transform.height = this.corners[3].y - this.corners[0].y;\n\n        // new center means corners changed their position\n        this.updateCornerPositions();\n\n        this.updateDOM();\n    }\n\n    /**\n     * updates DOM according to transform\n     * @param skipCallback\n     */\n    private updateDOM (skipCallback?: boolean) {\n        this.updateScaled();\n\n        BB.css(this.transEl, {\n            left: this.scaled.x + \"px\",\n            top: this.scaled.y + \"px\",\n            transformOrigin: \"0 0\",\n            transform: \"rotate(\" + this.transform.angleDeg + \"deg)\",\n        });\n\n        BB.css(this.boundsEl, {\n            width: Math.abs(this.scaled.width) + \"px\",\n            height: Math.abs(this.scaled.height) + \"px\",\n            left: Math.min(this.scaled.corners[0].x, this.scaled.corners[1].x) + \"px\",\n            top: Math.min(this.scaled.corners[0].y, this.scaled.corners[3].y) + \"px\"\n        });\n\n        this.corners[0].updateDOM();\n        this.corners[1].updateDOM();\n        this.corners[2].updateDOM();\n        this.corners[3].updateDOM();\n\n        this.edges[0].updateDOM();\n        this.edges[1].updateDOM();\n        this.edges[2].updateDOM();\n        this.edges[3].updateDOM();\n\n\n        this.angleGrip.x = 0;\n        this.angleGrip.y = (-Math.abs(this.transform.height * this.scale) / 2) - 20;\n        this.angleGrip.updateDOM();\n        if (!skipCallback) {\n            if (this.callback) { // why should updateDOM trigger the callback?\n                this.callback(copyTransform(this.transform));\n            }\n        }\n    }\n\n\n\n    // --- public ---\n    constructor (\n        params: {\n            x: number; // center of transform region. image space\n            y: number;\n            width: number; // size of transform region. image space\n            height: number;\n            angleDeg: number; // angle of transform region. degrees\n\n            isConstrained: boolean; // proportions constrained\n            snapX: number[]; // where snapping along X axis. image space\n            snapY: number[]; // where snapping along X axis. image space\n            scale: number; // ratio of screen-space / image-space\n            callback: (transform: ITransform) => void;\n        }\n    ) {\n        this.transform = { // coordinates and dimensions of transformation\n            x: params.x,\n            y: params.y,\n            width: params.width,\n            height: params.height,\n            angleDeg: params.angleDeg,\n        };\n\n        this.isConstrained = !!params.isConstrained;\n\n        this.snapX = params.snapX;\n        this.snapY = params.snapY;\n        this.callback = params.callback;\n        this.scale = params.scale;\n        this.snappingEnabled = true;\n        this.ratio = this.transform.width / this.transform.height;\n\n        this.rootEl = BB.el({\n            className: 'kl-free-transform',\n            css: {\n                userSelect: 'none',\n            }\n        });\n        this.transEl = BB.el({\n            parent: this.rootEl,\n            css: {\n                position: 'absolute',\n            }\n        });\n\n        this.boundsEl = BB.el({\n            css: {\n                position: 'absolute',\n                cursor: 'move',\n                boxShadow: 'rgba(255, 255, 255, 0.5) 0 0 0 1px inset, rgba(0, 0, 0, 0.5) 0 0 0 1px',\n            }\n        });\n\n        const pointerRemainder = {\n            x: 0,\n            y: 0,\n        };\n        function resetRemainder() {\n            pointerRemainder.x = 0;\n            pointerRemainder.y = 0;\n        }\n        this.keyListener = new BB.KeyListener({});\n\n        let boundsStartP = {\n            x: 0,\n            y: 0,\n        }\n        this.boundsPointerListener = new BB.PointerListener({\n            target: this.boundsEl,\n            fixScribble: true,\n            onPointer: (event) => {\n                event.eventPreventDefault();\n                if (event.type === 'pointerdown') {\n                    boundsStartP = {x: this.transform.x, y: this.transform.y};\n                }\n                if (event.type === 'pointermove' && event.button === 'left') {\n                    this.transform.x = boundsStartP.x + (event.pageX - event.downPageX) / this.scale;\n                    this.transform.y = boundsStartP.y + (event.pageY - event.downPageY) / this.scale;\n\n\n                    let dist;\n                    let snap: any = {};\n                    if (this.snappingEnabled) {\n                        let i;\n                        for (i = 0; i < this.snapX.length; i++) {\n                            dist = Math.abs(this.transform.x - this.snapX[i]);\n                            if (dist < this.minSnapDist / this.scale) {\n                                if (!snap.x || dist < snap.distX) {\n                                    snap.x = this.snapX[i];\n                                    snap.distX = dist;\n                                }\n                            }\n                        }\n                        for (i = 0; i < this.snapY.length; i++) {\n                            dist = Math.abs(this.transform.y - this.snapY[i]);\n                            if (dist < this.minSnapDist / this.scale) {\n                                if (!snap.y || dist < snap.distY) {\n                                    snap.y = this.snapY[i];\n                                    snap.distY = dist;\n                                }\n                            }\n                        }\n\n                        let iP;\n                        for (i = 0; i < 4; i++) {\n                            iP = toImageSpace(this.corners[i].x, this.corners[i].y, this.transform);\n                            let j;\n                            for (j = 0; j < this.snapX.length; j++) {\n                                dist = Math.abs(iP.x - this.snapX[j]);\n                                if (dist < this.minSnapDist / this.scale) {\n                                    if (!snap.x || dist < snap.distX) {\n                                        snap.x = this.snapX[j] - (iP.x - this.transform.x);\n                                        snap.distX = dist;\n                                    }\n                                }\n                            }\n                            for (j = 0; j < this.snapY.length; j++) {\n                                dist = Math.abs(iP.y - this.snapY[j]);\n                                if (dist < this.minSnapDist / this.scale) {\n                                    if (!snap.y || dist < snap.distY) {\n                                        snap.y = this.snapY[j] - (iP.y - this.transform.y);\n                                        snap.distY = dist;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    if (this.keyListener.getComboStr() === 'shift') {\n                        let projected = BB.projectPointOnLine(\n                            {x: 0, y: boundsStartP.y},\n                            {x: 10, y: boundsStartP.y},\n                            {x: this.transform.x, y: this.transform.y});\n                        let dist = BB.dist(projected.x, projected.y, this.transform.x, this.transform.y);\n                        snap = {};\n                        snap.x = projected.x;\n                        snap.y = projected.y;\n                        snap.distX = dist;\n                        snap.distY = dist;\n\n                        projected = BB.projectPointOnLine(\n                            {x: boundsStartP.x, y: 0},\n                            {x: boundsStartP.x, y: 10},\n                            {x: this.transform.x, y: this.transform.y});\n                        dist = BB.dist(projected.x, projected.y, this.transform.x, this.transform.y);\n                        if (dist < snap.distX) {\n                            snap.x = projected.x;\n                            snap.y = projected.y;\n                            snap.distX = dist;\n                            snap.distY = dist;\n                        }\n\n                        projected = BB.projectPointOnLine(\n                            {x: boundsStartP.x, y: boundsStartP.y},\n                            {x: boundsStartP.x + 1, y: boundsStartP.y + 1},\n                            {x: this.transform.x, y: this.transform.y});\n                        dist = BB.dist(projected.x, projected.y, this.transform.x, this.transform.y);\n                        if (dist < snap.distX) {\n                            snap.x = projected.x;\n                            snap.y = projected.y;\n                            snap.distX = dist;\n                            snap.distY = dist;\n                        }\n\n                        projected = BB.projectPointOnLine(\n                            {x: boundsStartP.x, y: boundsStartP.y},\n                            {x: boundsStartP.x + 1, y: boundsStartP.y - 1},\n                            {x: this.transform.x, y: this.transform.y});\n                        dist = BB.dist(projected.x, projected.y, this.transform.x, this.transform.y);\n                        if (dist < snap.distX) {\n                            snap.x = projected.x;\n                            snap.y = projected.y;\n                            snap.distX = dist;\n                            snap.distY = dist;\n                        }\n                    }\n                    if (snap.x != undefined) {\n                        this.transform.x = snap.x;\n                    }\n                    if (snap.y != undefined) {\n                        this.transform.y = snap.y;\n                    }\n\n                    // snap to pixels\n                    if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n                        snapToPixel(this.transform);\n                        this.updateCornerPositions();\n                    }\n\n                    this.updateDOM();\n                }\n            }\n        })\n\n        for (let i = 0; i < 4; i++) {\n            ((i) => {\n                const g = this.corners[i] = {\n                    i: i,\n                    el: BB.el({\n                        css: {\n                            width: this.gripSize + 'px',\n                            height: this.gripSize + 'px',\n                            background: '#fff',\n                            /*background: [\n                                '#ff0000',\n                                '#00ff00',\n                                '#0000ff',\n                                '#ff00ff',\n                            ][i],*/\n                            borderRadius: this.gripSize + 'px',\n                            position: 'absolute',\n                            boxShadow: 'inset 0 0 0 2px #000'\n                        }\n                    }),\n                    x: 0,\n                    y: 0,\n                    virtualPos: {\n                        x: 0,\n                        y: 0,\n                    },\n                    updateDOM: null,\n                    pointerListener: null,\n                };\n                g.updateDOM = () => {\n\n                    // grip position\n                    // if gets small, offset grips, so easier to handle\n                    const offsetArr = [[-1, -1], [1, -1], [1, 1], [-1, 1]].map(item => {\n                        item[0] *= this.transform.width > 0 ? 1 : -1;\n                        item[1] *= this.transform.height > 0 ? 1 : -1;\n                        return item;\n                    });\n                    const tinyOffset = Math.abs(this.scaled.width) < 20 || Math.abs(this.scaled.height) < 20 ? 10 : 0;\n\n                    BB.css(g.el, {\n                        left: (this.scaled.corners[g.i].x - this.gripSize / 2 + offsetArr[i][0] * tinyOffset) + 'px',\n                        top: (this.scaled.corners[g.i].y - this.gripSize / 2 + offsetArr[i][1] * tinyOffset) + 'px'\n                    });\n\n\n                    // cursor\n                    let angle = BB.pointsToAngleDeg(\n                        {\n                            x: this.transform.x,\n                            y: this.transform.y,\n                        },\n                        toImageSpace(g.x, g.y, this.transform),\n                    ) + 135; // offset so nw is 0\n                    while (angle < 0) {\n                        angle += 360;\n                    }\n                    let index = Math.round(angle / 45) % this.cornerCursors.length;\n                    BB.css(g.el, {\n                        cursor: this.cornerCursors[index] + '-resize',\n                    });\n                };\n\n                g.pointerListener = new BB.PointerListener({\n                    target: this.corners[i].el,\n                    fixScribble: true,\n                    onPointer: (event) => {\n                        event.eventPreventDefault();\n                        if (event.type === 'pointerdown' && event.button === 'left') {\n                            this.corners[i].virtualPos = toImageSpace(this.corners[i].x, this.corners[i].y, this.transform);\n\n                        } else if (event.type === 'pointermove' && event.button === 'left') {\n                            this.corners[i].virtualPos.x += event.dX / this.scale;\n                            this.corners[i].virtualPos.y += event.dY / this.scale;\n\n                            let iP = {\n                                x: this.corners[i].virtualPos.x,\n                                y: this.corners[i].virtualPos.y,\n                            };\n                            iP = this.constrainCorner(i, iP.x, iP.y);\n                            if (!this.isConstrained) {\n                                iP = this.snapCorner(iP.x, iP.y);\n                            }\n\n                            if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n                                iP.x = Math.round(iP.x);\n                                iP.y = Math.round(iP.y);\n                            }\n\n                            const tP = toTransformSpace(iP.x, iP.y, this.transform);\n\n                            const dX = tP.x - this.corners[i].x;\n                            const dY = tP.y - this.corners[i].y;\n                            this.corners[i].x = tP.x;\n                            this.corners[i].y = tP.y;\n\n                            let indexes = [];\n                            if (i === 0) { // top left\n                                indexes = [3, 1, 2];\n                            } else if (i === 1) { // top right\n                                indexes = [2, 0, 3];\n                            } else if (i === 2) { // bottom right\n                                indexes = [1, 3, 0];\n                            } else if (i === 3) { // bottom left\n                                indexes = [0, 2, 1];\n                            }\n\n                            this.corners[indexes[0]].x = this.corners[i].x;\n                            this.corners[indexes[1]].y = this.corners[i].y;\n                            if (this.keyListener.isPressed('shift')) {\n                                this.corners[indexes[2]].x -= dX;\n                                this.corners[indexes[2]].y -= dY;\n                                this.corners[indexes[1]].x = this.corners[indexes[2]].x;\n                                this.corners[indexes[0]].y = this.corners[indexes[2]].y;\n                            }\n\n                            this.updateTransformViaCorners();\n\n                        }\n                    }\n                });\n\n            })(i);\n        }\n\n        this.updateCornerPositions();\n        this.updateScaled();\n\n        let isInverted: boolean;\n        for (let i = 0; i < 4; i++) {\n            ((i) => {\n                this.edges[i] = {\n                    el: BB.el({\n                        css: {\n                            width: this.edgeSize + 'px',\n                            height: this.edgeSize + 'px',\n                            /*background: [\n                                '#ff000044',\n                                '#00ff0044',\n                                '#0000ff44',\n                                '#ff00ff44',\n                            ][i],*/\n                            position: 'absolute',\n                        },\n                    }),\n                    updateDOM: null,\n                    pointerListener: null,\n                };\n                const g = this.edges[i];\n                g.updateDOM = () => {\n                    if (i === 0) {\n                        BB.css(g.el, {\n                            left: Math.min(this.scaled.corners[0].x, this.scaled.corners[1].x) + 'px',\n                            top: (Math.min(this.scaled.corners[0].y, this.scaled.corners[3].y) - this.edgeSize) + 'px',\n                            width: Math.abs(this.scaled.width) + 'px',\n                            height: this.edgeSize + 'px',\n                        });\n                    } else if (i === 1) {\n                        BB.css(g.el, {\n                            left: Math.max(this.scaled.corners[0].x, this.scaled.corners[1].x) + 'px',\n                            top: Math.min(this.scaled.corners[1].y, this.scaled.corners[2].y) + 'px',\n                            width: this.edgeSize + 'px',\n                            height: Math.abs(this.scaled.height) + 'px',\n                        });\n                    } else if (i === 2) {\n                        BB.css(g.el, {\n                            left: Math.min(this.scaled.corners[3].x, this.scaled.corners[2].x) + 'px',\n                            top: Math.max(this.scaled.corners[0].y,this.scaled.corners[3].y) + 'px',\n                            width: Math.abs(this.scaled.width) + 'px',\n                            height: this.edgeSize + 'px',\n                        });\n                    } else if (i === 3) {\n                        BB.css(g.el, {\n                            left: (Math.min(this.scaled.corners[0].x, this.scaled.corners[1].x) - this.edgeSize) + 'px',\n                            top: Math.min(this.scaled.corners[0].y, this.scaled.corners[3].y) + 'px',\n                            width: this.edgeSize + 'px',\n                            height: Math.abs(this.scaled.height) + 'px',\n                        });\n                    }\n                    let angleOffset = Math.round(this.transform.angleDeg / 45);\n                    while (angleOffset < 0)\n                        angleOffset += 8;\n                    angleOffset = (i * 2 + 1 + angleOffset) % this.cornerCursors.length;\n                    g.el.style.cursor = this.cornerCursors[angleOffset] + '-resize';\n\n                };\n\n                const isVertical = [0, 2].includes(i);\n                g.pointerListener = new BB.PointerListener({\n                    target: this.edges[i].el,\n                    fixScribble: true,\n                    onPointer: (event) => {\n                        event.eventPreventDefault();\n                        if (event.type === 'pointerdown' && event.button === 'left') {\n                            if (isVertical) { // top bottom\n                                isInverted = this.corners[0].y >= this.corners[3].y;\n                            } else { // left right\n                                isInverted = this.corners[0].x >= this.corners[1].x;\n                            }\n                            resetRemainder();\n                        }\n                        if (event.type === 'pointermove' && event.button === 'left') {\n                            const tfD = BB.rotateAround({x: 0, y: 0},\n                                {x: event.dX / this.scale, y: event.dY / this.scale},\n                                -this.transform.angleDeg);\n                            let ti = {\n                                dX: tfD.x,\n                                dY: tfD.y,\n                            };\n                            if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n                                ti = BB.intDxy(pointerRemainder, tfD.x, tfD.y);\n                            }\n\n                            let indexes = [];\n                            if (i === 0) { // top\n                                indexes = [2, 3, 0, 1];\n                            } else if (i === 1) { // right\n                                indexes = [0, 3, 1, 2];\n                            } else if (i === 2) { // bottom\n                                indexes = [0, 1, 2, 3];\n                            } else if (i === 3) { // left\n                                indexes = [1, 2, 0, 3];\n                            }\n\n                            let dimension = isVertical ? 'y' : 'x';\n                            let d = isVertical ? ti.dY : ti.dX;\n\n                            if (isInverted) {\n                                this.corners[indexes[0]][dimension] += d;\n                                this.corners[indexes[1]][dimension] += d;\n                            } else {\n                                this.corners[indexes[2]][dimension] += d;\n                                this.corners[indexes[3]][dimension] += d;\n                            }\n                            if (this.keyListener.isPressed('shift')) {\n                                if (isInverted) {\n                                    this.corners[indexes[2]][dimension] -= d;\n                                    this.corners[indexes[3]][dimension] -= d;\n                                } else {\n                                    this.corners[indexes[0]][dimension] -= d;\n                                    this.corners[indexes[1]][dimension] -= d;\n                                }\n                            }\n\n                            if (isVertical) { // top bottom\n                                this.restoreRatio(false, true);\n                            } else { // left right\n                                this.restoreRatio(true, false);\n                            }\n\n                            this.updateTransformViaCorners();\n\n                        }\n                    }\n                });\n\n            })(i);\n        }\n\n        this.angleGrip = {\n            el: BB.el({\n                css: {\n                    cursor: 'url(' + rotateImg + ') 10 10, move',\n                    width: this.gripSize + 'px',\n                    height: this.gripSize + 'px',\n                    background: '#0ff',\n                    borderRadius: this.gripSize + 'px',\n                    position: 'absolute',\n                    boxShadow: 'inset 0 0 0 2px #000',\n                },\n            }),\n            x: 0,\n            y: 0,\n            snap: false,\n            updateDOM: () => {\n                BB.css(this.angleGrip.el, {\n                    left: (this.angleGrip.x - this.gripSize / 2) + 'px',\n                    top: (this.angleGrip.y - this.gripSize / 2) + 'px',\n                });\n            },\n        };\n        BB.el({\n            parent: this.angleGrip.el,\n            css: {\n                width: '2px',\n                height: '13px',\n                left: (this.gripSize / 2 - 1) + 'px',\n                top: this.gripSize + 'px',\n                background: '#0ff',\n                position: 'absolute'\n            }\n        });\n\n        this.anglePointerListener = new BB.PointerListener({\n            target: this.angleGrip.el,\n            fixScribble: true,\n            onPointer: (event) => {\n                event.eventPreventDefault();\n                if (event.type === 'pointermove' && event.button === 'left') {\n\n                    const bounds = this.rootEl.getBoundingClientRect();\n                    const offset = {\n                        x: bounds.left - this.rootEl.scrollLeft,\n                        y: bounds.top - this.rootEl.scrollTop,\n                    };\n                    const iP = {x: (event.clientX - offset.x) / this.scale, y: (event.clientY - offset.y) / this.scale};\n\n                    const a = BB.pointsToAngleDeg({x: this.transform.x, y: this.transform.y}, iP) + 90;\n                    this.transform.angleDeg = a;\n                    const snapDeg = Math.round(a / 360 * 8) * 45;\n                    if (this.keyListener.getComboStr() === 'shift') {\n                        this.transform.angleDeg = snapDeg;\n                    } else if (this.snappingEnabled && Math.abs(snapDeg - a) < 8) {\n                        this.transform.angleDeg = snapDeg;\n                    }\n                    this.updateDOM();\n\n                }\n                if (event.type === 'pointerup') {\n                    if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n                        snapToPixel(this.transform);\n                        this.updateCornerPositions();\n                        this.updateDOM();\n                    }\n                }\n            }\n        });\n\n        snapToPixel(this.transform);\n        this.updateDOM(true);\n        BB.append(this.transEl, [\n            this.boundsEl,\n            this.edges[0].el,\n            this.edges[1].el,\n            this.edges[2].el,\n            this.edges[3].el,\n            this.corners[0].el,\n            this.corners[1].el,\n            this.corners[2].el,\n            this.corners[3].el,\n            this.angleGrip.el,\n        ]);\n\n\n    }\n\n\n\n    getTransform (): ITransform {\n        return copyTransform(this.transform);\n    }\n\n    setConstrained (b: boolean): void {\n        this.isConstrained = !!b;\n        if (b && this.transform.width !== 0 && this.transform.height !== 0) {\n            this.ratio = Math.abs(this.transform.width / this.transform.height);\n        }\n    }\n\n    setSnapping (s: boolean): void {\n        this.snappingEnabled = !!s;\n    }\n\n    setPos (p: IVector2D): void {\n        this.transform.x = p.x;\n        this.transform.y = p.y;\n        this.updateDOM(true);\n    }\n\n    move (dX: number, dY: number): void {\n        this.transform.x += dX;\n        this.transform.y += dY;\n        this.updateDOM(false);\n    }\n\n    setSize (w: number, h: number): void {\n        this.transform.width = w;\n        this.transform.height = h;\n        if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n            snapToPixel(this.transform);\n        }\n        this.updateCornerPositions();\n        this.updateDOM(false);\n    }\n\n    setAngleDeg (a: number): void {\n        this.transform.angleDeg = a;\n        if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n            snapToPixel(this.transform);\n            this.updateCornerPositions();\n        }\n        this.updateDOM(true);\n    }\n\n    getElement (): HTMLElement {\n        return this.rootEl;\n    }\n\n    getRatio (): number {\n        return this.ratio;\n    }\n\n    destroy (): void {\n        this.keyListener.destroy();\n        this.boundsPointerListener.destroy();\n        this.corners[0].pointerListener.destroy();\n        this.corners[1].pointerListener.destroy();\n        this.corners[2].pointerListener.destroy();\n        this.corners[3].pointerListener.destroy();\n        this.edges[0].pointerListener.destroy();\n        this.edges[1].pointerListener.destroy();\n        this.edges[2].pointerListener.destroy();\n        this.edges[3].pointerListener.destroy();\n        this.anglePointerListener.destroy();\n    }\n\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"cursor-rotate.e23c5d0d.png\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {KlCanvasPreview} from '../../canvas-ui/canvas-preview';\nimport {FreeTransform} from './free-transform';\nimport {IKlBasicLayer, IMixMode} from '../../kl.types';\n\n/**\n * a basic canvas where you can transform one layer(move around, rotate, scale)\n *\n * @param params\n * @returns {HTMLDivElement}\n * @constructor\n */\nexport function FreeTransformCanvas(params: {\n    elementWidth: number;\n    elementHeight: number;\n    imageWidth: number;\n    imageHeight: number;\n    layers: IKlBasicLayer[];\n    transformIndex: number;\n}) {\n    /*\n    div\n        innerWrapper\n            klCanvasPreview\n            transform.div\n    */\n\n    let previewFit = BB.fitInto(\n        params.imageWidth,\n        params.imageHeight,\n        params.elementWidth - 20,\n        params.elementHeight - 60,\n        1\n    );\n    let scale = previewFit.width / params.imageWidth;\n\n    let div = BB.el({\n        css: {\n            width: params.elementWidth + \"px\",\n            height: params.elementHeight + \"px\",\n            backgroundColor: \"#9e9e9e\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            userSelect: \"none\",\n            position: \"relative\",\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            colorScheme: 'only light',\n        }\n    });\n    div.oncontextmenu = function () {\n        return false;\n    };\n\n    let innerWrapper = BB.el({\n        css: {\n            position: 'relative',\n            boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n            width: previewFit.width + 'px',\n            height: previewFit.height + 'px'\n        }\n    });\n    div.appendChild(innerWrapper);\n\n    let previewLayerArr = params.layers.map(item => {\n        return {\n            image: item.image,\n            mixModeStr: item.mixModeStr,\n            opacity: item.opacity,\n        }\n    });\n    previewLayerArr[previewLayerArr.length - 1].image = BB.canvas(\n        scale > 1 ? params.imageWidth : previewFit.width,\n        scale > 1 ? params.imageHeight : previewFit.height,\n    );\n    let klCanvasPreview = new KlCanvasPreview({\n        width: previewFit.width,\n        height: previewFit.height,\n        layers: previewLayerArr\n    });\n    innerWrapper.appendChild(klCanvasPreview.getElement());\n\n    let freeTransform;\n    let initTransform;\n    function updatePreview() {\n        if (!freeTransform) {\n            return;\n        }\n\n        let transform = freeTransform.getTransform();\n        if (scale < 1) {\n            transform.x *= scale;\n            transform.y *= scale;\n            transform.width *= scale;\n            transform.height *= scale;\n        }\n\n        let destCanvas = previewLayerArr[params.transformIndex].image;\n        let ctx = (destCanvas as HTMLCanvasElement).getContext('2d');\n        ctx.save();\n        ctx.clearRect(0, 0, destCanvas.width, destCanvas.height);\n        BB.drawTransformedImageWithBounds(\n            ctx,\n            params.layers[params.transformIndex].image,\n            transform,\n            null,\n            BB.testShouldPixelate(transform, transform.width / initTransform.width, transform.height / initTransform.height),\n        );\n        ctx.restore();\n        klCanvasPreview.render();\n    }\n\n    {\n        let transformSize = {\n            width: params.layers[params.transformIndex].image.width * scale,\n            height: params.layers[params.transformIndex].image.height * scale\n        };\n        if (transformSize.width > previewFit.width || transformSize.height > previewFit.height) {\n            transformSize = BB.fitInto(\n                params.layers[params.transformIndex].image.width,\n                params.layers[params.transformIndex].image.height,\n                previewFit.width,\n                previewFit.height,\n                1\n            );\n        }\n        initTransform = {\n            x: params.imageWidth / 2,\n            y: params.imageHeight / 2,\n            width: params.layers[params.transformIndex].image.width,\n            height: params.layers[params.transformIndex].image.height,\n        };\n        freeTransform = new FreeTransform({\n            x: initTransform.x,\n            y: initTransform.y,\n            width: initTransform.width,\n            height: initTransform.height,\n            angleDeg: 0,\n            isConstrained: true,\n            snapX: [0, params.imageWidth],\n            snapY: [0, params.imageHeight],\n            scale: scale,\n            callback: (transform) => {\n                updatePreview();\n            },\n        });\n    }\n    BB.css(freeTransform.getElement(), {\n        position: 'absolute',\n        left: '0',\n        top: '0'\n    });\n    innerWrapper.appendChild(freeTransform.getElement());\n    setTimeout(updatePreview, 0);\n\n\n    // --- interface ---\n\n    this.move = function(dX, dY) {\n        freeTransform.move(dX, dY);\n    };\n    this.reset = function() {\n        let w = params.layers[params.transformIndex].image.width;\n        let h = params.layers[params.transformIndex].image.height;\n\n        freeTransform.setSize(w, h);\n        freeTransform.setPos({x: w / 2, y: h / 2});\n        freeTransform.setAngleDeg(0);\n        updatePreview();\n    };\n    this.setTransformFit = function() {\n\n        let fit = BB.fitInto(\n            params.layers[params.transformIndex].image.width,\n            params.layers[params.transformIndex].image.height,\n            params.imageWidth,\n            params.imageHeight,\n            1\n        );\n\n        freeTransform.setSize(fit.width, fit.height);\n        freeTransform.setPos({x: fit.width / 2, y: fit.height / 2});\n        freeTransform.setAngleDeg(0);\n        updatePreview();\n    };\n    this.setTransformCenter = function() {\n        freeTransform.setPos({x: params.imageWidth / 2, y: params.imageHeight / 2});\n        freeTransform.setAngleDeg(0);\n        updatePreview();\n    };\n    //gives you the transformation in the original scale\n    this.getTransformation = function () {\n        if (!freeTransform) {\n            return false;\n        }\n        return freeTransform.getTransform();\n    };\n    this.getIsPixelated = () => {\n        const transform = freeTransform.getTransform();\n        return BB.testShouldPixelate(transform, transform.width / initTransform.width, transform.height / initTransform.height);\n    };\n    this.getElement = function() {\n        return div;\n    };\n    this.destroy = function() {\n        freeTransform.destroy();\n    };\n}","import {BB} from '../../../bb/bb';\n\n/*\n\tCropper params\n\t{\n\t\tx: int, //pos in relation zum bild\n\t\ty: int,\n\t\tw: int,\n\t\th: int,\n\t\tscale: float, //zoom\n\t\tcallback: function //wenn sich was ndert\n\t}\n\tthe div that you append this to must be relative\n*/\nexport function Cropper (params) {\n    let x = params.x,\n        y = params.y,\n        width = params.width,\n        height = params.height,\n        scale = params.scale,\n        callback = params.callback,\n        maxW = params.maxW,\n        maxH = params.maxH;\n    let div = document.createElement(\"div\");\n    let gripCursors = ['nw', 'n', 'ne', 'e', 'se', 's', 'sw', 'w'];\n\n    let keyListener = new BB.KeyListener({});\n\n    BB.css(div, {\n        position: \"absolute\",\n        left: (x * scale) + \"px\",\n        top: (y * scale) + \"px\"\n    });\n\n    let outline = document.createElement(\"div\");\n    BB.css(outline, {\n        position: \"absolute\",\n        border: \"1px dashed #fff\",\n        cursor: \"move\"\n    });\n    (outline as any).update = function () {\n        BB.css(outline, {\n            left: (grips[0].x * scale - 1) + \"px\",\n            top: (grips[0].y * scale - 1) + \"px\",\n            width: ((grips[2].x - grips[0].x) * scale) + \"px\",\n            height: ((grips[2].y - grips[0].y) * scale) + \"px\"\n        });\n    };\n    let pointerRemainder = { // needs to be reset after dragging complete\n        x: 0,\n        y: 0,\n    };\n    let outlinePointerListener = new BB.PointerListener({\n        target: outline,\n        onPointer: function(event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n\n                grips[0].x += dX;\n                grips[0].y += dY;\n                grips[1].x += dX;\n                grips[1].y += dY;\n                grips[2].x += dX;\n                grips[2].y += dY;\n                grips[3].x += dX;\n                grips[3].y += dY;\n\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n\n    let thirdsHorizontal = document.createElement(\"div\");\n    BB.css(thirdsHorizontal, {\n        position: \"absolute\",\n        borderTop: \"1px solid #0ff\",\n        borderBottom: \"1px solid #0ff\"\n    });\n    (thirdsHorizontal as any).update = function () {\n        BB.css(thirdsHorizontal, {\n            left: (grips[0].x * scale) + \"px\",\n            top: ((grips[0].y + (grips[2].y - grips[0].y) / 3) * scale) + \"px\",\n            width: ((grips[2].x - grips[0].x) * scale) + \"px\",\n            height: ((grips[2].y - grips[0].y) / 3 * scale) + \"px\"\n\n        });\n    };\n    let thirdsVertical = document.createElement(\"div\");\n    BB.css(thirdsVertical, {\n        position: \"absolute\",\n        borderLeft: \"1px solid #0ff\",\n        borderRight: \"1px solid #0ff\"\n    });\n    (thirdsVertical as any).update = function () {\n        BB.css(thirdsVertical, {\n            left: ((grips[0].x + (grips[2].x - grips[0].x) / 3) * scale) + \"px\",\n            top: (grips[0].y * scale) + \"px\",\n            width: ((grips[2].x - grips[0].x) / 3 * scale) + \"px\",\n            height: ((grips[2].y - grips[0].y) * scale) + \"px\"\n\n        });\n    };\n\n    const gripSize = 40;\n    const gripOverlay = 10;\n\n    let grips: {\n        x: number; // int\n        y: number;\n    }[] = [ // aka corner coordinates\n        {x: 0, y: 0}, // top left\n        {x: width, y: 0}, // top right\n        {x: width, y: height}, // bottom right\n        {x: 0, y: height}, //bottom left\n    ];\n\n    function transformTop(dY) {\n        grips[0].y += dY;\n        grips[0].y = Math.max(grips[3].y - maxH, Math.min(grips[3].y - 1, grips[0].y));\n        grips[1].y = grips[0].y;\n    }\n    function transformRight(dX) {\n        grips[1].x += dX;\n        grips[1].x = Math.min(grips[0].x + maxW, Math.max(grips[0].x + 1, grips[1].x));\n        grips[2].x = grips[1].x;\n    }\n    function transformBottom(dY) {\n        grips[2].y += dY;\n        grips[2].y = Math.min(grips[1].y + maxH, Math.max(grips[1].y + 1, grips[2].y));\n        grips[3].y = grips[2].y;\n    }\n    function transformLeft(dX) {\n        grips[0].x += dX;\n        grips[0].x = Math.max(grips[1].x - maxW, Math.min(grips[1].x - 1, grips[0].x));\n        grips[3].x = grips[0].x;\n    }\n\n    function commit() {\n        pointerRemainder.x = 0;\n        pointerRemainder.y = 0;\n        callback(getTransform());\n    }\n\n\n\n\n    let edges = [];\n    for (let i = 0; i < 4; i++) {\n        (function (i) {\n            edges[i] = document.createElement(\"div\");\n            let g = edges[i];\n            g.style.width = gripSize + \"px\";\n            g.style.height = gripSize + \"px\";\n            //g.style.background = \"#0f0\";\n            g.style.position = \"absolute\";\n            g.update = function () {\n                if (i === 0) { //top\n                    g.style.left = (grips[0].x * scale + gripOverlay) + \"px\";\n                    g.style.top = (grips[0].y * scale - gripSize * 2 + gripOverlay) + \"px\";\n                    g.style.width = ((grips[1].x - grips[0].x) * scale - gripOverlay * 2) + \"px\";\n                    g.style.height = (gripSize * 2) + \"px\";\n                } else if (i === 1) { //right\n                    g.style.left = (grips[1].x * scale - gripOverlay) + \"px\";\n                    g.style.top = (grips[1].y * scale + gripOverlay) + \"px\";\n                    g.style.width = (gripSize * 2) + \"px\";\n                    g.style.height = ((grips[2].y - grips[1].y) * scale - gripOverlay * 2) + \"px\";\n                } else if (i === 2) { //bottom\n                    g.style.left = (grips[3].x * scale + gripOverlay) + \"px\";\n                    g.style.top = (grips[3].y * scale - gripOverlay) + \"px\";\n                    g.style.width = ((grips[2].x - grips[3].x) * scale - gripOverlay * 2) + \"px\";\n                    g.style.height = (gripSize * 2) + \"px\";\n                } else if (i === 3) { //left\n                    g.style.left = (grips[0].x * scale - gripSize * 2 + gripOverlay) + \"px\";\n                    g.style.top = (grips[0].y * scale + gripOverlay) + \"px\";\n                    g.style.width = (gripSize * 2) + \"px\";\n                    g.style.height = ((grips[3].y - grips[0].y) * scale - gripOverlay * 2) + \"px\";\n                }\n                let angleOffset = i * 2 + 1;\n                g.style.cursor = gripCursors[angleOffset] + \"-resize\";\n\n            };\n        })(i);\n    }\n\n    let darken = [];\n    for (let i = 0; i < 4; i++) {\n        (function (i) {\n            darken[i] = document.createElement(\"div\");\n            let g = darken[i];\n            g.style.position = \"absolute\";\n            g.style.background = \"#000\";\n            g.style.opacity = \"0.5\";\n            g.update = function () {\n                if (i === 0) {\n                    g.style.left = (grips[0].x * scale) + \"px\";\n                    g.style.top = (grips[0].y * scale - 8000) + \"px\";\n                    g.style.width = ((grips[1].x - grips[0].x) * scale) + \"px\";\n                    g.style.height = \"8000px\";\n                } else if (i === 1) {\n                    g.style.left = (grips[1].x * scale) + \"px\";\n                    g.style.top = (grips[1].y * scale - 8000) + \"px\";\n                    g.style.width = \"8000px\";\n                    g.style.height = 16000 + \"px\";\n                } else if (i === 2) {\n                    g.style.left = (grips[3].x * scale) + \"px\";\n                    g.style.top = (grips[3].y * scale) + \"px\";\n                    g.style.width = ((grips[2].x - grips[3].x) * scale) + \"px\";\n                    g.style.height = \"8000px\";\n                } else if (i === 3) {\n                    g.style.left = (grips[0].x * scale - 8000) + \"px\";\n                    g.style.top = (grips[0].y * scale - 8000) + \"px\";\n                    g.style.width = \"8000px\";\n                    g.style.height = 16000 + \"px\";\n                }\n\n            };\n        })(i);\n    }\n\n    let edge0PointerListener = new BB.PointerListener({\n        target: edges[0],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformTop(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformBottom(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    let edge1PointerListener = new BB.PointerListener({\n        target: edges[1],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformRight(dX);\n                if (keyListener.isPressed('shift')) {\n                    transformLeft(-dX);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    let edge2PointerListener = new BB.PointerListener({\n        target: edges[2],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformBottom(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformTop(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    let edge3PointerListener = new BB.PointerListener({\n        target: edges[3],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformLeft(dX);\n                if (keyListener.isPressed('shift')) {\n                    transformRight(-dX);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n\n\n    let cornerElArr = [];\n    (function() {\n        for (let i = 0; i < 4; i++) {\n            (function (i) {\n                cornerElArr[i] = document.createElement(\"div\");\n                let g = cornerElArr[i];\n                BB.css(g, {\n                    //background: '#f00',\n                    width: (gripSize * 2) + 'px',\n                    height: (gripSize * 2) + 'px',\n                    position: 'absolute'\n                });\n                g.style.cursor = ['nwse-resize', 'nesw-resize'][i % 2];\n                g.update = function () {\n                    if (i === 0) { //top left\n                        BB.css(g, {\n                            left: (grips[0].x * scale - gripSize * 2 + gripOverlay) + \"px\",\n                            top: (grips[0].y * scale - gripSize * 2 + gripOverlay) + \"px\"\n                        });\n                    } else if (i === 1) { //top right\n                        BB.css(g, {\n                            left: (grips[1].x * scale - gripOverlay) + \"px\",\n                            top: (grips[1].y * scale - gripSize * 2 + gripOverlay) + \"px\"\n                        });\n                    } else if (i === 2) { //bottom right\n                        BB.css(g, {\n                            left: (grips[1].x * scale - gripOverlay) + \"px\",\n                            top: (grips[2].y * scale - gripOverlay) + \"px\"\n                        });\n                    } else if (i === 3) { //bottom left\n                        BB.css(g, {\n                            left: (grips[0].x * scale - gripSize * 2 + gripOverlay) + \"px\",\n                            top: (grips[2].y * scale - gripOverlay) + \"px\"\n                        });\n                    }\n                };\n            })(i);\n        }\n    })();\n    //top left\n    let corner0PointerListener = new BB.PointerListener({\n        target: cornerElArr[0],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformLeft(dX);\n                transformTop(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformRight(-dX);\n                    transformBottom(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    //top right\n    let corner1PointerListener = new BB.PointerListener({\n        target: cornerElArr[1],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformRight(dX);\n                transformTop(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformLeft(-dX);\n                    transformBottom(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    //bottom right\n    let corner2PointerListener = new BB.PointerListener({\n        target: cornerElArr[2],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformRight(dX);\n                transformBottom(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformLeft(-dX);\n                    transformTop(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    //bottom left\n    let corner3PointerListener = new BB.PointerListener({\n        target: cornerElArr[3],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformLeft(dX);\n                transformBottom(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformRight(-dX);\n                    transformTop(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n\n\n\n\n    function getTransform() {\n        grips[1].x -= grips[0].x;\n        grips[1].y -= grips[0].y;\n        grips[2].x -= grips[0].x;\n        grips[2].y -= grips[0].y;\n        grips[3].x -= grips[0].x;\n        grips[3].y -= grips[0].y;\n        x += grips[0].x;\n        y += grips[0].y;\n        grips[0].x = 0;\n        grips[0].y = 0;\n        return {\n            x: x,\n            y: y,\n            width: grips[1].x,\n            height: grips[2].y\n        };\n    }\n\n\n    div.append(\n        darken[1],\n        darken[0],\n        darken[2],\n        darken[3],\n        thirdsHorizontal,\n        thirdsVertical,\n        outline,\n\n        edges[1],\n        edges[0],\n        edges[2],\n        edges[3],\n\n        cornerElArr[0],\n        cornerElArr[1],\n        cornerElArr[2],\n        cornerElArr[3],\n    );\n\n\n    function update() {\n\n        edges[0].update();\n        edges[1].update();\n        edges[2].update();\n        edges[3].update();\n        cornerElArr[0].update();\n        cornerElArr[1].update();\n        cornerElArr[2].update();\n        cornerElArr[3].update();\n        darken[0].update();\n        darken[1].update();\n        darken[2].update();\n        darken[3].update();\n        (outline as any).update();\n        (thirdsHorizontal as any).update();\n        (thirdsVertical as any).update();\n    }\n\n    update();\n\n\n    // --- interface ---\n\n    this.getTransform = getTransform;\n\n    this.setTransform = function (p) {\n        x = p.x;\n        y = p.y;\n        width = p.width;\n        height = p.height;\n\n        BB.css(div, {\n            left: (x * scale) + \"px\",\n            top: (y * scale) + \"px\"\n        });\n\n        grips[0].x = 0;\n        grips[0].y = 0;\n        grips[1].x = width;\n        grips[1].y = 0;\n        grips[2].x = width;\n        grips[2].y = height;\n        grips[3].x = 0;\n        grips[3].y = height;\n\n        update();\n        commit();\n    };\n\n    this.setScale = function (s) {\n        scale = s;\n        BB.css(div, {\n            left: (x * scale) + \"px\",\n            top: (y * scale) + \"px\"\n        });\n        update();\n    };\n\n    this.showThirds = function (b) {\n        if (b) {\n            thirdsHorizontal.style.display = \"block\";\n            thirdsVertical.style.display = \"block\";\n        } else {\n            thirdsHorizontal.style.display = \"none\";\n            thirdsVertical.style.display = \"none\";\n        }\n    };\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.destroy = function() {\n        keyListener.destroy();\n        outlinePointerListener.destroy();\n        corner0PointerListener.destroy();\n        corner1PointerListener.destroy();\n        corner2PointerListener.destroy();\n        corner3PointerListener.destroy();\n        edge0PointerListener.destroy();\n        edge1PointerListener.destroy();\n        edge2PointerListener.destroy();\n        edge3PointerListener.destroy();\n    };\n\n}","import {BB} from '../../../bb/bb';\nimport {klHistory} from '../../history/kl-history';\nimport {LANG} from '../../../language/language';\n\n/**\n * Previews currently active layer\n * thumbnail (hover shows bigger preview), layername, opacity\n *\n * internally listens to kl history. updates when there's a change.\n * but you need to update it when the active layer changed. (different canvas object)\n *\n * update visibility for performance\n *\n * p = {\n *     onClick: function() // when clicking on layer name\n *     klRootEl: klRootEl,\n * }\n *\n * @param p\n * @constructor\n */\nexport function LayerPreview(p) {\n\n    // internally redraws with in an interval. checks history is something changed\n    // this update will be animated\n    // it will not be animated if the resolution changed\n    // also redraws when you call updateLayer - not animated\n\n    // syncs via updateLayer, and internally updates layer opacity via a hack\n\n    let div = BB.el({});\n    let layerObj;\n    let isVisible = true;\n    const height = 40;\n    const canvasSize = height - 10;\n    const largeCanvasSize = 300;\n    let lastDrawnState = -2;\n    let lastDrawnSize = {\n        width: 0,\n        height: 0\n    };\n    let animationCanvas = BB.canvas(); // to help animate the transition\n    let animationCanvasCtx = animationCanvas.getContext('2d');\n    const animationLength = 30;\n    let animationCount = 0; // >0 means it's animating\n    let largeCanvasIsVisible = false;\n    let largeCanvasAnimationTimeout;\n    const largeCanvasAnimationDurationMs = 300;\n    let uiState = 'right'; // 'left' | 'right'\n\n\n    // --- setup dom ---\n    let contentWrapperEl = BB.el({\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            height: height + 'px',\n            color: '#666',\n        }\n    });\n    let canvasWrapperEl = BB.el({\n        css: {\n            //background: '#f00',\n            minWidth: height + 'px',\n            height: height + 'px',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center'\n        }\n    });\n    let canvas = BB.canvas(canvasSize, canvasSize);\n    let canvasCtx = canvas.getContext('2d');\n    canvas.title = LANG('layers-active-layer');\n    BB.css(canvas, {\n        boxShadow: '0 0 0 1px #9e9e9e',\n        colorScheme: 'only light',\n    });\n    let nameWrapper = BB.el({\n        css: {\n            //background: '#ff0',\n            flexGrow: '1',\n            paddingLeft: '10px',\n            fontSize: '13px',\n            overflow: 'hidden',\n            position: 'relative'\n        }\n    });\n    let nameLabelEl = BB.el({\n        content: '',\n        css: {\n            cssFloat: 'left',\n            whiteSpace: 'nowrap'\n        }\n    });\n    let nameFadeEl = BB.el({\n        css: {\n            backgroundImage: 'linear-gradient(to right, rgba(221,221,221,0) 0%, rgba(221,221,221,0.8) 100%)',\n            position: 'absolute',\n            right: \"0\",\n            top: \"0\",\n            width: \"50px\",\n            height: '100%'\n        }\n    });\n    let clickableEl = BB.el({\n        css: {\n            //background: 'rgba(0,255,0,0.6)',\n            position: 'absolute',\n            left: \"10px\",\n            top: \"0\",\n            width: \"90px\",\n            height: '100%'\n        }\n    });\n    if (p.onClick) {\n        BB.addEventListener(clickableEl,'click', function() {\n            p.onClick();\n        });\n        BB.addEventListener(canvas,'click', function() {\n            p.onClick();\n        });\n    }\n    let opacityEl = BB.el({\n        content: LANG('opacity') + '<br>100%',\n        css: {\n            minWidth: '60px',\n            fontSize: '12px',\n            textAlign: 'center',\n            background: '#dddddd',\n            color: '#555'\n        }\n    });\n\n    const largeCanvasWrapper = BB.el({\n        onClick: BB.handleClick,\n        css: {\n            pointerEvents: 'none',\n            background: '#fff',\n            position: 'absolute',\n            right: '280px',\n            top: '10px',\n            border: '1px solid #aaa',\n            boxShadow: '1px 1px 3px rgba(0,0,0,0.3)',\n            transition: 'opacity '+largeCanvasAnimationDurationMs+'ms ease-in-out',\n            userSelect: 'none',\n            display: 'block',\n            webkitTouchCallout: 'none',\n            colorScheme: 'only light',\n        }\n    });\n    let largeCanvas = BB.canvas(largeCanvasSize, largeCanvasSize);\n    largeCanvasWrapper.append(largeCanvas);\n    let largeCanvasCtx = largeCanvas.getContext('2d');\n    BB.css(largeCanvas, {\n        display: 'block',\n    });\n\n    div.appendChild(contentWrapperEl);\n    contentWrapperEl.appendChild(canvasWrapperEl);\n    canvasWrapperEl.appendChild(canvas);\n    contentWrapperEl.appendChild(nameWrapper);\n    nameWrapper.appendChild(nameLabelEl);\n    nameWrapper.appendChild(nameFadeEl);\n    nameWrapper.appendChild(clickableEl);\n    contentWrapperEl.appendChild(opacityEl);\n\n\n    let animationCanvasCheckerPattern = animationCanvasCtx.createPattern(BB.createCheckerCanvas(4), 'repeat');\n    let largeCanvasCheckerPattern = canvasCtx.createPattern(BB.createCheckerCanvas(4), 'repeat');\n\n\n\n    // --- update logic ---\n\n    // cross-fade done via 2 canvases (old and new state)\n    // both have checkerboard background drawn on them, both fully opaque\n    // -> no \"lighter\" is needed for accurate cross-fading\n\n    function animate() {\n        if (animationCount === 0) {\n            return;\n        }\n\n        animationCount--;\n\n        canvasCtx.save();\n        canvasCtx.globalAlpha = Math.pow((animationLength - animationCount) / animationLength, 2);\n        canvasCtx.drawImage(animationCanvas, 0, 0);\n        canvasCtx.restore();\n\n        if (animationCount > 0) {\n            requestAnimationFrame(animate);\n        }\n    }\n\n    function draw(isInstant) {\n\n        if (!isVisible) {\n            return;\n        }\n\n        nameLabelEl.textContent = layerObj.name;\n        opacityEl.innerHTML = LANG('opacity') + '<br>' + Math.round(layerObj.opacity * 100) + '%';\n\n        let layerCanvas = layerObj.context.canvas;\n\n        if (layerCanvas.width !== lastDrawnSize.width || layerCanvas.height !== lastDrawnSize.height) {\n            let canvasDimensions = BB.fitInto(layerCanvas.width, layerCanvas.height, canvasSize, canvasSize, 1);\n            canvas.width = Math.round(canvasDimensions.width);\n            canvas.height = Math.round(canvasDimensions.height);\n\n            isInstant = true;\n        }\n\n        animationCanvas.width = canvas.width;\n        animationCanvas.height = canvas.height;\n\n        animationCanvasCtx.save();\n        animationCanvasCtx.imageSmoothingEnabled = false;\n        animationCanvasCtx.fillStyle = animationCanvasCheckerPattern;\n        animationCanvasCtx.fillRect(0, 0, animationCanvas.width, animationCanvas.height);\n        animationCanvasCtx.drawImage(layerCanvas, 0, 0, animationCanvas.width, animationCanvas.height);\n        animationCanvasCtx.restore();\n\n        if (isInstant) {\n            animationCount = 0;\n            canvasCtx.save();\n            canvasCtx.drawImage(animationCanvas, 0, 0);\n            canvasCtx.restore();\n\n        } else {\n            animationCount = animationLength;\n            animate();\n\n        }\n\n        drawLargeCanvas();\n\n        lastDrawnState = klHistory.getState();\n        lastDrawnSize.width = layerCanvas.width;\n        lastDrawnSize.height = layerCanvas.height;\n    }\n\n    function update() {\n        draw(true);\n    }\n\n    setInterval(function() {\n\n        if (!layerObj) {\n            return;\n        }\n\n        let currentState = klHistory.getState();\n        if (currentState === lastDrawnState) {\n            return;\n        }\n\n        //update opacity w hack\n        layerObj.opacity = layerObj.context.canvas.opacity;\n\n        draw(false);\n\n    }, 2000);\n\n\n    //is always instant\n    function drawLargeCanvas() {\n\n        if (!largeCanvasIsVisible || !layerObj) {\n            return;\n        }\n\n        let layerCanvas = layerObj.context.canvas;\n\n        let canvasDimensions = BB.fitInto(layerCanvas.width, layerCanvas.height, largeCanvasSize, largeCanvasSize, 1);\n        largeCanvas.width = Math.round(canvasDimensions.width);\n        largeCanvas.height = Math.round(canvasDimensions.height);\n        largeCanvasCtx.save();\n        if (largeCanvas.width > layerCanvas.width) {\n            largeCanvasCtx.imageSmoothingEnabled = false;\n        } else {\n            largeCanvasCtx.imageSmoothingEnabled = true;\n            largeCanvasCtx.imageSmoothingQuality = 'high';\n        }\n        largeCanvasCtx.fillStyle = largeCanvasCheckerPattern;\n        largeCanvasCtx.fillRect(0, 0, largeCanvas.width, largeCanvas.height);\n        largeCanvasCtx.drawImage(layerCanvas, 0, 0, largeCanvas.width, largeCanvas.height);\n        largeCanvasCtx.restore();\n\n        const bounds = div.getBoundingClientRect();\n        BB.css(largeCanvasWrapper, {\n            top: Math.max(10, (bounds.top + height / 2 - largeCanvas.height / 2)) + \"px\"\n        });\n\n    }\n\n    function removeLargeCanvas() {\n        try {\n            p.klRootEl.removeChild(largeCanvasWrapper);\n        } catch(e) {\n\n        }\n    }\n\n    function showLargeCanvas(b) {\n        if (largeCanvasIsVisible === b) {\n            return;\n        }\n\n        clearTimeout(largeCanvasAnimationTimeout);\n        largeCanvasIsVisible = b;\n\n        if (b) {\n            largeCanvasAnimationTimeout = setTimeout(function() {\n                drawLargeCanvas();\n                largeCanvasWrapper.style.opacity = '0';\n                p.klRootEl.appendChild(largeCanvasWrapper);\n                setTimeout(function() {\n                    largeCanvasWrapper.style.opacity = '1';\n                }, 20);\n            }, 250);\n\n        } else {\n            largeCanvasWrapper.style.opacity = '0';\n            largeCanvasAnimationTimeout = setTimeout(removeLargeCanvas, largeCanvasAnimationDurationMs + 20);\n        }\n\n    }\n\n    let pointerListener = new BB.PointerListener({\n        target: canvas,\n        onEnterLeave: function(b) {\n            showLargeCanvas(b);\n        }\n    });\n\n\n\n    // --- interface ---\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.setIsVisible = function(b) {\n        if (isVisible === b) {\n            return;\n        }\n        isVisible = b;\n        contentWrapperEl.style.display = isVisible ? 'flex' : 'none';\n        div.style.marginBottom = isVisible ? '' : '10px';\n\n        let currentState = klHistory.getState();\n        if (b && lastDrawnState !== currentState) {\n            update();\n        }\n    };\n\n    //when the layer might have changed\n    this.setLayer = function(klCanvasLayerObj) {\n        layerObj = klCanvasLayerObj;\n        update();\n    };\n\n    this.setUiState = function(stateStr) {\n        uiState = '' + stateStr;\n\n        if (uiState === 'left') {\n            BB.css(largeCanvasWrapper, {\n                left: '280px',\n                right: ''\n            });\n        } else {\n            BB.css(largeCanvasWrapper, {\n                left: '',\n                right: '280px'\n            });\n        }\n    };\n\n}","import {BB} from '../../../bb/bb';\n\n/**\n * fits image into a size\n * params: {\n *    image: image,\n *    width: int,\n *    height: int\n * }\n *\n * methods:\n * getDiv()\n *\n * @param params\n * @constructor\n */\nexport function FittedImage(params) {\n    let fit = BB.fitInto(params.image.width, params.image.height, params.width, params.height, 1);\n    let w = parseInt('' + fit.width);\n    let h = parseInt('' + fit.height);\n\n    let canvas = BB.canvas(w, h);\n\n    canvas.getContext(\"2d\").drawImage(params.image, 0, 0, w, h);\n    BB.css(canvas, {\n        display: \"block\",\n        boxShadow: \"0 0 0 1px #aaa\"\n    });\n\n    this.getElement = function() {\n        return canvas;\n    };\n}","import {BB} from '../../../bb/bb';\nimport {FreeTransformCanvas} from '../components/free-transform-canvas';\nimport {popup} from './popup';\nimport {KlCanvas} from '../../canvas/kl-canvas';\nimport {IKlBasicLayer} from '../../kl.types';\nimport {LANG} from '../../../language/language';\n\nexport function showImportAsLayerDialog(\n    params: {\n        target: HTMLElement;\n        klCanvas: KlCanvas;\n        importImage: HTMLImageElement | HTMLCanvasElement;\n        callback: (\n            p?: {x: number, y: number, width:number, height: number, angleDeg: number},\n            isPixelated?: boolean\n        ) => void;\n    }\n): void {\n\n    let div = document.createElement(\"div\");\n    BB.appendTextDiv(div, LANG('import-as-layer-description'));\n    if (params.klCanvas.isLayerLimitReached()) {\n        let noteEl = BB.el({\n            content: LANG('import-as-layer-limit-reached'),\n            css: {\n                background: '#ff0',\n                padding: '10px',\n                marginTop: '5px',\n                marginBottom: '5px',\n                border: '1px solid #e7d321',\n                borderRadius: '5px'\n            }\n        });\n        div.appendChild(noteEl);\n    }\n    let isSmall = window.innerWidth < 550;\n\n    let buttonRowEl = BB.el({\n        css: {\n            display: 'flex'\n        }\n    });\n    let originalSizeBtn = BB.el({\n        tagName: 'button',\n        content: '1:1',\n        css: {\n            marginRight: '10px'\n        },\n        onClick: function() {\n            freeTransformCanvas.reset();\n        }\n    });\n    let fitSizeBtn = BB.el({\n        tagName: 'button',\n        content: LANG('import-as-layer-fit'),\n        css: {\n            marginRight: '10px'\n        },\n        onClick: function() {\n            freeTransformCanvas.setTransformFit();\n        }\n    });\n    let centerBtn = BB.el({\n        tagName: 'button',\n        content: LANG('center'),\n        css: {\n            marginRight: '10px'\n        },\n        onClick: function() {\n            freeTransformCanvas.setTransformCenter();\n        }\n    });\n    buttonRowEl.appendChild(originalSizeBtn);\n    buttonRowEl.appendChild(fitSizeBtn);\n    buttonRowEl.appendChild(centerBtn);\n    div.appendChild(buttonRowEl);\n\n\n\n    let layers: IKlBasicLayer[] = [];\n    {\n        let klCanvasLayerArr = params.klCanvas.getLayers();\n        for (let i = 0; i < klCanvasLayerArr.length; i++) {\n            layers.push({\n                image: klCanvasLayerArr[i].context.canvas,\n                opacity: klCanvasLayerArr[i].opacity,\n                mixModeStr: klCanvasLayerArr[i].mixModeStr\n            });\n        }\n    }\n    layers.push({\n        image: params.importImage,\n        opacity: 1,\n        mixModeStr: 'source-over'\n    });\n\n\n    let freeTransformCanvas = new FreeTransformCanvas({\n        elementWidth: isSmall ? 340 : 540,\n        elementHeight: isSmall ? 280 : 350,\n        imageWidth: params.klCanvas.getLayerContext(0).canvas.width,\n        imageHeight: params.klCanvas.getLayerContext(0).canvas.height,\n        layers: layers,\n        transformIndex: layers.length - 1,\n    });\n    BB.css(freeTransformCanvas.getElement(), {\n        marginTop: '10px',\n        marginLeft: '-20px',\n    });\n    div.appendChild(freeTransformCanvas.getElement());\n\n    function move(x, y) {\n        freeTransformCanvas.move(x, y);\n    }\n\n    let keyListener = new BB.KeyListener({\n        onDown: function(keyStr) {\n            if (keyStr === 'left') {\n                move(-1, 0);\n            }\n            if (keyStr === 'right') {\n                move(1, 0);\n            }\n            if (keyStr === 'up') {\n                move(0, -1);\n            }\n            if (keyStr === 'down') {\n                move(0, 1);\n            }\n        }\n    });\n\n    popup({\n        target: params.target,\n        message: `<b>${LANG('import-as-layer-title')}</b>`,\n        div: div,\n        style: isSmall ? null : {\n            width: '500px'\n        },\n        buttons: [\"Ok\", \"Cancel\"],\n        clickOnEnter: 'Ok',\n        callback: function(buttonStr) {\n            keyListener.destroy();\n            freeTransformCanvas.destroy();\n            BB.destroyEl(originalSizeBtn);\n            BB.destroyEl(fitSizeBtn);\n            BB.destroyEl(centerBtn);\n            if (buttonStr === 'Ok') {\n                params.callback(freeTransformCanvas.getTransformation(), freeTransformCanvas.getIsPixelated());\n            } else {\n                params.callback();\n            }\n        }\n    });\n\n}","import {BB} from '../../../bb/bb';\n\n/**\n * Not really generalized. UI when you drag/drop an image into window.\n * The moment you create it, it will listen.\n *\n * @param p object {onDrop: func(files, optionStr), target: DOM Element, enabledTest: func -> bool} - optionStr: 'default'|'layer'|'image'\n * @constructor\n */\nexport function KlImageDropper(p) {\n\n    //set up DOM\n    let rootEl = BB.el({\n        content: 'Drop to import',\n        css: {\n            paddingTop: '100px',\n            position: 'fixed',\n            left: '0',\n            top: '0',\n            width: '100%',\n            height: '100%',\n            background: 'rgba(50, 50, 50, 0.7)',\n            color: '#fff',\n            textShadow: '2px 2px #000',\n            textAlign: 'center',\n            fontSize: '25px'\n        }\n    });\n    let wrapperEl = BB.el({\n        css: {\n            'marginTop': '50px',\n            'display': 'flex',\n            'justifyContent': 'center'\n        }\n    });\n    let optionStyle = {\n        width: '200px',\n        padding: '50px',\n        margin: '10px',\n        //opacity: 0.5,\n        borderRadius: '20px',\n        border: '1px dashed #fff',\n        background: '#00aefe',\n        fontWeight: 'bold'\n    };\n    let optionLayerEl = BB.el({\n        content: 'As Layer',\n        css: optionStyle\n    });\n    let optionImageEl = BB.el({\n        content: 'As New Image',\n        css: optionStyle\n    });\n\n    rootEl.appendChild(wrapperEl);\n    wrapperEl.appendChild(optionLayerEl);\n    wrapperEl.appendChild(optionImageEl);\n\n\n    let rootCounter = 0;\n    let optionLayerCounter = 0;\n    let optionImageCounter = 0;\n\n    function destroy() {\n        rootCounter = 0;\n        optionLayerCounter = 0;\n        optionImageCounter = 0;\n        try {\n            p.target.removeChild(rootEl);\n        } catch (e) { }\n    }\n\n    function testAcceptType(event) {\n        try {\n            return !event.dataTransfer.types.includes('text/plain');\n        } catch(e) {\n\n        }\n        return false;\n    }\n\n    function updateOptions() {\n        let boxShadow = '0 0 20px 4px #fff';\n        if (optionLayerCounter > 0) {\n            optionLayerEl.style.boxShadow = boxShadow;\n            optionImageEl.style.boxShadow = '';\n        } else if (optionImageCounter > 0) {\n            optionLayerEl.style.boxShadow = '';\n            optionImageEl.style.boxShadow = boxShadow;\n        } else {\n            optionLayerEl.style.boxShadow = '';\n            optionImageEl.style.boxShadow = '';\n        }\n    }\n\n    BB.addEventListener(optionLayerEl,'dragenter', function() {\n        optionLayerCounter++;\n        updateOptions();\n    });\n    BB.addEventListener(optionLayerEl,'dragleave', function() {\n        optionLayerCounter--;\n        updateOptions();\n    });\n    BB.addEventListener(optionImageEl,'dragenter', function() {\n        optionImageCounter++;\n        updateOptions();\n    });\n    BB.addEventListener(optionImageEl,'dragleave', function() {\n        optionImageCounter--;\n        updateOptions();\n    });\n\n\n    function rootDragOver(event) {\n        if (!testAcceptType(event)) {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n    }\n    function rootDragEnter(event) {\n        if (!p.enabledTest() || !testAcceptType(event)) {\n            return;\n        }\n        if (rootCounter === 0) {\n            p.target.appendChild(rootEl);\n        }\n        rootCounter++;\n\n    }\n    function rootDragLeave(event) {\n        if (!testAcceptType(event) || rootCounter === 0) {\n            return;\n        }\n        rootCounter = Math.max(0, rootCounter - 1);\n        if (rootCounter === 0) {\n            p.target.removeChild(rootEl);\n        }\n\n    }\n    function rootDrop(event) {\n        if (!testAcceptType(event) || event.dataTransfer.files.length === 0) {\n            destroy();\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n\n        let optionStr = 'default';\n        if (optionLayerCounter > 0) {\n            optionStr = 'layer';\n        } else if (optionImageCounter > 0) {\n            optionStr = 'image';\n        }\n\n        p.onDrop(event.dataTransfer.files, optionStr);\n\n\n        if (rootCounter > 0) {\n            p.target.removeChild(rootEl);\n        }\n        rootCounter = 0;\n        optionLayerCounter = 0;\n        optionImageCounter = 0;\n        updateOptions();\n    }\n\n    BB.addEventListener(window,'dragover', rootDragOver, false);\n    BB.addEventListener(window,'dragenter', rootDragEnter, false);\n    BB.addEventListener(window,'dragleave', rootDragLeave, false);\n    BB.addEventListener(window,'drop', rootDrop, false);\n\n    // if something goes wrong and you're stuck with overlay\n    BB.addEventListener(rootEl, 'pointerdown', function() {\n        destroy();\n    });\n    let keyListener = new BB.KeyListener({\n        onDown: function(keyStr) {\n            if (rootCounter > 0 && keyStr === 'esc') {\n                destroy();\n            }\n        }\n    });\n\n}","import {BB} from '../../../bb/bb';\nimport {KlSmallColorSlider} from '../base-components/kl-color-slider-small';\nimport {KlSlider} from '../base-components/kl-slider';\nimport {BrushSettingService} from '../../brushes-ui/brush-setting-service';\nimport {LANG} from '../../../language/language';\n\n/**\n * Compressed HUD toolspace. When you hold ctrl+alt.\n * small color picker, brush settings\n *\n * @param p\n * @constructor\n */\nexport function OverlayToolspace(\n    p: {\n        brushSettingService: BrushSettingService; // to sync with outside\n        enabledTest: () => boolean; // calls to see if it's allowed to show\n    }\n) {\n\n    const sizeObj = {\n        width: 150,\n        svHeight: 90,\n        hHeight: 20,\n        sliderHeight: 25\n    };\n\n    let isVisible = false;\n    const div = BB.el({\n        css: {\n            position: 'absolute',\n            left: '500px',\n            top: '500px',\n            background: 'rgb(221, 221, 221)',\n            display: 'none',\n            border: '1px solid #fff',\n            boxShadow: '0 0 10px rgba(0,0,0,0.5)',\n            colorScheme: 'only light',\n        }\n    });\n    const queuedObj = {\n        color: null,\n        size: null,\n        opacity: null\n    };\n\n\n    // --- inputs ---\n\n    //color selection\n    const colorSlider = new KlSmallColorSlider({\n        width: sizeObj.width,\n        heightSV: sizeObj.svHeight,\n        heightH: sizeObj.hHeight,\n        color: p.brushSettingService.getColor(),\n        callback: function (rgbObj) {\n            selectedColorEl.style.backgroundColor = \"rgb(\" + rgbObj.r + \",\" + rgbObj.g + \",\" + rgbObj.b + \")\";\n            p.brushSettingService.setColor(rgbObj, subscriptionFunc);\n        }\n    });\n    const selectedColorEl = BB.el({\n        css: {\n            width: sizeObj.width + 'px',\n            height: sizeObj.hHeight + 'px',\n            pointerEvents: 'none'\n        }\n    });\n    {\n        const initialColor = p.brushSettingService.getColor();\n        selectedColorEl.style.backgroundColor = \"rgb(\" + initialColor.r + \",\" + initialColor.g + \",\" + initialColor.b + \")\";\n    }\n\n    div.appendChild(selectedColorEl);\n    div.appendChild(colorSlider.getElement());\n\n\n    function updateColor(rgbObj) {\n        colorSlider.setColor(rgbObj);\n        selectedColorEl.style.backgroundColor = \"rgb(\" + rgbObj.r + \",\" + rgbObj.g + \",\" + rgbObj.b + \")\";\n    }\n\n\n\n\n\n    //brushsize slider\n\n    const sizeSlider = new KlSlider({\n        label: LANG('brush-size'),\n        width: sizeObj.width,\n        height: sizeObj.sliderHeight,\n        min: 0,\n        max: 500,\n        value: 50,\n        resolution: 225,\n        eventResMs: 1000 / 30,\n        toDisplayValue: (val) => val * 2,\n        toValue: (displayValue) => displayValue / 2,\n        onChange: function(v) {\n            p.brushSettingService.setSize(v);\n        },\n        formatFunc: (displayValue) => {\n            if (displayValue < 10) {\n                return BB.round(displayValue, 1);\n            } else {\n                return Math.round(displayValue);\n            }\n        },\n    });\n    BB.css(sizeSlider.getElement(), {\n        marginTop: '2px'\n    });\n    div.appendChild(sizeSlider.getElement());\n\n    const opacitySlider = new KlSlider({\n        label: LANG('opacity'),\n        width: sizeObj.width,\n        height: sizeObj.sliderHeight,\n        min: 0,\n        max: 1,\n        value: 1,\n        resolution: 225,\n        eventResMs: 1000 / 30,\n        toDisplayValue: (val) => val * 100,\n        toValue: (displayValue) => displayValue / 100,\n        onChange: function(v) {\n            p.brushSettingService.setOpacity(v);\n        },\n    });\n    BB.css(opacitySlider.getElement(), {\n        margin: '2px 0'\n    });\n    div.appendChild(opacitySlider.getElement());\n\n\n\n    // --- general setup ---\n\n    const subscriptionFunc = function(event) {\n        if (event.type === 'color') {\n            if (!isVisible) {\n                queuedObj.color = event.value;\n            } else {\n                updateColor(event.value);\n            }\n        }\n        if (event.type === 'size') {\n            if (!isVisible) {\n                queuedObj.size = event.value;\n            } else {\n                sizeSlider.setValue(event.value);\n            }\n        }\n        if (event.type === 'opacity') {\n            if (!isVisible) {\n                queuedObj.opacity = event.value;\n            } else {\n                opacitySlider.setValue(event.value);\n            }\n        }\n        if (event.type === 'sliderConfig') {\n            sizeSlider.update(event.value.sizeSlider);\n            opacitySlider.update(event.value.opacitySlider);\n        }\n    };\n    p.brushSettingService.subscribe(subscriptionFunc);\n    {\n        const sliderConfig = p.brushSettingService.getSliderConfig();\n        sizeSlider.update(sliderConfig.sizeSlider);\n        opacitySlider.update(sliderConfig.opacitySlider);\n        sizeSlider.setValue(p.brushSettingService.getSize());\n        opacitySlider.setValue(p.brushSettingService.getOpacity());\n    }\n\n    function updateUI() {\n\n        // unfocus manual slider input\n        BB.unfocusAnyInput();\n\n        div.style.display = isVisible ? 'block' : 'none';\n        if (isVisible && mousePos) {\n            div.style.left = (mousePos.x - Math.round(sizeObj.width / 2)) + 'px';\n            div.style.top = (mousePos.y - Math.round(sizeObj.svHeight + sizeObj.hHeight * 3 / 2)) + 'px';\n        }\n    }\n\n    let mousePos = null;\n    BB.addEventListener(document, 'pointermove', function(event) {\n        mousePos = {\n            x: event.pageX,\n            y: event.pageY,\n        };\n    });\n\n    const keyListener = new BB.KeyListener({\n        onDown: function(keyStr, event, comboStr, isRepeat) {\n            if (isRepeat) {\n                return;\n            }\n            if (isVisible) {\n                isVisible = false;\n                updateUI();\n                return;\n            }\n\n            if (!p.enabledTest() || !mousePos) {\n                return;\n            }\n\n            if (['ctrl+alt', 'cmd+alt', 'alt+ctrl', 'alt+cmd'].includes(comboStr)) {\n                event.preventDefault();\n                isVisible = true;\n\n                if (queuedObj.color !== null) {\n                    updateColor(queuedObj.color);\n                    queuedObj.color = null;\n                }\n                if (queuedObj.size !== null) {\n                    sizeSlider.setValue(queuedObj.size);\n                    queuedObj.size = null;\n                }\n                if (queuedObj.opacity !== null) {\n                    opacitySlider.setValue(queuedObj.opacity);\n                    queuedObj.opacity = null;\n                }\n\n                updateUI();\n            }\n\n        },\n        onUp: function(keyStr, event, oldComboStr) {\n            if (['ctrl+alt', 'cmd+alt', 'alt+ctrl', 'alt+cmd'].includes(oldComboStr) && isVisible) {\n                isVisible = false;\n                colorSlider.end();\n                updateUI();\n            }\n        },\n        onBlur: function() {\n            if (isVisible) {\n                isVisible = false;\n                colorSlider.end();\n                updateUI();\n            }\n        }\n    });\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n\n}","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport klecksLogoImg from 'url:~/src/app/img/klecks-logo.png';\n// @ts-ignore\nimport newImageImg from 'url:~/src/app/img/ui/new-image.svg';\n// @ts-ignore\nimport importImg from 'url:~/src/app/img/ui/import.svg';\n// @ts-ignore\nimport exportImg from 'url:~/src/app/img/ui/export.svg';\n// @ts-ignore\nimport shareImg from 'url:~/src/app/img/ui/share.svg';\n// @ts-ignore\nimport helpImg from 'url:~/src/app/img/ui/help.svg';\nimport {LANG} from '../../../language/language';\n\n\n/**\n * Topmost row of buttons in toolspace (with the app logo)\n *\n * p = { // button click callbacks\n *      logoImg: img,\n *     onLogo: function(),\n *     onNew: function(),\n *     onImport: function(),\n *     onSave: function(),\n *     onShare: function(),\n *     onHelp: function()\n * }\n *\n * @param p\n * @constructor\n */\nexport function ToolspaceTopRow(p) {\n    let div = document.createElement('div');\n    BB.css(div, {\n        height: '36px',\n        //background: '#f00',\n        display: 'flex',\n        backgroundImage: 'linear-gradient(to top, rgba(255, 255, 255, 0) 20%, rgba(255, 255, 255, 0.6) 100%)'\n    });\n\n    function createButton(p) {\n        let padding = 6 + (p.extraPadding ? p.extraPadding : 0);\n        let result = BB.el({\n            className: 'toolspace-row-button nohighlight',\n            title: p.title,\n            onClick: p.onClick,\n            css: {\n                padding: p.contain ? padding + 'px 0' : ''\n            }\n        });\n        let im = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + p.image + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: p.contain ? 'contain' : '',\n                //filter: 'grayscale(1)',\n                height: '100%'\n            }\n        });\n        im.style.pointerEvents = 'none';\n        result.appendChild(im);\n        (result as any).pointerListener = new BB.PointerListener({ // because :hover causes problems w touch\n            target: result,\n            onEnterLeave: function(isOver) {\n                result.classList.toggle('toolspace-row-button-hover', isOver);\n            }\n        });\n        return result;\n    }\n\n    let logoButton = createButton({\n        onClick: p.onLogo,\n        title: LANG('home'),\n        image: p.logoImg ? p.logoImg : klecksLogoImg,\n        contain: true\n    });\n    logoButton.style.width = '45px';\n    logoButton.style.borderRight = '1px solid rgb(212, 212, 212)';\n    let newButton = createButton({\n        onClick: p.onNew,\n        title: LANG('file-new'),\n        image: newImageImg,\n        extraPadding: 1,\n        contain: true\n    });\n    let importButton = createButton({\n        onClick: p.onImport,\n        title: LANG('file-import'),\n        image: importImg,\n        extraPadding: 1,\n        contain: true\n    });\n    let saveButton = createButton({\n        onClick: p.onSave,\n        title: LANG('file-save'),\n        image: exportImg,\n        extraPadding: 1,\n        contain: true\n    });\n\n    let shareButton = null;\n    if (BB.canShareFiles()) {\n        shareButton = createButton({\n            onClick: p.onShare,\n            title: LANG('file-share'),\n            image: shareImg,\n            contain: true\n        });\n    }\n    let helpButton = createButton({\n        onClick: p.onHelp,\n        title: LANG('help'),\n        image: helpImg,\n        contain: true\n    });\n\n    div.appendChild(logoButton);\n    div.appendChild(newButton);\n    div.appendChild(importButton);\n    div.appendChild(saveButton);\n    if (shareButton) {\n        div.appendChild(shareButton);\n    }\n    div.appendChild(helpButton);\n\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    }\n}","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"klecks-logo.50dcc3be.png\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"new-image.0e74b5b6.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"import.2faf5a14.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"export.822eaf7b.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"share.dd2df5e4.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"help.661530ce.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {dialogCounter} from '../modals/modal-count';\n// @ts-ignore\nimport toolPaintImg from 'url:~/src/app/img/ui/tool-paint.svg';\n// @ts-ignore\nimport toolFillImg from 'url:~/src/app/img/ui/tool-fill.svg';\n// @ts-ignore\nimport toolGradientImg from 'url:~/src/app/img/ui/tool-gradient.svg';\n// @ts-ignore\nimport toolTextImg from 'url:~/src/app/img/ui/tool-text.svg';\n// @ts-ignore\nimport toolShapeImg from 'url:~/src/app/img/ui/tool-shape.svg';\n// @ts-ignore\nimport caretDownImg from 'url:~/src/app/img/ui/caret-down.svg';\nimport {LANG} from '../../../language/language';\n\n/**\n * Toolrow Dropdown. The button where you select: brush, fill, select, transform, etc.\n *\n * p = {\n *     onChange: func(activeStr)\n * }\n *\n * activeStr = 'draw' | 'fill' | 'text' | 'shape' | 'gradient'\n *\n * @param p\n * @constructor\n */\nexport function ToolDropdown(p) {\n\n    let optionArr = ['draw', 'fill', 'gradient', 'text', 'shape'];\n    let imArr = [\n        toolPaintImg,\n        toolFillImg,\n        toolGradientImg,\n        toolTextImg,\n        toolShapeImg\n    ];\n    let titleArr = [\n        `${LANG('tool-brush')} [B]`,\n        `${LANG('tool-paint-bucket')} [G]`,\n        `${LANG('tool-gradient')} [G]`,\n        `${LANG('tool-text')} [T]`,\n        `${LANG('tool-shape')} [U]`,\n    ];\n    let currentActiveIndex = 0;\n    let isActive = true;\n    let isOpen = false;\n\n    //preload images\n    setTimeout(function() {\n        for (let i = 1; i < imArr.length; i++) {\n            let im = new Image();\n            im.src = imArr[i];\n        }\n    }, 100);\n\n    let smallMargin = '6px 0';\n    let div = BB.el({\n        css: {\n            position: 'relative',\n            flexGrow: '1'\n        }\n    });\n\n    let openTimeout;\n    let isDragging = false;\n    let startX, startY;\n    let pointerListener;\n    if (BB.hasPointerEvents) {\n        pointerListener = new BB.PointerListener({\n            target: div,\n            maxPointers: 1,\n            onPointer: function(event) {\n                if (event.type === 'pointerdown') {\n                    if (isOpen) {\n                        return;\n                    }\n\n                    openTimeout = setTimeout(function() {\n                        showDropdown();\n                    }, 400);\n                    isDragging = true;\n                    startX = event.pageX;\n                    startY = event.pageY;\n\n                } else if (event.type === 'pointermove') {\n                    if (isDragging && !isOpen && BB.dist(startX, startY, event.pageX, event.pageY) > 5) {\n                        clearTimeout(openTimeout);\n                        showDropdown();\n                    }\n\n                } else if (event.type === 'pointerup') {\n                    clearTimeout(openTimeout);\n                    if (isOpen && isDragging) {\n                        let target = document.elementFromPoint(event.pageX, event.pageY);\n                        for (let i = 0; i < dropdownBtnArr.length; i++) {\n                            if (target === dropdownBtnArr[i].wrapper) {\n                                closeDropdown();\n                                isActive = true;\n                                currentActiveIndex = i;\n                                updateButton();\n                                p.onChange(optionArr[currentActiveIndex]);\n                                break;\n                            }\n                        }\n                    }\n                    isDragging = false;\n                }\n            }\n        });\n    }\n\n    let activeButton = BB.el({\n        parent: div,\n        className: 'toolspace-row-button nohighlight toolspace-row-button-activated',\n        title: titleArr[currentActiveIndex],\n        onClick: function(e) {\n            if (isActive && !isOpen) {\n                e.preventDefault();\n                e.stopPropagation();\n                showDropdown();\n                return;\n            }\n\n            isActive = true;\n            p.onChange(optionArr[currentActiveIndex]);\n            if (isOpen) {\n                closeDropdown();\n            }\n        },\n        css: {\n            padding: '10px 0',\n            pointerEvents: 'auto',\n            height: '100%',\n            boxSizing: 'border-box'\n        }\n    });\n\n    let activeButtonIm = BB.el({\n        parent: activeButton,\n        css: {\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center',\n            backgroundSize: 'contain',\n            width: 'calc(100% - 7px)',\n            height: '100%',\n            pointerEvents: 'none',\n            opacity: '0.75',\n        }\n    });\n\n    let arrowButton = BB.el({\n        parent: activeButton,\n        css: {\n            position: 'absolute',\n            right: '1px',\n            bottom: '1px',\n            width: '18px',\n            height: '18px',\n            //background: '#aaa',\n            //borderRadius: '2px',\n            cursor: 'pointer',\n\n            backgroundImage: 'url(\\'' + caretDownImg + '\\')',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center',\n            backgroundSize: '60%'\n        },\n        title: 'More Tools',\n        onClick: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            showDropdown();\n        }\n    });\n\n\n    let overlay = BB.el({\n        css: {\n            position: 'absolute',\n            //background: 'rgba(255,0,0,0.5)',\n            left: '0',\n            top: '0',\n            right: '0',\n            bottom: '0'\n        }\n    });\n    let overlayPointerListener = new BB.PointerListener({\n        target: overlay,\n        pointers: 1,\n        onPointer: function(e) {\n            if (e.type === 'pointerdown') {\n                e.eventPreventDefault();\n                closeDropdown();\n            }\n        }\n    });\n\n    let dropdownWrapper = BB.el({\n        className: 'tool-dropdown-wrapper',\n        css: {\n            position: 'absolute',\n            width: '100%',\n            height: (100 * (optionArr.length - 1)) + '%',\n            top: '100%',\n            left: '0',\n            zIndex: '1',\n            boxSizing: 'border-box',\n            cursor: 'pointer',\n            transition: 'height 0.1s ease-in-out, opacity 0.1s ease-in-out',\n            borderBottomLeftRadius: '5px',\n            borderBottomRightRadius: '5px',\n            overflow: 'hidden',\n        }\n    });\n\n    let dropdownBtnArr = [];\n\n    function createDropdownButton(p) {\n        let result = {};\n\n        let wrapper = BB.el({\n            parent: dropdownWrapper,\n            className: 'tool-dropdown-button',\n            title: p.title,\n            css: {\n                padding: '10px 0',\n                height: (100 / (optionArr.length - 1)) + '%',\n                boxSizing: 'border-box'\n            },\n            onClick: function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n                p.onClick(p.index, p.id);\n            }\n        });\n        (result as any).wrapper = wrapper;\n        let im = BB.el({\n            parent: wrapper,\n            css: {\n                backgroundImage: 'url(\\'' + p.image + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: 'contain',\n                height: '100%',\n                pointerEvents: 'none',\n                opacity: '0.75'\n            }\n        });\n\n        // --- interface ---\n        (result as any).show = function(b) {\n            wrapper.style.display = b ? 'block' : 'none';\n        };\n\n        (result as any).setIsSmall = function(b) {\n            wrapper.style.padding = b ? smallMargin : '10px 0';\n        };\n\n        return result;\n    }\n\n    function onClickDropdownBtn(index, id) {\n        closeDropdown();\n\n        isActive = true;\n        currentActiveIndex = index;\n\n        updateButton();\n\n        p.onChange(optionArr[currentActiveIndex]);\n    }\n\n    for (let i = 0; i < optionArr.length; i++) {\n        dropdownBtnArr.push(createDropdownButton({\n            index: i,\n            id: optionArr[i],\n            image: imArr[i],\n            title: titleArr[i],\n            onClick: onClickDropdownBtn\n        }));\n    }\n\n    function showDropdown() {\n        dialogCounter.increase(0.5);\n        isOpen = true;\n\n        for (let i = 0; i < optionArr.length; i++) {\n            dropdownBtnArr[i].show(currentActiveIndex !== i);\n        }\n\n        arrowButton.style.display = 'none';\n        div.style.zIndex = '1';\n        document.body.appendChild(overlay);\n        div.appendChild(dropdownWrapper);\n    }\n\n    function closeDropdown() {\n        dialogCounter.decrease(0.5);\n        isOpen = false;\n        arrowButton.style.removeProperty('display');\n        div.style.removeProperty('z-index');\n        document.body.removeChild(overlay);\n\n        div.removeChild(dropdownWrapper);\n    }\n\n    function updateButton() {\n        activeButton.title = titleArr[currentActiveIndex];\n        activeButtonIm.style.backgroundImage = 'url(\\'' + imArr[currentActiveIndex] + '\\')';\n    }\n    updateButton();\n\n\n    // --- interface ---\n\n    this.setIsSmall = function(b) {\n        activeButton.style.padding = b ? smallMargin : '10px 0';\n        for (let i = 0; i < optionArr.length; i++) {\n            dropdownBtnArr[i].setIsSmall(b);\n        }\n        if (b) {\n            arrowButton.style.width = '14px';\n            arrowButton.style.height = '14px';\n        } else {\n            arrowButton.style.width = '18px';\n            arrowButton.style.height = '18px';\n        }\n    };\n\n    this.setActive = function(activeStr) {\n        if (optionArr.includes(activeStr)) {\n            isActive = true;\n            for (let i = 0; i < optionArr.length; i++) {\n                if (optionArr[i] === activeStr) {\n                    currentActiveIndex = i;\n                    break;\n                }\n            }\n            activeButton.classList.add('toolspace-row-button-activated');\n            updateButton();\n        } else {\n            isActive = false;\n            activeButton.classList.remove('toolspace-row-button-activated');\n        }\n    };\n\n    this.getActive = function() {\n        return optionArr[currentActiveIndex];\n    };\n\n    this.getElement = function() {\n        return div;\n    };\n}","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tool-paint.491ea800.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tool-fill.78dd7c84.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tool-gradient.21f1022a.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tool-text.75eca96c.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tool-shape.ed4e0ce8.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"caret-down.52fe4690.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {ToolDropdown} from './tool-dropdown';\n// @ts-ignore\nimport toolHandImg from 'url:~/src/app/img/ui/tool-hand.svg';\n// @ts-ignore\nimport toolZoomInImg from 'url:~/src/app/img/ui/tool-zoom-in.svg';\n// @ts-ignore\nimport toolZoomOutImg from 'url:~/src/app/img/ui/tool-zoom-out.svg';\n// @ts-ignore\nimport toolUndoImg from 'url:~/src/app/img/ui/tool-undo.svg';\nimport {LANG} from '../../../language/language';\n\n\n/**\n * Row of buttons in toolspace. image-operations (draw, hand), zoom, undo/redo\n * Need to do syncing. So tool is correct, and zoom/undo/redo buttons are properly enabled/disabled\n * heights: 54px tall, 36px small -> via setIsSmall\n *\n * p = {\n *     onActivate: function(activeStr), // clicking on tool button - activating it\n *     onZoomIn: function(),\n *     onZoomOut: function(),\n *     onUndo: function(),\n *     onRedo: function(),\n * }\n *\n * activeStr = 'draw' | 'hand' | 'fill' | 'text'\n *\n * @param p\n * @constructor\n */\nexport function ToolspaceToolRow(p) {\n    let div = document.createElement('div');\n    BB.css(div, {\n        height: '54px',\n        //height: '36px',\n        display: 'flex',\n        backgroundImage: 'linear-gradient(to top, rgba(255, 255, 255, 0) 20%, rgba(255, 255, 255, 0.6) 100%)'\n    });\n\n    let currentActiveStr = 'draw'; // 'draw' | 'hand' | 'fill'\n\n    function setActive(activeStr, doEmit?) {\n        if (currentActiveStr === activeStr) {\n            return;\n        }\n\n        currentActiveStr = activeStr;\n\n        toolDropdown.setActive(currentActiveStr);\n        handButton.classList.toggle('toolspace-row-button-activated', currentActiveStr === 'hand');\n\n        if (doEmit) {\n            p.onActivate(currentActiveStr);\n        }\n    }\n\n    function createButton(p) {\n\n        let smallMargin = p.doLighten ? '6px 0' : '8px 0';\n\n        let result = BB.el({\n            className: 'toolspace-row-button nohighlight',\n            //title: p.title,\n            onClick: p.onClick,\n            css: {\n                padding: p.contain ? '10px 0' : ''\n            }\n        });\n        let im = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + p.image + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: p.contain ? 'contain' : '',\n                //filter: 'grayscale(1)',\n                height: '100%',\n                transform: p.doMirror ? 'scale(-1, 1)' : '',\n                pointerEvents: 'none',\n                opacity: p.doLighten ? '0.75' : '1'\n            }\n        });\n        result.appendChild(im);\n        (result as any).pointerListener = new BB.PointerListener({ // because :hover causes problems w touch\n            target: result,\n            onEnterLeave: function(isOver) {\n                result.classList.toggle('toolspace-row-button-hover', isOver);\n            }\n        });\n        (result as any).setIsSmall = function(b) {\n            result.style.padding = p.contain ? (b ? smallMargin : '10px 0') : '';\n        }\n        return result;\n    }\n\n\n    function createTriangleButton(p) { // because IE and Edge don't support clip path\n\n        let result = document.createElement('div');\n        BB.css(result, {\n            flexGrow: '1',\n            position: 'relative'\n        });\n\n        let svg = BB.createSvg({\n            elementType: 'svg',\n            width: '67px', // can't think of a way doing with percentage\n            height: '54px',\n            viewBox: '0 0 100 100',\n            preserveAspectRatio: 'none'\n        });\n        BB.css(svg, {\n            position: 'absolute',\n            left: '0',\n            top: '0'\n        });\n\n        let blurRadius = 10;\n        let blurOffsetX = 2;\n        let blurOffsetY = 2;\n\n        let defs = BB.createSvg( { // inset shadow via svg\n            elementType: 'defs',\n            childrenArr: [\n                {\n                    elementType: 'filter',\n                    id: 'innershadow',\n                    x0: '-50%',\n                    y0: '-50%',\n                    width: '200%',\n                    height: '200%',\n                    childrenArr: [\n                        {\n                            elementType: 'feGaussianBlur',\n                            in: 'SourceAlpha',\n                            stdDeviation: '' + blurRadius,\n                            result: 'blur'\n                        }, {\n                            elementType: 'feOffset',\n                            dx: '' + blurOffsetX,\n                            dy: '' + blurOffsetY\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'SourceAlpha',\n                            operator: 'arithmetic',\n                            k2: '-1',\n                            k3: '1',\n                            result: 'shadowDiff'\n                        },\n\n                        {\n                            elementType: 'feFlood',\n                            'flood-color': '#000',\n                            'flood-opacity': '0.2'\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'shadowDiff',\n                            operator: 'in'\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'SourceGraphic',\n                            operator: 'over',\n                            result: 'firstfilter'\n                        },\n\n                        {\n                            elementType: 'feGaussianBlur',\n                            in: 'firstfilter',\n                            stdDeviation: '' + blurRadius,\n                            result: 'blur2'\n                        }, {\n                            elementType: 'feOffset',\n                            dx: '' + blurOffsetX,\n                            dy: '' + blurOffsetY\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'firstfilter',\n                            operator: 'arithmetic',\n                            k2: '-1',\n                            k3: '1',\n                            result: 'shadowDiff'\n                        },\n\n                        {\n                            elementType: 'feFlood',\n                            'flood-color': '#000',\n                            'flood-opacity': '0.2'\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'shadowDiff',\n                            operator: 'in'\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'firstfilter',\n                            operator: 'over'\n                        }\n                    ]\n                }\n            ]\n        });\n\n\n        let svgTriangleLeft = BB.createSvg({\n            elementType: 'path',\n            'vector-effect': 'non-scaling-stroke',\n            d: 'M0,0 L 100,0 0,100 z',\n            fill: 'rgba(0,0,0,0)',\n            class: 'toolspace-svg-triangle-button'\n        });\n        svgTriangleLeft.onclick = function() {\n            p.onLeft();\n            svgTriangleLeft.classList.remove('toolspace-svg-triangle-button-hover');\n        };\n\n        let svgTriangleRight = BB.createSvg({\n            elementType: 'path',\n            'vector-effect': 'non-scaling-stroke',\n            d: 'M100,100 L 100,0 0,100 z',\n            fill: 'rgba(0,0,0,0)',\n            class: 'toolspace-svg-triangle-button'\n        });\n        svgTriangleRight.onclick = function() {\n            p.onRight();\n            svgTriangleRight.classList.remove('toolspace-svg-triangle-button-hover');\n        };\n\n        // because :hover causes problems w touch\n        (result as any).leftPointerListener = new BB.PointerListener({\n            target: svgTriangleLeft,\n            onEnterLeave: function(isOver) {\n                svgTriangleLeft.classList.toggle('toolspace-svg-triangle-button-hover', isOver);\n            }\n        });\n        (result as any).rightPointerListener = new BB.PointerListener({\n            target: svgTriangleRight,\n            onEnterLeave: function(isOver) {\n                svgTriangleRight.classList.toggle('toolspace-svg-triangle-button-hover', isOver);\n            }\n        });\n\n\n        svg.appendChild(defs);\n        svg.appendChild(svgTriangleLeft);\n        svg.appendChild(svgTriangleRight);\n        result.appendChild(svg);\n\n\n        let leftIm = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + p.leftImage + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundSize: 'contain',\n                width: '20px',\n                height: '20px',\n                position: 'absolute',\n                left: '10px',\n                top: '8px',\n                //transform: p.doMirror ? 'scale(-1, 1)' : '',\n                pointerEvents: 'none'\n            }\n        });\n        result.appendChild(leftIm);\n\n\n        let rightIm = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + (p.rightImage ? p.rightImage : p.leftImage) + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundSize: 'contain',\n                width: '20px',\n                height: '20px',\n                position: 'absolute',\n                right: '10px',\n                bottom: '8px',\n                transform: p.rightImage ? '' : 'scale(-1, 1)',\n                pointerEvents: 'none'\n            }\n        });\n        result.appendChild(rightIm);\n\n\n\n\n\n        (result as any).setIsEnabledLeft = function(b) {\n            svgTriangleLeft.classList.toggle('toolspace-row-button-disabled', !b);\n            leftIm.classList.toggle('toolspace-row-button-disabled', !b);\n        };\n        (result as any).setIsEnabledRight = function(b) {\n            svgTriangleRight.classList.toggle('toolspace-row-button-disabled', !b);\n            rightIm.classList.toggle('toolspace-row-button-disabled', !b);\n        };\n\n        return result;\n    }\n\n    function createTriangleButtonViaClipPath(p) {\n        let result = document.createElement('div');\n        BB.css(result, {\n            flexGrow: '1',\n            position: 'relative'\n        });\n\n\n        let leftButton = BB.el({\n            className: 'toolspace-triangle-button',\n            onClick: p.onLeft,\n            css: {\n                clipPath: 'polygon(0% 0%, 100% 0%, 100% 0%, 0% 100%)'\n            }\n        });\n\n        let leftIm = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + p.leftImage + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundSize: 'contain',\n                width: '20px',\n                height: '20px',\n                position: 'absolute',\n                left: '10px',\n                top: '8px',\n                //transform: p.doMirror ? 'scale(-1, 1)' : '',\n                pointerEvents: 'none'\n            }\n        });\n        leftButton.appendChild(leftIm);\n\n\n\n        let rightButton = BB.el({\n            className: 'toolspace-triangle-button',\n            onClick: p.onRight,\n            css: {\n                clipPath: 'polygon(0% 100%, 100% 0%, 100% 100%, 0% 100%)'\n            }\n        });\n\n        let rightIm = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + (p.rightImage ? p.rightImage : p.leftImage) + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundSize: 'contain',\n                width: '20px',\n                height: '20px',\n                position: 'absolute',\n                right: '10px',\n                bottom: '8px',\n                transform: p.rightImage ? '' : 'scale(-1, 1)',\n                pointerEvents: 'none'\n            }\n        });\n        rightButton.appendChild(rightIm);\n\n\n\n        result.appendChild(leftButton);\n        result.appendChild(rightButton);\n\n\n        // because :hover causes problems w touch\n        (result as any).leftPointerListener = new BB.PointerListener({\n            target: leftButton,\n            onEnterLeave: function(isOver) {\n                leftButton.classList.toggle('toolspace-row-button-hover', isOver);\n            }\n        });\n        (result as any).rightPointerListener = new BB.PointerListener({\n            target: rightButton,\n            onEnterLeave: function(isOver) {\n                rightButton.classList.toggle('toolspace-row-button-hover', isOver);\n            }\n        });\n\n\n\n        (result as any).setIsEnabledLeft = function(b) {\n            leftButton.classList.toggle('toolspace-row-button-disabled', !b);\n        };\n        (result as any).setIsEnabledRight = function(b) {\n            rightButton.classList.toggle('toolspace-row-button-disabled', !b);\n        };\n        return result;\n    }\n\n    let toolDropdown = new ToolDropdown({\n        onChange: function(activeStr) {\n            setActive(activeStr, true);\n        }\n    });\n    div.appendChild(toolDropdown.getElement());\n\n    let handButton = createButton({\n        onClick: function() {\n            setActive('hand', true);\n        },\n        image: toolHandImg,\n        contain: true,\n        doLighten: true\n    });\n    handButton.style.borderRight = '1px solid rgb(212, 212, 212)';\n    handButton.title = LANG('tool-hand');\n    div.appendChild(handButton);\n\n    let zoomInNOutButton = createTriangleButton({\n        onLeft: p.onZoomIn,\n        onRight: p.onZoomOut,\n        leftImage: toolZoomInImg,\n        rightImage: toolZoomOutImg,\n    });\n    zoomInNOutButton.title = LANG('tool-zoom');\n    div.appendChild(zoomInNOutButton);\n\n    let zoomInButton = createButton({\n        onClick: p.onZoomIn,\n        image: toolZoomInImg,\n        contain: true\n    });\n    zoomInButton.title = LANG('zoom-in');\n    div.appendChild(zoomInButton);\n\n    let zoomOutButton = createButton({\n        onClick: p.onZoomOut,\n        image: toolZoomOutImg,\n        contain: true\n    });\n    zoomOutButton.title = LANG('zoom-out');\n    div.appendChild(zoomOutButton);\n\n    let undoNRedoButton = createTriangleButton({\n        onLeft: p.onUndo,\n        onRight: p.onRedo,\n        leftImage: toolUndoImg,\n        rightImage: null,\n    });\n    undoNRedoButton.title = LANG('tool-undo-redo');\n    (undoNRedoButton as any).setIsEnabledLeft(false);\n    (undoNRedoButton as any).setIsEnabledRight(false);\n    div.appendChild(undoNRedoButton);\n\n    let undoButton = createButton({\n        onClick: p.onUndo,\n        image: toolUndoImg,\n        contain: true\n    });\n    undoButton.title = LANG('undo');\n    undoButton.classList.add('toolspace-row-button-disabled');\n    div.appendChild(undoButton);\n\n    let redoButton = createButton({\n        onClick: p.onRedo,\n        image: toolUndoImg,\n        contain: true,\n        doMirror: true\n    });\n    redoButton.title = LANG('redo');\n    redoButton.classList.add('toolspace-row-button-disabled');\n    div.appendChild(redoButton);\n\n    zoomInButton.style.display = 'none';\n    zoomOutButton.style.display = 'none';\n    undoButton.style.display = 'none';\n    redoButton.style.display = 'none';\n\n\n\n\n\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n    this.setIsSmall = function(b) {\n        BB.css(div, {\n            height: b ? '36px' : '54px'\n        });\n\n        toolDropdown.setIsSmall(b);\n        (handButton as any).setIsSmall(b);\n        (zoomInButton as any).setIsSmall(b);\n        (zoomOutButton as any).setIsSmall(b);\n        (undoButton as any).setIsSmall(b);\n        (redoButton as any).setIsSmall(b);\n\n        if (b) {\n            zoomInNOutButton.style.display = 'none';\n            undoNRedoButton.style.display = 'none';\n            zoomInButton.style.display = 'block';\n            zoomOutButton.style.display = 'block';\n            undoButton.style.display = 'block';\n            redoButton.style.display = 'block';\n        } else {\n            zoomInNOutButton.style.display = 'block';\n            undoNRedoButton.style.display = 'block';\n            zoomInButton.style.display = 'none';\n            zoomOutButton.style.display = 'none';\n            undoButton.style.display = 'none';\n            redoButton.style.display = 'none';\n        }\n\n    };\n\n    this.setEnableZoomIn = function(b) {\n        zoomInButton.classList.toggle('toolspace-row-button-disabled', !b);\n        (zoomInNOutButton as any).setIsEnabledLeft(b);\n    };\n    this.setEnableZoomOut = function(b) {\n        zoomOutButton.classList.toggle('toolspace-row-button-disabled', !b);\n        (zoomInNOutButton as any).setIsEnabledRight(b);\n    };\n    this.setEnableUndo = function(b) {\n        undoButton.classList.toggle('toolspace-row-button-disabled', !b);\n        (undoNRedoButton as any).setIsEnabledLeft(b);\n    };\n    this.setEnableRedo = function(b) {\n        redoButton.classList.toggle('toolspace-row-button-disabled', !b);\n        (undoNRedoButton as any).setIsEnabledRight(b);\n    };\n    this.setActive = function(activeStr) {\n        setActive(activeStr);\n    };\n    this.getActive = function() {\n        return currentActiveStr;\n    };\n\n}","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tool-hand.5d28f3c5.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tool-zoom-in.08f48a21.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tool-zoom-out.16f7d078.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tool-undo.f047eac2.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {Select} from '../base-components/select';\nimport {LANG} from '../../../language/language';\n\n/**\n * Ui to select stabilizer level. 4 options. returned as 0-3\n *\n * p = {\n *     smoothing: number, // initial level 0-3\n *     onSelect: function(level number) // 0-3, when level changes\n * }\n *\n * @param p\n * @constructor\n */\nexport function ToolspaceStabilizerRow(p) {\n\n    let div = BB.el({\n        tagName: 'label',\n        content: LANG('stabilizer') + '&nbsp;',\n        title: LANG('stabilizer-title'),\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            fontSize: '13px',\n            color: 'rgba(0,0,0,0.6)'\n        }\n    });\n\n    let strengthSelect = new Select({\n        optionArr: [\n            ['0', '0'],\n            ['1', '1'],\n            ['2', '2'],\n            ['3', '3'],\n            ['4', '4'],\n            ['5', '5']\n        ],\n        initValue: p.smoothing,\n        onChange: function(val) {\n            p.onSelect(parseInt(val));\n        }\n    });\n    div.appendChild(strengthSelect.getElement());\n\n    let pointerListener = new BB.PointerListener({\n        target: div,\n        onWheel: function(e) {\n            strengthSelect.setDeltaValue(e.deltaY);\n        }\n    });\n\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n}","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport invertedBorderImg from 'url:~/src/app/img/ui/inverted-border.svg';\n\n/**\n * row of tabs. uses css class .tabrow-tab\n *\n * p = {\n *     initialId: string, // e.g. 'draw'\n *     useAccent: boolean,\n *     tabArr: [\n *         {\n *             id: string, // e.g. 'draw',\n *             label: string, // optional\n *             image: string, // optional background image\n *             title: string, // optional\n *             isVisible: boolean, // optional - default is true\n *             onOpen: function(),\n *             onClose: function(),\n *             css: {...},\n *         }\n *     ]\n * }\n *\n * @param p\n * @constructor\n */\nexport function TabRow(p) {\n    let _this = this;\n    let height = 35;\n    let div = BB.el({\n        className: 'tabrow',\n        css: {\n            height: height + 'px'\n        }\n    });\n\n    let tabArr = []; //creates its own internal arr\n    let openedTabObj = null;\n\n    const roundSize = 10;\n    const roundRight = BB.el({\n        css: {\n            width: roundSize + 'px',\n            height: roundSize + 'px',\n            backgroundImage: `url('${invertedBorderImg}')`,\n            backgroundSize: 'cover',\n            position: 'absolute',\n            right: -roundSize + 'px',\n            bottom: '0',\n            pointerEvents: 'none',\n        }\n    });\n    const roundLeft = BB.el({\n        css: {\n            width: roundSize + 'px',\n            height: roundSize + 'px',\n            backgroundImage: `url('${invertedBorderImg}')`,\n            backgroundSize: 'cover',\n            position: 'absolute',\n            left: -roundSize + 'px',\n            bottom: '0',\n            transform: 'scale(-1,1)',\n            pointerEvents: 'none',\n        }\n    });\n\n    function createTab(pTabObj, initialId, useAccent) {\n        let result: any = {\n            id: pTabObj.id,\n            isVisible: 'isVisible' in pTabObj ? pTabObj.isVisible : true,\n            onOpen: pTabObj.onOpen,\n            onClose: pTabObj.onClose,\n            update: function(openedTabObj) {\n                tabDiv.className = openedTabObj === result ? (useAccent ? 'tabrow-tab tabrow-tab-opened-accented' : 'tabrow-tab tabrow-tab-opened') : 'tabrow-tab';\n                tabDiv.style.display = result.isVisible ? 'block' : 'none';\n            }\n        };\n        let tabDiv = BB.el({\n            content: 'label' in pTabObj ? pTabObj.label : '',\n            title: 'title' in pTabObj ? pTabObj.title : undefined,\n            className: initialId === result.id ? (useAccent ? 'tabrow-tab tabrow-tab-opened-accented' : 'tabrow-tab tabrow-tab-opened') : 'tabrow-tab',\n            css: {\n                lineHeight: height + 'px',\n                display: result.isVisible ? 'block' : 'none',\n                zIndex: '0',\n            },\n            onClick: function() {\n                if (openedTabObj === result) {\n                    return;\n                }\n                _this.open(result.id);\n            }\n        });\n        result.div = tabDiv;\n        if ('image' in pTabObj) {\n            BB.css(tabDiv, {\n                backgroundImage: 'url(\\'' + pTabObj.image + '\\')',\n                backgroundSize: (height - 7) + 'px'\n            });\n        }\n        if ('css' in pTabObj) {\n            BB.css(tabDiv, pTabObj.css);\n        }\n        div.appendChild(tabDiv);\n\n        let pointerListener = new BB.PointerListener({ // because :hover causes problems w touch\n            target: tabDiv,\n            onEnterLeave: function(isOver) {\n                tabDiv.classList.toggle('tabrow-tab-hover', isOver);\n            }\n        });\n\n        if (initialId === result.id) {\n            result.onOpen();\n            result.div.appendChild(roundRight);\n            result.div.appendChild(roundLeft);\n        } else {\n            result.onClose();\n        }\n\n        return result;\n    }\n\n    for (let i = 0; i < p.tabArr.length; i++) {\n        tabArr.push(createTab(p.tabArr[i], p.initialId, p.useAccent));\n    }\n\n    for (let i = 0; i < tabArr.length; i++) {\n        if (tabArr[i].id === p.initialId) {\n            openedTabObj = tabArr[i];\n        }\n    }\n    if (openedTabObj === null) {\n        throw 'invalid initialId';\n    }\n\n    function update() {\n        for (let i = 0; i < tabArr.length; i++) {\n            tabArr[i].update(openedTabObj);\n        }\n    }\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n\n    this.open = function(tabId) {\n        for (let i = 0; i < tabArr.length; i++) {\n            if (tabArr[i].id === tabId) {\n                if (openedTabObj === tabArr[i]) { // already open\n                    return;\n                }\n                openedTabObj.onClose();\n                openedTabObj = tabArr[i];\n                openedTabObj.onOpen();\n                openedTabObj.div.appendChild(roundRight);\n                openedTabObj.div.appendChild(roundLeft);\n                update();\n                return;\n            }\n        }\n        throw 'TabRow.open - invalid tabId';\n    };\n\n    this.getOpenedTabId = function() {\n        return '' + openedTabObj.id;\n    };\n\n    this.setIsVisible = function(tabId, isVisible) {\n        for (let i = 0; i < tabArr.length; i++) {\n            if (tabArr[i].id === tabId) {\n                tabArr[i].isVisible = !!isVisible;\n                update();\n                return;\n            }\n        }\n        throw 'TabRow.setIsVisible - invalid tabId';\n    };\n}","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"inverted-border.635f92fd.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport angleImg from 'url:~/src/app/img/ui/angle.svg';\n// @ts-ignore\nimport rotateImg from 'url:~/src/app/img/ui/edit-rotate.svg';\nimport {LANG} from '../../../language/language';\n\n/**\n * Ui, when hand tool tab is open.\n *\n * p = {\n *     scale: number, // initial value\n *     angleDeg: number, // initial value\n *     onReset: function(),\n *     onFit: function(),\n *     onAngleChange: function(angleDeg number, isRelative number)\n * }\n *\n * @param p\n * @constructor\n */\nexport function HandUi(p) {\n    let div = BB.el({\n        css: {\n            margin: '10px'\n        }\n    });\n    let isVisible = true;\n    let scale = p.scale;\n    let angleDeg = p.angleDeg;\n\n    let row1 = BB.el({\n        css: {\n            marginBottom: '10px',\n            display: 'flex'\n        }\n    });\n    let row2 = BB.el({\n        css: {\n            display: 'flex',\n            marginBottom: '10px',\n        }\n    });\n    let row3 = BB.el({\n        css: {\n            display: 'flex'\n        }\n    });\n    div.append(row1, row2, row3);\n\n\n    let scaleEl = BB.el({\n        css: {\n            width: '55px',\n            userSelect: 'none'\n        }\n    });\n    row1.appendChild(scaleEl);\n\n    let angleIm = new Image();\n    angleIm.src = angleImg;\n    BB.css(angleIm, {\n        verticalAlign: 'bottom',\n        width: '20px',\n        height: '20px',\n        marginRight: '5px',\n        borderRadius: '10px',\n        background: 'rgba(0,0,0,0.2)',\n        userSelect: 'none'\n    });\n    row1.appendChild(angleIm);\n\n    let angleEl = BB.el({\n        css: {\n            userSelect: 'none'\n        }\n    });\n    row1.appendChild(angleEl);\n\n\n    function update() {\n        scaleEl.innerHTML = Math.round(scale * 100) + '%';\n        angleEl.innerHTML =  Math.round(angleDeg) + '';\n\n\n        angleIm.style.transform = 'rotate(' + angleDeg + 'deg)';\n        if (angleDeg % 90 === 0) {\n            angleIm.style.boxShadow = 'inset 0 0 0 1px rgba(255,255,255, 1), 0 0 0 1px rgba(0, 0, 0, 0.3)';\n        } else {\n            angleIm.style.boxShadow = '';\n        }\n    }\n    update();\n\n\n    let resetButton = BB.el({\n        tagName: 'button',\n        content: LANG('hand-reset'),\n        onClick: p.onReset\n    });\n    BB.makeUnfocusable(resetButton);\n\n    let fitButton = BB.el({\n        tagName: 'button',\n        content: LANG('hand-fit'),\n        css: {\n            marginLeft: '10px'\n        },\n        onClick: p.onFit\n    });\n    BB.makeUnfocusable(fitButton);\n    row2.append(resetButton, fitButton);\n\n    let leftRotateButton = BB.el({\n        tagName: 'button',\n        content: '<img height=\"20\" src=\"' + rotateImg + '\" alt=\"Rotate\" style=\"transform: scale(-1, 1)\"/>',\n        onClick: function() {\n            p.onAngleChange(-15, true);\n        }\n    });\n    BB.makeUnfocusable(leftRotateButton);\n\n    let resetAngleButton = BB.el({\n        tagName: 'button',\n        content: '0',\n        css: {\n            marginLeft: '10px'\n        },\n        onClick: function() {\n            p.onAngleChange(0);\n        }\n    });\n    BB.makeUnfocusable(resetAngleButton);\n\n    let rightRotateButton = BB.el({\n        tagName: 'button',\n        content: '<img height=\"20\" src=\"' + rotateImg + '\" alt=\"Rotate\"/>',\n        css: {\n            marginLeft: '10px'\n        },\n        onClick: function() {\n            p.onAngleChange(15, true);\n        }\n    });\n    BB.makeUnfocusable(rightRotateButton);\n    row3.append(leftRotateButton, resetAngleButton, rightRotateButton);\n\n\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n    this.setIsVisible = function(pIsVisible) {\n        isVisible = !!pIsVisible;\n        div.style.display = isVisible ? 'block' : 'none';\n        if (isVisible) {\n            update();\n        }\n    };\n    this.update = function(pScale, pAngleDeg) {\n        scale = pScale;\n        angleDeg = pAngleDeg;\n        if (isVisible) {\n            update();\n        }\n    };\n}","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-rotate.657da0c7.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {KlSlider} from '../base-components/kl-slider';\nimport {Select} from '../base-components/select';\nimport {Checkbox} from '../base-components/checkbox';\nimport {LANG} from '../../../language/language';\n\n/**\n * Paint Bucket tab contents (color slider, opacity slider, etc)\n *\n * p = {\n *     colorSlider: KlColorSlider// when opening tab, inserts it (snatches it from where else it was)\n * }\n *\n * @param p\n * @constructor\n */\nexport function FillUi(p) {\n    let div = BB.el({\n        css: {\n            margin: '10px'\n        }\n    });\n    let isVisible = true;\n\n    let colorDiv = BB.el({\n        parent: div,\n        css: {\n            marginBottom: '10px'\n        }\n    });\n\n    let opacitySlider = new KlSlider({\n        label: LANG('opacity'),\n        width: 250,\n        height: 30,\n        min: 1 / 100,\n        max: 1,\n        value: 1,\n        toValue: (displayValue) => displayValue / 100,\n        toDisplayValue: (value) => value * 100,\n    });\n    div.appendChild(opacitySlider.getElement());\n\n    let toleranceSlider = new KlSlider({\n        label: LANG('bucket-tolerance'),\n        width: 250,\n        height: 30,\n        min: 0,\n        max: 255,\n        value: 20 * (255 / 100),\n        toValue: (displayValue) => displayValue * (255 / 100),\n        toDisplayValue: (value) => value / (255 / 100),\n    });\n    BB.css(toleranceSlider.getElement(), {\n        marginTop: '10px'\n    });\n    div.appendChild(toleranceSlider.getElement());\n\n    let selectRow = BB.el({\n        parent: div,\n        css: {\n            display: 'flex',\n            marginTop: '10px'\n        }\n    });\n\n    let modeWrapper;\n    let modeSelect;\n    modeWrapper = BB.el({\n        content: LANG('bucket-sample') + '&nbsp;',\n        title: LANG('bucket-sample-title'),\n        css: {\n            fontSize: '15px'\n        }\n    });\n    modeSelect = new Select({\n        optionArr: [\n            ['all', LANG('bucket-sample-all')],\n            ['current', LANG('bucket-sample-active')],\n            ['above', LANG('bucket-sample-above')]\n        ],\n        initValue: 'all',\n        onChange: function(val) {}\n    });\n    let modePointerListener = new BB.PointerListener({\n        target: modeSelect.getElement(),\n        onWheel: function(e) {\n            modeSelect.setDeltaValue(e.deltaY);\n        }\n    });\n    modeWrapper.appendChild(modeSelect.getElement());\n    selectRow.appendChild(modeWrapper);\n\n    let growWrapper;\n    let growSelect;\n    growWrapper = BB.el({\n        content: LANG('bucket-grow') + '&nbsp;',\n        title: LANG('bucket-grow-title'),\n        css: {\n            fontSize: '15px',\n            marginLeft: '10px'\n        }\n    });\n    growSelect = new Select({\n        optionArr: [\n            ['0', '0'],\n            ['1', '1'],\n            ['2', '2'],\n            ['3', '3'],\n            ['4', '4'],\n            ['5', '5'],\n            ['6', '6'],\n            ['7', '7'],\n        ],\n        initValue: '0',\n        onChange: function(val) {}\n    });\n    let growPointerListener = new BB.PointerListener({\n        target: growSelect.getElement(),\n        onWheel: function(e) {\n            growSelect.setDeltaValue(e.deltaY);\n        }\n    });\n    growWrapper.appendChild(growSelect.getElement());\n    selectRow.appendChild(growWrapper);\n\n\n    let isContiguous = true;\n    let contiguousToggle = new Checkbox({\n        init: true,\n        label: LANG('bucket-contiguous'),\n        title: LANG('bucket-contiguous-title'),\n        callback: function (b) {\n            isContiguous = b;\n        },\n        css: {\n            paddingRight: '5px',\n            display: 'inline-block',\n            width: '50%',\n        }\n    });\n\n    let eraserToggle = new Checkbox({\n        init: false,\n        label: LANG('eraser'),\n        callback: function (b) {},\n        css: {\n\n            paddingRight: '5px',\n            display: 'inline-block',\n            width: '50%',\n        }\n    });\n\n    div.append(BB.el({\n        content: [\n            contiguousToggle.getElement(),\n            eraserToggle.getElement(),\n        ],\n        css: {\n            display: 'flex',\n            marginTop: '10px',\n        }\n    }));\n\n\n    // --- interface ---\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.setIsVisible = function(pIsVisible) {\n        isVisible = !!pIsVisible;\n        div.style.display = isVisible ? 'block' : 'none';\n        if (isVisible) {\n            colorDiv.appendChild(p.colorSlider.getElement());\n            colorDiv.appendChild(p.colorSlider.getOutputElement());\n        }\n    };\n\n    this.getTolerance = function() {\n        return toleranceSlider.getValue();\n    };\n\n    this.getOpacity = function() {\n        return opacitySlider.getValue();\n    };\n\n    /**\n     * returns string 'current' | 'all' | 'above'\n     */\n    this.getSample = function() {\n        return modeSelect.getValue();\n    };\n\n    this.getGrow = function() {\n        return parseInt(growSelect.getValue(), 10);\n    }\n\n    this.getContiguous = () => isContiguous;\n\n    this.getIsEraser = () => eraserToggle.getValue();\n\n}","import {BB} from '../../../bb/bb';\nimport {LANG} from '../../../language/language';\n\n/**\n * Text Tool tab contents (color slider)\n *\n * p = {\n *     colorSlider: KlColorSlider// when opening tab, inserts it (snatches it from where else it was)\n * }\n *\n * @param p\n * @constructor\n */\nexport function TextUi(p) {\n    let div = BB.el({\n        css: {\n            margin: '10px'\n        }\n    });\n    let isVisible = true;\n\n    let colorDiv = BB.el({\n        parent: div,\n        css: {\n            marginBottom: '10px'\n        }\n    });\n\n    let hint = BB.el({\n        parent: div,\n        content: LANG('text-instruction'),\n    });\n\n\n    // --- interface ---\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.setIsVisible = function(pIsVisible) {\n        isVisible = !!pIsVisible;\n        div.style.display = isVisible ? 'block' : 'none';\n        if (isVisible) {\n            colorDiv.appendChild(p.colorSlider.getElement());\n            colorDiv.appendChild(p.colorSlider.getOutputElement());\n            //update();\n        }\n    };\n\n}","import {BB} from '../../../bb/bb';\nimport {Options} from '../base-components/options';\nimport {Checkbox} from '../base-components/checkbox';\nimport {KlSlider} from '../base-components/kl-slider';\nimport {LANG} from '../../../language/language';\n\n/**\n * Shape Tool tab contents\n *\n * p = {\n *     colorSlider: KlColorSlider// when opening tab, inserts it (snatches it from where else it was)\n * }\n *\n * @param p\n * @constructor\n */\nexport function ShapeUi(p) {\n    let div = BB.el({\n        css: {\n            margin: '10px'\n        }\n    });\n    let isVisible = true;\n\n    let colorDiv = BB.el({\n        parent: div,\n        css: {\n            marginBottom: '10px'\n        }\n    });\n\n    let previewSize = 35;\n    let previewPadding = 8;\n    let shape; // 'rect'|'ellipse'|'line'\n    let mode; // 'stroke'|'fill'\n\n\n    let rectStrokeSvgRect = BB.createSvg({\n        elementType: 'rect',\n        x: '' + previewPadding,\n        width: '' + (previewSize - previewPadding * 2)\n    });\n    let rectStrokeSvg = BB.createSvg({\n        elementType: 'svg',\n        width: '' + previewSize,\n        height: '' + previewSize\n    });\n    rectStrokeSvg.appendChild(rectStrokeSvgRect);\n    BB.css(rectStrokeSvg, {\n        display: 'block'\n    });\n\n    let rectFilledSvgRect = BB.createSvg({\n        elementType: 'rect',\n        x: '' + previewPadding,\n        width: '' + (previewSize - previewPadding * 2)\n    });\n    let rectFilledSvg = BB.createSvg({\n        elementType: 'svg',\n        width: '' + previewSize,\n        height: '' + previewSize\n    });\n    rectFilledSvg.appendChild(rectFilledSvgRect);\n    BB.css(rectFilledSvg, {\n        display: 'block'\n    });\n\n\n    let ellipseStrokeSvgEllipse = BB.createSvg({\n        elementType: 'ellipse',\n        cx: '' + (previewSize / 2),\n        cy: '' + (previewSize / 2),\n        rx: '' + (previewSize / 2 - previewPadding)\n    });\n    let ellipseStrokeSvg = BB.createSvg({\n        elementType: 'svg',\n        width: '' + previewSize,\n        height: '' + previewSize,\n    });\n    ellipseStrokeSvg.appendChild(ellipseStrokeSvgEllipse);\n    BB.css(ellipseStrokeSvg, {\n        display: 'block'\n    });\n\n    let ellipseFilledSvgEllipse = BB.createSvg({\n        elementType: 'ellipse',\n        cx: '' + (previewSize / 2),\n        cy: '' + (previewSize / 2),\n        rx: '' + (previewSize / 2 - previewPadding)\n    });\n    let ellipseFilledSvg = BB.createSvg({\n        elementType: 'svg',\n        width: '' + previewSize,\n        height: '' + previewSize,\n    });\n    ellipseFilledSvg.appendChild(ellipseFilledSvgEllipse);\n    BB.css(ellipseFilledSvg, {\n        display: 'block'\n    });\n\n\n    let lineSvgLine = BB.createSvg({\n        elementType: 'line',\n        x1: '' + previewPadding,\n        x2: '' + (previewSize - previewPadding)\n    });\n    let lineSvg = BB.createSvg({\n        elementType: 'svg',\n        width: '' + previewSize,\n        height: '' + previewSize\n    });\n    lineSvg.appendChild(lineSvgLine);\n    BB.css(lineSvg, {\n        display: 'block'\n    });\n\n    function updatePreviews() {\n        let strokeWidth = BB.clamp(Math.round(lineWidthSlider.getValue() / 10), 1, 10) + 'px';\n\n        let squish = 1.35;\n\n        BB.css(rectStrokeSvgRect, { fill: 'none', stroke: 'black', strokeWidth: strokeWidth });\n        BB.css(rectFilledSvgRect, { fill: 'black', stroke: 'none' });\n\n        BB.css(ellipseStrokeSvgEllipse, { fill: 'none', stroke: 'black', strokeWidth: strokeWidth });\n        BB.css(ellipseFilledSvgEllipse, { fill: 'black', stroke: 'none' });\n\n        BB.css(\n            lineSvgLine,\n            { fill: 'none', stroke: 'black', strokeWidth: strokeWidth }\n        );\n\n        if ((fixedToggle as any).getValue()) {\n            rectStrokeSvgRect.setAttribute('y', '' + previewPadding);\n            rectStrokeSvgRect.setAttribute('height', '' + (previewSize - previewPadding * 2));\n            rectFilledSvgRect.setAttribute('y', '' + previewPadding);\n            rectFilledSvgRect.setAttribute('height', '' + (previewSize - previewPadding * 2));\n\n            ellipseStrokeSvgEllipse.setAttribute('ry', '' + (previewSize / 2 - previewPadding));\n            ellipseFilledSvgEllipse.setAttribute('ry', '' + (previewSize / 2 - previewPadding));\n        } else {\n            rectStrokeSvgRect.setAttribute('y', '' + (previewPadding * squish));\n            rectStrokeSvgRect.setAttribute('height', '' + (previewSize - previewPadding * squish * 2));\n            rectFilledSvgRect.setAttribute('y', '' + (previewPadding * squish));\n            rectFilledSvgRect.setAttribute('height', '' + (previewSize - previewPadding * squish * 2));\n\n            ellipseStrokeSvgEllipse.setAttribute('ry', '' + (previewSize / 2 - previewPadding * squish));\n            ellipseFilledSvgEllipse.setAttribute('ry', '' + (previewSize / 2 - previewPadding * squish));\n        }\n\n        if ((snapToggle as any).getValue()) {\n            lineSvgLine.setAttribute('y1', '' + (previewSize - previewPadding));\n            lineSvgLine.setAttribute('y2', '' + previewPadding);\n        } else {\n            lineSvgLine.setAttribute('y1', '' + (previewSize - previewPadding * squish));\n            lineSvgLine.setAttribute('y2', '' + (previewPadding * squish));\n        }\n    }\n\n    let row1 = BB.el({\n        parent: div,\n        css: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'start'\n        }\n    });\n\n    let shapeOptions = new Options({\n        optionArr: [\n            {\n                id: 'rect-stroke',\n                label: rectStrokeSvg,\n                title: LANG('shape-rect') + ' ' + LANG('shape-stroke'),\n            },\n            {\n                id: 'ellipse-stroke',\n                label: ellipseStrokeSvg,\n                title: LANG('shape-ellipse') + ' ' + LANG('shape-stroke'),\n            },\n            {\n                id: 'line',\n                label: lineSvg,\n                title: LANG('shape-line'),\n            },\n            {\n                id: 'rect-fill',\n                label: rectFilledSvg,\n                title: LANG('shape-rect') + ' ' + LANG('shape-fill'),\n            },\n            {\n                id: 'ellipse-fill',\n                label: ellipseFilledSvg,\n                title: LANG('shape-ellipse') + ' ' + LANG('shape-fill'),\n            },\n        ],\n        initId: 'rect',\n        onChange: function(id) {\n            let split = id.split('-');\n            shape = split[0];\n            mode = split[1];\n\n            BB.css(fixedToggle.getElement(), {\n                display: shape === 'line' ? 'none' : null\n            });\n            BB.css(snapToggle.getElement(), {\n                display: shape === 'line' ? null : 'none'\n            });\n            BB.css(lineWidthSlider.getElement(), {\n                display: (shape !== 'line' && mode === 'fill') ? 'none' : null\n            });\n        },\n        changeOnInit: true\n    });\n    shapeOptions.getElement().style.width = '120px';\n    row1.appendChild(shapeOptions.getElement());\n\n    const eraserToggle = new Checkbox({\n        init: false,\n        label: LANG('eraser'),\n        callback: function(b) {\n            updatePreviews();\n        }\n    });\n\n    const lockAlphaToggle = new Checkbox({\n        init: false,\n        label: LANG('lock-alpha'),\n        title: LANG('lock-alpha-title'),\n        callback: (b) => {\n        },\n        doHighlight: true,\n    });\n    lockAlphaToggle.getElement().style.marginTop = '10px';\n\n    row1.append(BB.el({\n        content: [\n            eraserToggle.getElement(),\n            lockAlphaToggle.getElement(),\n        ]\n    }));\n\n    let lineWidthSlider = new KlSlider({\n        label: LANG('shape-line-width'),\n        width: 250,\n        height: 30,\n        min: 1,\n        max: 200,\n        value: 4,\n        curve: 'quadratic',\n        onChange: (val) => {\n            updatePreviews();\n        },\n    });\n    BB.css(lineWidthSlider.getElement(), {\n        marginTop: '10px'\n    });\n    div.appendChild(lineWidthSlider.getElement());\n\n    let opacitySlider = new KlSlider({\n        label: LANG('opacity'),\n        width: 250,\n        height: 30,\n        min: 1 / 100,\n        max: 1,\n        value: 1,\n        toValue: (displayValue) => displayValue / 100,\n        toDisplayValue: (value) => value * 100,\n    });\n    BB.css(opacitySlider.getElement(), {\n        marginTop: '10px'\n    });\n    div.appendChild(opacitySlider.getElement());\n\n    let row2 = BB.el({\n        parent: div,\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            marginTop: '10px'\n        }\n    });\n\n    let outwardsToggle = new Checkbox({\n        init: false,\n        label: LANG('shape-outwards'),\n        callback: function(b) {},\n        css: {\n            width: '50%',\n            marginRight: '10px',\n        }\n    });\n    row2.appendChild(outwardsToggle.getElement());\n\n    let fixedToggle = new Checkbox({\n        init: false,\n        label: LANG('shape-fixed'),\n        callback: function(b) {\n            updatePreviews();\n        },\n        css: {\n            flexGrow: '1',\n        }\n    });\n    row2.appendChild(fixedToggle.getElement());\n\n    let snapToggle = new Checkbox({\n        init: false,\n        label: LANG('angle-snap'),\n        title: LANG('angle-snap-title'),\n        callback: function(b) {\n            updatePreviews();\n        },\n        css: {\n            flexGrow: '1',\n        }\n    });\n    row2.appendChild(snapToggle.getElement());\n\n\n    updatePreviews();\n\n    // --- interface ---\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.setIsVisible = function(pIsVisible) {\n        isVisible = !!pIsVisible;\n        div.style.display = isVisible ? 'block' : 'none';\n        if (isVisible) {\n            colorDiv.appendChild(p.colorSlider.getElement());\n            colorDiv.appendChild(p.colorSlider.getOutputElement());\n            //update();\n        }\n    };\n\n    this.getShape = function() {\n        return shape;\n    };\n\n    this.getMode = function() {\n        return mode;\n    };\n\n    this.getIsEraser = function() {\n        return (eraserToggle as any).getValue();\n    };\n\n    this.getOpacity = function() {\n        return opacitySlider.getValue();\n    };\n\n    this.getLineWidth = function() {\n        return lineWidthSlider.getValue();\n    };\n\n    this.getIsOutwards = function() {\n        return (outwardsToggle as any).getValue();\n    };\n\n    this.getIsFixed = function() {\n        return (fixedToggle as any).getValue();\n    };\n\n    this.getIsSnap = function() {\n        return (snapToggle as any).getValue();\n    };\n\n    this.getDoLockAlpha = () => {\n        return lockAlphaToggle.getValue();\n    };\n\n}","import {BB} from '../../../bb/bb';\nimport {Select} from '../base-components/select';\nimport {ColorOptions} from '../base-components/color-options';\nimport {popup} from './popup';\nimport {LANG} from '../../../language/language';\n\n/**\n * P = {\n *     currentColor: RGB, // current color\n *     secondaryColor: RGB,\n *     maxCanvasSize: number,\n *     canvasWidth: number, // current canvas size\n *     canvasHeight: number, // current canvas size\n *     workspaceWidth: number,\n *     workspaceHeight: number,\n *     onConfirm: function(width number, height number, color RGBA),\n *     onCancel: function()\n * }\n *\n * @param p\n */\nexport function newImageDialog(p) {\n\n    let currentColor = p.currentColor;\n    let secondaryColor = p.secondaryColor;\n    let maxCanvasSize = p.maxCanvasSize;\n    let canvasWidth = p.canvasWidth;\n    let canvasHeight = p.canvasHeight;\n    let workspaceWidth = p.workspaceWidth;\n    let workspaceHeight = p.workspaceHeight;\n    let onConfirm = p.onConfirm;\n    let onCancel = p.onCancel;\n\n\n    function createRatioSize(ratioX, ratioY, width, height, padding) {\n        return BB.fitInto(ratioX, ratioY, Math.min(maxCanvasSize, width - padding), Math.min(maxCanvasSize, height - padding), 1);\n    }\n\n    let newImDiv = document.createElement(\"div\");\n    let widthWrapper = document.createElement(\"div\");\n    let heightWrapper = document.createElement(\"div\");\n    let widthInput = document.createElement(\"input\");\n    let widthUnit = document.createElement(\"div\");\n    let heightInput = document.createElement(\"input\");\n    let heightUnit = document.createElement(\"div\");\n    widthWrapper.style.position = \"relative\";\n    widthWrapper.style.width = \"145px\";\n    widthWrapper.style.height = \"35px\";\n    widthWrapper.style.lineHeight = \"30px\";\n    heightWrapper.style.width = \"145px\";\n    heightWrapper.style.height = \"35px\";\n    heightWrapper.style.lineHeight = \"30px\";\n\n    widthUnit.innerText = LANG('new-px');\n    widthUnit.style.color = '#888';\n    widthUnit.style.fontSize = \"12px\";\n    widthUnit.style.marginLeft = \"5px\";\n    widthUnit.style.cssFloat = \"right\";\n\n    heightUnit.innerText = LANG('new-px');\n    heightUnit.style.color = '#888';\n    heightUnit.style.fontSize = \"12px\";\n    heightUnit.style.marginLeft = \"5px\";\n    heightUnit.style.cssFloat = \"right\";\n\n    widthInput.setAttribute('data-ignore-focus', 'true');\n    heightInput.setAttribute('data-ignore-focus', 'true');\n\n    widthInput.type = 'number';\n    widthInput.min = '1';\n    widthInput.max = maxCanvasSize;\n    widthInput.style.cssFloat = \"right\";\n    widthInput.style.width = \"70px\";\n\n    heightInput.type = 'number';\n    heightInput.min = '1';\n    heightInput.max = maxCanvasSize;\n    heightInput.style.cssFloat = \"right\";\n    heightInput.style.width = \"70px\";\n    widthInput.value = canvasWidth;\n    heightInput.value = canvasHeight;\n    widthInput.onclick = function () {\n        (this as any).focus();\n        updateRatio();\n    };\n    heightInput.onclick = function () {\n        (this as any).focus();\n        updateRatio();\n    };\n    widthWrapper.appendChild(widthUnit);\n    widthWrapper.appendChild(widthInput);\n    BB.appendTextDiv(widthWrapper, LANG('width') + \": \");\n    heightWrapper.appendChild(heightUnit);\n    heightWrapper.appendChild(heightInput);\n    BB.appendTextDiv(heightWrapper, LANG('height') + \": \");\n    let ratioWrapper = document.createElement(\"div\");\n    ratioWrapper.style.marginTop = '5px';\n    ratioWrapper.style.color = '#888';\n\n    let templateWrapper = document.createElement(\"div\");\n    //BB.appendTextDiv(templateWrapper, \"Preset Resolutions: <br />\");\n    let presetFitBtn = document.createElement(\"button\");\n    templateWrapper.style.marginBottom = \"10px\";\n    let presetCurrentBtn = document.createElement(\"button\");\n    let presetSquareBtn = document.createElement(\"button\");\n    let presetLandscapeBtn = document.createElement(\"button\");\n    let presetPortraitBtn = document.createElement(\"button\");\n    let presetOversizeBtn = document.createElement(\"button\");\n\n    presetCurrentBtn.textContent = LANG('new-current');\n    presetFitBtn.textContent = LANG('new-fit');\n    presetOversizeBtn.textContent = LANG('new-oversize');\n    presetLandscapeBtn.textContent = LANG('new-landscape');\n    presetPortraitBtn.textContent = LANG('new-portrait');\n    presetSquareBtn.textContent = LANG('new-square');\n\n    presetCurrentBtn.style.marginRight = \"5px\";\n    presetFitBtn.style.marginRight = \"5px\";\n    presetOversizeBtn.style.marginRight = \"5px\";\n    presetLandscapeBtn.style.marginTop = \"5px\";\n    presetLandscapeBtn.style.marginRight = \"5px\";\n    presetPortraitBtn.style.marginTop = \"5px\";\n    presetPortraitBtn.style.marginRight = \"5px\";\n\n    templateWrapper.appendChild(presetCurrentBtn);\n    templateWrapper.appendChild(presetFitBtn);\n    templateWrapper.appendChild(presetOversizeBtn);\n    templateWrapper.appendChild(presetSquareBtn);\n    templateWrapper.appendChild(presetLandscapeBtn);\n    templateWrapper.appendChild(presetPortraitBtn);\n\n    let templatePadding = 0;\n\n    presetCurrentBtn.onclick = function () {\n        widthInput.value = canvasWidth;\n        heightInput.value = canvasHeight;\n        updateRatio();\n    };\n    presetFitBtn.onclick = function () {\n        widthInput.value = workspaceWidth;\n        heightInput.value = workspaceHeight;\n        updateRatio();\n    };\n    presetOversizeBtn.onclick = function () {\n        widthInput.value = workspaceWidth + 500;\n        heightInput.value = workspaceHeight + 500;\n        updateRatio();\n    };\n    presetSquareBtn.onclick = function () {\n        let sizeObj = createRatioSize(1, 1, workspaceWidth, workspaceHeight, templatePadding);\n        widthInput.value = '' + Math.round(sizeObj.width);\n        heightInput.value = '' + Math.round(sizeObj.height);\n        updateRatio();\n    };\n    presetLandscapeBtn.onclick = function () {\n        let sizeObj = createRatioSize(4, 3, workspaceWidth, workspaceHeight, templatePadding);\n        widthInput.value = '' + Math.round(sizeObj.width);\n        heightInput.value = '' + Math.round(sizeObj.height);\n        updateRatio();\n    };\n    presetPortraitBtn.onclick = function () {\n        let sizeObj = createRatioSize(3, 4, workspaceWidth, workspaceHeight, templatePadding);\n        widthInput.value = '' + Math.round(sizeObj.width);\n        heightInput.value = '' + Math.round(sizeObj.height);\n        updateRatio();\n    };\n\n    let select = new Select({\n        isFocusable: true,\n        optionArr: [\n            ['screen', LANG('new-screen')],\n            ['16 9', LANG('new-video') + ' 16:9'],\n            ['3 2', '3:2'],\n            ['5 3', '5:3'],\n            ['2 1', '2:1'],\n            ['paper', LANG('new-din-paper') + ' 2:1'],\n            ['9 16', '9:16'],\n            ['2 3', '2:3'],\n            ['3 5', '3:5'],\n            ['1 2', '1:2'],\n            ['1 1.4142135623730951', '1:2']\n        ],\n        onChange: function(val) {\n            if (val === 'screen') {\n                widthInput.value = '' + window.screen.width;\n                heightInput.value = '' + window.screen.height;\n            } else if (val === 'paper') {\n                let sizeObj = createRatioSize(Math.sqrt(2), 1, workspaceWidth, workspaceHeight, templatePadding);\n                widthInput.value = '' + Math.round(sizeObj.width);\n                heightInput.value = '' + Math.round(sizeObj.height);\n            } else {\n                let split = val.split(' ');\n                let sizeObj = createRatioSize(parseFloat(split[0]), parseFloat(split[1]), workspaceWidth, workspaceHeight, templatePadding);\n                widthInput.value = '' + Math.round(sizeObj.width);\n                heightInput.value = '' + Math.round(sizeObj.height);\n            }\n            updateRatio();\n            select.setValue(null);\n        }\n    });\n    setTimeout(() => {\n        // safari: not empty without also setting it to null via timeout\n        select.setValue(null);\n    }, 0);\n    BB.css(select.getElement(), {\n        width: '80px',\n    });\n    templateWrapper.appendChild(select.getElement());\n\n\n\n    let backgroundRGBA = {r: 255, g: 255, b: 255, a: 1};\n\n    let colorOptionsArr = [\n        {r: 255, g: 255, b: 255, a: 1},\n        {r: 0, g: 0, b: 0, a: 1},\n        {r: 0, g: 0, b: 0, a: 0}\n    ];\n    colorOptionsArr.push({\n        r: currentColor.r,\n        g: currentColor.g,\n        b: currentColor.b,\n        a: 1\n    });\n    colorOptionsArr.push({\n        r: secondaryColor.r,\n        g: secondaryColor.g,\n        b: secondaryColor.b,\n        a: 1\n    });\n\n    let colorOptions = new ColorOptions({\n        colorArr: colorOptionsArr,\n        onChange: function(rgbaObj) {\n            backgroundRGBA = rgbaObj;\n            preview.style.backgroundColor = \"rgba(\" + rgbaObj.r + \",\" + rgbaObj.g + \",\" + rgbaObj.b + \", \" + rgbaObj.a + \")\";\n        }\n    });\n\n    let previewWrapper = document.createElement(\"div\");\n    BB.css(previewWrapper, {\n        boxSizing: 'border-box',\n        width: '340px',\n        height: '140px',\n        display: 'table',\n        backgroundColor: '#9e9e9e',\n        padding: '10px',\n        marginTop: '10px',\n        boxShadow: 'rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset',\n        marginLeft: '-20px',\n        colorScheme: 'only light',\n    });\n    let preview = document.createElement(\"div\");\n    BB.css(preview, {\n        width: 200 + \"px\",\n        height: 100 + \"px\",\n        backgroundColor: \"#fff\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        color: \"#aaa\",\n        fontSize: \"16px\",\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n        verticalAlign: \"center\",\n        display: \"table\",\n        overflow: \"hidden\",\n        boxShadow: \"0px 0px 3px rgba(0,0,0,0.5)\"\n    });\n    let previewcell = document.createElement(\"div\");\n    previewcell.style.display = \"table-cell\";\n    previewcell.style.verticalAlign = \"middle\";\n    previewcell.appendChild(preview);\n    previewWrapper.appendChild(previewcell);\n    let cell = BB.appendTextDiv(preview, \"\");\n    //let ratio = BB.appendTextDiv(cell, \"1:2\");\n    cell.style.display = \"table-cell\";\n    cell.style.verticalAlign = \"middle\";\n    let prevW = parseInt(widthInput.value);\n    let prevH = parseInt(heightInput.value);\n\n    function updateRatio() {\n        widthInput.value = '' + Math.min(maxCanvasSize, parseInt(widthInput.value));\n        heightInput.value = '' + Math.min(maxCanvasSize, parseInt(heightInput.value));\n\n        function HCF(u, v) {\n            let U = u, V = v;\n            while (true) {\n                if (!(U %= V))\n                    return V;\n                if (!(V %= U))\n                    return U;\n            }\n        }\n\n        let w = parseInt(widthInput.value);\n        let h = parseInt(heightInput.value);\n        if (w < 1 || w > maxCanvasSize || h < 1 || h > maxCanvasSize) {\n            if (w > maxCanvasSize)\n                w = maxCanvasSize;\n            else if (h > maxCanvasSize)\n                h = maxCanvasSize;\n\n            widthInput.value = '' + w;\n            heightInput.value = '' + h;\n        }\n\n        //generated canvas size doesn't always match ratio. so check if a common ratio is very close\n        let commonRatios = [\n            [1, 2], [2, 1],\n            [2, 3], [3, 2],\n            [3, 4], [4, 3],\n            [4, 5], [5, 4],\n            [16, 9], [9, 16],\n            [3, 2], [2, 3],\n            [5, 3], [3, 5],\n            [2, 1], [1, 2],\n            [1.414, 1], [1, 1.414],\n        ];\n        let reducedArr = BB.reduce(w, h);\n        let closestRatio = null;\n        let closestDistance = null;\n        for (let i = 0; i < commonRatios.length; i++) {\n            if (i === 0 || Math.abs(commonRatios[i][0] / commonRatios[i][1] - reducedArr[0] / reducedArr[1]) < closestDistance) {\n                closestRatio = commonRatios[i];\n                closestDistance = Math.abs(commonRatios[i][0] / commonRatios[i][1] - reducedArr[0] / reducedArr[1]);\n            }\n        }\n        //display ratio\n        if (closestDistance > 0 && closestDistance < 0.005) {\n            ratioWrapper.innerText = LANG('new-ratio') + ': ~' + closestRatio[0] + ':' + closestRatio[1];\n        } else {\n            ratioWrapper.innerText = LANG('new-ratio') + ': ' + reducedArr[0] + ':' + reducedArr[1];\n        }\n\n        prevW = w;\n        prevH = h;\n        let realw = w;\n        let T = HCF(w, h);\n        w /= T;\n        h /= T;\n        w *= 260;\n        h *= 260;\n        if (w > 260) {\n            h = 260 / w * h;\n            w = 260;\n        }\n        if (h > 100) {\n            w = 100 / h * w;\n            h = 100;\n\n        }\n\n        preview.style.width = w + \"px\";\n        preview.style.height = h + \"px\";\n        BB.createCheckerDataUrl(parseInt('' + (30 * (w / realw))), function (url) {\n            previewWrapper.style.background = \"url(\" + url + \")\";\n        });\n    }\n\n    widthInput.onchange = function () {\n        if (widthInput.value === '' || parseInt(widthInput.value) < 0) {\n            widthInput.value = '1';\n        }\n        updateRatio();\n    };\n    widthInput.onkeyup = function () {\n        updateRatio();\n    };\n    heightInput.onchange = function () {\n        if (heightInput.value === '' || parseFloat(heightInput.value) < 0) {\n            heightInput.value = '1';\n        }\n        updateRatio();\n    };\n    heightInput.onkeyup = function () {\n        updateRatio();\n    };\n    updateRatio();\n\n    newImDiv.appendChild(templateWrapper);\n    let secondRow = BB.el({\n        parent: newImDiv,\n        css: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'flex-end'\n        }\n    });\n    let secondRowLeft = BB.el({\n        parent: secondRow\n    });\n    secondRowLeft.appendChild(widthWrapper);\n    secondRowLeft.appendChild(heightWrapper);\n    secondRowLeft.appendChild(ratioWrapper);\n    secondRow.appendChild(colorOptions.getElement());\n\n    newImDiv.appendChild(previewWrapper);\n\n    popup({\n        target: document.body,\n        message: `<b>${LANG('new-title')}</b>`,\n        div: newImDiv,\n        buttons: ['Ok', 'Cancel'],\n        callback: function (result) {\n            widthInput.onclick = null;\n            heightInput.onclick = null;\n            presetCurrentBtn.onclick = null;\n            presetFitBtn.onclick = null;\n            presetOversizeBtn.onclick = null;\n            presetSquareBtn.onclick = null;\n            presetLandscapeBtn.onclick = null;\n            presetPortraitBtn.onclick = null;\n            widthInput.onchange = null;\n            widthInput.onkeyup = null;\n            heightInput.onchange = null;\n            heightInput.onkeyup = null;\n            select.destroy();\n            colorOptions.destroy();\n\n            if (result === \"Cancel\" || parseInt(widthInput.value) <= 0 || parseInt(heightInput.value) <= 0 || isNaN(parseInt(widthInput.value)) || isNaN(parseInt(heightInput.value))) {\n                onCancel();\n                return;\n            }\n            onConfirm(parseInt(widthInput.value), parseInt(heightInput.value), backgroundRGBA);\n        },\n        clickOnEnter: 'Ok'\n    });\n\n}","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport collapseImg from 'url:~/src/app/img/ui/ui-collapse.svg';\nimport {LANG} from \"../../../language/language\";\n\n/**\n * button that allows to collapse toolspace (for mobile)\n *\n * p = {\n *     onChange: function()\n * }\n *\n * @param p\n * @constructor\n */\nexport function ToolspaceCollapser(p) {\n    let isOpen = true;\n    let directionStr = 'right'; // 'left' | 'right'\n\n    function update() {\n        if (directionStr === 'left') {\n            icon.style.transform = isOpen ? 'rotate(180deg)' : '';\n        } else {\n            icon.style.transform = isOpen ? '' : 'rotate(180deg)';\n        }\n    }\n\n    let div = BB.el({\n        css: {\n            width: '36px',\n            height: '36px',\n            background: 'rgba(100, 100, 100, 0.9)',\n            color: '#fff',\n            position: 'absolute',\n            top: '0',\n            textAlign: 'center',\n            lineHeight: '36px',\n            cursor: 'pointer',\n            userSelect: 'none',\n            padding: '6px',\n            boxSizing: 'border-box'\n        },\n        title: LANG('toggle-show-tools'),\n        onClick: function(e) {\n            e.preventDefault();\n            isOpen = !isOpen;\n            update();\n            p.onChange();\n        }\n    });\n\n    let icon = BB.el({\n        parent: div,\n        css: {\n            backgroundImage: `url(${collapseImg})`,\n            width: '100%',\n            height: '100%',\n            backgroundSize: 'contain',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center',\n            userSelect: 'none'\n        }\n    });\n    div.oncontextmenu = function () {\n        return false;\n    };\n\n    // --- interface ---\n    this.isOpen = function() {\n        return isOpen;\n    };\n\n    /**\n     *\n     * @param dirStr\n     */\n    this.setDirection = function(dirStr) {\n        directionStr = dirStr;\n        update();\n    };\n\n    this.getElement = function() {\n        return div;\n    };\n}","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"ui-collapse.c5cddfda.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {renderText} from '../../image-operations/render-text';\nimport {ColorOptions} from '../base-components/color-options';\nimport {Select} from '../base-components/select';\nimport {ImageRadioList} from '../base-components/image-radio-list';\nimport {ImageToggle} from '../base-components/image-toggle';\nimport {KlSlider} from '../base-components/kl-slider';\nimport {popup} from './popup';\n// @ts-ignore\nimport alignLeftImg from 'url:~/src/app/img/ui/align-left.svg';\n// @ts-ignore\nimport alignCenterImg from 'url:~/src/app/img/ui/align-center.svg';\n// @ts-ignore\nimport alignRightImg from 'url:~/src/app/img/ui/align-right.svg';\n// @ts-ignore\nimport typoItalicImg from 'url:~/src/app/img/ui/typo-italic.svg';\n// @ts-ignore\nimport typoBoldImg from 'url:~/src/app/img/ui/typo-bold.svg';\n// @ts-ignore\nimport toolZoomInImg from 'url:~/src/app/img/ui/tool-zoom-in.svg';\n// @ts-ignore\nimport toolZoomOutImg from 'url:~/src/app/img/ui/tool-zoom-out.svg';\nimport {IRGB} from '../../kl.types';\nimport {KlCanvas} from '../../canvas/kl-canvas';\nimport {LANG} from '../../../language/language';\n\n/**\n * Text Tool dialog\n *\n * confirmP = {\n *     x: number,\n *     y: number,\n *     textStr: string,\n *     align: 'left' | 'center' | 'right',\n *     isItalic: boolean,\n *     isBold: boolean,\n *     color: rgb,\n *     size: number, // px\n *     font: 'serif' | 'monospace' | 'sans-serif' | 'cursive' | 'fantasy',\n *     opacity: number, // 0 - 1\n * }\n *\n * @param p\n */\nexport function textToolDialog(\n    p: {\n        klCanvas: KlCanvas;\n        layerIndex: number;\n        x: number;\n        y: number;\n        angleRad: number;\n        color: IRGB;\n        secondaryColor: IRGB;\n        size: number; // px\n        align: 'left' | 'center' | 'right'; // default 'left'\n        isBold: boolean; // default false\n        isItalic: boolean; // default false\n        font: 'serif' | 'monospace' | 'sans-serif' | 'cursive' | 'fantasy'; // default sans-serif\n        opacity: number; // 0 - 1; default 1\n        onConfirm: (confirmP) => void;\n    }\n) {\n\n    let div = BB.el({});\n\n    let isSmallWidth = window.innerWidth < 550;\n    let isSmallHeight = window.innerHeight < 630;\n\n    // --- preview ---\n    // Text drawn on klCanvas-sized canvas: textCanvas\n    // LayerArr[target].canvas & textCanvas then drawn on targetCanvas\n    //      they are transformed. canvas size of final preview\n    // All layers and targetCanvas drawn on layersCanvas. transformed and size of final preview\n    // Checkerboard, layersCanvas, and outline then drawn on previewCanvas\n\n    let width = isSmallWidth ? 340 : 540;\n    let height = isSmallWidth ? (isSmallHeight ? 210 : 260) : (isSmallHeight ? 230 : 350);\n    let scale = 1;\n\n    let layerArr = p.klCanvas.getLayersFast();\n    let textCanvas = BB.canvas(p.klCanvas.getWidth(), p.klCanvas.getHeight());\n    let textCtx = textCanvas.getContext('2d');\n    let targetCanvas = BB.canvas(width, height);\n    let targetCtx = targetCanvas.getContext('2d');\n    let layersCanvas = BB.canvas(width, height);\n    let layersCtx = layersCanvas.getContext('2d');\n    let previewCanvas = BB.canvas(width, height); // the one that is visible\n    let previewCtx = previewCanvas.getContext('2d');\n    BB.css(previewCanvas, {\n        display: 'block'\n    });\n    let previewWrapper = BB.el({\n        parent: div,\n        css: {\n            position: 'relative',\n            width: width + 'px',\n            marginLeft: '-20px',\n            cursor: 'move',\n            colorScheme: 'only light',\n            touchAction: 'none',\n        },\n        onClick: function() {\n            textInput.focus();\n        }\n    });\n    BB.el({ // inset shadow on preview\n        parent: previewWrapper,\n        css: {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            right: '0',\n            bottom: '0',\n            boxShadow: 'rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset',\n            pointerEvents: 'none',\n        }\n    });\n    previewWrapper.appendChild(previewCanvas);\n    let checkerPattern = previewCtx.createPattern(BB.createCheckerCanvas(8), 'repeat');\n    let emptyCanvas = BB.canvas(1, 1);\n    {\n        let ctx = emptyCanvas.getContext('2d');\n        ctx.fillRect(0, 0, 1, 1);\n    }\n\n    function updatePreview() {\n\n        // try to draw very much like klCanvasWorkspace\n\n        // --- draw text ---\n        textCtx.clearRect(0, 0, textCanvas.width, textCanvas.height);\n        let colorRGBA = {\n            ...p.color,\n            a: opacitySlider.getValue(),\n        };\n        let bounds = renderText(textCanvas, {\n            x: p.x,\n            y: p.y,\n            textStr: textInput.value,\n            align: alignRadioList.getValue(),\n            isItalic: italicToggle.getValue(),\n            isBold: boldToggle.getValue(),\n            size: parseFloat(sizeInput.value),\n            font: fontSelect.getValue(),\n            color: BB.ColorConverter.toRgbaStr(colorRGBA),\n            angleRad: p.angleRad\n        });\n\n\n        // --- determine transformation of viewport ---\n        // text should always be visible\n        bounds.width = Math.max(bounds.width, 1);\n        bounds.height = Math.max(bounds.height, 1);\n        let rotatedXY = BB.rotate(bounds.x, bounds.y, -p.angleRad / Math.PI * 180);\n        let rotatedWH = BB.rotate(bounds.width, bounds.height, -p.angleRad / Math.PI * 180);\n        let centerX = p.x + rotatedXY.x + rotatedWH.x / 2;\n        let centerY = p.y + rotatedXY.y + rotatedWH.y / 2;\n\n        let padding = 100;\n        let fitBounds = BB.fitInto(bounds.width, bounds.height, width - padding, height - padding);\n        scale = Math.min(1, fitBounds.width / bounds.width);\n        scale = Math.min(4, scale * Math.pow(2, zoomFac));\n\n\n        // --- compose text and target layer ---\n        targetCtx.save();\n\n        if (scale >= 4) {\n            targetCtx.imageSmoothingEnabled = false;\n        } else {\n            targetCtx.imageSmoothingEnabled = true;\n            targetCtx.imageSmoothingQuality  = scale >= 1 ? 'low' : 'medium';\n        }\n\n        targetCtx.clearRect(0, 0, previewCanvas.width, previewCanvas.height);\n        targetCtx.translate(width / 2, height / 2);\n        targetCtx.scale(scale, scale);\n        targetCtx.rotate(p.angleRad);\n        targetCtx.drawImage(layerArr[p.layerIndex].canvas, -centerX, -centerY);\n        targetCtx.drawImage(textCanvas, -centerX, -centerY);\n        targetCtx.restore();\n\n\n        // --- layers ---\n        layersCtx.save();\n\n        layersCtx.fillStyle = 'rgb(158,158,158)';\n        layersCtx.fillRect(0, 0, width, height);\n\n        { // bg\n            layersCtx.save();\n\n            layersCtx.translate(width / 2, height / 2);\n            layersCtx.scale(scale, scale);\n            layersCtx.rotate(p.angleRad);\n\n            layersCtx.imageSmoothingEnabled = false;\n\n            //outline\n            let borderSize = 1 / scale;\n            layersCtx.globalAlpha = 0.2;\n            layersCtx.drawImage(emptyCanvas, -centerX - borderSize, -centerY - borderSize, textCanvas.width + borderSize * 2, textCanvas.height + borderSize * 2);\n            layersCtx.globalAlpha = 1;\n\n            //erase\n            layersCtx.globalCompositeOperation = 'destination-out';\n            layersCtx.drawImage(emptyCanvas, -centerX, -centerY, textCanvas.width, textCanvas.height);\n\n            layersCtx.restore();\n        }\n\n        { // individual layers\n\n            if (scale >= 4) {\n                layersCtx.imageSmoothingEnabled = false;\n            } else {\n                layersCtx.imageSmoothingEnabled = true;\n                layersCtx.imageSmoothingQuality  = scale >= 1 ? 'low' : 'medium';\n            }\n\n            // layers below\n            layersCtx.save();\n            layersCtx.translate(width / 2, height / 2);\n            layersCtx.scale(scale, scale);\n            layersCtx.rotate(p.angleRad);\n            for (var i = 0; i < p.layerIndex; i++) {\n                if (layerArr[i].opacity > 0) {\n                    layersCtx.globalAlpha = layerArr[i].opacity;\n                    layersCtx.globalCompositeOperation = layerArr[i].mixModeStr;\n                    layersCtx.drawImage(layerArr[i].canvas, -centerX, -centerY);\n                }\n            }\n            layersCtx.restore();\n\n            // target layer\n            layersCtx.globalAlpha = layerArr[p.layerIndex].opacity;\n            layersCtx.globalCompositeOperation = layerArr[p.layerIndex].mixModeStr;\n            layersCtx.drawImage(targetCanvas, 0, 0);\n\n            // layers above\n            layersCtx.save();\n            layersCtx.translate(width / 2, height / 2);\n            layersCtx.scale(scale, scale);\n            layersCtx.rotate(p.angleRad);\n            for (let i = p.layerIndex + 1; i < layerArr.length; i++) {\n                if (layerArr[i].opacity > 0) {\n                    layersCtx.globalAlpha = layerArr[i].opacity;\n                    layersCtx.globalCompositeOperation = layerArr[i].mixModeStr;\n                    layersCtx.drawImage(layerArr[i].canvas, -centerX, -centerY);\n                }\n            }\n            layersCtx.restore();\n\n        }\n\n        layersCtx.restore();\n\n\n\n        // --- final composite ---\n        previewCtx.save();\n        previewCtx.fillStyle = checkerPattern;\n        previewCtx.fillRect(0, 0, previewCanvas.width, previewCanvas.height);\n        previewCtx.drawImage(layersCanvas, 0, 0);\n        previewCtx.restore();\n\n        // bounds\n        previewCtx.save();\n        previewCtx.globalCompositeOperation = 'difference';\n        previewCtx.strokeStyle = '#fff';\n        previewCtx.lineWidth = 1;\n        // centerX = p.x + bounds.x + bounds.width / 2;\n        // centerY = p.y + bounds.y + bounds.height / 2;\n        previewCtx.strokeRect(\n            Math.round(width / 2 - (bounds.width / 2) * scale),\n            Math.round(height / 2 - (bounds.height / 2) * scale),\n            Math.round(bounds.width * scale),\n            Math.round(bounds.height * scale)\n        );\n        previewCtx.restore();\n\n    }\n\n    function move(x, y) {\n        let rotated = BB.rotate(x, y, -p.angleRad / Math.PI * 180);\n        p.x += rotated.x / scale;\n        p.y += rotated.y / scale;\n        updatePreview();\n    }\n\n    let previewPointerListener = new BB.PointerListener({\n        target: previewCanvas,\n        pointers: 1,\n        onPointer: function(e) {\n            if (e.type === 'pointermove' && e.button) {\n                e.eventPreventDefault();\n                move(-e.dX, -e.dY);\n            }\n        },\n        onWheel: function(e) {\n            changeZoomFac(-e.deltaY);\n        }\n    });\n\n    const wheelPrevent = (event) => {\n        event.preventDefault();\n    }\n    BB.addEventListener(previewCanvas, 'wheel', wheelPrevent);\n\n\n\n    let row1 = BB.el({\n        parent: div,\n        css: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            marginTop: '10px'\n        }\n    });\n    let row2n3Wrapper = BB.el({\n        parent: div,\n        css: isSmallWidth ? {} : {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between'\n        }\n    });\n    let row2 = BB.el({\n        parent: row2n3Wrapper,\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            marginTop: '5px'\n        }\n    });\n    let row3 = BB.el({\n        parent: row2n3Wrapper,\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            marginTop: '5px',\n            width: isSmallWidth ? '' : '300px'\n        }\n    });\n\n    // --- row 1 ---\n\n    // color\n    let selectedRgbaObj = {r: 0, g: 0, b: 0, a: 1};\n    let colorOptionsArr = [\n        {r: 0, g: 0, b: 0, a: 1},\n        {r: 255, g: 255, b: 255, a: 1}\n    ];\n    colorOptionsArr.unshift({\n        r: p.secondaryColor.r,\n        g: p.secondaryColor.g,\n        b: p.secondaryColor.b,\n        a: 1,\n    });\n    colorOptionsArr.unshift({\n        r: p.color.r,\n        g: p.color.g,\n        b: p.color.b,\n        a: 1,\n    });\n\n    let colorOptions = new ColorOptions({\n        colorArr: colorOptionsArr,\n        initialIndex: 0,\n        onChange: function(rgbaObj) {\n            p.color = rgbaObj;\n            updatePreview();\n        }\n    });\n    colorOptions.getElement().title = LANG('text-color');\n    colorOptions.getElement().style.marginLeft = '-5px';\n    row1.appendChild(colorOptions.getElement());\n\n\n    let zoomFac = 0;\n    function changeZoomFac(d) {\n        zoomFac = Math.min(2, Math.max(-2, zoomFac + d));\n        updatePreview();\n        zoomInBtn.disabled = !canZoom(1);\n        zoomOutBtn.disabled = !canZoom(-1);\n    }\n    function canZoom(d) {\n        return zoomFac !== Math.min(2, Math.max(-2, zoomFac + d));\n    }\n\n    let zoomWrapper = BB.el({\n        parent: row1,\n        css: {\n\n        }\n    })\n\n    let zoomInBtn = BB.el({\n        parent: zoomWrapper,\n        content: `<img height=\"20\" src=\"${toolZoomInImg}\">`,\n        title: LANG('zoom-in'),\n        tagName: 'button',\n        onClick: function() {\n            changeZoomFac(1);\n        },\n        css: {\n            fontWeight: 'bold'\n        }\n    }) as HTMLButtonElement;\n    let zoomOutBtn = BB.el({\n        parent: zoomWrapper,\n        content: `<img height=\"20\" src=\"${toolZoomOutImg}\">`,\n        title: LANG('zoom-out'),\n        tagName: 'button',\n        onClick: function() {\n            changeZoomFac(-1);\n        },\n        css: {\n            fontWeight: 'bold',\n            marginLeft: '5px'\n        }\n    }) as HTMLButtonElement;\n\n\n\n    // --- row 2 ---\n    let sizeInput = BB.el({\n        parent: row2,\n        tagName: 'input',\n        title: LANG('text-size'),\n        custom: {\n            type: 'number',\n            min: 1,\n            max: 10000,\n            value: p.size\n        },\n        css: {\n            width: '60px'\n        },\n        onChange: function() {\n            sizeInput.value = '' + Math.max(1, Math.min(10000, parseInt(sizeInput.value)));\n            updatePreview();\n        }\n    }) as HTMLInputElement;\n    let sizePointerListener = new BB.PointerListener({\n        target: sizeInput,\n        onWheel: function(e) {\n            sizeInput.value = '' + Math.max(1, Math.min(1000, parseInt(sizeInput.value) - e.deltaY));\n            updatePreview();\n        }\n    });\n\n    let modeWrapper;\n    let fontSelect;\n    let fontPointerListener;\n    {\n        modeWrapper = BB.el({\n            css: {\n                fontSize: '15px',\n                marginLeft: '10px'\n            }\n        });\n        fontSelect = new Select({\n            isFocusable: true,\n            optionArr: [\n                ['sans-serif', 'Sans-serif'],\n                ['serif', 'Serif'],\n                ['monospace', 'Monospace'],\n                ['cursive', 'Cursive'],\n                ['fantasy', 'Fantasy'],\n            ],\n            initValue: p.font,\n            onChange: function(val) {\n                updatePreview();\n            },\n        });\n\n        modeWrapper.appendChild(fontSelect.getElement());\n        row2.appendChild(modeWrapper);\n\n        fontPointerListener = new BB.PointerListener({\n            target: fontSelect.getElement(),\n            onWheel: function(e) {\n                fontSelect.setDeltaValue(e.deltaY);\n            }\n        });\n\n    }\n\n\n    // --- row 3 ---\n\n    let alignRadioList = new ImageRadioList({\n        optionArr: [\n            {\n                id: 'left',\n                title: LANG('text-left'),\n                image: alignLeftImg,\n            },\n            {\n                id: 'center',\n                title: LANG('text-center'),\n                image: alignCenterImg,\n            },\n            {\n                id: 'right',\n                title: LANG('text-right'),\n                image: alignRightImg,\n            }\n        ],\n        initId: p.align,\n        onChange: function(id) {\n            updatePreview();\n        }\n    });\n    row3.appendChild(alignRadioList.getElement());\n\n    let italicToggle = new ImageToggle({\n        image: typoItalicImg,\n        title: LANG('text-italic'),\n        initValue: p.isItalic,\n        onChange: function(b) {\n            updatePreview();\n        }\n    });\n    row3.appendChild(italicToggle.getElement());\n\n    let boldToggle = new ImageToggle({\n        image: typoBoldImg,\n        title: LANG('text-bold'),\n        initValue: p.isBold,\n        onChange: function(b) {\n            updatePreview();\n        }\n    });\n    row3.appendChild(boldToggle.getElement());\n\n\n\n    let opacitySlider = new KlSlider({\n        label: LANG('opacity'),\n        width: 150,\n        height: 30,\n        min: 1 / 100,\n        max: 1,\n        value: p.opacity,\n        resolution: 225,\n        eventResMs: 1000 / 30,\n        toValue: (displayValue) => displayValue / 100,\n        toDisplayValue: (value) => value * 100,\n        onChange: function(v) {\n            updatePreview();\n        },\n    });\n    row3.appendChild(opacitySlider.getElement());\n\n\n\n    let textInput = BB.el({\n        parent: div,\n        tagName: 'textarea',\n        custom: {\n            placeholder: LANG('text-placeholder'),\n            'data-ignore-focus': 'true',\n        },\n        css: {\n            whiteSpace: 'pre',\n            overflow: 'auto',\n            width: '100%',\n            height: '70px',\n            resize: 'vertical',\n            marginTop: '10px'\n        },\n        onChange: function() {\n            updatePreview();\n        }\n    }) as HTMLTextAreaElement;\n    textInput.addEventListener('input', updatePreview);\n    setTimeout(function() {\n        textInput.focus();\n        textInput.select();\n    });\n    let closefunc;\n    let keyListener = new BB.KeyListener({\n        onDown: function(keyStr, e, comboStr) {\n            if (BB.isInputFocused(true)) {\n                return;\n            }\n            if (keyStr === 'left') {\n                move(-1, 0);\n            }\n            if (keyStr === 'right') {\n                move(1, 0);\n            }\n            if (keyStr === 'up') {\n                move(0, -1);\n            }\n            if (keyStr === 'down') {\n                move(0, 1);\n            }\n        }\n    });\n\n    // prevent mobile keyboards scrolling page\n    function onScroll() {\n        window.scrollTo(0, 0);\n    }\n    window.addEventListener('scroll', onScroll);\n\n\n    popup({\n        target: document.body,\n        message: `<b>${LANG('text-title')}</b>`,\n        div: div,\n        buttons: [\"Ok\", \"Cancel\"],\n        style: isSmallWidth ? {} : {\n            width: '500px'\n        },\n        callback: function(val) {\n            let result = {\n                x: p.x,\n                y: p.y,\n                textStr: textInput.value,\n                align: alignRadioList.getValue(),\n                isItalic: italicToggle.getValue(),\n                isBold: boldToggle.getValue(),\n                color: p.color,\n                size: sizeInput.value,\n                font: fontSelect.getValue(),\n                opacity: opacitySlider.getValue(),\n            };\n\n            window.removeEventListener('scroll', onScroll);\n            textInput.removeEventListener('input', updatePreview);\n            BB.destroyEl(textInput);\n            previewPointerListener.destroy();\n            sizePointerListener.destroy();\n            fontPointerListener.destroy();\n            BB.removeEventListener(previewCanvas, 'wheel', wheelPrevent);\n            BB.destroyEl(previewWrapper);\n            BB.destroyEl(zoomInBtn);\n            BB.destroyEl(zoomOutBtn);\n            BB.destroyEl(sizeInput);\n            colorOptions.destroy();\n            fontSelect.destroy();\n            keyListener.destroy();\n            alignRadioList.destroy();\n            italicToggle.destroy();\n            boldToggle.destroy();\n            opacitySlider.destroy();\n            if (val === 'Ok') {\n                p.onConfirm(result);\n            }\n        },\n        autoFocus: false,\n        clickOnEnter: 'Ok',\n        ignoreBackground: true,\n        closefunc: function (func) {\n            closefunc = func;\n        },\n    });\n\n    updatePreview();\n\n}","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"align-left.777c0e89.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"align-center.788b2715.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"align-right.f7b7f5c4.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"typo-italic.6740f6e7.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"typo-bold.0bd83bef.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {CropCopy} from '../components/crop-copy';\nimport {Checkbox} from '../base-components/checkbox';\nimport {popup} from './popup';\nimport {LANG} from '../../../language/language';\n\n/**\n *\n * p = {\n *     image: convertedPsd | {type: 'image', width: number, height: number, canvas: image | canvas},\n *     maxSize: number,\n *     target: htmlElement,\n *     callback: func(\n *         {\n *             type: 'as-image',\n *             image: image | canvas,\n *         } | {\n *             type: 'as-image-psd',\n *             image: convertedPsd,\n *             cropObj: {x: number, y: number, width: number, height: number}\n *         } | {\n *             type: 'as-layer',\n *             image: image | canvas,\n *         } | {\n *             type: 'cancel',\n *         }\n *     )\n * }\n *\n * @param p {}\n */\nexport function showImportImageDialog(p) {\n    const div = BB.el({});\n\n    const isSmall = window.innerWidth < 550 || window.innerHeight < 550;\n    const style = isSmall ? {} : { width: '500px' };\n    let resolutionEl;\n    const cropCopy = new CropCopy({\n        width: isSmall ? 340 : 540,\n        height: isSmall ? 300 : 400,\n        canvas: p.image.canvas,\n        isNotCopy: true,\n        onChange: function(width, height) {\n            if (!resolutionEl) {\n                return;\n            }\n            updateResolution(width, height);\n        }\n    });\n    BB.css(cropCopy.getEl(), {\n        marginLeft: '-20px',\n        borderTop: '1px solid #bbb',\n        borderBottom: '1px solid #bbb'\n    });\n    cropCopy.getEl().title = LANG('crop-drag-to-crop');\n    div.appendChild(cropCopy.getEl());\n\n\n    resolutionEl = BB.el({\n        parent: div,\n        css: {\n            marginTop: '10px',\n            textAlign: 'center',\n            color: '#888',\n            lineHeight: '20px',\n        }\n    });\n    function updateResolution(w: number, h: number) {\n        const fit = BB.fitInto(w, h, p.maxSize, p.maxSize);\n\n        if (fit.width < w) {\n            resolutionEl.innerHTML = `<span style=\"color:#f00\">${w} X ${h}</span>  ${Math.round(fit.width)} X ${Math.round(fit.height)}`;\n            resolutionEl.title = LANG('import-too-large');\n        } else {\n            resolutionEl.innerHTML = `${w} X ${h}`;\n            resolutionEl.title = '';\n        }\n    }\n    updateResolution(p.image.width, p.image.height);\n\n\n    let doFlatten = false;\n    function showWarnings(psdWarningArr) {\n        let contentArr = [];\n        let warningMap = {\n            'mask': 'Masks not supported. Mask was applied.',\n            'clipping': 'Clipping not supported. Clipping layers were merged.',\n            'group': 'Groups not supported. Layers were ungrouped.',\n            'adjustment': 'Adjustment layers not supported.',\n            'layer-effect': 'Layer effects not supported.',\n            'smart-object': 'Smart objects not supported.',\n            'blend-mode': 'Unsupported layer blend mode.',\n            'bits-per-channel': 'Unsupported color depth. Only 8bit per channel supported.',\n        };\n        for (let i = 0; i < psdWarningArr.length; i++) {\n            contentArr.push('- ' + warningMap[psdWarningArr[i]]);\n        }\n        alert(contentArr.join(\"\\n\"));\n    }\n\n    let flattenCheckbox;\n    if (p.image.type === 'psd') {\n        const noteStyle = {\n            background: 'rgba(255,255,0,0.5)',\n            padding: '10px',\n            marginTop: '5px',\n            marginBottom: '5px',\n            border: '1px solid #e7d321',\n            borderRadius: '5px'\n        };\n        if (p.image.layers) {\n            flattenCheckbox = new Checkbox({\n                init: doFlatten,\n                label: LANG('import-flatten'),\n                callback: function(b) {\n                    doFlatten = b;\n                }\n            });\n            div.appendChild(flattenCheckbox.getElement());\n\n            if (p.image.warningArr) {\n                const noteEl = BB.el({\n                    content: LANG('import-psd-limited-support'),\n                    css: noteStyle\n                });\n                noteEl.appendChild(BB.el({\n                    tagName: 'a',\n                    content: 'Details',\n                    onClick: function() {\n                        showWarnings(p.image.warningArr);\n                    }\n                }));\n                div.appendChild(noteEl);\n            }\n        } else {\n            const noteEl = BB.el({\n                content: LANG('import-psd-unsupported'),\n                css: noteStyle\n            });\n            div.appendChild(noteEl);\n        }\n    }\n\n    function callback(result) {\n        const croppedImage = cropCopy.getCroppedImage();\n        const cropRect = cropCopy.getRect();\n        const isCropped = p.image.width !== cropRect.width && p.image.height !== cropRect.height;\n        cropCopy.destroy();\n        if (flattenCheckbox) {\n            flattenCheckbox.destroy();\n        }\n\n        if (result === LANG('import-btn-as-layer')) {\n            p.callback({\n                type: 'as-layer',\n                image: isCropped ? croppedImage : p.image.canvas,\n            });\n\n        } else if (result === LANG('import-btn-as-image')) {\n            if (p.image.type === 'psd') {\n                if (doFlatten) {\n                    p.image.layers = null;\n                }\n                p.callback({\n                    type: 'as-image-psd',\n                    image: p.image,\n                    cropObj: cropRect\n                });\n            } else if (p.image.type === 'image') {\n                p.callback({\n                    type: 'as-image',\n                    image: croppedImage\n                });\n            }\n        } else {\n            p.callback({\n                type: 'cancel'\n            });\n        }\n    }\n    popup({\n        target: p.target,\n        message: `<b>${LANG('import-title')}</b>`,\n        div: div,\n        style,\n        buttons: [LANG('import-btn-as-layer'), LANG('import-btn-as-image'), \"Cancel\"],\n        primaries: [LANG('import-btn-as-layer'), LANG('import-btn-as-image')],\n        callback: callback,\n        autoFocus: 'As Image'\n    });\n}","import {createCanvas} from '../../bb/base/create-canvas';\nimport {Psd} from 'ag-psd/dist/psd';\nimport {IKlProject, IKlPsd, IMixMode} from '../kl.types';\nimport {LANG} from '../../language/language';\nimport {MAX_LAYERS} from '../canvas/kl-canvas';\n\nlet kl2PsdMap;\nlet psd2KlMap;\n\nfunction init() {\n    if (kl2PsdMap) {\n        return;\n    }\n\n    kl2PsdMap = {\n        'source-over': 'normal',\n\n        'darken': 'darken',\n        'multiply': 'multiply',\n        'color-burn': 'color burn',\n\n        'lighten': 'lighten',\n        'screen': 'screen',\n        'color-dodge': 'color dodge',\n\n        'overlay': 'overlay',\n        'soft-light': 'soft light',\n        'hard-light': 'hard light',\n\n        'difference': 'difference',\n        'exclusion': 'exclusion',\n\n        'hue': 'hue',\n        'saturation': 'saturation',\n        'color': 'color',\n        'luminosity': 'luminosity',\n    };\n\n    psd2KlMap = {};\n    let keys = Object.keys(kl2PsdMap);\n    for (let i = 0; i < keys.length; i++) {\n        psd2KlMap[kl2PsdMap[keys[i]]] = keys[i];\n    }\n}\n\nexport function blendPsdToKl(str: string): IMixMode {\n    init();\n    return psd2KlMap[str];\n}\n\nexport function blendKlToPsd(str: string): string {\n    init();\n    return kl2PsdMap[str];\n}\n\n\n/**\n * Converts ag-psd object into something that KlCanvas can represent\n * @param psdObj\n */\nexport function readPsd(psdObj: Psd): IKlPsd {\n    let result: IKlPsd = {\n        type: 'psd',\n        canvas: psdObj.canvas,\n        width: psdObj.width,\n        height: psdObj.height\n    };\n\n    function addWarning(warningStr) {\n        if (!result.warningArr) {\n            result.warningArr = [];\n        }\n        if (result.warningArr.includes(warningStr)) {\n            return;\n        }\n        result.warningArr.push(warningStr);\n    }\n\n    function getMixModeStr(blendMode): IMixMode {\n        let mixModeStr: IMixMode = blendPsdToKl(blendMode);\n        if (!mixModeStr) {\n            addWarning('blend-mode');\n            mixModeStr = 'source-over';\n        }\n        return mixModeStr;\n    }\n\n    if (psdObj.bitsPerChannel !== 8) {\n        addWarning('bits-per-channel');\n    }\n\n    if (!psdObj.children) {\n        result.error = true;\n        return result;\n    }\n\n    // count resulting layers\n    let maxLayers = MAX_LAYERS;\n    let layerCount = 0;\n    function countWithinGroup(groupObj) {\n        let result = 0;\n        if (groupObj.blendMode) {\n            let mixModeStr = blendPsdToKl(groupObj.blendMode);\n            if (mixModeStr && mixModeStr !== 'source-over') {\n                return 1;\n            }\n        }\n        for (let i = 0; i < groupObj.children.length; i++) {\n            let item = groupObj.children[i];\n            if (item.clipping || item.adjustment) {\n                continue;\n            }\n\n            if (item.children) {\n                addWarning('group');\n                result += countWithinGroup(item);\n            } else {\n                result++;\n            }\n        }\n        return result;\n    }\n    layerCount += countWithinGroup(psdObj);\n    if (layerCount > maxLayers) {\n        result.error = true;\n        return result;\n    }\n\n    result.layers = [];\n\n    function prepareMask(maskCanvas, defaultColor) {\n        const groupMaskCtx = maskCanvas.getContext('2d');\n        let imData = groupMaskCtx.getImageData(0, 0, maskCanvas.width, maskCanvas.height);\n        if (defaultColor === 0) {\n            for (let i = 0; i < imData.data.length; i += 4) {\n                imData.data[i + 3] = imData.data[i];\n            }\n        } else {\n            for (let i = 0; i < imData.data.length; i += 4) {\n                imData.data[i + 3] = 255 - imData.data[i];\n            }\n        }\n        groupMaskCtx.putImageData(imData, 0, 0);\n    }\n\n    function convertGroup(psdGroupObj): {\n        name: string;\n        mixModeStr: IMixMode;\n        opacity: number;\n        image: HTMLCanvasElement;\n    }[] {\n\n        let resultArr: {\n            name: string;\n            mixModeStr: IMixMode;\n            opacity: number;\n            image: HTMLCanvasElement;\n        }[] = [];\n        let groupOpacity = psdGroupObj.hidden ? 0 : psdGroupObj.opacity;\n        let groupMixModeStr = getMixModeStr(psdGroupObj.blendMode);\n        let groupCanvas;\n        let groupCtx;\n        if (groupMixModeStr !== 'source-over') {\n            groupCanvas = createCanvas(result.width, result.height);\n            groupCtx = groupCanvas.getContext('2d');\n        }\n\n\n        // prepare group mask\n        if (psdGroupObj.mask) {\n            addWarning('mask');\n            prepareMask(psdGroupObj.mask.canvas, psdGroupObj.mask.defaultColor);\n        }\n\n\n        for (let i = 0; i < psdGroupObj.children.length; i++) {\n            let item = psdGroupObj.children[i];\n            if (item.clipping) {\n                continue;\n            }\n            if (item.adjustment) {\n                addWarning('adjustment');\n                continue;\n            }\n\n            let hasClipping = (item.children || item.canvas) && psdGroupObj.children[i + 1] && psdGroupObj.children[i + 1].clipping;\n            if (hasClipping) {\n                addWarning('clipping');\n            }\n\n            if (item.children) {\n                let innerArr = convertGroup(item);\n\n                for (let e = 0; e < innerArr.length; e++) {\n                    let innerItem = innerArr[e];\n                    let innerCtx = innerItem.image.getContext('2d');\n\n                    // clipping\n                    if (hasClipping) {\n                        let clippingCanvas = createCanvas(result.width, result.height);\n                        let clippingCtx = clippingCanvas.getContext('2d');\n                        clippingCtx.drawImage(innerItem.image, 0, 0);\n\n                        for (let f = i + 1; f < psdGroupObj.children.length && psdGroupObj.children[f].clipping; f++) {\n                            let clippingItem = psdGroupObj.children[f];\n                            if (clippingItem.opacity === 0 || clippingItem.hidden) {\n                                continue;\n                            }\n                            clippingCtx.globalCompositeOperation = getMixModeStr(clippingItem.blendMode);\n                            clippingCtx.globalAlpha = clippingItem.opacity;\n                            clippingCtx.drawImage(clippingItem.canvas, clippingItem.left, clippingItem.top);\n                        }\n\n                        innerCtx.globalCompositeOperation = 'source-atop';\n                        innerCtx.drawImage(clippingCanvas, 0, 0);\n                    }\n\n\n\n                    // group mask\n                    if (psdGroupObj.mask) {\n                        innerCtx.globalCompositeOperation = psdGroupObj.mask.defaultColor === 0 ? 'destination-in' : 'destination-out';\n                        innerCtx.drawImage(psdGroupObj.mask.canvas, psdGroupObj.mask.left, psdGroupObj.mask.top);\n                    }\n\n                    if (groupCanvas) {\n                        groupCtx.globalCompositeOperation = innerItem.mixModeStr;\n                        groupCtx.globalAlpha = innerItem.opacity;\n                        groupCtx.drawImage(innerItem.image, 0, 0);\n\n                    } else {\n                        innerItem.opacity = innerItem.opacity * groupOpacity;\n                        resultArr.push(innerItem);\n                    }\n                }\n\n                continue;\n            }\n\n            let canvas = createCanvas(result.width, result.height);\n            let ctx = canvas.getContext('2d');\n            if (item.canvas) { // if a layer is empty it has no canvas\n                ctx.drawImage(item.canvas, item.left, item.top);\n            }\n\n            // effects\n            if (item.effects) {\n                addWarning('layer-effect');\n            }\n\n            // mask\n            if (item.mask) {\n                addWarning('mask');\n                prepareMask(item.mask.canvas, item.mask.defaultColor);\n\n                ctx.globalCompositeOperation = item.mask.defaultColor === 0 ? 'destination-in' : 'destination-out';\n                ctx.drawImage(item.mask.canvas, item.mask.left, item.mask.top);\n            }\n\n            // clipping\n            if (hasClipping) {\n                let clippingCanvas = createCanvas(item.right - item.left, item.bottom - item.top);\n                let clippingCtx = clippingCanvas.getContext('2d');\n                clippingCtx.drawImage(item.canvas, 0, 0);\n\n                for (let e = i + 1; e < psdGroupObj.children.length && psdGroupObj.children[e].clipping; e++) {\n                    let clippingItem = psdGroupObj.children[e];\n                    if (clippingItem.opacity === 0 || clippingItem.hidden) {\n                        continue;\n                    }\n                    clippingCtx.globalCompositeOperation = getMixModeStr(clippingItem.blendMode);\n                    clippingCtx.globalAlpha = clippingItem.opacity;\n                    clippingCtx.drawImage(clippingItem.canvas, clippingItem.left - item.left, clippingItem.top - item.top);\n                }\n\n                ctx.globalCompositeOperation = 'source-atop';\n                ctx.drawImage(clippingCanvas, item.left, item.top);\n            }\n\n            // group mask\n            if (psdGroupObj.mask) {\n                ctx.globalCompositeOperation = psdGroupObj.mask.defaultColor === 0 ? 'destination-in' : 'destination-out';\n                ctx.drawImage(psdGroupObj.mask.canvas, psdGroupObj.mask.left, psdGroupObj.mask.top);\n            }\n\n            if (groupCanvas) {\n                if (groupOpacity > 0) {\n                    groupCtx.globalCompositeOperation = getMixModeStr(item.blendMode);\n                    groupCtx.globalAlpha = item.hidden ? 0 : item.opacity;\n                    groupCtx.drawImage(canvas, 0, 0);\n                }\n\n            } else {\n                resultArr.push({\n                    name: item.name,\n                    opacity: (item.hidden ? 0 : item.opacity) * groupOpacity,\n                    mixModeStr: getMixModeStr(item.blendMode),\n                    image: canvas,\n                });\n            }\n        }\n\n        if (groupCanvas) {\n            resultArr = [\n                {\n                    name: psdGroupObj.name,\n                    opacity: groupOpacity,\n                    mixModeStr: groupMixModeStr,\n                    image: groupCanvas,\n                }\n            ];\n        }\n\n        return resultArr;\n    }\n\n    result.layers = convertGroup({\n        name: 'root',\n        opacity: 1,\n        blendMode: 'normal',\n        children: psdObj.children\n    });\n\n    return result;\n}\n\nexport function klPsdToKlProject(klPsd: IKlPsd): IKlProject {\n    // only share references to Canvas elements\n    const result: IKlProject = {\n        width: klPsd.width,\n        height: klPsd.height,\n        layers: [],\n    };\n    if (klPsd.layers) {\n        result.layers = result.layers.concat(klPsd.layers.map(item => {\n            return {\n                name: item.name,\n                opacity: item.opacity,\n                mixModeStr: item.mixModeStr,\n                image: item.image,\n            };\n        }));\n    } else {\n        // flattened\n        result.layers.push({\n            name: LANG('background'),\n            opacity: 1,\n            mixModeStr: 'source-over',\n            image: klPsd.canvas,\n        });\n    }\n    return result;\n}","//browser storage indexedDB\n\n\nimport {IKlStorageProject} from '../kl.types';\n\nconst indexedDbIsSupported = !!window.indexedDB;\nlet dbNameStr = 'Klecks';\nconst storageNameStr = 'ProjectStore';\n\nexport function setDbName(name: string) {\n    dbNameStr = '' + name;\n}\n\n/**\n * connects to db dbNameStr, then executes transaction on storageNameStr storage\n * with index 'id'\n *\n * @param actionFunction function(storeObj) - what you want to execute during transaction\n * @param successCallback function() - on succesful transaction\n * @param errorCallback function(errorStr) - on error\n */\nfunction execIndexedDBTransaction(actionFunction, successCallback, errorCallback) {\n\n    let hasFinished = false;\n\n    function onSuccess() {\n        if (hasFinished) {\n            return;\n        }\n        hasFinished = true;\n        successCallback();\n    }\n\n    function onError(errorStr) {\n        if (hasFinished) {\n            return;\n        }\n        hasFinished = true;\n        errorCallback(errorStr);\n    }\n\n    if (!indexedDbIsSupported) {\n        setTimeout(function () {\n            onError('no indexed db available');\n        }, 0);\n        return;\n    }\n    let requestObj;\n\n    try {\n        requestObj = window.indexedDB.open(dbNameStr, 1);\n    } catch (e) {\n        onError(e.message);\n        return;\n    }\n\n    requestObj.onupgradeneeded = function (e) {\n        try {\n            let db = requestObj.result;\n            let store = db.createObjectStore(storageNameStr, {keyPath: 'id'});\n            store.createIndex('id', 'id', {unique: true});\n        } catch (e) {\n            onError(e.message);\n        }\n    };\n    requestObj.onerror = function (e) {\n        onError('indexedDB.open failed, ' + requestObj.error);\n    };\n    requestObj.onsuccess = function (e) {\n        let databaseObj;\n        let transactionObj;\n        let storeObj;\n\n        try {\n            databaseObj = requestObj.result;\n            if (!databaseObj.objectStoreNames.contains(storageNameStr)) {\n                //someone maybe messed with the db, or creation failed earlier\n                //it's broken -> destroy\n                window.indexedDB.deleteDatabase(dbNameStr);\n                onError('object store ' + storageNameStr + ' missing. destroying db');\n                return;\n            }\n            transactionObj = databaseObj.transaction(storageNameStr, 'readwrite');\n            storeObj = transactionObj.objectStore(storageNameStr);\n            storeObj.index('id');\n        } catch (e) {\n            onError(e.message);\n            return;\n        }\n\n        databaseObj.onerror = function (e) {\n            onError('database error, ' + databaseObj.error);\n        };\n\n        try {\n            actionFunction(storeObj);\n        } catch (e) {\n            onError(e.message);\n            return;\n        }\n\n        transactionObj.oncomplete = function () {\n            onSuccess();\n            databaseObj.close();\n        };\n        transactionObj.onerror = function () {\n            onError('transaction error, ' + transactionObj.error);\n        };\n    };\n}\n\n/**\n * getKlProjectObj {\n *     width: int,\n *     height: int,\n *     layers: {\n *        name: string,\n *        opacity: float (0 - 1),\n *        mixModeStr: string,\n *        image: image object                <--------- image already loaded!\n *     }[]\n * }\n *\n * @param successCallback function - called when succesfully queried. passes KlProjectObj\n * @param errorCallback - function(errorStr) - called when error during query\n */\nexport function getKlProjectObj(successCallback, errorCallback) {\n    if (indexedDbIsSupported) {\n        let query;\n        execIndexedDBTransaction(function (storeObj) {\n            query = storeObj.get(1);\n        }, function () {\n            successCallback(query.result);\n        }, function (errorStr) {\n            errorCallback('execIndexedDBTransaction error, ' + errorStr);\n        });\n    } else {\n        successCallback(null);\n    }\n}\n\n/**\n * stores a klProjectObj into id = 1 in database:dbNameStr > storage: storageNameStr\n *\n * KlProjectObj {\n *     width: int,\n *     height: int,\n *     layers: {\n *        name: string,\n *        opacity: float (0 - 1),\n *        mixModeStr: string,\n *        blob: blob object                 <--------- blob!\n *     }[]\n * }\n *\n * @param storageProject IKlStorageProject - project to be stored\n * @param successCallback function() - on successful transaction\n * @param errorCallback function(errorStr) - on error\n */\nexport function storeKlProjectObj(storageProject: IKlStorageProject, successCallback, errorCallback) {\n    execIndexedDBTransaction(function (storeObj) {\n        storeObj.put(storageProject);\n    }, function () {\n        successCallback();\n    }, function (errorStr) {\n        errorCallback(errorStr);\n    });\n\n}\n\n/**\n * removes id = 1 from database:dbNameStr > storage: storageNameStr\n *\n * @param successCallback function() - on successful transaction\n * @param errorCallback function(error) - on error\n */\nexport function clear(successCallback, errorCallback) {\n    execIndexedDBTransaction(function (storeObj) {\n        storeObj.delete(1);\n    }, function () {\n        successCallback();\n    }, function (error) {\n        errorCallback(error);\n    });\n\n}\n","import {IFilter} from '../kl.types';\n// @ts-ignore\nimport glBrightnessContrastImg from 'url:~/src/app/img/ui/edit-brightness-contrast.svg';\n// @ts-ignore\nimport cropExtendImg from 'url:~/src/app/img/ui/edit-crop.svg';\n// @ts-ignore\nimport glCurvesImg from 'url:~/src/app/img/ui/edit-curves.svg';\n// @ts-ignore\nimport flipImg from 'url:~/src/app/img/ui/edit-flip.svg';\n// @ts-ignore\nimport glHueSaturationImg from 'url:~/src/app/img/ui/edit-hue-saturation.svg';\n// @ts-ignore\nimport invertImg from 'url:~/src/app/img/ui/edit-invert.png';\n// @ts-ignore\nimport glPerspectiveImg from 'url:~/src/app/img/ui/edit-perspective.svg';\n// @ts-ignore\nimport resizeImg from 'url:~/src/app/img/ui/edit-resize.svg';\n// @ts-ignore\nimport rotateImg from 'url:~/src/app/img/ui/edit-rotate.svg';\n// @ts-ignore\nimport glTiltShiftImg from 'url:~/src/app/img/ui/edit-tilt-shift.png';\n// @ts-ignore\nimport toAlphaImg from 'url:~/src/app/img/ui/edit-to-alpha.svg';\n// @ts-ignore\nimport transformImg from 'url:~/src/app/img/ui/edit-transform.svg';\n// @ts-ignore\nimport glBlurImg from 'url:~/src/app/img/ui/edit-triangle-blur.png';\n// @ts-ignore\nimport glUnsharpMaskImg from 'url:~/src/app/img/ui/edit-unsharp-mask.png';\n// @ts-ignore\nimport gridImg from 'url:~/src/app/img/ui/edit-grid.svg';\n// @ts-ignore\nimport noiseImg from 'url:~/src/app/img/ui/edit-noise.svg';\n// @ts-ignore\nimport patternImg from 'url:~/src/app/img/ui/edit-pattern.svg';\n// @ts-ignore\nimport vanishPointImg from 'url:~/src/app/img/ui/edit-vanish-point.svg';\n// @ts-ignore\nimport distortImg from 'url:~/src/app/img/ui/edit-distort.svg';\n\n\nexport const filterLibStatus = {\n    isLoaded: false,\n};\nexport const filterLib: {\n    [key:string]: IFilter;\n} = {\n    brightnessContrast: {\n        lang: {name: 'filter-bright-contrast-title', button: 'filter-bright-contrast'},\n        icon: glBrightnessContrastImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    cropExtend: {\n        lang: {name: 'filter-crop-title', button: 'filter-crop-extend'},\n        icon: cropExtendImg,\n        updatePos: true,\n        getDialog: null,\n        apply: null,\n        inEmbed: false,\n    },\n    curves: {\n        lang: {name: 'filter-curves-title', button: 'filter-curves'},\n        icon: glCurvesImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    distort: {\n        lang: {name: 'filter-distort', button: 'filter-distort'},\n        icon: distortImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    flip: {\n        lang: {name: 'filter-flip-title', button: 'filter-flip'},\n        icon: flipImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    hueSaturation: {\n        lang: {name: 'filter-hue-sat-title', button: 'filter-hue-sat'},\n        icon: glHueSaturationImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    invert: {\n        lang: {name: 'filter-invert', button: 'filter-invert'},\n        icon: invertImg,\n        updatePos: false,\n        isInstant: true,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    perspective: {\n        lang: {name: 'filter-perspective-title', button: 'filter-perspective'},\n        icon: glPerspectiveImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    resize: {\n        lang: {name: 'filter-resize-title', button: 'filter-resize'},\n        icon: resizeImg,\n        updatePos: true,\n        getDialog: null,\n        apply: null,\n        inEmbed: false,\n    },\n    rotate: {\n        lang: {name: 'filter-rotate-title', button: 'filter-rotate'},\n        icon: rotateImg,\n        updatePos: true,\n        getDialog: null,\n        apply: null,\n        inEmbed: false,\n    },\n    tiltShift: {\n        lang: {name: 'filter-tilt-shift-title', button: 'filter-tilt-shift'},\n        icon: glTiltShiftImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    toAlpha: {\n        lang: {name: 'filter-to-alpha-title', button: 'filter-to-alpha'},\n        icon: toAlphaImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    transform: {\n        lang: {name: 'filter-transform-title', button: 'filter-transform'},\n        icon: transformImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    blur: {\n        lang: {name: 'filter-triangle-blur-title', button: 'filter-triangle-blur'},\n        icon: glBlurImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    unsharpMask: {\n        lang: {name: 'filter-unsharp-mask-title', button: 'filter-unsharp-mask'},\n        icon: glUnsharpMaskImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    grid: {\n        lang: {name: 'filter-grid', button: 'filter-grid'},\n        icon: gridImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    noise: {\n        lang: {name: 'filter-noise', button: 'filter-noise'},\n        icon: noiseImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    pattern: {\n        lang: {name: 'filter-pattern', button: 'filter-pattern'},\n        icon: patternImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    vanishPoint: {\n        lang: {name: 'filter-vanish-point-title', button: 'filter-vanish-point'},\n        icon: vanishPointImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n};\n","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-brightness-contrast.97f67b0b.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-crop.e23b74d5.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-curves.e1274581.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-flip.0d761af0.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-hue-saturation.c73b0cbc.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-invert.229522c0.png\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-perspective.f6d27cc7.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-resize.e45829a8.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-tilt-shift.5faf472d.png\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-to-alpha.3021c221.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-transform.90ef80d8.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-triangle-blur.cd2d10f7.png\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-unsharp-mask.6d8ed0c4.png\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-grid.9bc86d29.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-noise.82864290.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-pattern.24d4a17a.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-vanish-point.b046f428.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"edit-distort.32de6aab.svg\" + \"?\" + Date.now();","import {PenBrush} from './pen-brush';\nimport {BlendBrush} from './blend-brush';\nimport {SketchyBrush} from './sketchy-brush';\nimport {PixelBrush} from './pixel-brush';\nimport {EraserBrush} from './eraser-brush';\nimport {SmudgeBrush} from './smudge-brush';\nimport {ChemyBrush} from './chemy-brush';\n\nexport const brushes = {\n    PenBrush,\n    BlendBrush,\n    SketchyBrush,\n    PixelBrush,\n    ChemyBrush,\n    SmudgeBrush,\n    EraserBrush,\n}","import {BB} from '../../bb/bb';\nimport {alphaImArr} from './brushes-common';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\nimport {KL} from '../kl';\n\n\nexport function PenBrush() {\n\n    let context;\n    let history: KlHistoryInterface = new KL.DecoyKlHistory();\n    let historyEntry: IHistoryEntry;\n\n    let settingColor, settingSize = 2, settingSpacing = 0.8489, settingOpacity = 1;\n    let settingColorStr;\n    let settingHasSizePressure = true, settingHasOpacityPressure = false;\n    let settingLockLayerAlpha = false;\n    let ALPHA_CIRCLE = 0, ALPHA_CHALK = 1, ALPHA_CAL = 2, ALPHA_SQUARE = 3;\n    let settingAlphaId = ALPHA_CIRCLE;\n\n    let lineToolLastDot;\n    let lastInput = {x: 0, y: 0, pressure: 0};\n    let lastInput2 = {x: 0, y: 0, pressure: 0};\n\n    let isDrawing = false;\n    let alphaOpacityArr = [1, 0.9, 1, 1];\n\n    //mipmapping\n    let alphaCanvas128 = BB.canvas(128, 128);\n    let alphaCanvas64 = BB.canvas(64, 64);\n    let alphaCanvas32 = BB.canvas(32, 32);\n\n    let bezierLine = null;\n\n    let twoPI = Math.PI * 2;\n    let hasDrawnDot = false; // current stroke has drawn at least one dot\n    let inputArr: {x: number, y: number, pressure: number}[];\n\n    // pressure: 0-1\n    function calcOpacity(pressure: number) {\n        return settingOpacity * (settingHasOpacityPressure ? pressure * pressure : 1);\n    }\n\n    function updateAlphaCanvas() {\n        if (settingAlphaId === ALPHA_CIRCLE || settingAlphaId === ALPHA_SQUARE) {\n            return;\n        }\n\n        let instructionArr = [\n            [alphaCanvas128, 128],\n            [alphaCanvas64, 64],\n            [alphaCanvas32, 32]\n        ];\n\n        let ctx;\n\n        for (let i = 0; i < instructionArr.length; i++) {\n            ctx = (instructionArr[i][0] as any).getContext(\"2d\");\n\n            ctx.save();\n            ctx.clearRect(0, 0, instructionArr[i][1], instructionArr[i][1]);\n\n            ctx.fillStyle = \"rgba(\" + settingColor.r + \", \" + settingColor.g + \", \" + settingColor.b + \", \" + alphaOpacityArr[settingAlphaId] + \")\";\n            ctx.fillRect(0, 0, instructionArr[i][1], instructionArr[i][1]);\n\n            ctx.globalCompositeOperation = \"destination-in\";\n            ctx.imageSmoothingQuality = 'high';\n            ctx.drawImage(alphaImArr[settingAlphaId], 0, 0, instructionArr[i][1], instructionArr[i][1]);\n\n            ctx.restore();\n        }\n    }\n\n    /**\n     *\n     *\n     * @param x\n     * @param y\n     * @param size\n     * @param opacity\n     * @param angle\n     * @param before - [x, y, size, opacity, angle] the drawDot call before\n     */\n    function drawDot(x, y, size, opacity, angle?, before?) {\n        if (size <= 0) {\n            return;\n        }\n\n        if (settingLockLayerAlpha) {\n            context.globalCompositeOperation = \"source-atop\";\n        }\n\n        if (!before || before[3] !== opacity) {\n            context.globalAlpha = opacity;\n        }\n\n        if (!before && (settingAlphaId === ALPHA_CIRCLE || settingAlphaId === ALPHA_SQUARE)) {\n            context.fillStyle = settingColorStr;\n        }\n\n        if (settingAlphaId === ALPHA_CIRCLE) {\n            context.beginPath();\n            context.arc(x, y, size, 0, twoPI);\n            context.closePath();\n            context.fill();\n            hasDrawnDot = true;\n\n        } else if (settingAlphaId === ALPHA_SQUARE) {\n            if (angle !== undefined) {\n                context.save();\n                context.translate(x, y);\n                context.rotate(angle / 180 * Math.PI);\n                context.fillRect(-size, -size, size * 2, size * 2);\n                context.restore();\n                hasDrawnDot = true;\n            }\n\n        } else { // other brush alphas\n            context.save();\n            context.translate(x, y);\n            let targetMipmap = alphaCanvas128;\n            if (size <= 32 && size > 16) {\n                targetMipmap = alphaCanvas64;\n            } else if (size <= 16) {\n                targetMipmap = alphaCanvas32;\n            }\n            context.scale(size, size);\n            if (settingAlphaId === ALPHA_CHALK) {\n                context.rotate(((x + y) * 53123) % twoPI); // without mod it sometimes looks different\n            }\n            context.drawImage(targetMipmap, -1, -1, 2, 2);\n\n            context.restore();\n            hasDrawnDot = true;\n        }\n    }\n\n    function continueLine(x, y, size, pressure) {\n        if (bezierLine === null) {\n            bezierLine = new BB.BezierLine();\n            bezierLine.add(lastInput.x, lastInput.y, 0, function(){});\n        }\n\n        let drawArr = []; //draw instructions. will be all drawn at once\n\n        function dotCallback(val) {\n            let localPressure = BB.mix(lastInput2.pressure, pressure, val.t);\n            let localOpacity = calcOpacity(localPressure);\n            let localSize = Math.max(0.1, settingSize * (settingHasSizePressure ? localPressure : 1));\n            drawArr.push([val.x, val.y, localSize, localOpacity, val.angle]);\n        }\n\n        let localSpacing = size * settingSpacing;\n        if (x === null) {\n            bezierLine.addFinal(localSpacing, dotCallback);\n        } else {\n            bezierLine.add(x, y, localSpacing, dotCallback);\n        }\n\n        // execute draw instructions\n        context.save();\n        let before;\n        for (let i = 0; i < drawArr.length; i++) {\n            let item = drawArr[i];\n            drawDot(item[0], item[1], item[2], item[3], item[4], before);\n            before = item;\n        }\n        context.restore();\n    }\n\n    //------------------ interface ---------------------------------------------------\n\n\n    this.startLine = function (x, y, p) {\n        historyEntry = {\n            tool: [\"brush\", \"PenBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"opacityPressure\",\n            params: [settingHasOpacityPressure]\n        });\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [settingHasSizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [settingSize]\n        });\n        historyEntry.actions.push({\n            action: \"setSpacing\",\n            params: [settingSpacing]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [settingOpacity]\n        });\n        historyEntry.actions.push({\n            action: \"setColor\",\n            params: [settingColor]\n        });\n        historyEntry.actions.push({\n            action: \"setAlpha\",\n            params: [settingAlphaId]\n        });\n        historyEntry.actions.push({\n            action: \"setLockAlpha\",\n            params: [settingLockLayerAlpha]\n        });\n\n        p = BB.clamp(p, 0, 1);\n        let localOpacity = calcOpacity(p);\n        let localSize = settingHasSizePressure ? Math.max(0.1, p * settingSize) : Math.max(0.1, settingSize);\n\n        hasDrawnDot = false;\n\n        isDrawing = true;\n        context.save();\n        drawDot(x, y, localSize, localOpacity);\n        context.restore();\n\n        lineToolLastDot = localSize * settingSpacing;\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput.pressure = p;\n        lastInput2.pressure = p;\n\n        inputArr = [{\n            x,\n            y,\n            pressure: p,\n        }];\n\n        historyEntry.actions.push({\n            action: \"startLine\",\n            params: [x, y, p]\n        });\n    };\n\n    this.goLine = function (x, y, p) {\n        if (!isDrawing) {\n            return;\n        }\n        historyEntry.actions.push({\n            action: \"goLine\",\n            params: [x, y, p]\n        });\n\n        let pressure = BB.clamp(p, 0, 1);\n        let localSize = settingHasSizePressure ? Math.max(0.1, lastInput.pressure * settingSize) : Math.max(0.1, settingSize);\n\n        context.save();\n        continueLine(x, y, localSize, lastInput.pressure);\n\n        /*context.fillStyle = 'red';\n        context.fillRect(Math.floor(x), Math.floor(y - 10), 1, 20);\n        context.fillRect(Math.floor(x - 10), Math.floor(y), 20, 1);*/\n\n        context.restore();\n\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput2.pressure = lastInput.pressure;\n        lastInput.pressure = pressure;\n\n        inputArr.push({\n            x,\n            y,\n            pressure: p,\n        });\n    };\n\n    this.endLine = function (x, y) {\n\n        let localSize = settingHasSizePressure ? Math.max(0.1, lastInput.pressure * settingSize) : Math.max(0.1, settingSize);\n        context.save();\n        continueLine(null, null, localSize, lastInput.pressure);\n        context.restore();\n\n        isDrawing = false;\n\n        if (settingAlphaId === ALPHA_SQUARE && !hasDrawnDot) {\n            // find max pressure input, use that one\n            let maxInput = inputArr[0];\n            inputArr.forEach(item => {\n                if (item.pressure > maxInput.pressure) {\n                    maxInput = item;\n                }\n            })\n\n            context.save();\n            let p = BB.clamp(maxInput.pressure, 0, 1);\n            let localOpacity = calcOpacity(p);\n            drawDot(maxInput.x, maxInput.y, localSize, localOpacity, 0);\n            context.restore();\n        }\n\n        bezierLine = null;\n\n        if (historyEntry) {\n            historyEntry.actions.push({\n                action: \"endLine\",\n                params: [x, y]\n            });\n            history.push(historyEntry);\n            historyEntry = undefined;\n        }\n\n        hasDrawnDot = false;\n        inputArr = [];\n    };\n    //cheap n' ugly\n    this.drawLineSegment = function (x1, y1, x2, y2) {\n        lastInput.x = x2;\n        lastInput.y = y2;\n        lastInput.pressure = 1;\n\n        if (isDrawing || x1 === undefined) {\n            return;\n        }\n\n        let angle = BB.pointsToAngleDeg({x:x1, y:y1}, {x:x2, y:y2});\n        let mouseDist = Math.sqrt(Math.pow(x2 - x1, 2.0) + Math.pow(y2 - y1, 2.0));\n        let eX = (x2 - x1) / mouseDist;\n        let eY = (y2 - y1) / mouseDist;\n        let loopDist;\n        let bdist = settingSize * settingSpacing;\n        lineToolLastDot = settingSize * settingSpacing;\n        context.save();\n        for (loopDist = lineToolLastDot; loopDist <= mouseDist; loopDist += bdist) {\n            drawDot(x1 + eX * loopDist, y1 + eY * loopDist, settingSize, settingOpacity, angle);\n        }\n        context.restore();\n\n\n        let historyEntry = {\n            tool: [\"brush\", \"PenBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"opacityPressure\",\n            params: [settingHasOpacityPressure]\n        });\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [settingHasSizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [settingSize]\n        });\n        historyEntry.actions.push({\n            action: \"setSpacing\",\n            params: [settingSpacing]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [settingOpacity]\n        });\n        historyEntry.actions.push({\n            action: \"setColor\",\n            params: [settingColor]\n        });\n        historyEntry.actions.push({\n            action: \"setAlpha\",\n            params: [settingAlphaId]\n        });\n        historyEntry.actions.push({\n            action: \"setLockAlpha\",\n            params: [settingLockLayerAlpha]\n        });\n\n        historyEntry.actions.push({\n            action: \"drawLineSegment\",\n            params: [x1, y1, x2, y2]\n        });\n        history.push(historyEntry);\n    };\n\n    //IS\n    this.isDrawing = function () {\n        return isDrawing;\n    };\n    //SET\n    this.setAlpha = function (a) {\n        if (settingAlphaId === a) {\n            return;\n        }\n        settingAlphaId = a;\n        updateAlphaCanvas();\n    };\n    this.setColor = function (c) {\n        if (settingColor === c) {\n            return;\n        }\n        settingColor = {r: c.r, g: c.g, b: c.b};\n        settingColorStr = \"rgb(\" + settingColor.r + \",\" + settingColor.g + \",\" + settingColor.b + \")\";\n        updateAlphaCanvas();\n    };\n    this.setContext = function (c) {\n        context = c;\n    };\n    this.setHistory = function (l: KlHistoryInterface) {\n        history = l;\n    };\n    this.setSize = function (s) {\n        settingSize = s;\n    };\n    this.setOpacity = function (o) {\n        settingOpacity = o;\n    };\n    this.setSpacing = function (s) {\n        settingSpacing = s;\n    };\n    this.sizePressure = function (b) {\n        settingHasSizePressure = b;\n    };\n    this.opacityPressure = function (b) {\n        settingHasOpacityPressure = b;\n    };\n    this.setLockAlpha = function (b) {\n        settingLockLayerAlpha = b;\n    };\n    //GET\n    this.getSpacing = function () {\n        return settingSpacing;\n    };\n    this.getSize = function () {\n        return settingSize;\n    };\n    this.getOpacity = function () {\n        return settingOpacity;\n    };\n    this.getLockAlpha = function (b) {\n        return settingLockLayerAlpha;\n    };\n}","import {genBrushAlpha01, genBrushAlpha02} from './alphas/brush-alphas';\n\nexport const alphaImArr = []; //used by default brush\nalphaImArr[1] = genBrushAlpha01(128);\nalphaImArr[2] = genBrushAlpha02(128);","import {BB} from '../../../bb/bb';\nimport {noise} from '../../../bb/math/perlin';\nimport {IVector2D} from '../../../bb/bb.types';\n\n// chalk\nexport function genBrushAlpha01(w: number): HTMLCanvasElement {\n\n    const scaleFac = w / 500;\n    const h = w;\n    const canvas = BB.canvas(w, h);\n    const ctx = canvas.getContext('2d');\n    const imData = ctx.createImageData(w, h);\n    for (let x = 0; x < w; x++) {\n        for (let y = 0; y < h; y++) {\n            let i = (y * w + x) * 4;\n\n            // base noise\n            const sFac2 = scaleFac + noise.simplex2(x / 50 / scaleFac, y / 50 / scaleFac) * 0.04;\n            let noisePattern = 100 + (noise.simplex2(x / 50 / sFac2, y / 50 / sFac2) + 1) / 2 * 100;\n            noisePattern -= (noise.simplex2(x / 10 / scaleFac, y / 10 / scaleFac) + 1) / 2 * 100;\n\n            // fade out in circular shape\n            const centerDist = BB.dist(w / 2, h / 2, x, y);\n            let falloff = BB.clamp(\n                1 - ((centerDist - (w / 2.5)) / (w / 14) + noise.simplex2(x / 22 / sFac2, y / 22 / sFac2)),\n                0,\n                1);\n            noisePattern = noisePattern * falloff;\n\n            // make the middle darker\n            const falloff2 = BB.clamp(1 - centerDist / w, 0, 1) * 2;\n            noisePattern = noisePattern * falloff2;\n\n            imData.data[i] = 0;\n            imData.data[i + 1] = 0;\n            imData.data[i + 2] = 0;\n            imData.data[i + 3] = BB.clamp(noisePattern, 0, 255);\n        }\n    }\n\n    ctx.putImageData(imData, 0, 0);\n    return canvas;\n}\n\n// https://www.shadertoy.com/view/3tdSDj\nfunction udSegment( p: IVector2D, a: IVector2D, b: IVector2D ) {\n    let ba = BB.Vec2.sub(b, a);\n    let pa = BB.Vec2.sub(p, a);\n    let h = BB.clamp( BB.Vec2.dot(pa,ba) / BB.Vec2.dot(ba,ba), 0.0, 1.0 );\n    return BB.Vec2.len(BB.Vec2.sub(pa, BB.Vec2.mul(ba, h)));\n}\n\n// calligraphy\nexport function genBrushAlpha02(w: number): HTMLCanvasElement {\n\n    const pDist = 1 / 4;\n    let centerSize = 2 / 3;\n    let transitionSize = 1 / 3;\n    centerSize *= pDist;\n    transitionSize *= pDist;\n    const p1 = {x: pDist * w, y: w - (w * pDist)};\n    const p2 = {x: w - (w * pDist), y: pDist * w};\n\n    const h = w;\n    const canvas = BB.canvas(w, h);\n    let ctx = canvas.getContext('2d');\n    const imData = ctx.createImageData(w, h);\n    for (let x = 0; x < w; x++) {\n        for (let y = 0; y < h; y++) {\n            const i = (y * w + x) * 4;\n\n            let col = udSegment({x: x, y: y}, p1, p2);\n\n            col = BB.clamp(\n                255 - ((col - (w * centerSize)) / (w * transitionSize) * 255),\n                0,\n                255\n            );\n\n            imData.data[i] = 0;\n            imData.data[i + 1] = 0;\n            imData.data[i + 2] = 0;\n            imData.data[i + 3] = col;\n        }\n    }\n\n    ctx.putImageData(imData, 0, 0);\n    return canvas;\n}","/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\nconst myModule = {} as any;\n\n\nfunction Grad(x, y, z) {\n    this.x = x; this.y = y; this.z = z;\n}\n\nGrad.prototype.dot2 = function(x, y) {\n    return this.x*x + this.y*y;\n};\n/*\nGrad.prototype.dot3 = function(x, y, z) {\n    return this.x*x + this.y*y + this.z*z;\n};*/\n\nlet grad3 = [new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),\n    new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),\n    new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)];\n\nlet p = [151,160,137,91,90,15,\n    131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n    190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n    88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,\n    77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n    102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,\n    135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,\n    5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n    223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,\n    129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,\n    251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,\n    49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,\n    138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n// To remove the need for index wrapping, double the permutation table length\nlet perm = new Array(512);\nlet gradP = new Array(512);\n\n// This isn't a very good seeding function, but it works ok. It supports 2^16\n// different seed values. Write something better if you need more seeds.\nmyModule.seed = function(seed) {\n    if (seed > 0 && seed < 1) {\n        // Scale the seed out\n        seed *= 65536;\n    }\n\n    seed = Math.floor(seed);\n    if (seed < 256) {\n        seed |= seed << 8;\n    }\n\n    for (let i = 0; i < 256; i++) {\n        let v;\n        if (i & 1) {\n            v = p[i] ^ (seed & 255);\n        } else {\n            v = p[i] ^ ((seed>>8) & 255);\n        }\n\n        perm[i] = perm[i + 256] = v;\n        gradP[i] = gradP[i + 256] = grad3[v % 12];\n    }\n};\n\nmyModule.seed(0);\n\n/*\nfor (let i=0; i<256; i++) {\n  perm[i] = perm[i + 256] = p[i];\n  gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\n}*/\n\n// Skewing and unskewing factors for 2, 3, and 4 dimensions\nlet F2 = 0.5*(Math.sqrt(3)-1);\nlet G2 = (3-Math.sqrt(3))/6;\n\n/*let F3 = 1/3;\nlet G3 = 1/6;*/\n\n// 2D simplex noise\nmyModule.simplex2 = function(xin, yin) {\n    let n0, n1, n2; // Noise contributions from the three corners\n    // Skew the input space to determine which simplex cell we're in\n    let s = (xin+yin)*F2; // Hairy factor for 2D\n    let i = Math.floor(xin+s);\n    let j = Math.floor(yin+s);\n    let t = (i+j)*G2;\n    let x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    let y0 = yin-j+t;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if (x0>y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n        i1=1; j1=0;\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n        i1=0; j1=1;\n    }\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    let x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    let y1 = y0 - j1 + G2;\n    let x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n    let y2 = y0 - 1 + 2 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    i &= 255;\n    j &= 255;\n    let gi0 = gradP[i+perm[j]];\n    let gi1 = gradP[i+i1+perm[j+j1]];\n    let gi2 = gradP[i+1+perm[j+1]];\n    // Calculate the contribution from the three corners\n    let t0 = 0.5 - x0*x0-y0*y0;\n    if (t0<0) {\n        n0 = 0;\n    } else {\n        t0 *= t0;\n        n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n    }\n    let t1 = 0.5 - x1*x1-y1*y1;\n    if (t1<0) {\n        n1 = 0;\n    } else {\n        t1 *= t1;\n        n1 = t1 * t1 * gi1.dot2(x1, y1);\n    }\n    let t2 = 0.5 - x2*x2-y2*y2;\n    if (t2<0) {\n        n2 = 0;\n    } else {\n        t2 *= t2;\n        n2 = t2 * t2 * gi2.dot2(x2, y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70 * (n0 + n1 + n2);\n};\n/*\n// 3D simplex noise\nmyModule.simplex3 = function(xin, yin, zin) {\n    let n0, n1, n2, n3; // Noise contributions from the four corners\n\n    // Skew the input space to determine which simplex cell we're in\n    let s = (xin+yin+zin)*F3; // Hairy factor for 2D\n    let i = Math.floor(xin+s);\n    let j = Math.floor(yin+s);\n    let k = Math.floor(zin+s);\n\n    let t = (i+j+k)*G3;\n    let x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    let y0 = yin-j+t;\n    let z0 = zin-k+t;\n\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    let i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    let i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if (x0 >= y0) {\n        if (y0 >= z0)      { i1=1; j1=0; k1=0; i2=1; j2=1; k2=0; }\n        else if (x0 >= z0) { i1=1; j1=0; k1=0; i2=1; j2=0; k2=1; }\n        else              { i1=0; j1=0; k1=1; i2=1; j2=0; k2=1; }\n    } else {\n        if (y0 < z0)      { i1=0; j1=0; k1=1; i2=0; j2=1; k2=1; }\n        else if (x0 < z0) { i1=0; j1=1; k1=0; i2=0; j2=1; k2=1; }\n        else             { i1=0; j1=1; k1=0; i2=1; j2=1; k2=0; }\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    let x1 = x0 - i1 + G3; // Offsets for second corner\n    let y1 = y0 - j1 + G3;\n    let z1 = z0 - k1 + G3;\n\n    let x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n    let y2 = y0 - j2 + 2 * G3;\n    let z2 = z0 - k2 + 2 * G3;\n\n    let x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n    let y3 = y0 - 1 + 3 * G3;\n    let z3 = z0 - 1 + 3 * G3;\n\n    // Work out the hashed gradient indices of the four simplex corners\n    i &= 255;\n    j &= 255;\n    k &= 255;\n    let gi0 = gradP[i+   perm[j+   perm[k   ]]];\n    let gi1 = gradP[i+i1+perm[j+j1+perm[k+k1]]];\n    let gi2 = gradP[i+i2+perm[j+j2+perm[k+k2]]];\n    let gi3 = gradP[i+ 1+perm[j+ 1+perm[k+ 1]]];\n\n    // Calculate the contribution from the four corners\n    let t0 = 0.6 - x0*x0 - y0*y0 - z0*z0;\n    if (t0<0) {\n        n0 = 0;\n    } else {\n        t0 *= t0;\n        n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\n    }\n    let t1 = 0.6 - x1*x1 - y1*y1 - z1*z1;\n    if (t1<0) {\n        n1 = 0;\n    } else {\n        t1 *= t1;\n        n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n    }\n    let t2 = 0.6 - x2*x2 - y2*y2 - z2*z2;\n    if (t2<0) {\n        n2 = 0;\n    } else {\n        t2 *= t2;\n        n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n    }\n    let t3 = 0.6 - x3*x3 - y3*y3 - z3*z3;\n    if (t3<0) {\n        n3 = 0;\n    } else {\n        t3 *= t3;\n        n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 32 * (n0 + n1 + n2 + n3);\n\n};\n*/\n// ##### Perlin noise stuff\n/*\nfunction fade(t) {\n    return t*t*t*(t*(t*6-15)+10);\n}\n\nfunction lerp(a, b, t) {\n    return (1-t)*a + t*b;\n}\n\n// 2D Perlin Noise\nmyModule.perlin2 = function(x, y) {\n    // Find unit grid cell containing point\n    let X = Math.floor(x), Y = Math.floor(y);\n    // Get relative xy coordinates of point within that cell\n    x = x - X; y = y - Y;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255;\n\n    // Calculate noise contributions from each of the four corners\n    let n00 = gradP[X+perm[Y]].dot2(x, y);\n    let n01 = gradP[X+perm[Y+1]].dot2(x, y-1);\n    let n10 = gradP[X+1+perm[Y]].dot2(x-1, y);\n    let n11 = gradP[X+1+perm[Y+1]].dot2(x-1, y-1);\n\n    // Compute the fade curve value for x\n    let u = fade(x);\n\n    // Interpolate the four results\n    return lerp(\n        lerp(n00, n10, u),\n        lerp(n01, n11, u),\n        fade(y));\n};*/\n/*\n// 3D Perlin Noise\nmyModule.perlin3 = function(x, y, z) {\n    // Find unit grid cell containing point\n    let X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\n    // Get relative xyz coordinates of point within that cell\n    x = x - X; y = y - Y; z = z - Z;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255; Z = Z & 255;\n\n    // Calculate noise contributions from each of the eight corners\n    let n000 = gradP[X+  perm[Y+  perm[Z  ]]].dot3(x,   y,     z);\n    let n001 = gradP[X+  perm[Y+  perm[Z+1]]].dot3(x,   y,   z-1);\n    let n010 = gradP[X+  perm[Y+1+perm[Z  ]]].dot3(x,   y-1,   z);\n    let n011 = gradP[X+  perm[Y+1+perm[Z+1]]].dot3(x,   y-1, z-1);\n    let n100 = gradP[X+1+perm[Y+  perm[Z  ]]].dot3(x-1,   y,   z);\n    let n101 = gradP[X+1+perm[Y+  perm[Z+1]]].dot3(x-1,   y, z-1);\n    let n110 = gradP[X+1+perm[Y+1+perm[Z  ]]].dot3(x-1, y-1,   z);\n    let n111 = gradP[X+1+perm[Y+1+perm[Z+1]]].dot3(x-1, y-1, z-1);\n\n    // Compute the fade curve value for x, y, z\n    let u = fade(x);\n    let v = fade(y);\n    let w = fade(z);\n\n    // Interpolate\n    return lerp(\n        lerp(\n            lerp(n000, n100, u),\n            lerp(n001, n101, u), w),\n        lerp(\n            lerp(n010, n110, u),\n            lerp(n011, n111, u), w),\n        v);\n};*/\n\nexport const noise = myModule;","import {BB} from '../../bb/bb';\nimport {IRGB, IRGBA} from '../kl.types';\nimport {IBounds, IPressureInput} from '../../bb/bb.types';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\n\nconst cellSize = 256;\n\ninterface IDrawBufferItem {\n    x: number;\n    y: number;\n    size: number;\n    opacity: number;\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n    r: number;\n    g: number;\n    b: number;\n}\n\n// faster than using BB.clamp somehow (in chrome)\nfunction clamp(num, min, max) {\n    return num <= min\n        ? min\n        : num >= max\n            ? max\n            : num\n}\n\nexport class BlendBrush {\n\n    private isTesting: boolean = false; // testing mode - context only gets updated when line is finished\n\n    private context: CanvasRenderingContext2D;\n    private color: IRGB;\n    private size: number = 29; // radius - 0.5 - 99999\n    private opacity: number = 0.6; // 0-1\n    private blending: number = 0.65; // 0-1\n\n    private settingLockLayerAlpha: boolean = false;\n    private settingSizePressure: boolean = true;\n    private settingOpacityPressure: boolean = false;\n\n    private blendCol: IRGBA = {r: 0, g: 0, b: 0, a: 1}; // todo docs\n    private blendMix: number = 0.45; // todo docs\n    private mixr: number; // todo docs\n    private mixg: number; // todo docs\n    private mixb: number; // todo docs\n    private localColOld: IRGBA; // todo docs\n\n    private isDrawing: boolean = false;\n    private lastInput: IPressureInput = {x: 0, y: 0, pressure: 0}; // todo docs\n    private lastInput2: IPressureInput = {x: 0, y: 0, pressure: 0}; // todo docs\n    private bezierLine: any; // todo type\n\n    private history: KlHistoryInterface | null;\n    private historyEntry: IHistoryEntry;\n    private redrawBounds: IBounds;\n    private cells: (ImageData | null)[];\n    private drawBuffer: IDrawBufferItem[];\n\n    private updateRedrawBounds (bounds: IBounds): void {\n        this.redrawBounds = BB.updateBounds(this.redrawBounds, bounds);\n    }\n\n    private getCellsWidth(): number {\n        return Math.ceil(this.context.canvas.width / cellSize);\n    }\n\n    /**\n     * draw changed cells (changed by brushstroke) onto context\n     * @private\n     */\n    private drawChangedCells(): void {\n        const cells = this.cells.map(item => null);\n        const touchedCells = this.getTouchedCells(this.redrawBounds);\n        touchedCells.forEach((isTouched, index) => {\n            if (isTouched) {\n                cells[index] = this.cells[index];\n            }\n        });\n        this.drawCells(cells);\n        this.redrawBounds = null;\n    }\n\n    private getTouchedCells(bounds: IBounds): boolean[] {\n        const touchedCells = this.cells.map(item => false);\n        const cellsW = this.getCellsWidth();\n        bounds = {\n            x1: Math.floor(bounds.x1 / cellSize),\n            y1: Math.floor(bounds.y1 / cellSize),\n            x2: Math.floor(bounds.x2 / cellSize),\n            y2: Math.floor(bounds.y2 / cellSize),\n        };\n        for (let i = bounds.x1; i <= bounds.x2; i++) {\n            for (let e = bounds.y1; e <= bounds.y2; e++) {\n                touchedCells[e * cellsW + i] = true;\n            }\n        }\n        return touchedCells;\n    }\n\n    /**\n     * Slice up bounds accordings to cells\n     * @param bounds\n     * @private\n     */\n    private sliceBounds(bounds: IBounds): {index: number; bounds: IBounds}[] {\n        const cellsW = this.getCellsWidth();\n        const result: {index: number; bounds: IBounds}[] = [];\n        const touchedCells = this.getTouchedCells(bounds);\n\n        touchedCells.forEach((cell, i) => {\n            if (!cell) {\n                return;\n            }\n\n            const cellOffsetX = (i % cellsW) * cellSize;\n            const cellOffsetY = Math.floor(i / cellsW) * cellSize;\n            const cellWidth = this.cells[i].width;\n            const cellHeight = this.cells[i].height;\n\n            const inCellBounds = {\n                x1: Math.max(0, bounds.x1 - cellOffsetX),\n                y1: Math.max(0, bounds.y1 - cellOffsetY),\n                x2: Math.min(cellWidth - 1, bounds.x2 - cellOffsetX),\n                y2: Math.min(cellHeight - 1, bounds.y2 - cellOffsetY),\n            }\n            if (inCellBounds.x1 > inCellBounds.x2 || inCellBounds.y1 > inCellBounds.y2) {\n                return;\n            }\n            result.push({\n                index: i,\n                bounds: inCellBounds,\n            });\n        });\n\n        return result;\n    }\n\n    /**\n     * update copyImageData. copy over new regions if needed\n     */\n    private copyFromCanvas(bounds: IBounds) {\n        if (!bounds) {\n            return;\n        }\n\n        const touchedCells = this.getTouchedCells(bounds);\n        const cellsW = this.getCellsWidth();\n\n        touchedCells.forEach((item, i) => {\n            if (!item || this.cells[i]) {\n                // not touched, or already copied\n                return;\n            }\n            const x = i % cellsW;\n            const y = Math.floor(i / cellsW);\n            const w = (Math.min(x * cellSize + cellSize, this.context.canvas.width) - 1) % cellSize + 1;\n            const h = (Math.min(y * cellSize + cellSize, this.context.canvas.height) - 1) % cellSize + 1;\n\n            // temp canvas to prevent main canvas from getting slowed down in chrome\n            const tmpCanvas = BB.canvas(w, h);\n            const tmpCtx = tmpCanvas.getContext('2d');\n            tmpCtx.drawImage(this.context.canvas, -x * cellSize, -y * cellSize);\n\n            this.cells[i] = tmpCtx.getImageData(0, 0, w, h);\n        });\n    }\n\n    private getAverage (x, y, size): IRGBA {\n\n        size = Math.max(0.5, size * 0.75);\n        const x1 = Math.max(0, Math.floor(x - size));\n        const y1 = Math.max(0, Math.floor(y - size));\n        const x2 = Math.min(this.context.canvas.width - 1, Math.ceil(x + size));\n        const y2 = Math.min(this.context.canvas.height - 1, Math.ceil(y + size));\n        if (x1 > x2 || y1 > y2) {\n            return {\n                r: 0,\n                g: 0,\n                b: 0,\n                a: 0,\n            };\n        }\n\n        let ar = 0, ag = 0, ab = 0, aa = 0, alpha;\n\n        const slicedBounds = this.sliceBounds({ x1, y1, x2, y2 });\n        slicedBounds.forEach(slice => {\n            const width = this.cells[slice.index].width;\n            const data = this.cells[slice.index].data;\n            const bounds = slice.bounds;\n\n            for (let i = bounds.y1; i <= bounds.y2; i += 4) {\n                for (let e = bounds.x1, e2 = i * width * 4 + bounds.x1 * 4; e <= bounds.x2; e += 4, e2 += 4 * 4) {\n                    alpha = data[e2 + 3];\n                    ar += data[e2] * alpha;\n                    ag += data[e2 + 1] * alpha;\n                    ab += data[e2 + 2] * alpha;\n                    aa += alpha;\n                }\n            }\n        });\n\n        if (aa !== 0) {\n            ar /= aa;\n            ag /= aa;\n            ab /= aa;\n            aa = Math.min(1, aa);\n        }\n        return {\n            r: ar,\n            g: ag,\n            b: ab,\n            a: aa\n        };\n    }\n\n    private prepDot (x: number, y: number, size: number): IBounds {\n        size = Math.max(0.5, size);\n        let x1 = Math.max(0, Math.floor(x - size));\n        let y1 = Math.max(0, Math.floor(y - size));\n        let x2 = Math.min(this.context.canvas.width - 1, Math.ceil(x + size));\n        let y2 = Math.min(this.context.canvas.height - 1, Math.ceil(y + size));\n        if (x1 > x2 || y1 > y2) {\n            return null;\n        }\n        return { x1, y1, x2, y2 };\n    }\n\n    private drawDot (params: IDrawBufferItem): void {\n        // array with random numbers. faster than Math.random()\n        let randI = 0;\n        const randLen = params.size > 30 ? 1024 : 512; // lower lengths lead to noticeable patterns\n        const randArr = [];\n        for (let i = 0; i < randLen; i++) {\n            randArr[i] = (Math.random() - 0.5) / 1.001 + 0.5;\n        }\n\n        // thin lines take more than just 1 sample\n        const sampleArr = [8,4,4,4,2,2,2,2,2,2]; // <0.5, 0.5, 1, 1.5, etc.\n        const samples = sampleArr[Math.floor(params.size * 2)];\n        const samplesSquared: number = samples ? samples * samples : 0;\n        const sampleOffsets = [];\n        if (samples) {\n            let i = 0;\n            for (let n = 0; n < samples; n++) {\n                for (let m = 0; m < samples; m++, i += 2) {\n                    sampleOffsets[i] = (n + 1) / samples; // x offset\n                    sampleOffsets[i + 1] = (m + 1) / samples; // y offset\n                }\n            }\n        }\n\n        const sharpness = Math.pow(params.opacity, 2) * 0.8;\n        // to optimize calculations\n        const invSharpness = 1 - sharpness;\n        const sharpnessSubtrahend = sharpness / invSharpness;\n        const sizeSquared = params.size * params.size;\n        const distDivisor = sizeSquared * invSharpness / params.opacity;\n        const alphaMinuend = (1 + sharpnessSubtrahend) * params.opacity;\n\n\n        const slicedBounds = this.sliceBounds({\n            x1: params.x1,\n            y1: params.y1,\n            x2: params.x2,\n            y2: params.y2,\n        });\n\n        const cellsW = this.getCellsWidth();\n        slicedBounds.forEach(slice => {\n            const cellOffsetX = (slice.index % cellsW) * cellSize;\n            const cellOffsetY = Math.floor(slice.index / cellsW) * cellSize;\n            const cellWidth = this.cells[slice.index].width;\n            const data = this.cells[slice.index].data;\n\n            // i - y index within cell\n            // e - x index within cell\n\n            // e2 - index in image data\n\n            // ri - y index within image relative to dot-center\n            // re - x index within image relative to dot-center\n\n            for (let i = slice.bounds.y1, ri = i + cellOffsetY - params.y; i <= slice.bounds.y2; i++, ri++) {\n                for (\n                    let e = slice.bounds.x1,\n                        e2 = i * cellWidth * 4 + slice.bounds.x1 * 4,\n                        re = e + cellOffsetX - params.x;\n                    e <= slice.bounds.x2;\n                    e++,\n                        e2 += 4,\n                        re++\n                ) {\n                    // O = over -> brush-dot\n                    // U = under -> image\n\n                    let alphaO = 0;\n                    if (samplesSquared) {\n                        for (let f = 0; f < sampleOffsets.length; f += 2) {\n                            const dist = BB.lenSquared(re + sampleOffsets[f], ri + sampleOffsets[f + 1]);\n                            if (dist >= sizeSquared) {\n                                continue;\n                            }\n                            alphaO += clamp(alphaMinuend - dist / distDivisor, 0, params.opacity);\n                        }\n                        if (!alphaO) {\n                            continue;\n                        }\n                        alphaO /= samplesSquared;\n                    } else {\n                        // technically needs + 0.5 offset, but not noticeable with large brush\n                        const dist = Math.pow(re, 2) + Math.pow(ri, 2);\n                        if (dist >= sizeSquared) {\n                            continue;\n                        }\n                        alphaO = clamp(alphaMinuend - dist / distDivisor, 0, params.opacity);\n                    }\n\n                    const invAlphaO = 1 - alphaO;\n                    const alphaU =data[e2 + 3] / 255;\n\n                    if (this.settingLockLayerAlpha) {\n                        const underR = (params.r * alphaO) + ((data[e2]) * invAlphaO);\n                        const underG = (params.g * alphaO) + ((data[e2 + 1]) * invAlphaO);\n                        const underB = (params.b * alphaO) + ((data[e2 + 2]) * invAlphaO);\n                        if (alphaU) {\n                            data[e2] = Math.floor(underR + randArr[randI]);\n                            data[e2 + 1] = Math.floor(underG + randArr[randI]);\n                            data[e2 + 2] = Math.floor(underB + randArr[randI]);\n                        }\n                    } else {\n                        const underR = (params.r * alphaO) + ((data[e2] * alphaU) * invAlphaO);\n                        const underG = (params.g * alphaO) + ((data[e2 + 1] * alphaU) * invAlphaO);\n                        const underB = (params.b * alphaO) + ((data[e2 + 2] * alphaU) * invAlphaO);\n\n                        let newAlpha = 1 - invAlphaO * (1 - alphaU);\n                        data[e2 + 3] = Math.floor(Math.min(255, newAlpha * 255) + 0.5);\n                        if (newAlpha) {\n                            data[e2] = Math.floor(underR / (newAlpha) + randArr[randI]);\n                            data[e2 + 1] = Math.floor(underG / (newAlpha) + randArr[randI]);\n                            data[e2 + 2] = Math.floor(underB / (newAlpha) + randArr[randI]);\n                        }\n                    }\n                    randI = (randI + 1) % randLen;\n\n                }\n            }\n\n        });\n    }\n\n    private calcSpacing (size: number): number {\n        return BB.mix(\n            (size * 2) / 2, // until size 5.3\n            (size * 2) / 9, // at size 24\n            BB.clamp((size - 2.7) / (12 - 2.7), 0, 1)\n        );\n    }\n\n    private continueLine (x: number, y: number, p: number, isCoalesced: boolean): void {\n\n        this.drawBuffer = [];\n\n        let localPressure;\n        let localOpacity;\n        let localSize = (this.settingSizePressure) ? Math.max(1, p * this.size) : Math.max(1, this.size);\n\n        let bdist = this.calcSpacing(localSize);\n\n        let avgX = x;\n        let avgY = y;\n        if (x === null) {\n            avgX = this.lastInput.x;\n            avgY = this.lastInput.y;\n        }\n\n        let localColNew;\n\n        if (this.blending === 0) {\n            this.mixr = this.color.r;\n            this.mixg = this.color.g;\n            this.mixb = this.color.b;\n        } else {\n            let average;\n            if (isCoalesced) {\n                average = {r: this.localColOld.r, g: this.localColOld.g, b: this.localColOld.b, a: 0};\n            } else {\n                const avgParams = [avgX, avgY, ((this.settingSizePressure) ? Math.max(0.5, p * this.size) : Math.max(0.5, this.size))];\n                const bounds = this.prepDot(avgParams[0], avgParams[1], avgParams[2]);\n                this.copyFromCanvas(bounds);\n                average = this.getAverage(avgParams[0], avgParams[1], avgParams[2]);\n            }\n            localColNew = {r: 0, g: 0, b: 0, a: 0};\n\n            if (average.a > 0 && this.blendCol.a === 0) {\n                this.blendCol.r = average.r;\n                this.blendCol.g = average.g;\n                this.blendCol.b = average.b;\n                this.blendCol.a = average.a;\n                localColNew.r = this.blendCol.r;\n                localColNew.g = this.blendCol.g;\n                localColNew.b = this.blendCol.b;\n                localColNew.a = this.blendCol.a;\n\n            } else {\n                if (average.a === 0) {\n                    average.r = this.color.r;\n                    average.g = this.color.g;\n                    average.b = this.color.b;\n                    average.a = 1 - this.blending;\n                }\n\n                this.blendCol.r = BB.mix(this.blendCol.r, BB.mix(this.blendCol.r, average.r, this.blendMix), average.a);\n                this.blendCol.g = BB.mix(this.blendCol.g, BB.mix(this.blendCol.g, average.g, this.blendMix), average.a);\n                this.blendCol.b = BB.mix(this.blendCol.b, BB.mix(this.blendCol.b, average.b, this.blendMix), average.a);\n                this.blendCol.a = Math.min(1, this.blendCol.a + average.a);\n                localColNew.r = this.blendCol.r;\n                localColNew.g = this.blendCol.g;\n                localColNew.b = this.blendCol.b;\n                localColNew.a = this.blendCol.a;\n            }\n\n        }\n\n\n        const bezierCallback = (val) => {\n            if (this.blending >= 1 && this.blendCol.a <= 0) {\n                return;\n            }\n            let factor = val.t;\n            localPressure = this.lastInput2.pressure * (1 - factor) + p * factor;\n            localOpacity = (this.settingOpacityPressure) ? (this.opacity * localPressure * localPressure) : this.opacity;\n            localSize = (this.settingSizePressure) ? Math.max(0.1, localPressure * this.size) : Math.max(0.1, this.size);\n            if (this.blending != 0) {\n                this.mixr = BB.mix(this.localColOld.r, localColNew.r, factor);\n                this.mixg = BB.mix(this.localColOld.g, localColNew.g, factor);\n                this.mixb = BB.mix(this.localColOld.b, localColNew.b, factor);\n            }\n            if (this.blending === 1 && this.localColOld.a === 0) {\n                this.mixr = localColNew.r;\n                this.mixg = localColNew.g;\n                this.mixb = localColNew.b;\n            }\n            const bounds = this.prepDot(val.x, val.y, localSize);\n            if (bounds) {\n                this.updateRedrawBounds(bounds);\n                this.drawBuffer.push({\n                    x: val.x,\n                    y: val.y,\n                    size: localSize,\n                    opacity: localOpacity,\n                    x1: bounds.x1,\n                    y1: bounds.y1,\n                    x2: bounds.x2,\n                    y2: bounds.y2,\n                    r: BB.mix(this.color.r, this.mixr, this.blending),\n                    g: BB.mix(this.color.g, this.mixg, this.blending),\n                    b: BB.mix(this.color.b, this.mixb, this.blending),\n                })\n            }\n        };\n\n        if (x === null) {\n            this.bezierLine.addFinal(bdist, bezierCallback);\n        } else {\n            this.bezierLine.add(x, y, bdist, bezierCallback);\n        }\n\n        this.copyFromCanvas(this.redrawBounds);\n        this.drawBuffer.forEach(item => {\n            this.drawDot(item);\n        });\n        this.drawBuffer = [];\n\n        this.localColOld = localColNew;\n    }\n\n\n\n\n\n    // --- public ----\n    constructor () {\n    }\n\n    setHistory (h: KlHistoryInterface): void {\n        this.history = h;\n    }\n\n    getSize (): number {\n        return this.size;\n    }\n\n    setSize (s: number): void {\n        this.size = s;\n    }\n\n    getOpacity (): number {\n        return this.opacity;\n    }\n\n    setOpacity (o: number): void {\n        this.opacity = o;\n    }\n\n    getBlending (): number {\n        return this.blending;\n    }\n\n    setBlending (b: number) {\n        this.blending = b;\n    }\n\n    setColor (c: IRGB): void {\n        this.color = BB.copyObj(c);\n    }\n\n    setContext (c: CanvasRenderingContext2D) {\n        this.context = c;\n    }\n\n    setSizePressure (b: boolean): void {\n        this.settingSizePressure = !!b;\n    }\n\n    setOpacityPressure (b: boolean): void {\n        this.settingOpacityPressure = !!b;\n    }\n\n    getLockAlpha (): boolean {\n        return this.settingLockLayerAlpha;\n    }\n\n    setLockAlpha (b: boolean): void {\n        this.settingLockLayerAlpha = !!b;\n    }\n\n    getIsDrawing (): boolean {\n        return this.isDrawing;\n    }\n\n    setIsTesting (b: boolean): void {\n        this.isTesting = !!b;\n    }\n\n    startLine (x: number, y: number, p: number): void {\n        this.historyEntry = {\n            tool: [\"brush\", \"BlendBrush\"],\n            actions: []\n        };\n\n\n        const totalCells = Math.ceil(this.context.canvas.width / cellSize) * Math.ceil(this.context.canvas.height / cellSize);\n        this.cells = '0'.repeat(totalCells).split('').map(item => null);\n\n        this.isDrawing = true;\n\n        p = Math.max(0, Math.min(1, p));\n        let localOpacity = (this.settingOpacityPressure) ? (this.opacity * p * p) : this.opacity;\n        let localSize = (this.settingSizePressure) ? Math.max(0.1, p * this.size) : Math.max(0.1, this.size);\n        if (this.blending === 0) {\n            this.mixr = this.color.r;\n            this.mixg = this.color.g;\n            this.mixb = this.color.b;\n        } else {\n            this.copyFromCanvas(this.prepDot(x, y, localSize));\n\n            let average = this.getAverage(\n                x,\n                y,\n                ((this.settingSizePressure) ? Math.max(0.1, p * this.size) : Math.max(0.1, this.size))\n            );\n            if (average.a === 0) {\n                this.blendCol = {\n                    r: this.color.r,\n                    g: this.color.g,\n                    b: this.color.b,\n                    a: 1 - this.blending,\n                };\n            } else {\n                this.blendCol = {\n                    r: average.r,\n                    g: average.g,\n                    b: average.b,\n                    a: average.a,\n                };\n            }\n\n            this.mixr = this.blendCol.r;\n            this.mixg = this.blendCol.g;\n            this.mixb = this.blendCol.b;\n        }\n\n        this.localColOld = {r: this.mixr, g: this.mixg, b: this.mixb, a: this.blendCol.a};\n\n        this.redrawBounds = null;\n        this.drawBuffer = [];\n\n        if (this.blending < 1 || this.blendCol.a > 0) {\n            const bounds = this.prepDot(x, y, localSize);\n            if (bounds) {\n                this.updateRedrawBounds(bounds);\n                this.drawBuffer.push({\n                    x: x,\n                    y: y,\n                    size: localSize,\n                    opacity: localOpacity,\n                    x1: bounds.x1,\n                    y1: bounds.y1,\n                    x2: bounds.x2,\n                    y2: bounds.y2,\n                    r: BB.mix(this.color.r, this.mixr, this.blending),\n                    g: BB.mix(this.color.g, this.mixg, this.blending),\n                    b: BB.mix(this.color.b, this.mixb, this.blending),\n                })\n            }\n        }\n\n        this.copyFromCanvas(this.redrawBounds);\n        this.drawBuffer.forEach(item => {\n            this.drawDot(item);\n        });\n        this.drawBuffer = [];\n\n        this.bezierLine = new BB.BezierLine();\n        this.bezierLine.add(x, y, 0, function () {\n        });\n\n        this.lastInput.x = x;\n        this.lastInput.y = y;\n        this.lastInput.pressure = p;\n        this.lastInput2 = BB.copyObj(this.lastInput);\n\n        if (this.redrawBounds && !this.isTesting) {\n            this.drawChangedCells();\n        }\n    }\n\n    goLine (x: number, y: number, p: number, isCoalesced: boolean): void {\n        if (!this.isDrawing) {\n            return;\n        }\n        this.continueLine(x, y, this.lastInput.pressure, isCoalesced);\n\n        this.lastInput2 = BB.copyObj(this.lastInput);\n        this.lastInput.x = x;\n        this.lastInput.y = y;\n        this.lastInput.pressure = p;\n\n        if (this.redrawBounds && !this.isTesting) {\n            this.drawChangedCells();\n        }\n    }\n\n    endLine (): void {\n        if (this.bezierLine) {\n            this.continueLine(null, null, this.lastInput.pressure, false);\n        }\n\n        this.isDrawing = false;\n        this.bezierLine = null;\n\n        if (this.redrawBounds) {\n            this.drawChangedCells();\n        }\n\n        if (this.historyEntry && this.history && this.cells.find(item => !!item)) {\n            this.historyEntry.actions.push({\n                action: \"drawCells\",\n                params: [this.cells],\n            });\n            this.history.push(this.historyEntry);\n            this.historyEntry = null;\n        }\n        this.cells = null;\n    }\n\n    /**\n     * draw cells onto context\n     * @param cells\n     */\n    drawCells (cells: (ImageData | null)[]): void {\n        const cellsW = this.getCellsWidth();\n        cells.forEach((imageData, index) => {\n            if (!imageData) {\n                return;\n            }\n            const cellOffsetX = (index % cellsW) * cellSize;\n            const cellOffsetY = Math.floor(index / cellsW) * cellSize;\n            this.context.putImageData(imageData, cellOffsetX, cellOffsetY);\n        });\n    }\n\n    drawLineSegment (x1: number, y1: number, x2: number, y2: number): void {\n        this.lastInput.x = x2;\n        this.lastInput.y = y2;\n\n        if (this.isDrawing || x1 === undefined) {\n            return;\n        }\n\n        const totalCells = Math.ceil(this.context.canvas.width / cellSize) * Math.ceil(this.context.canvas.height / cellSize);\n        this.cells = '0'.repeat(totalCells).split('').map(item => null);\n        this.redrawBounds = null;\n        this.drawBuffer = [];\n\n        this.copyFromCanvas(this.prepDot(x1, y1, Math.max(0.1, this.size)));\n        let average = this.getAverage(x1, y1, Math.max(0.1, this.size));\n\n        if (average.a === 0) {\n            this.blendCol = {\n                r: this.color.r,\n                g: this.color.g,\n                b: this.color.b,\n                a: 1 - this.blending,\n            };\n        } else {\n            this.blendCol = {\n                r: average.r,\n                g: average.g,\n                b: average.b,\n                a: average.a,\n            };\n        }\n\n        this.mixr = this.color.r * (1 - this.blendCol.a) + (this.blending * this.blendCol.r + this.color.r * (1 - this.blending)) * this.blendCol.a;\n        this.mixg = this.color.g * (1 - this.blendCol.a) + (this.blending * this.blendCol.g + this.color.g * (1 - this.blending)) * this.blendCol.a;\n        this.mixb = this.color.b * (1 - this.blendCol.a) + (this.blending * this.blendCol.b + this.color.b * (1 - this.blending)) * this.blendCol.a;\n\n\n        const p = 1;\n        const localOpacity = (this.settingOpacityPressure) ? (this.opacity * p * p) : this.opacity;\n        const localSize = (this.settingSizePressure) ? Math.max(0.1, p * this.size) : Math.max(0.1, this.size);\n\n\n        const mouseDist = Math.sqrt(Math.pow(x2 - x1, 2.0) + Math.pow(y2 - y1, 2.0));\n        const eX = (x2 - x1) / mouseDist;\n        const eY = (y2 - y1) / mouseDist;\n        const bdist = this.calcSpacing(localSize);\n        for (let loopDist = 0; loopDist <= mouseDist; loopDist += bdist) {\n            const bounds = this.prepDot(x1 + eX * loopDist, y1 + eY * loopDist, localSize);\n            if (bounds) {\n                this.copyFromCanvas(bounds);\n                this.drawBuffer.push({\n                    x: x1 + eX * loopDist,\n                    y: y1 + eY * loopDist,\n                    size: localSize,\n                    opacity: localOpacity,\n                    x1: bounds.x1,\n                    y1: bounds.y1,\n                    x2: bounds.x2,\n                    y2: bounds.y2,\n                    r: BB.mix(this.color.r, this.mixr, this.blending),\n                    g: BB.mix(this.color.g, this.mixg, this.blending),\n                    b: BB.mix(this.color.b, this.mixb, this.blending),\n                })\n            }\n        }\n        this.drawBuffer.forEach(item => {\n            this.drawDot(item);\n        });\n        this.drawBuffer = [];\n\n        if (this.history && this.cells.find(item => !!item)) {\n            this.drawCells(this.cells);\n            this.historyEntry = {\n                tool: [\"brush\", \"BlendBrush\"],\n                actions: [{\n                    action: \"drawCells\",\n                    params: [this.cells],\n                }],\n            };\n            this.history.push(this.historyEntry);\n            this.historyEntry = null;\n        }\n        this.cells = null;\n    }\n}\n","import {BB} from '../../bb/bb';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\nimport {KL} from '../kl';\n\nconst sampleCanvas = BB.canvas(32, 32);\nconst sampleCtx = sampleCanvas.getContext('2d');\n\nexport function SketchyBrush() {\n    let context;\n    let settingColor;\n\n    let settingSize = 1, settingOpacity = 0.2;\n    let settingBlending = 0.5;\n    let settingScale = 1;\n\n    let lastX, lastY;\n    let isDrawing = false;\n    let lastInput = {x: 0, y: 0, pressure: 0};\n    let history: KlHistoryInterface = new KL.DecoyKlHistory();\n    let historyEntry: IHistoryEntry;\n    let sketchySeed = 0;\n    this.setHistory = function (l: KlHistoryInterface) {\n        history = l;\n    };\n    this.setSeed = function (s) {\n        sketchySeed = parseInt(s);\n    };\n    this.getSeed = function () {\n        return parseInt('' + sketchySeed);\n    };\n\n    function rand() {\n        sketchySeed++;\n        return Math.sin(6324634.2345 * Math.cos(sketchySeed * 5342.3423)) * 0.5 + 0.5;\n    }\n\n    let points = [];\n    let count = 0;\n    let mixmode = [\n        function (c1, c2) {\n            return c1;\n        },\n        function (c1, c2) {\n            let result = new BB.RGB(c1.r, c1.g, c1.b);\n            result.r *= c2.r / 255;\n            result.g *= c2.g / 255;\n            result.b *= c2.b / 255;\n            return result;\n        },\n        function (c1, c2) {\n            let result = new BB.RGB(c1.r, c1.g, c1.b);\n            result.r *= c2.r / 255;\n            result.g *= c2.g / 255;\n            result.b *= c2.b / 255;\n            return result;\n        }\n    ];\n\n    this.getSize = function () {\n        return settingSize / 2;\n    };\n    this.setColor = function (c) {\n        settingColor = c;\n    };\n    this.getOpacity = function () {\n        return settingOpacity;\n    };\n    this.setOpacity = function (o) {\n        settingOpacity = o;\n    };\n    this.getBlending = function () {\n        return settingBlending;\n    };\n    this.setBlending = function (b) {\n        settingBlending = b;\n    };\n    this.setSize = function (s) {\n        settingSize = s * 2;\n    };\n    this.getScale = function () {\n        return settingScale;\n    };\n    this.setScale = function (s) {\n        settingScale = s;\n    };\n    this.setContext = function (c) {\n        context = c;\n    };\n    this.startLine = function (x, y, pressure, shift) {\n        if (shift && lastInput.x) {\n            let lx = lastInput.x, ly = lastInput.y;\n            isDrawing = true;\n            //this.goLine(x,y,pressure);\n            this.endLine();\n        } else {\n            isDrawing = true;\n            lastX = x;\n            lastY = y;\n            lastInput.x = x;\n            lastInput.y = y;\n            historyEntry = {\n                tool: [\"brush\", \"SketchyBrush\"],\n                actions: []\n            };\n            historyEntry.actions.push({\n                action: \"setScale\",\n                params: [settingScale]\n            });\n            historyEntry.actions.push({\n                action: \"setSize\",\n                params: [settingSize / 2]\n            });\n            historyEntry.actions.push({\n                action: \"setOpacity\",\n                params: [settingOpacity]\n            });\n            historyEntry.actions.push({\n                action: \"setColor\",\n                params: [settingColor]\n            });\n            historyEntry.actions.push({\n                action: \"setBlending\",\n                params: [settingBlending]\n            });\n            historyEntry.actions.push({\n                action: \"startLine\",\n                params: [x, y, pressure]\n            });\n        }\n\n    };\n    this.goLine = function (p_x, p_y, pressure, preMixedColor) {\n        if (!isDrawing || (p_x === lastInput.x && p_y === lastInput.y)) {\n            return;\n        }\n\n        let e, b, a, g;\n        let x = parseInt(p_x);\n        let y = parseInt(p_y);\n        points.push([x, y]);\n\n        let mixr = settingColor.r;\n        let mixg = settingColor.g;\n        let mixb = settingColor.b;\n\n        if (preMixedColor !== null) {\n            mixr = preMixedColor.r;\n            mixg = preMixedColor.g;\n            mixb = preMixedColor.b;\n        } else {\n            if (settingBlending !== 0) {\n                if (x + 5 >= 0 && y + 5 >= 0 && x - 5 < context.canvas.width - 1 && y - 5 < context.canvas.height - 1) {\n                    mixr = 0;\n                    mixg = 0;\n                    mixb = 0;\n                    let mixx = Math.min(context.canvas.width - 1, Math.max(0, x - 5));\n                    let mixy = Math.min(context.canvas.height - 1, Math.max(0, y - 5));\n                    let mixw = Math.min(context.canvas.width - 1, Math.max(0, x + 5));\n                    let mixh = Math.min(context.canvas.height - 1, Math.max(0, y + 5));\n                    mixw -= mixx;\n                    mixh -= mixy;\n\n                    if (mixw > 0 && mixh > 0) {\n                        let imdat = context.getImageData(mixx, mixy, mixw, mixh);\n                        let countmix = 0;\n                        for (let i = 0; i < imdat.data.length; i += 4) {\n                            mixr += imdat.data[i + 0];\n                            mixg += imdat.data[i + 1];\n                            mixb += imdat.data[i + 2];\n                            countmix++;\n                        }\n                        mixr /= countmix;\n                        mixg /= countmix;\n                        mixb /= countmix;\n                    }\n\n                    let mixed = mixmode[0](new BB.RGB(mixr, mixg, mixb), settingColor);\n                    mixr = parseInt('' + BB.mix(settingColor.r, mixed.r, settingBlending));\n                    mixg = parseInt('' + BB.mix(settingColor.g, mixed.g, settingBlending));\n                    mixb = parseInt('' + BB.mix(settingColor.b, mixed.b, settingBlending));\n                }\n            }\n        }\n\n        context.save();\n        context.strokeStyle = \"rgba(\" + mixr + \", \" + mixg + \", \" + mixb + \", \" + settingOpacity + \")\";\n        context.lineWidth = settingSize;\n\n        context.beginPath();\n        context.moveTo(lastX, lastY);\n        context.lineTo(x, y);\n\n        for (e = 0; e < points.length; e++) {\n            b = points[e][0] - points[count][0];\n            a = points[e][1] - points[count][1];\n            g = b * b + a * a;\n            if (g < 4000 * settingScale * settingScale && rand() > g / 2000 / settingScale / settingScale) {\n                context.moveTo(points[count][0] + (b * 0.3), points[count][1] + (a * 0.3));\n                context.lineTo(points[e][0] - (b * 0.3), points[e][1] - (a * 0.3));\n            }\n        }\n\n        context.stroke();\n        context.restore();\n\n\n        count++;\n        lastX = x;\n        lastY = y;\n        lastInput.x = x;\n        lastInput.y = y;\n        historyEntry.actions.push({\n            action: \"goLine\",\n            params: [p_x, p_y, pressure, {r: mixr, g: mixg, b: mixb}]\n        });\n    };\n    this.endLine = function () {\n        isDrawing = false;\n        count = 0;\n        points = [];\n        if (historyEntry) {\n            historyEntry.actions.push({\n                action: \"endLine\",\n                params: []\n            });\n            history.push(historyEntry);\n            historyEntry = undefined;\n        }\n    };\n    //cheap n' ugly\n    this.drawLineSegment = function (x1, y1, x2, y2) {\n        lastInput.x = x2;\n        lastInput.y = y2;\n\n        if (isDrawing || x1 === undefined) {\n            return;\n        }\n\n\n        context.save();\n        context.lineWidth = settingSize;\n\n        let mixr = settingColor.r, mixg = settingColor.g, mixb = settingColor.b;\n        if (x1 + 5 >= 0 && y1 + 5 >= 0 && x1 - 5 < context.canvas.width - 1 && y1 - 5 < context.canvas.height - 1) {\n            mixr = 0;\n            mixg = 0;\n            mixb = 0;\n            let mixx = Math.min(context.canvas.width - 1, Math.max(0, x1 - 5));\n            let mixy = Math.min(context.canvas.height - 1, Math.max(0, y1 - 5));\n            let mixw = Math.min(context.canvas.width - 1, Math.max(0, x1 + 5));\n            let mixh = Math.min(context.canvas.height - 1, Math.max(0, y1 + 5));\n            mixw -= mixx;\n            mixh -= mixy;\n            if (mixw > 0 && mixh > 0) {\n                let w = Math.min(sampleCanvas.width, mixw);\n                let h = Math.min(sampleCanvas.height, mixh);\n                sampleCtx.save();\n                sampleCtx.globalCompositeOperation = 'copy';\n                sampleCtx.drawImage(context.canvas, mixx, mixy, mixw, mixh, 0, 0, w, h);\n                sampleCtx.restore();\n\n                let imdat = sampleCtx.getImageData(mixx, mixy, mixw, mixh);\n                let countmix = 0;\n                for (let i = 0; i < imdat.data.length; i += 4) {\n                    mixr += imdat.data[i + 0];\n                    mixg += imdat.data[i + 1];\n                    mixb += imdat.data[i + 2];\n                    countmix++;\n                }\n                mixr /= countmix;\n                mixg /= countmix;\n                mixb /= countmix;\n            }\n        }\n        let mixed = mixmode[0](new BB.RGB(mixr, mixg, mixb), settingColor);\n        mixr = parseInt('' + (settingBlending * mixed.r + settingColor.r * (1 - settingBlending)));\n        mixg = parseInt('' + (settingBlending * mixed.g + settingColor.g * (1 - settingBlending)));\n        mixb = parseInt('' + (settingBlending * mixed.b + settingColor.b * (1 - settingBlending)));\n        context.strokeStyle = \"rgba(\" + mixr + \", \" + mixg + \", \" + mixb + \", \" + settingOpacity + \")\";\n        context.beginPath();\n        context.moveTo(x1, y1);\n        context.lineTo(x2, y2);\n        context.stroke();\n        context.strokeStyle = \"rgba(\" + mixr + \", \" + mixg + \", \" + mixb + \", \" + settingOpacity + \")\";\n        context.restore();\n\n\n        let historyEntry = {\n            tool: [\"brush\", \"SketchyBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"setScale\",\n            params: [settingScale]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [settingSize / 2]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [settingOpacity]\n        });\n        historyEntry.actions.push({\n            action: \"setColor\",\n            params: [settingColor]\n        });\n        historyEntry.actions.push({\n            action: \"setBlending\",\n            params: [settingBlending]\n        });\n\n        historyEntry.actions.push({\n            action: \"drawLineSegment\",\n            params: [x1, y1, x2, y2]\n        });\n        history.push(historyEntry);\n    };\n\n    this.isDrawing = function () {\n        return isDrawing;\n    };\n}","import {BB} from '../../bb/bb';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\nimport {KL} from '../kl';\n\nexport function PixelBrush() {\n\n    let context;\n    let history: KlHistoryInterface = new KL.DecoyKlHistory();\n    let historyEntry: IHistoryEntry;\n\n    let settingColor, settingSize = 0.5, settingSpacing = 0.9, settingOpacity = 1;\n    let settingColorStr;\n    let settingHasSizePressure = true, settingHasOpacityPressure = false;\n    let settingLockLayerAlpha = false;\n    let settingIsEraser = false;\n    let settingUseDither = true;\n\n    let lineToolLastDot;\n    let lastInput = {x: 0, y: 0, pressure: 0};\n    let lastInput2 = {x: 0, y: 0, pressure: 0};\n\n    let isDrawing = false;\n    let bezierLine = null;\n    let twoPI = Math.PI * 2;\n\n\n    let ditherCanvas = BB.canvas(4, 4);\n    let ditherCtx = ditherCanvas.getContext('2d');\n    let ditherPattern;\n    let ditherArr = [\n        [3, 2],\n        [1, 0],\n        [3, 0],\n        [1, 2],\n        [2, 1],\n        [0, 3],\n        [0, 1],\n        [2, 3],\n\n        [2, 0],\n        [0, 2],\n        [0, 0],\n        [2, 2],\n        [1, 1],\n        [3, 3],\n        [3, 1],\n        [1, 3]\n    ];\n\n    function updateDither() {\n        ditherCtx.clearRect(0, 0, 4, 4);\n        ditherCtx.fillStyle = settingIsEraser ? '#fff' : settingColorStr;\n        for (let i = 0; i < Math.max(1, Math.round(settingOpacity * ditherArr.length)); i++) {\n            ditherCtx.fillRect(ditherArr[i][0], ditherArr[i][1], 1, 1);\n        }\n        ditherPattern = context.createPattern(ditherCanvas, 'repeat');\n    }\n\n\n    /**\n     * Tests p1->p2 or p3->p4 deviate in their direction more than max, compared to p1->p4\n     * @param p1\n     * @param p2\n     * @param p3\n     * @param p4\n     * @param maxAngleRad\n     */\n    function cubicCurveOverThreshold(p1, p2, p3, p4, max) {\n        let d = BB.Vec2.nor({\n            x: p4.x - p1.x,\n            y: p4.y - p1.y\n        });\n        let d2 = BB.Vec2.nor({\n            x: p2.x - p1.x,\n            y: p2.y - p1.y\n        });\n        let d3 = BB.Vec2.nor({\n            x: p4.x - p3.x,\n            y: p4.y - p3.y\n        });\n        let a2 = Math.abs(BB.Vec2.angle(d, d2) % Math.PI) / Math.PI * 180;\n        let a3 = Math.abs(BB.Vec2.angle(d, d3) % Math.PI) / Math.PI * 180;\n\n        return Math.max(BB.Vec2.dist(d, d2), BB.Vec2.dist(d, d3)) > max;\n    }\n\n    //bresenheim line drawing\n    function plotLine(x0, y0, x1, y1, skipFirst) {\n        context.save();\n\n        if (settingIsEraser) {\n            context.fillStyle = settingUseDither ? ditherPattern : '#fff';\n            if (settingLockLayerAlpha) {\n                context.globalCompositeOperation = \"source-atop\";\n            } else {\n                context.globalCompositeOperation = \"destination-out\";\n            }\n        } else {\n            context.fillStyle = settingUseDither ? ditherPattern : settingColorStr;\n            if (settingLockLayerAlpha) {\n                context.globalCompositeOperation = \"source-atop\";\n            }\n        }\n        context.globalAlpha = settingUseDither ? 1 : settingOpacity;\n\n        x0 = Math.floor(x0);\n        y0 = Math.floor(y0);\n        x1 = Math.floor(x1);\n        y1 = Math.floor(y1);\n\n        let dX = Math.abs(x1 - x0);\n        let sX = x0 < x1 ? 1 : -1;\n        let dY = -Math.abs(y1 - y0);\n        let sY = y0 < y1 ? 1 : -1;\n        let err = dX + dY;\n        while (true) {\n            if (skipFirst) {\n                skipFirst = false;\n            } else {\n                context.fillRect(x0, y0, 1, 1);\n            }\n            if (x0 === x1 && y0 === y1) {\n                break;\n            }\n            let e2 = 2 * err;\n            if (e2 >= dY) {\n                err += dY;\n                x0 += sX;\n            }\n            if (e2 <= dX) {\n                err += dX;\n                y0 += sY;\n            }\n        }\n\n        context.restore();\n    }\n\n    function plotCubicBezierLine(p1, p2, p3, p4) {\n\n        let isOverThreshold = cubicCurveOverThreshold(p1, p2, p3, p4, 0.1);\n\n        p1.x = Math.floor(p1.x);\n        p1.y = Math.floor(p1.y);\n        p4.x = Math.floor(p4.x);\n        p4.y = Math.floor(p4.y);\n\n        let dist = BB.dist(p1.x, p1.y, p4.x, p4.y);\n        if (!isOverThreshold || dist < 7) {\n            plotLine(p1.x, p1.y, p4.x, p4.y, true);\n            return;\n        }\n\n        let n = Math.max(2, Math.round(dist / 4));\n        let pointArr = [];\n        for (let i = 0; i <= n; i++) {\n            let t = i / n;\n            let a = Math.pow(1 - t, 3);\n            let b = 3 * t * Math.pow(1 - t, 2);\n            let c = 3 * Math.pow(t, 2) * (1 - t);\n            let d = Math.pow(t, 3);\n            pointArr.push({\n                x: a * p1.x + b * p2.x + c * p3.x + d * p4.x,\n                y: a * p1.y + b * p2.y + c * p3.y + d * p4.y\n            });\n        }\n\n        for (let i = 0; i < n; i++) {\n            plotLine(\n                Math.round(pointArr[i].x),\n                Math.round(pointArr[i].y),\n                Math.round(pointArr[i + 1].x),\n                Math.round(pointArr[i + 1].y),\n                true\n            );\n        }\n    }\n\n    function drawDot(x, y, size, opacity, angle?) {\n        context.save();\n        if (settingIsEraser) {\n            context.fillStyle = settingUseDither ? ditherPattern : '#fff';\n            if (settingLockLayerAlpha) {\n                context.globalCompositeOperation = \"source-atop\";\n            } else {\n                context.globalCompositeOperation = \"destination-out\";\n            }\n        } else {\n            context.fillStyle = settingUseDither ? ditherPattern : settingColorStr;\n            if (settingLockLayerAlpha) {\n                context.globalCompositeOperation = \"source-atop\";\n            }\n        }\n        context.globalAlpha = settingUseDither ? 1 : opacity;\n        context.fillRect(\n            Math.round(x + -size),\n            Math.round(y + -size),\n            Math.round(size * 2),\n            Math.round(size * 2)\n        );\n        context.restore();\n    }\n\n\n    function continueLine(x, y, size, pressure) {\n        if (bezierLine === null) {\n            bezierLine = new BB.BezierLine();\n            bezierLine.add(lastInput.x, lastInput.y, 0, function () {\n            });\n        }\n\n        context.save();\n\n        function dotCallback(val) {\n            let localPressure = BB.mix(lastInput2.pressure, pressure, val.t);\n            let localOpacity = settingOpacity * (settingHasOpacityPressure ? (localPressure * localPressure) : 1);\n            let localSize = Math.max(0.5, settingSize * (settingHasSizePressure ? localPressure : 1));\n            drawDot(val.x, val.y, localSize, localOpacity, val.angle);\n        }\n\n        function controlCallback(controlObj) {\n            plotCubicBezierLine(controlObj.p1, controlObj.p2, controlObj.p3, controlObj.p4);\n        }\n\n        if (Math.round(settingSize * 2) === 1) {\n            if (x === null) {\n                bezierLine.addFinal(4, null, controlCallback);\n            } else {\n                bezierLine.add(x, y, 4, null, controlCallback);\n            }\n\n        } else {\n            let localSpacing = size * settingSpacing;\n\n            if (x === null) {\n                bezierLine.addFinal(localSpacing, dotCallback);\n            } else {\n                bezierLine.add(x, y, localSpacing, dotCallback);\n            }\n        }\n\n        context.restore();\n    }\n\n    //------------------ interface ---------------------------------------------------\n\n\n    this.startLine = function (x, y, p) {\n        historyEntry = {\n            tool: [\"brush\", \"PixelBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [settingHasSizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [settingSize]\n        });\n        historyEntry.actions.push({\n            action: \"setSpacing\",\n            params: [settingSpacing]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [settingOpacity]\n        });\n        historyEntry.actions.push({\n            action: \"setColor\",\n            params: [settingColor]\n        });\n        historyEntry.actions.push({\n            action: \"setLockAlpha\",\n            params: [settingLockLayerAlpha]\n        });\n        historyEntry.actions.push({\n            action: \"setIsEraser\",\n            params: [settingIsEraser]\n        });\n        historyEntry.actions.push({\n            action: \"setUseDither\",\n            params: [settingUseDither]\n        });\n\n        if (settingUseDither) {\n            updateDither();\n        }\n\n        p = Math.max(0, Math.min(1, p));\n        let localOpacity = settingHasOpacityPressure ? (settingOpacity * p * p) : settingOpacity;\n        let localSize = settingHasSizePressure ? Math.max(0.5, p * settingSize) : Math.max(0.5, settingSize);\n\n        isDrawing = true;\n        drawDot(x, y, localSize, localOpacity);\n        lineToolLastDot = localSize * settingSpacing;\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput.pressure = p;\n        lastInput2 = BB.copyObj(lastInput);\n\n        historyEntry.actions.push({\n            action: \"startLine\",\n            params: [x, y, p]\n        });\n    };\n\n    this.goLine = function (x, y, p) {\n        if (!isDrawing) {\n            return;\n        }\n        historyEntry.actions.push({\n            action: \"goLine\",\n            params: [x, y, p]\n        });\n\n        //debug\n        //drawDot(x, y, 1, 0.5);\n\n        let pressure = BB.clamp(p, 0, 1);\n        let localSize = settingHasSizePressure ? Math.max(0.1, lastInput.pressure * settingSize) : Math.max(0.1, settingSize);\n\n        continueLine(x, y, localSize, lastInput.pressure);\n\n        lastInput2 = BB.copyObj(lastInput);\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput.pressure = pressure;\n    };\n\n    this.endLine = function (x, y) {\n\n        let localSize = settingHasSizePressure ? Math.max(0.1, lastInput.pressure * settingSize) : Math.max(0.1, settingSize);\n        continueLine(null, null, localSize, lastInput.pressure);\n\n        //debug\n        //drawDot(lastInput.x, lastInput.y, 3, 1);\n        //drawDot(x, y, 10, 0.1);\n\n        isDrawing = false;\n\n        bezierLine = null;\n\n        if (historyEntry) {\n            historyEntry.actions.push({\n                action: \"endLine\",\n                params: [x, y]\n            });\n            history.push(historyEntry);\n            historyEntry = undefined;\n        }\n    };\n    //cheap n' ugly\n    this.drawLineSegment = function (x1, y1, x2, y2) {\n        lastInput.x = x2;\n        lastInput.y = y2;\n        lastInput.pressure = 1;\n\n        if (isDrawing || x1 === undefined) {\n            return;\n        }\n\n        if (settingUseDither) {\n            updateDither();\n        }\n\n        if (Math.round(settingSize * 2) === 1) {\n            plotLine(x1, y1, x2, y2, true);\n        } else {\n            let angle = BB.pointsToAngleDeg({x: x1, y: y1}, {x: x2, y: y2});\n            let mouseDist = Math.sqrt(Math.pow(x2 - x1, 2.0) + Math.pow(y2 - y1, 2.0));\n            let eX = (x2 - x1) / mouseDist;\n            let eY = (y2 - y1) / mouseDist;\n            let loopDist;\n            let bdist = settingSize * settingSpacing;\n            lineToolLastDot = settingSize * settingSpacing;\n            for (loopDist = lineToolLastDot; loopDist <= mouseDist; loopDist += bdist) {\n                drawDot(x1 + eX * loopDist, y1 + eY * loopDist, settingSize, settingOpacity, angle);\n            }\n        }\n\n        let historyEntry = {\n            tool: [\"brush\", \"PixelBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [settingHasSizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [settingSize]\n        });\n        historyEntry.actions.push({\n            action: \"setSpacing\",\n            params: [settingSpacing]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [settingOpacity]\n        });\n        historyEntry.actions.push({\n            action: \"setColor\",\n            params: [settingColor]\n        });\n        historyEntry.actions.push({\n            action: \"setLockAlpha\",\n            params: [settingLockLayerAlpha]\n        });\n        historyEntry.actions.push({\n            action: \"setIsEraser\",\n            params: [settingIsEraser]\n        });\n        historyEntry.actions.push({\n            action: \"setUseDither\",\n            params: [settingUseDither]\n        });\n\n        historyEntry.actions.push({\n            action: \"drawLineSegment\",\n            params: [x1, y1, x2, y2]\n        });\n        history.push(historyEntry);\n    };\n\n    //IS\n    this.isDrawing = function () {\n        return isDrawing;\n    };\n    //SET\n    this.setColor = function (c) {\n        if (settingColor === c) {\n            return;\n        }\n        settingColor = c;\n        settingColorStr = \"rgb(\" + settingColor.r + \",\" + settingColor.g + \",\" + settingColor.b + \")\";\n    };\n    this.setContext = function (c) {\n        context = c;\n    };\n    this.setHistory = function (l: KlHistoryInterface) {\n        history = l;\n    };\n    this.setSize = function (s) {\n        settingSize = Math.round(s * 2) / 2;\n    };\n    this.setOpacity = function (o) {\n        settingOpacity = o;\n    };\n    this.setSpacing = function (s) {\n        settingSpacing = s;\n    };\n    this.sizePressure = function (b) {\n        settingHasSizePressure = b;\n    };\n    this.opacityPressure = function (b) {\n        settingHasOpacityPressure = b;\n    };\n    this.setLockAlpha = function (b) {\n        settingLockLayerAlpha = b;\n    };\n    this.setIsEraser = function (b) {\n        settingIsEraser = !!b;\n    };\n    this.setUseDither = function (b) {\n        settingUseDither = !!b;\n    };\n    //GET\n    this.getSpacing = function () {\n        return settingSpacing;\n    };\n    this.getSize = function () {\n        return settingSize;\n    };\n    this.getOpacity = function () {\n        return settingOpacity;\n    };\n    this.getLockAlpha = function () {\n        return settingLockLayerAlpha;\n    };\n    this.getIsEraser = function () {\n        return settingIsEraser;\n    };\n    this.getUseDither = function () {\n        return settingUseDither;\n    };\n}","import {BB} from '../../bb/bb';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\nimport {KL} from '../kl';\n\nexport function EraserBrush() {\n    let context;\n    let history: KlHistoryInterface = new KL.DecoyKlHistory();\n    let historyEntry: IHistoryEntry;\n\n    let size = 30, spacing = 0.4, opacity = 1;\n    let sizePressure = true, opacityPressure = false;\n    let lastDot, lastInput = {x: 0, y: 0, pressure: 0};\n    let lastInput2 = {x: 0, y: 0, pressure: 0};\n    let started = false;\n\n    let bezierLine;\n    let isBaseLayer = false;\n    let isTransparentBG = false;\n\n    function drawDot(x, y, size, opacity) {\n\n        context.save();\n        if (isBaseLayer) {\n            if (isTransparentBG) {\n                context.globalCompositeOperation = \"destination-out\";\n            } else {\n                context.globalCompositeOperation = \"source-atop\";\n            }\n        } else {\n            context.globalCompositeOperation = \"destination-out\";\n        }\n        let radgrad = context.createRadialGradient(size, size, 0, size, size, size);\n        let sharpness = Math.pow(opacity, 2);\n        sharpness = Math.max(0, Math.min((size - 1) / size, sharpness));\n        let oFac = Math.max(0, Math.min(1, opacity));\n        let localOpacity = 2 * oFac - oFac * oFac;\n        radgrad.addColorStop(sharpness, \"rgba(255, 255, 255, \" + localOpacity + \")\");\n        radgrad.addColorStop(1, \"rgba(255, 255, 255, 0)\");\n        context.fillStyle = radgrad;\n        context.translate(x - size, y - size);\n        context.fillRect(0, 0, size * 2, size * 2);\n        context.restore();\n    }\n\n    function continueLine(x, y, p) {\n        p = Math.max(0, Math.min(1, p));\n        let localPressure;\n        let localOpacity;\n        let localSize = (sizePressure) ? Math.max(0.1, p * size) : Math.max(0.1, size);\n\n        let bdist = Math.max(1, Math.max(0.5, 1 - opacity) * localSize * spacing);\n\n        function bezierCallback(val) {\n            let factor = val.t;\n            localPressure = lastInput2.pressure * (1 - factor) + p * factor;\n            localOpacity = (opacityPressure) ? (opacity * localPressure * localPressure) : opacity;\n            localSize = (sizePressure) ? Math.max(0.1, localPressure * size) : Math.max(0.1, size);\n\n            drawDot(val.x, val.y, localSize, localOpacity);\n        }\n\n        if (x === null) {\n            bezierLine.addFinal(bdist, bezierCallback);\n        } else {\n            bezierLine.add(x, y, bdist, bezierCallback);\n        }\n    }\n\n\n    this.startLine = function (x, y, p) {\n        historyEntry = {\n            tool: [\"brush\", \"EraserBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"opacityPressure\",\n            params: [opacityPressure]\n        });\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [sizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [size]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [opacity]\n        });\n        historyEntry.actions.push({\n            action: \"setTransparentBG\",\n            params: [isTransparentBG]\n        });\n\n        isBaseLayer = 0 === context.canvas.index;\n\n        p = Math.max(0, Math.min(1, p));\n        let localOpacity = (opacityPressure) ? (opacity * p * p) : opacity;\n        let localSize = (sizePressure) ? Math.max(0.1, p * size) : Math.max(0.1, size);\n\n        started = true;\n        if (localSize > 1) {\n            drawDot(x, y, localSize, localOpacity);\n        }\n        lastDot = localSize * spacing;\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput.pressure = p;\n        lastInput2 = BB.copyObj(lastInput);\n\n        bezierLine = new BB.BezierLine();\n        bezierLine.add(x, y, 0, function () {\n        });\n\n        historyEntry.actions.push({\n            action: \"startLine\",\n            params: [x, y, p]\n        });\n    };\n    this.goLine = function (x, y, p) {\n        if (!started) {\n            return;\n        }\n        historyEntry.actions.push({\n            action: \"goLine\",\n            params: [x, y, p]\n        });\n\n        continueLine(x, y, lastInput.pressure);\n\n        lastInput2 = BB.copyObj(lastInput);\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput.pressure = p;\n    };\n    this.endLine = function () {\n\n        if (bezierLine) {\n            continueLine(null, null, lastInput.pressure);\n        }\n\n        started = false;\n        bezierLine = undefined;\n\n        if (historyEntry) {\n            historyEntry.actions.push({\n                action: \"endLine\",\n                params: []\n            });\n            history.push(historyEntry);\n            historyEntry = undefined;\n        }\n    };\n    //cheap n' ugly\n    this.drawLineSegment = function (x1, y1, x2, y2) {\n\n        isBaseLayer = 0 === context.canvas.index;\n\n        lastInput.x = x2;\n        lastInput.y = y2;\n\n        if (started || x1 === undefined) {\n            return;\n        }\n\n        let mouseDist = Math.sqrt(Math.pow(x2 - x1, 2.0) + Math.pow(y2 - y1, 2.0));\n        let eX = (x2 - x1) / mouseDist;\n        let eY = (y2 - y1) / mouseDist;\n        let loopDist;\n        let bdist = Math.max(1, Math.max(0.5, 1 - opacity) * size * spacing);\n        lastDot = 0;\n        for (loopDist = lastDot; loopDist <= mouseDist; loopDist += bdist) {\n            drawDot(x1 + eX * loopDist, y1 + eY * loopDist, size, opacity);\n        }\n\n\n        let historyEntry = {\n            tool: [\"brush\", \"EraserBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"opacityPressure\",\n            params: [opacityPressure]\n        });\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [sizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [size]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [opacity]\n        });\n        historyEntry.actions.push({\n            action: \"setTransparentBG\",\n            params: [isTransparentBG]\n        });\n\n        historyEntry.actions.push({\n            action: \"drawLineSegment\",\n            params: [x1, y1, x2, y2]\n        });\n        history.push(historyEntry);\n    };\n\n    //IS\n    this.isDrawing = function () {\n        return started;\n    };\n    //SET\n    /*this.setAlpha = function(a) {\n        lastInput = {};\n        alpha = a;\n        updateAlphaCanvas();\n    };*/\n    this.setContext = function (c) {\n        context = c;\n    };\n    this.setHistory = function (l: KlHistoryInterface) {\n        history = l;\n    };\n    this.setSize = function (s) {\n        size = s;\n    };\n    this.setOpacity = function (o) {\n        opacity = o;\n    };\n    this.sizePressure = function (b) {\n        sizePressure = b;\n    };\n    this.opacityPressure = function (b) {\n        opacityPressure = b;\n    };\n    this.setTransparentBG = function (b) {\n        isTransparentBG = b == true;\n    };\n    //GET\n    this.getSize = function () {\n        return size;\n    };\n    this.getOpacity = function () {\n        return opacity;\n    };\n}","import {BB} from '../../bb/bb';\nimport {IBounds, IPressureInput, IVector2D} from '../../bb/bb.types';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\nimport {KL} from '../kl';\nimport {IRGB} from '../kl.types';\n\n// let statCount = 1;\n// let statAcc = 0;\n// stats on win10, chrome, size 100, opacity 80, smudge()\n// unoptimized: 1 ms\n// minimal: 0.09 ms\n// minimal + circle: 0.5ms\n// minimal + circle + ix, iy: 0.23ms\n// unoptimized + ix, iy: 0.64 ms\n// unoptimized + ix, iy + sans rounding: 0.61 ms\n// ix, iy + sans rounding + sans random: 0.32ms\n// ix, iy + sans rounding + fast random: 0.46 ms\n// ix, iy + sans rounding + fast random + offset const: 0.48 ms\n\nconst CELL_SIZE = 256;\n\ninterface ISmudgeParams {\n    aP: IVector2D;\n    bP: IVector2D;\n    size: {\n        w: number;\n        h: number;\n    };\n    brush: {\n        center: IVector2D,\n        size: number;\n        opacity: number;\n        alphaLock: boolean;\n    };\n}\n\n\n/**\n * determine bounds of smudge\n * @param imWidth\n * @param imHeight\n * @param aP\n * @param bP\n * @param size\n */\nfunction prepSmudge(\n    imWidth: number,\n    imHeight: number,\n    aP: IVector2D, // top left of source, integers\n    bP: IVector2D, // top left of dest, integers\n    size: {w: number; h: number}, // size of both rectangles, integers\n): {\n    aP: IVector2D,\n    bP: IVector2D,\n    size: {w: number; h: number},\n} {\n\n    if (aP.x === bP.x && aP.y === bP.y) {\n        return null;\n    }\n\n    aP = BB.copyObj(aP);\n    bP = BB.copyObj(bP);\n    size = BB.copyObj(size);\n\n    // corner behavior\n    // cut down rectangles, if a or b go outside\n    // i.e. if user drags partially or fully outside the canvas\n    {\n        let top = 0;\n        let right = 0;\n        let bottom = 0;\n        let left = 0;\n\n        if (aP.x < 0) {\n            left = -aP.x;\n        }\n        if (aP.y < 0) {\n            top = -aP.y;\n        }\n        if (bP.x < 0) {\n            left = Math.max(left, -bP.x);\n        }\n        if (bP.y < 0) {\n            top = Math.max(top, -bP.y);\n        }\n        if (aP.x + size.w > imWidth) {\n            right = aP.x + size.w - imWidth;\n        }\n        if (aP.y + size.h > imHeight) {\n            bottom = aP.y + size.h - imHeight;\n        }\n        if (bP.x + size.w > imWidth) {\n            right = Math.max(right, bP.x + size.w - imWidth);\n        }\n        if (bP.y + size.h > imHeight) {\n            bottom = Math.max(bottom, bP.y + size.h - imHeight);\n        }\n\n        aP.x += left;\n        bP.x += left;\n        aP.y += top;\n        bP.y += top;\n\n        size.w = size.w - left - right;\n        size.h = size.h - top - bottom;\n        if (size.w <= 0 || size.h <= 0) {\n            return null;\n        }\n    }\n\n    return {\n        aP: {\n            x: aP.x,\n            y: aP.y,\n        },\n        bP: {\n            x: bP.x,\n            y: bP.y,\n        },\n        size: {\n            w: size.w,\n            h: size.h,\n        }\n    };\n}\n\n// faster than using BB.clamp somehow (in chrome)\nfunction clamp(num, min, max) {\n    return num <= min\n        ? min\n        : num >= max\n            ? max\n            : num\n}\n\n/**\n * Pixel operations that do the smudging via ImageData\n * @param imageData\n * @param p\n */\nfunction smudge(imageData: ImageData, p : ISmudgeParams): void {\n\n    p = BB.copyObj(p);\n\n    const cSize = p.brush.size;\n    const cX = p.brush.center.x;\n    const cY = p.brush.center.y;\n\n    /*if (statCount % 1000 === 0) {\n        console.log(statAcc / 1000);\n        statAcc = 0;\n    }\n    let start = performance.now();*/\n\n\n    // determine offset\n    let aIndex = p.aP.y * imageData.width + p.aP.x;\n    let bIndex = p.bP.y * imageData.width + p.bP.x;\n    const offset = (bIndex - aIndex) * 4;\n\n    // array with random numbers. faster than Math.random()\n    let randI = 0;\n    const randLen = cSize > 30 ? 1024 : 512; // lower lengths lead to noticeable patterns\n    const randArr = [];\n    for (let i = 0; i < randLen; i++) {\n        randArr[i] = (Math.random() - 0.5) / 1.001 + 0.5;\n    }\n\n    const softnessPx = Math.max(3, Math.min(8, p.brush.size - 8));\n\n    const pixel = (ai, bi, ix, iy) => {\n\n        const dist = BB.dist(cX, cY, ix, iy);\n        const fac = 1 - p.brush.opacity * (1 - clamp((dist - (cSize - softnessPx)) / softnessPx, 0, 1));\n\n        if (fac === 1) {\n            return;\n        }\n\n        if (!imageData.data[ai + 3]) {\n\n        } else if (!imageData.data[bi + 3]) { // don't mix if target fully transparent. pixel might have a strange color.\n            imageData.data[bi] = imageData.data[ai + 0];\n            imageData.data[bi + 1] = imageData.data[ai + 1];\n            imageData.data[bi + 2] = imageData.data[ai + 2];\n        } else {\n\n            // consider alpha ratio. If a has lower alpha than b, then b should be stronger, and vice versa\n            // not totally accurate. TODO same compositing as blend brush\n            let fac2;\n            if (imageData.data[ai + 3] < imageData.data[bi + 3]) {\n                fac2 = 1 - imageData.data[ai + 3] / imageData.data[bi + 3] * (1 - fac);\n            } else {\n                fac2 = imageData.data[bi + 3] / imageData.data[ai + 3] * fac;\n            }\n\n            // ImageData's Uint8ClampedArray rounds -> 0.5 becomes 1. But not in Safari, so needs to be done manually\n            // Offset mixed color by random number noise (-0.5, 0.5), so it doesn't get stuck while mixing.\n            // No +0.5, because it cancels out with rand.\n            imageData.data[bi] = Math.floor(BB.mix(imageData.data[ai], imageData.data[bi + 0], fac2) + randArr[randI]);\n            imageData.data[bi + 1] = Math.floor(BB.mix(imageData.data[ai + 1], imageData.data[bi + 1], fac2) + randArr[randI]);\n            imageData.data[bi + 2] = Math.floor(BB.mix(imageData.data[ai + 2], imageData.data[bi + 2], fac2) + randArr[randI]);\n\n            randI = (randI + 1) % randLen;\n        }\n        // Always mix alpha. unless alpha lock\n        if (!p.brush.alphaLock) {\n            imageData.data[bi + 3] = Math.floor(BB.mix(imageData.data[ai + 3], imageData.data[bi + 3], fac) + 0.5);\n        }\n\n    };\n\n    const bx1 = p.bP.x * 4;\n    const bx2 = bx1 + (p.size.w - 1) * 4;\n\n    // transfer of pixels depends on direction of smudging if there is overlap\n    if (p.aP.y < p.bP.y) {\n        for (let y = p.size.h - 1, iy = p.bP.y + p.size.h - 1; y >= 0; y--, iy--) {\n            const yStart = (y + p.bP.y) * imageData.width * 4;\n            for (let x = bx2 + yStart, x2 = bx2 + yStart - offset, ix = p.bP.x + p.size.w - 1; x >= bx1 + yStart; x -= 4, x2 -= 4, ix--) {\n                pixel(x2, x, ix, iy);\n            }\n        }\n    } else if (p.aP.y > p.bP.y) {\n        for (let y = 0, iy = p.bP.y; y < p.size.h; y++, iy++) {\n            const yStart = (y + p.bP.y) * imageData.width * 4;\n            for (let x = bx2 + yStart, x2 = bx2 + yStart - offset, ix = p.bP.x + p.size.w - 1; x >= bx1 + yStart; x -= 4, x2 -= 4, ix--) {\n                pixel(x2, x, ix, iy);\n            }\n        }\n    } else {\n        if (p.aP.x < p.bP.x) {\n            for (let y = p.size.h - 1, iy = p.bP.y + p.size.h - 1; y >= 0; y--, iy--) {\n                const yStart = (y + p.bP.y) * imageData.width * 4;\n                for (let x = bx2 + yStart, x2 = bx2 + yStart - offset, ix = p.bP.x + p.size.w - 1; x >= bx1 + yStart; x -= 4, x2 -= 4, ix--) {\n                    pixel(x2, x, ix, iy);\n                }\n            }\n        } else {\n            for (let y = 0, iy = p.bP.y; y < p.size.h; y++, iy++) {\n                const yStart = (y + p.bP.y) * imageData.width * 4;\n                for (let x = bx1 + yStart, x2 = bx1 + yStart - offset, ix = p.bP.x; x < bx2 + yStart; x += 4, x2 += 4, ix++) {\n                    pixel(x2, x, ix, iy);\n                }\n            }\n        }\n    }\n\n    //statCount++;\n    //statAcc += performance.now() - start;\n}\n\nexport class SmudgeBrush {\n\n    private context: CanvasRenderingContext2D;\n    private history: KlHistoryInterface = new KL.DecoyKlHistory();\n    private historyEntry: IHistoryEntry;\n\n    private settingColor: IRGB = {r: 0, g: 0, b: 0};\n    private settingSize: number = 35;\n    private settingSpacing: number = 0.20446882736951905;\n    private settingOpacity: number = 0.8;\n    private settingColorStr: string;\n    private settingHasSizePressure: boolean = false;\n    private settingHasOpacityPressure: boolean = false;\n    private settingLockLayerAlpha: boolean = false;\n\n    private lineToolLastDot: number;\n    private lastInput: IPressureInput = {x: 0, y: 0, pressure: 0};\n    private lastInput2: IPressureInput = {x: 0, y: 0, pressure: 0};\n    private lastDot: IVector2D;\n\n    private isDrawing: boolean = false;\n\n    private bezierLine: any = null; // todo type BezierLine\n\n    private redrawBounds: IBounds;\n    private completeRedrawBounds: IBounds;\n\n    private copyImageData: ImageData;\n\n    private drawBuffer: ISmudgeParams[] = [];\n\n    private copiedCells: boolean[];\n\n    updateRedrawBounds(bounds: IBounds): void {\n        this.redrawBounds = BB.updateBounds(this.redrawBounds, bounds);\n    }\n\n    updateCompleteRedrawBounds (x1, y1, x2, y2): void {\n        this.completeRedrawBounds = BB.updateBounds(\n            this.completeRedrawBounds,\n            { x1, y1, x2, y2 }\n        );\n    }\n\n    /**\n     * update copyImageData. copy over new regions if needed\n     */\n    copyFromCanvas(): void {\n\n        const touchedCells = this.copiedCells.map(item => false);\n\n        const bounds: IBounds[] = [];\n        const cellsW = Math.ceil(this.copyImageData.width / CELL_SIZE);\n\n        if (!this.redrawBounds) {\n            return;\n        }\n        bounds.push({\n            x1: Math.floor(this.redrawBounds.x1 / CELL_SIZE),\n            y1: Math.floor(this.redrawBounds.y1 / CELL_SIZE),\n            x2: Math.floor(this.redrawBounds.x2 / CELL_SIZE),\n            y2: Math.floor(this.redrawBounds.y2 / CELL_SIZE),\n        });\n        bounds.forEach(item => {\n            for (let i = item.x1; i <= item.x2; i++) {\n                for (let e = item.y1; e <= item.y2; e++) {\n                    touchedCells[e * cellsW + i] = true;\n                }\n            }\n        });\n\n        touchedCells.forEach((item, i) => {\n            if (!item || this.copiedCells[i]) {\n                // not touched, or already copied\n                return;\n            }\n            this.copiedCells[i] = true;\n            const x = i % cellsW;\n            const y = Math.floor(i / cellsW);\n            const w = (Math.min(x * CELL_SIZE + CELL_SIZE, this.copyImageData.width) - 1) % CELL_SIZE + 1;\n            const h = (Math.min(y * CELL_SIZE + CELL_SIZE, this.copyImageData.height) - 1) % CELL_SIZE + 1;\n\n            // temp canvas to prevent main canvas from getting slowed down in chrome\n            const tmpCanvas = BB.canvas(w, h);\n            const tmpCtx = tmpCanvas.getContext('2d');\n            tmpCtx.drawImage(this.context.canvas, -x * CELL_SIZE, -y * CELL_SIZE);\n\n            const data = tmpCtx.getImageData(0, 0, w, h);\n\n            for (let i = 0; i < h; i++) {\n                for (let e = 0, e2 = i * w * 4, e3 = ((y * CELL_SIZE + i) * this.copyImageData.width + x * CELL_SIZE) * 4; e < w; e++, e2 += 4, e3 += 4) {\n                    this.copyImageData.data[e3] = data.data[e2];\n                    this.copyImageData.data[e3 + 1] = data.data[e2 + 1];\n                    this.copyImageData.data[e3 + 2] = data.data[e2 + 2];\n                    this.copyImageData.data[e3 + 3] = data.data[e2 + 3];\n                }\n            }\n        });\n    }\n\n\n    /**\n     * fill drawBuffer with params about to be drawn\n     * @param x\n     * @param y\n     * @param size\n     * @param opacity\n     */\n    prepDot (x: number, y: number, size: number, opacity: number): void {\n        if (!this.lastDot) {\n            this.lastDot = {\n                x: x,\n                y: y,\n            };\n            return;\n        }\n\n        size = Math.round(size);\n\n\n        const w = Math.round(size * 2);\n        const h = Math.round(size * 2);\n\n        const bounds = prepSmudge(\n            this.copyImageData.width,\n            this.copyImageData.height,\n            {\n                x: Math.round(this.lastDot.x - size),\n                y: Math.round(this.lastDot.y - size),\n            },\n            {\n                x: Math.round(x - size),\n                y: Math.round(y - size),\n            },\n            {\n                w,\n                h,\n            },\n        );\n\n        if (bounds) {\n            const params: ISmudgeParams = {\n                aP: bounds.aP,\n                bP: bounds.bP,\n                size: bounds.size,\n                brush: {\n                    center: { x, y },\n                    size,\n                    opacity,\n                    alphaLock: this.settingLockLayerAlpha,\n                }\n            };\n            this.updateRedrawBounds({\n                x1: params.bP.x,\n                y1: params.bP.y,\n                x2: params.bP.x + params.brush.size * 2,\n                y2: params.bP.y + params.brush.size * 2,\n            });\n            this.drawBuffer.push(params);\n        }\n\n        this.lastDot = {\n            x: x,\n            y: y,\n        };\n    }\n\n    continueLine (x: number, y: number, size: number, pressure: number): void {\n        this.drawBuffer = [];\n\n        if (this.bezierLine === null) {\n            this.bezierLine = new BB.BezierLine();\n            this.bezierLine.add(this.lastInput.x, this.lastInput.y, 0, function(){});\n        }\n\n        const drawArr = []; //draw instructions. will be all drawn at once\n\n        const dotCallback = (val): void => {\n            const localPressure = BB.mix(this.lastInput2.pressure, pressure, val.t);\n            const localOpacity = this.settingOpacity * (this.settingHasOpacityPressure ? (localPressure * localPressure) : 1);\n            const localSize = Math.max(0.1, this.settingSize * (this.settingHasSizePressure ? localPressure : 1));\n            drawArr.push([val.x, val.y, localSize, localOpacity, val.angle]);\n        };\n\n        const localSpacing = size * this.settingSpacing / 3;\n        if (x === null) {\n            this.bezierLine.addFinal(localSpacing, dotCallback);\n        } else {\n            this.bezierLine.add(x, y, localSpacing, dotCallback);\n        }\n\n        // execute draw instructions\n        let before;\n        for (let i = 0; i < drawArr.length; i++) {\n            const item = drawArr[i];\n            this.prepDot(item[0], item[1], item[2], item[3]);\n            before = item;\n        }\n\n        this.copyFromCanvas();\n\n        for (let i = 0; i < this.drawBuffer.length; i++) {\n            smudge(this.copyImageData, this.drawBuffer[i]);\n        }\n    }\n\n\n\n    // ---- public ----\n\n    constructor () { }\n\n    startLine (x: number, y: number, p: number): void {\n        this.historyEntry = {\n            tool: [\"brush\", \"SmudgeBrush\"],\n            actions: []\n        };\n\n        p = BB.clamp(p, 0, 1);\n        const localOpacity = this.settingHasOpacityPressure ? (this.settingOpacity * p * p) : this.settingOpacity;\n        const localSize = this.settingHasSizePressure ? Math.max(0.1, p * this.settingSize) : Math.max(0.1, this.settingSize);\n\n        this.lastDot = null;\n        this.isDrawing = true;\n\n        this.copyImageData = new ImageData(this.context.canvas.width, this.context.canvas.height);\n        const totalCells = Math.ceil(this.context.canvas.width / CELL_SIZE) * Math.ceil(this.context.canvas.height / CELL_SIZE);\n        this.copiedCells = '0'.repeat(totalCells).split('').map(item => false);\n\n        this.prepDot(x, y, localSize, localOpacity);\n\n        this.lineToolLastDot = localSize * this.settingSpacing;\n        this.lastInput.x = x;\n        this.lastInput.y = y;\n        this.lastInput.pressure = p;\n        this.lastInput2.pressure = p;\n\n        this.completeRedrawBounds = null;\n    }\n\n    goLine (x: number, y: number, p: number): void {\n        if (!this.isDrawing) {\n            return;\n        }\n\n        this.redrawBounds = null;\n        const pressure = BB.clamp(p, 0, 1);\n        const localSize = this.settingHasSizePressure ?\n            Math.max(0.1, this.lastInput.pressure * this.settingSize) : Math.max(0.1, this.settingSize);\n\n        this.continueLine(x, y, localSize, this.lastInput.pressure);\n\n\n        if (this.redrawBounds) {\n            this.context.putImageData(\n                this.copyImageData,\n                0,\n                0,\n                this.redrawBounds.x1,\n                this.redrawBounds.y1,\n                this.redrawBounds.x2 - this.redrawBounds.x1 - 1,\n                this.redrawBounds.y2 - this.redrawBounds.y1 - 1\n            );\n            this.updateCompleteRedrawBounds(\n                this.redrawBounds.x1,\n                this.redrawBounds.y1,\n                this.redrawBounds.x2,\n                this.redrawBounds.y2\n            );\n        }\n\n        this.lastInput.x = x;\n        this.lastInput.y = y;\n        this.lastInput2.pressure = this.lastInput.pressure;\n        this.lastInput.pressure = pressure;\n    }\n\n    endLine (): void {\n        this.redrawBounds = null;\n        const localSize = this.settingHasSizePressure ?\n            Math.max(0.1, this.lastInput.pressure * this.settingSize) : Math.max(0.1, this.settingSize);\n        this.context.save();\n        this.continueLine(null, null, localSize, this.lastInput.pressure);\n        this.context.restore();\n\n        this.isDrawing = false;\n        this.bezierLine = null;\n\n        if (this.redrawBounds) {\n            this.context.putImageData(\n                this.copyImageData,\n                0,\n                0,\n                this.redrawBounds.x1,\n                this.redrawBounds.y1,\n                this.redrawBounds.x2 - this.redrawBounds.x1 - 1,\n                this.redrawBounds.y2 - this.redrawBounds.y1 - 1\n            );\n            this.updateCompleteRedrawBounds(\n                this.redrawBounds.x1,\n                this.redrawBounds.y1,\n                this.redrawBounds.x2,\n                this.redrawBounds.y2\n            );\n        }\n\n        if (this.historyEntry && this.completeRedrawBounds) {\n            let historyIm: ImageData | HTMLCanvasElement = this.copyImageData;\n            if (!(\n                this.completeRedrawBounds.x1 === 0 &&\n                this.completeRedrawBounds.y1 === 0 &&\n                this.completeRedrawBounds.x2 >= this.context.canvas.width - 1 &&\n                this.completeRedrawBounds.y2 >= this.context.canvas.height - 1\n            )) {\n\n                // temp canvas to prevent main canvas from getting slowed down in chrome\n                const tmpCanvas = BB.canvas(\n                    this.completeRedrawBounds.x2 - this.completeRedrawBounds.x1 + 1,\n                    this.completeRedrawBounds.y2 - this.completeRedrawBounds.y1 + 1\n                );\n                const tmpCtx = tmpCanvas.getContext('2d');\n                tmpCtx.drawImage(this.context.canvas, -this.completeRedrawBounds.x1, -this.completeRedrawBounds.y1);\n\n                historyIm = tmpCanvas; // faster than getting image data (measured on 2018 lenovo chromebook)\n            }\n            this.historyEntry.actions.push({\n                action: \"drawImage\",\n                params: [\n                    historyIm,\n                    this.completeRedrawBounds.x1,\n                    this.completeRedrawBounds.y1,\n                ],\n            });\n            this.history.push(this.historyEntry);\n            this.historyEntry = undefined;\n        }\n        this.copyImageData = null;\n    }\n\n    drawImage (im: ImageData | HTMLCanvasElement, x: number, y: number): void {\n        if (im instanceof ImageData) {\n            this.context.putImageData(im, x, y);\n        } else {\n            this.context.clearRect(x, y, im.width, im.height);\n            this.context.drawImage(im, x, y);\n        }\n    }\n\n    drawLineSegment (x1: number, y1: number, x2: number, y2: number): void {\n        return;\n        /*\n        // todo\n        lastInput.x = x2;\n        lastInput.y = y2;\n        lastInput.pressure = 1;\n\n        if (isDrawing || x1 === undefined) {\n            return;\n        }\n\n        let angle = BB.pointsToAngleDeg({x:x1, y:y1}, {x:x2, y:y2});\n        let mouseDist = Math.sqrt(Math.pow(x2 - x1, 2.0) + Math.pow(y2 - y1, 2.0));\n        let eX = (x2 - x1) / mouseDist;\n        let eY = (y2 - y1) / mouseDist;\n        let loopDist;\n        let bdist = settingSize * settingSpacing;\n        lineToolLastDot = settingSize * settingSpacing;\n        for (loopDist = lineToolLastDot; loopDist <= mouseDist; loopDist += bdist) {\n            drawDot(x1 + eX * loopDist, y1 + eY * loopDist, settingSize, settingOpacity);\n        }\n\n\n        let historyEntry = {\n            tool: [\"brush\", \"SmudgeBrush\"],\n            actions: []\n        };\n        // todo\n        history.add(historyEntry);*/\n    }\n\n    getIsDrawing (): boolean {\n        return this.isDrawing;\n    }\n\n    setColor (c: IRGB): void {\n        if (this.settingColor.r === c.r && this.settingColor.g === c.g && this.settingColor.b === c.b) {\n            return;\n        }\n        this.settingColor = {r: c.r, g: c.g, b: c.b};\n        this.settingColorStr = BB.ColorConverter.toRgbStr(this.settingColor);\n    }\n\n    setContext (c: CanvasRenderingContext2D): void {\n        this.context = c;\n    }\n\n    setHistory (h: KlHistoryInterface): void {\n        this.history = h;\n    }\n\n    setSize (s: number): void {\n        this.settingSize = s;\n    }\n\n    setOpacity (o: number): void {\n        this.settingOpacity = o;\n    }\n\n    setSpacing (s: number): void {\n        this.settingSpacing = s;\n    }\n\n    sizePressure (b: boolean): void {\n        this.settingHasSizePressure = !!b;\n    }\n\n    opacityPressure (b: boolean): void {\n        this.settingHasOpacityPressure = !!b;\n    }\n\n    setLockAlpha (b: boolean): void {\n        this.settingLockLayerAlpha = !!b;\n    }\n\n    getSpacing (): number {\n        return this.settingSpacing;\n    }\n\n    getSize (): number {\n        return this.settingSize;\n    }\n\n    getOpacity (): number {\n        return this.settingOpacity;\n    }\n\n    getLockAlpha (): boolean {\n        return this.settingLockLayerAlpha;\n    }\n\n}\n","import {BB} from '../../bb/bb';\nimport {IRGB} from '../kl.types';\nimport {IBounds} from '../../bb/bb.types';\nimport {KlHistoryInterface} from '../history/kl-history';\n\ntype TChemyMode = 'fill' | 'stroke';\n\nexport class ChemyBrush {\n\n    private context: CanvasRenderingContext2D;\n    private settingColor: IRGB;\n    private settingSize: number = 0.25; // radius - 0.5 - 99999\n    private settingOpacity: number = 1; // 0-1\n    private settingLockLayerAlpha: boolean = false;\n    private settingIsEraser: boolean = false;\n    private settingMode: TChemyMode = 'fill';\n    private settingDistort: number = 0; // 0 - 1\n    private settingXSymmetry: boolean = false;\n    private settingYSymmetry: boolean = false;\n    private settingGradient: boolean = false;\n\n    private isDrawing: boolean = false;\n\n    private history: KlHistoryInterface;\n\n    private copyCanvas: HTMLCanvasElement;\n    private path: {x: number, y: number}[];\n    private minY: number;\n    private maxY: number;\n    private completeRedrawBounds: IBounds;\n\n    updateCompleteRedrawBounds (x, y): void {\n        let bounds = { x1: x, y1: y, x2: x, y2: y};\n        if (this.settingXSymmetry) {\n            bounds = BB.updateBounds(\n                bounds,\n                {\n                    x1: -x + this.copyCanvas.width,\n                    y1: y,\n                    x2: -x + this.copyCanvas.width,\n                    y2: y,\n                }\n                );\n        }\n        if (this.settingYSymmetry) {\n            bounds = BB.updateBounds(\n                bounds,\n                {\n                    x1: x,\n                    y1: -y + this.copyCanvas.height,\n                    x2: x,\n                    y2: -y + this.copyCanvas.height,\n                }\n            );\n        }\n        const buffer = this.settingMode === 'stroke' ? this.settingSize + 1 : 1;\n        bounds.x1 = Math.floor(bounds.x1 - buffer);\n        bounds.y1 = Math.floor(bounds.y1 - buffer);\n        bounds.x2 = Math.ceil(bounds.x2 + buffer);\n        bounds.y2 = Math.ceil(bounds.y2 + buffer);\n\n        this.completeRedrawBounds = BB.updateBounds(this.completeRedrawBounds, bounds);\n    }\n\n    private drawShape (): void {\n        this.context.save();\n        this.context.clearRect(0, 0, this.context.canvas.width, this.context.canvas.height);\n        this.context.drawImage(this.copyCanvas, 0, 0);\n\n        let color = {...this.settingColor};\n        if (this.settingIsEraser) {\n            color.r = 255;\n            color.g = 255;\n            color.b = 255;\n            if (this.settingLockLayerAlpha) {\n                this.context.globalCompositeOperation = \"source-atop\";\n            } else {\n                this.context.globalCompositeOperation = \"destination-out\";\n            }\n        } else {\n            if (this.settingLockLayerAlpha) {\n                this.context.globalCompositeOperation = \"source-atop\";\n            }\n        }\n\n        if (this.path) {\n\n            // path\n            const path = new Path2D();\n            this.path.forEach((item, index) => {\n                if (index === 0) {\n                    path.moveTo(item.x, item.y);\n                } else {\n                    path.lineTo(item.x, item.y);\n                }\n            });\n\n            let style: string | CanvasGradient = BB.ColorConverter.toRgbaStr({\n                r: color.r,\n                g: color.g,\n                b: color.b,\n                a: this.settingOpacity,\n            });\n            if (this.settingGradient) {\n                const startAtTop = this.path[0].x > this.path[this.path.length - 1].x;\n                const gradient = this.context.createLinearGradient(\n                    0, startAtTop ? this.minY : this.maxY,\n                    0, startAtTop ? this.maxY : this.minY,\n                );\n                gradient.addColorStop(\n                    0,\n                    BB.ColorConverter.toRgbaStr({\n                        r: color.r,\n                        g: color.g,\n                        b: color.b,\n                        a: this.settingOpacity,\n                    })\n                );\n                gradient.addColorStop(\n                    1,\n                    BB.ColorConverter.toRgbaStr({\n                        r: color.r,\n                        g: color.g,\n                        b: color.b,\n                        a: 0,\n                    })\n                );\n                style = gradient;\n            }\n\n            // setup params\n            if (this.settingMode === 'fill') {\n                this.context.fillStyle = style;\n\n            } else {\n                this.context.lineWidth = this.settingSize * 2;\n                this.context.lineJoin = 'bevel';\n                this.context.strokeStyle = style;\n            }\n\n            // draw\n            const draw = () => {\n                if (this.settingMode === 'fill') {\n                    this.context.fill(path);\n                } else {\n                    this.context.stroke(path);\n                }\n            };\n\n            draw();\n            if (this.settingXSymmetry) {\n                this.context.save();\n                this.context.translate(this.context.canvas.width / 2, 0);\n                this.context.scale(-1, 1);\n                this.context.translate(-this.context.canvas.width / 2, 0);\n                draw();\n                this.context.restore();\n            }\n            if (this.settingYSymmetry) {\n                this.context.save();\n                this.context.translate(0, this.context.canvas.height / 2);\n                this.context.scale(1, -1);\n                this.context.translate(0, -this.context.canvas.height / 2);\n                draw();\n                this.context.restore();\n                if (this.settingXSymmetry) {\n                    this.context.save();\n                    this.context.translate(this.context.canvas.width / 2, this.context.canvas.height / 2);\n                    this.context.scale(-1, -1);\n                    this.context.translate(-this.context.canvas.width / 2, -this.context.canvas.height / 2);\n                    draw();\n                    this.context.restore();\n                }\n            }\n        }\n\n        this.context.restore();\n    }\n\n    // --- public ----\n    constructor () {\n    }\n\n    setHistory (h: KlHistoryInterface): void {\n        this.history = h;\n    }\n\n    getSize (): number {\n        return this.settingMode === 'stroke' ? this.settingSize : 0;\n    }\n\n    setSize (s: number): void {\n        this.settingSize = s;\n    }\n\n    getOpacity (): number {\n        return this.settingOpacity;\n    }\n\n    setOpacity (o: number): void {\n        this.settingOpacity = o;\n    }\n\n    setColor (c: IRGB): void {\n        this.settingColor = BB.copyObj(c);\n    }\n\n    setContext (c: CanvasRenderingContext2D) {\n        this.context = c;\n    }\n\n    setMode (mode: TChemyMode): void {\n        this.settingMode = mode;\n    }\n\n    getMode (): TChemyMode {\n        return this.settingMode;\n    }\n\n    setDistort (distort: number): void {\n        this.settingDistort = BB.clamp(distort, 0, 1);\n    }\n\n    getDistort (): number {\n        return this.settingDistort;\n    }\n\n    setXSymmetry (b: boolean): void {\n        this.settingXSymmetry = !!b;\n    }\n\n    getXSymmetry (): boolean {\n        return this.settingXSymmetry;\n    }\n\n    setYSymmetry (b: boolean): void {\n        this.settingYSymmetry = !!b;\n    }\n\n    getYSymmetry (): boolean {\n        return this.settingYSymmetry;\n    }\n\n    setGradient (b: boolean): void {\n        this.settingGradient = !!b;\n    }\n\n    getGradient (): boolean {\n        return this.settingGradient;\n    }\n\n    getLockAlpha (): boolean {\n        return this.settingLockLayerAlpha;\n    }\n\n    setLockAlpha (b: boolean): void {\n        this.settingLockLayerAlpha = !!b;\n    }\n\n    getIsEraser (): boolean {\n        return this.settingIsEraser;\n    }\n\n    setIsEraser (b: boolean): void {\n        this.settingIsEraser = !!b;\n    }\n\n    getIsDrawing (): boolean {\n        return this.isDrawing;\n    }\n\n    startLine (x: number, y: number): void {\n        this.isDrawing = true;\n        this.path = [{x, y}];\n        this.minY = y;\n        this.maxY = y;\n        this.copyCanvas = BB.canvas(this.context.canvas.width, this.context.canvas.height);\n        this.copyCanvas.getContext('2d').drawImage(this.context.canvas, 0, 0);\n        this.completeRedrawBounds = null;\n        this.updateCompleteRedrawBounds(x, y);\n    }\n\n    goLine (x: number, y: number): void {\n        if (!this.isDrawing) {\n            return;\n        }\n\n        let pos = { x, y };\n        if (this.settingDistort > 0) {\n            pos.x += (Math.random() - 0.5) * this.settingDistort * 80;\n            pos.y += (Math.random() - 0.5) * this.settingDistort * 80;\n        }\n\n        this.minY = Math.min(this.minY, pos.y);\n        this.maxY = Math.max(this.maxY, pos.y);\n        this.path.push(pos);\n        this.updateCompleteRedrawBounds(x, y);\n        this.drawShape();\n    }\n\n    endLine (): void {\n        this.isDrawing = false;\n        this.completeRedrawBounds = BB.boundsInArea(this.completeRedrawBounds, this.copyCanvas.width, this.copyCanvas.height);\n        if (this.path.length > 1 && this.completeRedrawBounds) {\n            const historyCanvas = BB.canvas(\n                this.completeRedrawBounds.x2 - this.completeRedrawBounds.x1 + 1,\n                this.completeRedrawBounds.y2 - this.completeRedrawBounds.y1 + 1\n            );\n            const historyCtx = historyCanvas.getContext('2d');\n            historyCtx.drawImage(this.context.canvas, -this.completeRedrawBounds.x1, -this.completeRedrawBounds.y1);\n\n            this.history.push({\n                tool: [\"brush\", \"ChemyBrush\"],\n                actions: [\n                    {\n                        action: \"drawImage\",\n                        params: [\n                            historyCanvas, // faster than getting image data (measured on 2018 lenovo chromebook)\n                            this.completeRedrawBounds.x1,\n                            this.completeRedrawBounds.y1,\n                        ],\n                    }\n                ]\n            });\n        }\n        this.path = null;\n        this.copyCanvas = null;\n    }\n\n    drawImage (im: HTMLCanvasElement, x: number, y: number): void {\n        this.context.save();\n        this.context.clearRect(x, y, im.width, im.height);\n        this.context.drawImage(im, x, y);\n        this.context.restore();\n    }\n\n    drawLineSegment (x1, y1, x2, y2): void {\n        // might make sense for stroke\n    }\n}\n","import {penBrushUi} from './pen-brush-ui';\nimport {blendBrushUi} from './blend-brush-ui';\nimport {sketchyBrushUi} from './sketchy-brush-ui';\nimport {pixelBrushUi} from './pixel-brush-ui';\nimport {eraserBrushUi} from './eraser-brush-ui';\nimport {smudgeBrushUi} from './smudge-brush-ui';\nimport {chemyBrushUi} from './chemy-brush-ui';\nimport {IBrushUi} from '../kl.types';\n\n/**\n * UI for brushes.\n * Each brush ui carries the brush with it.\n * So if you want to draw, you do it through the UI. should be changed sometime.\n */\n\nexport const brushesUI: {\n    [key: string]: IBrushUi;\n} = {\n    penBrush: penBrushUi,\n    blendBrush: blendBrushUi,\n    sketchyBrush: sketchyBrushUi,\n    pixelBrush: pixelBrushUi,\n    chemyBrush: chemyBrushUi,\n    smudgeBrush: smudgeBrushUi,\n    eraserBrush: eraserBrushUi,\n};\n","import {BB} from '../../bb/bb';\nimport {brushes} from '../brushes/brushes';\nimport {eventResMs} from './brushes-consts';\nimport {klHistory} from '../history/kl-history';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {penPressureToggle} from '../ui/base-components/pen-pressure-toggle';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-pen.svg';\nimport {genBrushAlpha01, genBrushAlpha02} from '../brushes/alphas/brush-alphas';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\nimport {input} from '../ui/base-components/input';\n\nexport const penBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-pen'),\n        sizeSlider: {\n            min: 0.5,\n            max: 100,\n            curve: BB.quadraticSplineInput(0.5, 100, 0.1)\n        },\n        opacitySlider: {\n            min: 1/100,\n            max: 1,\n            curve: [[0, 1/100], [0.5, 30/100], [1, 1]]\n        },\n        Ui: null,\n    };\n\n    let alphaNames = [\n        LANG('brush-pen-circle'),\n        LANG('brush-pen-chalk'),\n        LANG('brush-pen-calligraphy'),\n        LANG('brush-pen-square'),\n    ];\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-pen');\n        alphaNames = [\n            LANG('brush-pen-circle'),\n            LANG('brush-pen-chalk'),\n            LANG('brush-pen-calligraphy'),\n            LANG('brush-pen-square'),\n        ];\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.PenBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n        let sizeSlider;\n        let opacitySlider;\n\n        let alphas = [];\n        let currentAlpha = 0;\n        for (let i = 0; i < 4; i++) {\n            (function (i) {\n                let alpha = BB.el({\n                    title: alphaNames[i],\n                    onClick: () => {\n                        alphaClick(i);\n                    }\n                });\n                let canvas = BB.canvas(70, 70);\n                let ctx = canvas.getContext('2d');\n                if (i === 0 || i === 3) {\n                    if (i === 0) {\n                        ctx.beginPath();\n                        ctx.arc(35, 35, 30, 0, 2 * Math.PI);\n                        ctx.closePath();\n                        ctx.fill();\n                    } else {\n                        ctx.fillRect(5, 5, 60, 60);\n                    }\n                } else if (i === 1) {\n                    ctx.drawImage(genBrushAlpha01(60), 5, 5);\n                } else if (i === 2) {\n                    ctx.drawImage(genBrushAlpha02(60), 5, 5);\n                }\n                alpha.style.backgroundImage = 'url(' + canvas.toDataURL('image/png') + ')';\n\n                alphas.push(alpha);\n            }(i));\n        }\n\n        function updateAlphas() {\n            for (let i = 0; i < alphas.length; i++) {\n                if (i === currentAlpha) {\n                    alphas[i].className = 'brush-alpha-selected';\n                } else {\n                    alphas[i].className = 'brush-alpha';\n                }\n            }\n        }\n\n        updateAlphas();\n\n        function alphaClick(id) {\n            currentAlpha = id;\n            brush.setAlpha(id);\n            updateAlphas();\n        }\n\n        let lockAlphaToggle = new Checkbox({\n            init: brush.getLockAlpha(),\n            label: LANG('lock-alpha'),\n            callback: function (b) {\n                brush.setLockAlpha(b);\n            },\n            doHighlight: true,\n            title: LANG('lock-alpha-title'),\n            css: {\n                cssFloat: 'right',\n                textAlign: 'right',\n            }\n        });\n\n        let spacingSpline = new BB.SplineInterpolator([[0, 15], [8, 7], [14, 4], [30, 3], [50, 2.7], [100, 2]]);\n\n        function setSize(size) {\n            brush.setSize(size);\n            brush.setSpacing(Math.max(2, spacingSpline.interpolate(size)) / 15);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 225,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                value: brush.getSize(),\n                curve: brushInterface.sizeSlider.curve,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 2,\n                toValue: (displayValue) => displayValue / 2,\n                onChange: (val) => {\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n                formatFunc: (displayValue) => {\n                    if (displayValue < 10) {\n                        return BB.round(displayValue, 1);\n                    } else {\n                        return Math.round(displayValue);\n                    }\n                },\n                manualInputRoundDigits: 1,\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 225,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                value: brushInterface.opacitySlider.max,\n                curve: brushInterface.opacitySlider.curve,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 100,\n                toValue: (displayValue) => displayValue / 100,\n                onChange: (val) => {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n            });\n\n            let pressureSizeToggle = penPressureToggle(true, function (b) {\n                brush.sizePressure(b);\n            });\n            let pressureOpacityToggle = penPressureToggle(false, function (b) {\n                brush.opacityPressure(b);\n            });\n\n            div.append(\n                BB.el({\n                    content: [\n                        sizeSlider.getElement(),\n                        pressureSizeToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '10px',\n                    }\n                }),\n                BB.el({\n                    content: [\n                        opacitySlider.getElement(),\n                        pressureOpacityToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                    }\n                })\n            );\n\n            let alphaWrapper = document.createElement(\"div\");\n            for (let i = 0; i < alphas.length; i++) {\n                alphaWrapper.appendChild(alphas[i]);\n            }\n            alphaWrapper.style.marginTop = \"10px\";\n            div.appendChild(alphaWrapper);\n            alphaWrapper.appendChild(lockAlphaToggle.getElement());\n\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.changeSliderValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.changeSliderValue(-f);\n            }\n        };\n\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y, p);\n        };\n        this.goLine = function (x, y, p) {\n            brush.goLine(x, y, p);\n        };\n        this.endLine = function (x, y) {\n            brush.endLine(x, y);\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.isDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n    return brushInterface;\n})();","\nexport const eventResMs = 20;","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"brush-pen.3efb96f9.svg\" + \"?\" + Date.now();","import {BB} from '../../bb/bb';\nimport {penPressureToggle} from '../ui/base-components/pen-pressure-toggle';\nimport {eventResMs} from './brushes-consts';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {brushes} from '../brushes/brushes';\nimport {klHistory} from '../history/kl-history';\nimport {KlSlider} from '../ui/base-components/kl-slider';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-blend.svg';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const blendBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-blend'),\n        sizeSlider: {\n            min: 0.5,\n            max: 100,\n            curve: BB.quadraticSplineInput(0.5, 100, 0.1)\n        },\n        opacitySlider: {\n            min: 1 / 100,\n            max: 1\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-blend');\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.BlendBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n\n        let sizeSlider;\n        let opacitySlider;\n\n        function setSize(size) {\n            brush.setSize(size);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 225,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                value: 58,\n                curve: brushInterface.sizeSlider.curve,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 2,\n                toValue: (displayValue) => displayValue / 2,\n                onChange: (val) => {\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 225,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                value: brush.getOpacity(),\n                curve: brushInterface.opacitySlider.curve,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 100,\n                toValue: (displayValue) => displayValue / 100,\n                onChange: (val) => {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n            });\n            let blendingSlider = new KlSlider({\n                label: LANG('brush-blending'),\n                width: 225,\n                height: 30,\n                min: 0,\n                max: 1,\n                value: brush.getBlending(),\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 100,\n                toValue: (displayValue) => displayValue / 100,\n                onChange: function (val) {\n                    brush.setBlending(val);\n                },\n            });\n            blendingSlider.getElement().style.marginTop = \"10px\";\n\n            let pressureSizeToggle = penPressureToggle(true, function (b) {\n                brush.setSizePressure(b);\n            });\n            let pressureOpacityToggle = penPressureToggle(false, function (b) {\n                brush.setOpacityPressure(b);\n            });\n\n            let lockAlphaToggle = new Checkbox({\n                init: brush.getLockAlpha(),\n                label: LANG('lock-alpha'),\n                callback: function (b) {\n                    brush.setLockAlpha(b);\n                },\n                doHighlight: true,\n                title: LANG('lock-alpha-title'),\n                css: {\n                    marginTop: '10px',\n                    display: 'inline-block',\n                }\n            });\n\n\n            div.append(\n                BB.el({\n                    content: [\n                        sizeSlider.getElement(),\n                        pressureSizeToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '10px',\n                    }\n                }),\n                BB.el({\n                    content: [\n                        opacitySlider.getElement(),\n                        pressureOpacityToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                    }\n                }),\n                blendingSlider.getElement(),\n                lockAlphaToggle.getElement()\n            );\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.getIsDrawing()) {\n                sizeSlider.changeSliderValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.getIsDrawing()) {\n                sizeSlider.changeSliderValue(-f);\n            }\n        };\n\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y, p);\n        };\n        this.goLine = function (x, y, p, isCoalesced) {\n            brush.goLine(x, y, p, isCoalesced);\n        };\n        this.endLine = function () {\n            brush.endLine();\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.getIsDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"brush-blend.c7de15e6.svg\" + \"?\" + Date.now();","import {brushes} from '../brushes/brushes';\nimport {eventResMs} from './brushes-consts';\nimport {klHistory} from '../history/kl-history';\nimport {KlSlider} from '../ui/base-components/kl-slider';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-sketchy.png';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\nimport {BB} from '../../bb/bb';\n\nexport const sketchyBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-sketchy'),\n        sizeSlider: {\n            min: 0.5,\n            max: 10\n        },\n        opacitySlider: {\n            min: 1 / 100,\n            max: 1\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-sketchy');\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.SketchyBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n        let sizeSlider;\n        let opacitySlider;\n\n        function setSize(size) {\n            brush.setSize(size);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 250,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                value: brush.getSize() * 2,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 2,\n                toValue: (displayValue) => displayValue / 2,\n                onChange: function (val) {\n                    brush.setSize(val);\n                    p.onSizeChange(val);\n                },\n                formatFunc: (displayValue) => {\n                    if (displayValue < 10) {\n                        return BB.round(displayValue, 1);\n                    } else {\n                        return Math.round(displayValue);\n                    }\n                },\n                manualInputRoundDigits: 1,\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 250,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                value: brush.getOpacity(),\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 100,\n                toValue: (displayValue) => displayValue / 100,\n                onChange: (val) => {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n            });\n            let blendSlider = new KlSlider({\n                label: LANG('brush-blending'),\n                width: 250,\n                height: 30,\n                min: 0,\n                max: 1,\n                value: brush.getBlending(),\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 100,\n                toValue: (displayValue) => displayValue / 100,\n                onChange: function (val) {\n                    brush.setBlending(val);\n                },\n            });\n            let scaleSlider = new KlSlider({\n                label: LANG('brush-sketchy-scale'),\n                width: 250,\n                height: 30,\n                min: 1,\n                max: 20,\n                value: brush.getScale(),\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setScale(val);\n                },\n            });\n            opacitySlider.getElement().style.marginTop = \"10px\";\n            blendSlider.getElement().style.marginTop = \"10px\";\n            scaleSlider.getElement().style.marginTop = \"10px\";\n            div.appendChild(sizeSlider.getElement());\n            div.appendChild(opacitySlider.getElement());\n            div.appendChild(blendSlider.getElement());\n            div.appendChild(scaleSlider.getElement());\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.changeSliderValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.changeSliderValue(-f);\n            }\n        };\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, pressure) {\n            brush.startLine(x, y, pressure);\n        };\n        this.goLine = function (x, y, pressure) {\n            brush.goLine(x, y, pressure, null);\n        };\n        this.endLine = function () {\n            brush.endLine();\n        };\n        this.getSeed = function () {\n            return parseInt(brush.getSeed());\n        };\n        this.setSeed = function (s) {\n            brush.setSeed(parseInt(s));\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.isDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"brush-sketchy.f7180c8a.png\" + \"?\" + Date.now();","import {BB} from '../../bb/bb';\nimport {brushes} from '../brushes/brushes';\nimport {eventResMs} from './brushes-consts';\nimport {klHistory} from '../history/kl-history';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {penPressureToggle} from '../ui/base-components/pen-pressure-toggle';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-pixel.svg';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const pixelBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-pixel'),\n        sizeSlider: {\n            min: 0.5,\n            max: 100,\n            curve: BB.quadraticSplineInput(0.5, 100, 0.1)\n        },\n        opacitySlider: {\n            min: 1 / 100,\n            max: 1,\n            curve: [[0, 1 / 100], [0.5, 0.3], [1, 1]]\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-pixel');\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.PixelBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n        let sizeSlider;\n        let opacitySlider;\n\n        let lockAlphaToggle = new Checkbox({\n            init: brush.getLockAlpha(),\n            label: LANG('lock-alpha'),\n            callback: function (b) {\n                brush.setLockAlpha(b);\n            },\n            doHighlight: true,\n            title: LANG('lock-alpha-title'),\n            css: {\n                marginRight: '10px',\n            }\n        });\n\n        let eraserToggle = new Checkbox({\n            init: brush.getIsEraser(),\n            label: LANG('eraser'),\n            callback: function (b) {\n                brush.setIsEraser(b);\n            },\n            css: {\n                marginRight: '10px',\n            }\n        });\n\n        let ditherToggle = new Checkbox({\n            init: brush.getUseDither(),\n            label: LANG('brush-pixel-dither'),\n            callback: function (b) {\n                brush.setUseDither(b);\n            }\n        });\n\n        let spacingSpline = new BB.SplineInterpolator([[0.5, 0.45], [100, 4]]);\n\n        function setSize(size) {\n            brush.setSize(size);\n            brush.setSpacing(spacingSpline.interpolate(size) / size);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 225,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                value: brush.getSize(),\n                curve: brushInterface.sizeSlider.curve,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 2,\n                toValue: (displayValue) => displayValue / 2,\n                onChange: (val) => {\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 225,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                value: brushInterface.opacitySlider.max,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 100,\n                toValue: (displayValue) => displayValue / 100,\n                onChange: (val) => {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n            });\n\n            let pressureSizeToggle = penPressureToggle(true, function (b) {\n                brush.sizePressure(b);\n            });\n\n            div.append(\n                BB.el({\n                    content: [\n                        sizeSlider.getElement(),\n                        pressureSizeToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '10px',\n                    }\n                }),\n                opacitySlider.getElement()\n            );\n\n            let toggleRow = BB.el({\n                parent: div,\n                css: {\n                    display: 'flex',\n                    marginTop: '10px'\n                }\n            });\n\n            toggleRow.appendChild(lockAlphaToggle.getElement());\n            toggleRow.appendChild(eraserToggle.getElement());\n            toggleRow.appendChild(ditherToggle.getElement());\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.changeSliderValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.changeSliderValue(-f);\n            }\n        };\n\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size * 2);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity * 100);\n        };\n\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y, p);\n        };\n        this.goLine = function (x, y, p) {\n            brush.goLine(x, y, p);\n        };\n        this.endLine = function (x, y) {\n            brush.endLine(x, y);\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.isDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"brush-pixel.43717b99.svg\" + \"?\" + Date.now();","import {BB} from '../../bb/bb';\nimport {brushes} from '../brushes/brushes';\nimport {eventResMs} from './brushes-consts';\nimport {klHistory} from '../history/kl-history';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {penPressureToggle} from '../ui/base-components/pen-pressure-toggle';\nimport {Checkbox} from '../ui/base-components/checkbox';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-eraser.svg';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const eraserBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('eraser') + ' [E]',\n        sizeSlider: {\n            min: 0.5,\n            max: 200,\n            curve: BB.quadraticSplineInput(0.5, 200, 0.1)\n        },\n        opacitySlider: {\n            min: 1 / 100,\n            max: 1\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('eraser') + ' [E]';\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.EraserBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n\n        let sizeSlider;\n        let opacitySlider;\n        let isTransparentBg = false;\n\n        function setSize(size) {\n            brush.setSize(size);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 225,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                value: 30,\n                curve: brushInterface.sizeSlider.curve,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 2,\n                toValue: (displayValue) => displayValue / 2,\n                onChange: (val) => {\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n                formatFunc: (displayValue) => {\n                    if (displayValue < 10) {\n                        return BB.round(displayValue, 1);\n                    } else {\n                        return Math.round(displayValue);\n                    }\n                },\n                manualInputRoundDigits: 1,\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 225,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                value: brushInterface.opacitySlider.max,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 100,\n                toValue: (displayValue) => displayValue / 100,\n                onChange: (val) => {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n            });\n\n            let pressureSizeToggle = penPressureToggle(true, function (b) {\n                brush.sizePressure(b);\n            });\n            let pressureOpacityToggle = penPressureToggle(false, function (b) {\n                brush.opacityPressure(b);\n            });\n\n            div.append(\n                BB.el({\n                    content: [\n                        sizeSlider.getElement(),\n                        pressureSizeToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '10px',\n                    }\n                }),\n                BB.el({\n                    content: [\n                        opacitySlider.getElement(),\n                        pressureOpacityToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                    }\n                })\n            );\n\n            let transparencyToggle = new Checkbox({\n                init: false,\n                label: LANG('brush-eraser-transparent-bg'),\n                callback: function (b) {\n                    isTransparentBg = b;\n                    brush.setTransparentBG(b);\n                },\n                css: {\n                    marginTop: \"10px\",\n                }\n            });\n            div.appendChild(transparencyToggle.getElement());\n        }\n\n        init();\n\n        function drawDot(x, y) {\n            brush.drawDot(x, y);\n        }\n\n        this.increaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.changeSliderValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.changeSliderValue(-f);\n            }\n        };\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n        this.setColor = function (c) {\n            //brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y, p);\n        };\n        this.goLine = function (x, y, p) {\n            brush.goLine(x, y, p);\n        };\n        this.endLine = function () {\n            brush.endLine();\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.getIsTransparentBg = function () {\n            return isTransparentBg;\n        };\n        this.isDrawing = function () {\n            return brush.isDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        }\n    };\n\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"brush-eraser.b3f3ce1a.svg\" + \"?\" + Date.now();","import {BB} from '../../bb/bb';\nimport {brushes} from '../brushes/brushes';\nimport {eventResMs} from './brushes-consts';\nimport {klHistory} from '../history/kl-history';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {penPressureToggle} from '../ui/base-components/pen-pressure-toggle';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-smudge.svg';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const smudgeBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-smudge'),\n        sizeSlider: {\n            min: 0.5,\n            max: 100,\n            curve: BB.quadraticSplineInput(0.5, 100, 0.1)\n        },\n        opacitySlider: {\n            min: 1 / 100,\n            max: 1,\n            curve: [[0, 1 / 100], [0.5, 0.3], [1, 1]]\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-smudge');\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.SmudgeBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n        let sizeSlider;\n        let opacitySlider;\n\n        let lockAlphaToggle = new Checkbox({\n            init: brush.getLockAlpha(),\n            label: LANG('lock-alpha'),\n            callback: function (b) {\n                brush.setLockAlpha(b);\n            },\n            doHighlight: true,\n            title: LANG('lock-alpha-title'),\n        });\n\n        let spacingSpline = new BB.SplineInterpolator([[0, 15], [8, 7], [14, 4], [30, 3], [50, 2.7], [100, 2]]);\n\n        function setSize(size) {\n            brush.setSize(size);\n            brush.setSpacing(Math.max(2, spacingSpline.interpolate(size)) / 15);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 225,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                value: brush.getSize(),\n                curve: brushInterface.sizeSlider.curve,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 2,\n                toValue: (displayValue) => displayValue / 2,\n                onChange: (val) => {\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n                formatFunc: (displayValue) => {\n                    if (displayValue < 10) {\n                        return BB.round(displayValue, 1);\n                    } else {\n                        return Math.round(displayValue);\n                    }\n                },\n                manualInputRoundDigits: 1,\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 225,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                value: brush.getOpacity(),\n                curve: brushInterface.opacitySlider.curve,\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 100,\n                toValue: (displayValue) => displayValue / 100,\n                onChange: (val) => {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n            });\n\n            let pressureSizeToggle = penPressureToggle(false, function (b) {\n                brush.sizePressure(b);\n            });\n            let pressureOpacityToggle = penPressureToggle(false, function (b) {\n                brush.opacityPressure(b);\n            });\n\n            div.append(\n                BB.el({\n                    content: [\n                        sizeSlider.getElement(),\n                        pressureSizeToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '10px',\n                    }\n                }),\n                BB.el({\n                    content: [\n                        opacitySlider.getElement(),\n                        pressureOpacityToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                    }\n                })\n            );\n\n            let bottomRow = BB.el({\n                parent: div,\n                css: {\n                    marginTop: '10px',\n                }\n            });\n            bottomRow.append(lockAlphaToggle.getElement());\n\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.getIsDrawing()) {\n                sizeSlider.changeSliderValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.getIsDrawing()) {\n                sizeSlider.changeSliderValue(-f);\n            }\n        };\n\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y, p);\n        };\n        this.goLine = function (x, y, p) {\n            brush.goLine(x, y, p);\n        };\n        this.endLine = function (x, y) {\n            brush.endLine();\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.getIsDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"brush-smudge.141b13d5.svg\" + \"?\" + Date.now();","import {BB} from '../../bb/bb';\nimport {eventResMs} from './brushes-consts';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {brushes} from '../brushes/brushes';\nimport {klHistory} from '../history/kl-history';\nimport {KlSlider} from '../ui/base-components/kl-slider';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-chemy.svg';\nimport {IBrushUi} from '../kl.types';\nimport {Options} from '../ui/base-components/options';\nimport {BoxToggle} from '../ui/base-components/box-toggle';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const chemyBrushUi = (function () {\n    const brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-chemy'),\n        sizeSlider: {\n            min: 0.25,\n            max: 25,\n            curve: BB.quadraticSplineInput(0.25, 25, 0.1),\n            isDisabled: true,\n        },\n        opacitySlider: {\n            min: 1 / 100,\n            max: 1\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-chemy');\n    });\n\n    brushInterface.Ui = function (p) {\n        const div = document.createElement(\"div\"); // the gui\n        const brush = new brushes.ChemyBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n\n        let sizeSlider: KlSlider;\n        let opacitySlider: KlSlider;\n\n        function setSize(size) {\n            brush.setSize(size);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 250,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                value: brush.getSize(),\n                curve: brushInterface.sizeSlider.curve,\n                eventResMs: eventResMs,\n                isEnabled: brush.getMode() === 'stroke',\n                toDisplayValue: (val) => val * 2,\n                toValue: (displayValue) => displayValue / 2,\n                onChange: (val) => {\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n                formatFunc: (displayValue) => {\n                    if (displayValue < 5) {\n                        return BB.round(displayValue, 1);\n                    } else {\n                        return Math.round(displayValue);\n                    }\n                },\n                manualInputRoundDigits: 1,\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 250,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                value: brush.getOpacity(),\n                eventResMs: eventResMs,\n                toDisplayValue: (val) => val * 100,\n                toValue: (displayValue) => displayValue / 100,\n                onChange: (val) => {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n            });\n\n            BB.css(opacitySlider.getElement(), {\n                marginTop: '10px',\n            });\n\n            let eraserToggle = new Checkbox({\n                init: brush.getIsEraser(),\n                label: LANG('eraser'),\n                callback: function (b) {\n                    brush.setIsEraser(b);\n                },\n                css: {\n                    marginTop: '10px',\n                    marginLeft: '10px',\n                }\n            });\n\n            const lockAlphaToggle = new Checkbox({\n                init: brush.getLockAlpha(),\n                label: LANG('lock-alpha'),\n                callback: function (b) {\n                    brush.setLockAlpha(b);\n                },\n                doHighlight: true,\n                title: LANG('lock-alpha-title'),\n                css: {\n                    marginTop: '10px',\n                }\n            });\n\n            const toggleRow = BB.el({\n                css: {\n                    display: 'flex',\n                    marginTop: '10px',\n                }\n            });\n\n            const iconSize = 35;\n            const padding = 8;\n            const actualIconSize = iconSize - padding * 2;\n            const halfSize = actualIconSize / 2;\n\n            const modeOptions = new Options({\n                optionArr: [\n                    {\n                        id: 'fill',\n                        label: BB.createSvg({\n                            elementType: 'svg',\n                            width: iconSize + '',\n                            height: iconSize + '',\n                            childrenArr: [\n                                {\n                                    elementType: 'path',\n                                    fill: '#000',\n                                    style: `transform-origin: 0 0; transform: translate(-0.5px, -0.5px) scale(${actualIconSize}, ${actualIconSize}) translate(0.5px, 0.5px)`,\n                                    d: 'M 0,0 C 1.5,0 -0.5,1 1,1',\n                                },\n                            ],\n                        }),\n                        title: LANG('brush-chemy-fill'),\n                    },\n                    {\n                        id: 'stroke',\n                        label: BB.createSvg({\n                            elementType: 'svg',\n                            width: iconSize + '',\n                            height: iconSize + '',\n                            childrenArr: [\n                                {\n                                    elementType: 'path',\n                                    fill: 'none',\n                                    stroke: '#000',\n                                    style: `stroke-width: 0.12px; transform-origin: 0 0; transform: translate(-0.5px, -0.5px) scale(${actualIconSize}, ${actualIconSize}) translate(0.5px, 0.5px)`,\n                                    d: 'M 0,0 C 1.5,0 -0.5,1 1,1',\n                                },\n                            ],\n                        }),\n                        title: LANG('brush-chemy-stroke'),\n                    }\n                ],\n                initId: brush.getMode(),\n                onChange: (id: string): void => {\n                    brush.setMode(id as 'stroke' | 'fill');\n                    brushInterface.sizeSlider.isDisabled = brush.getMode() === 'fill';\n                    sizeSlider.setIsEnabled(!brushInterface.sizeSlider.isDisabled);\n\n                    const brushSize = brush.getSize();\n                    sizeSlider.setValue(brushSize);\n                    p.onSizeChange(brushSize);\n                    p.onConfigChange();\n                }\n            });\n\n            const mirrorXToggle = new BoxToggle({\n                label: BB.createSvg({\n                    elementType: 'svg',\n                    width: iconSize + '',\n                    height: iconSize + '',\n                    childrenArr: [\n                        {\n                            elementType: 'path',\n                            fill: 'none',\n                            stroke: '#000',\n                            style: 'stroke-width: 1px',\n                            d: `M ${halfSize + padding},${padding} ${halfSize + padding},${actualIconSize + padding}`,\n                        },\n                    ]\n                }),\n                title: LANG('brush-chemy-mirror-x'),\n                init: brush.getXSymmetry(),\n                onChange: (b) => {\n                    brush.setXSymmetry(b);\n                },\n            });\n\n            const mirrorYToggle = new BoxToggle({\n                label: BB.createSvg({\n                    elementType: 'svg',\n                    width: iconSize + '',\n                    height: iconSize + '',\n                    childrenArr: [\n                        {\n                            elementType: 'path',\n                            fill: 'none',\n                            stroke: '#000',\n                            style: 'stroke-width: 1px',\n                            d: `M ${padding},${halfSize + padding} ${actualIconSize + padding},${halfSize + padding}`,\n                        },\n                    ]\n                }),\n                title: LANG('brush-chemy-mirror-y'),\n                init: brush.getYSymmetry(),\n                onChange: (b) => {\n                    brush.setYSymmetry(b);\n                },\n            });\n\n            const gradientToggle = new BoxToggle({\n                label: BB.createSvg({\n                    elementType: 'svg',\n                    width: iconSize + '',\n                    height: iconSize + '',\n                    childrenArr: [\n                        {\n                            elementType: 'defs',\n                            childrenArr: [\n                                {\n                                    elementType: 'linearGradient',\n                                    id: 'gradient',\n                                    x1: '0',\n                                    y1: '0',\n                                    x2: '0',\n                                    y2: '1',\n                                    childrenArr: [\n                                        {\n                                            elementType: 'stop',\n                                            offset: '0%',\n                                            'stop-color': 'rgba(0,0,0,0)',\n                                        },\n                                        {\n                                            elementType: 'stop',\n                                            offset: '100%',\n                                            'stop-color': 'rgba(0,0,0,1)',\n                                        }\n                                    ]\n                                }\n                            ]\n                        },\n                        {\n                            elementType: 'rect',\n                            fill: \"url('#gradient')\",\n                            x: '' + padding,\n                            y: '' + padding,\n                            width: '' + actualIconSize,\n                            height: '' + actualIconSize,\n                        },\n                    ]\n                }),\n                title: LANG('brush-chemy-gradient'),\n                init: brush.getGradient(),\n                onChange: (b) => {\n                    brush.setGradient(b);\n                },\n            });\n\n            BB.css(mirrorXToggle.getElement(), {\n                marginLeft: '10px',\n            });\n            {\n                const margin = {\n                    marginLeft: '4px',\n                };\n                BB.css(mirrorYToggle.getElement(), margin);\n                BB.css(gradientToggle.getElement(), margin);\n            }\n\n            toggleRow.append(\n                modeOptions.getElement(),\n                mirrorXToggle.getElement(),\n                mirrorYToggle.getElement(),\n                gradientToggle.getElement(),\n            );\n\n            div.append(\n                sizeSlider.getElement(),\n                opacitySlider.getElement(),\n                toggleRow,\n                BB.el({\n                    content: [\n                        lockAlphaToggle.getElement(),\n                        eraserToggle.getElement(),\n                    ],\n                    css: {\n                        display: 'flex',\n                    }\n                })\n            );\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.getIsDrawing() && brush.getMode() === 'stroke') {\n                sizeSlider.changeSliderValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.getIsDrawing() && brush.getMode() === 'stroke') {\n                sizeSlider.changeSliderValue(-f);\n            }\n        };\n\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y);\n        };\n        this.goLine = function (x, y, p, isCoalesced) {\n            brush.goLine(x, y);\n        };\n        this.endLine = function () {\n            brush.endLine();\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.getIsDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"brush-chemy.afd3e842.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\n\nexport class BoxToggle {\n    el: HTMLElement;\n    value: boolean;\n\n    update (): void {\n        this.el.classList.toggle('kl-box-toggle--active', this.value);\n    }\n\n    // --- public ---\n    constructor (\n        p: {\n            label: string | HTMLElement | SVGElement;\n            title?: string;\n            init?: boolean;\n            onChange: (b: boolean) => void;\n        }\n    ) {\n        this.value = !!p.init;\n        this.el = BB.el({\n            content: p.label,\n            title: p.title,\n            className: (typeof p.label === 'string') ? 'kl-box-toggle' : 'kl-box-toggle kl-box-toggle--custom-el',\n            onClick: () => {\n                this.value = !this.value;\n                this.update();\n                p.onChange(this.value);\n            },\n            css: {\n                cursor: 'pointer',\n            }\n        });\n        if (typeof p.label !== 'string') {\n            BB.css(p.label, {\n                display: 'block',\n                pointerEvents: 'none',\n            });\n        }\n        this.update();\n    }\n\n    getValue (): boolean {\n        return this.value;\n    }\n\n    setValue (b: boolean): void {\n        this.value = !!b;\n        this.update();\n    }\n\n    getElement (): HTMLElement {\n        return this.el;\n    }\n\n    destroy (): void {\n        BB.destroyEl(this.el);\n    }\n}","import {BB} from '../../../bb/bb';\nimport {Popup} from './popup';\nimport {LANG} from '../../../language/language';\n\nexport function showIframePopup(url, isEmbed) {\n    if (!isEmbed && (window.innerHeight < 500 || window.innerWidth < 700)) {\n        window.open(url);\n        return;\n    }\n\n    let iframe = BB.el({\n        tagName: 'iframe',\n        custom: {\n            src: url,\n        },\n        css: {\n            width: '100%',\n            height: '100%'\n        }\n    }) as HTMLIFrameElement;\n    let titleEl = BB.el({});\n\n    let linkEl;\n    if (!isEmbed) {\n        linkEl = BB.el({\n            tagName: 'a',\n            parent: titleEl,\n            content: LANG('modal-new-tab'),\n            custom: {\n                href: 'help',\n                target: '_blank',\n            },\n            onClick: function() {\n                popup.close();\n            }\n        }) as HTMLAnchorElement;\n        iframe.onload = function() {\n            BB.setAttributes(linkEl, {\n                href: '' + iframe.contentWindow.location,\n            });\n        };\n    }\n\n\n    let popup = new Popup({\n        title: titleEl,\n        content: iframe,\n        width: 880,\n        isMaxHeight: true,\n        onClose: () => {\n            if (linkEl) {\n                BB.destroyEl(linkEl);\n            }\n        }\n    });\n\n}","import {BB} from '../../../bb/bb';\n\nexport class RadioList {\n\n    el: HTMLDivElement;\n    inputs: HTMLInputElement[] = [];\n\n    constructor({name, init, items, ignoreFocus}: {\n        name: string;\n        init?: string;\n        items: {\n            label: string;\n            value: string;\n        }[],\n        ignoreFocus?: boolean; // default false\n    }) {\n        this.el = BB.el({\n            className: 'kl-radio'\n        }) as HTMLDivElement;\n\n        items.forEach(item => {\n            let label = BB.el({\n                tagName: 'label'\n            });\n            let input = BB.el({\n                tagName: 'input',\n                parent: label,\n                custom: {\n                    name: name,\n                    value: item.value,\n                    type: 'radio',\n                }\n            }) as HTMLInputElement;\n            if (ignoreFocus) {\n                input.setAttribute('data-ignore-focus', 'true');\n            }\n            if (init === item.value) {\n                input.checked = true;\n            }\n            label.append(item.label);\n            this.el.append(label);\n            this.inputs.push(input);\n        });\n    }\n\n\n    getValue(): string {\n        for (let i = 0; i < this.inputs.length; i++) {\n            if (this.inputs[i].checked) {\n                return this.inputs[i].value;\n            }\n        }\n        return null;\n    }\n\n    getElement() {\n        return this.el;\n    }\n\n}","import {BB} from '../../../bb/bb';\n\n// @ts-ignore\nimport removeLayerImg from 'url:~/src/app/img/ui/remove-layer.svg';\nimport {IKlProject} from '../../kl.types';\nimport {showIframePopup} from '../modals/show-iframe-popup';\nimport {SaveReminder} from './save-reminder';\nimport {IProjectStoreListener, ProjectStore} from '../../storage/project-store';\nimport {KL} from '../../kl';\nimport {LANG} from '../../../language/language';\n\nexport class BrowserStorageUi {\n\n    private previewEl: HTMLDivElement;\n    private infoEl: HTMLDivElement;\n    private ageEl: HTMLDivElement;\n    private storeButtonEl: HTMLButtonElement;\n    private clearButtonEl: HTMLButtonElement;\n    private storeListener: IProjectStoreListener;\n\n    private timestamp: number;\n\n    private updateAge() {\n        if (!this.timestamp) {\n            return;\n        }\n        let age = new Date().getTime() - this.timestamp;\n        let ageStr;\n        age = Math.floor(age / 1000 / 60);\n        ageStr = LANG('file-storage-min-ago').replace('{x}', '' + age);\n        if (age > 60) {\n            age = Math.floor(age / 60);\n            ageStr = LANG('file-storage-hours-ago').replace('{x}', '' + age);\n            if (age > 24) {\n                age = Math.floor(age / 24);\n                ageStr = LANG('file-storage-days-ago').replace('{x}', '' + age);\n                if (age > 31) {\n                    ageStr = LANG('file-storage-month-ago');\n                }\n            }\n        }\n        this.ageEl.textContent = ageStr;\n    }\n\n    private resetButtons() {\n        if (this.timestamp) {\n            this.storeButtonEl.textContent = LANG('file-storage-overwrite');\n            this.storeButtonEl.disabled = false;\n            this.clearButtonEl.disabled = false;\n        } else {\n            this.storeButtonEl.textContent = LANG('file-storage-store');\n            this.storeButtonEl.disabled = false;\n            this.clearButtonEl.disabled = true;\n        }\n    }\n\n    private updateThumb(timestamp?: number, thumbnail?: HTMLImageElement | HTMLCanvasElement) {\n        this.timestamp = timestamp;\n        if (this.timestamp) {\n            BB.css(thumbnail, {\n                display: 'block',\n                maxWidth: 'calc(100% - 2px)',\n                maxHeight: 'calc(100% - 2px)',\n                margin: '0 auto',\n                background: \"url('\" + BB.createCheckerCanvas(4).toDataURL('image/png') + \"')\",\n                boxShadow: '0 0 0 1px #aaa',\n                pointerEvents: 'none',\n            });\n            this.previewEl.innerHTML = '';\n            this.updateAge();\n            this.previewEl.append(thumbnail, this.ageEl);\n        } else {\n            this.previewEl.innerHTML = LANG('file-storage-empty');\n        }\n        this.resetButtons();\n    }\n\n    private async store() {\n        this.storeButtonEl.textContent = LANG('file-storage-storing');\n        this.storeButtonEl.disabled = true;\n        this.clearButtonEl.disabled = true;\n        await new Promise((resolve) => {\n            setTimeout(() => resolve(null), 20);\n        });\n        try {\n            await this.projectStore.store(this.getProject());\n            this.saveReminder.reset();\n        } catch (e) {\n            this.resetButtons();\n            KL.popup({\n                target: this.klRootEl,\n                type: 'error',\n                message: [\n                    `${LANG('file-storage-failed-1')}<ul>`,\n                    `<li>${LANG('file-storage-failed-2')}</li>`,\n                    `<li>${LANG('file-storage-failed-3')}</li>`,\n                    `<li>${LANG('file-storage-failed-4')}</li>`,\n                    `</ul>`,\n                ].join(''),\n                buttons: ['Ok'],\n            });\n            setTimeout(() => {\n                throw new Error('storage-ui: failed to store browser storage, ' + e);\n            }, 0);\n        }\n    }\n\n    private async clear() {\n        this.storeButtonEl.disabled = true;\n        this.clearButtonEl.disabled = true;\n        try {\n            await this.projectStore.clear();\n        } catch (e) {\n            this.resetButtons();\n            KL.popup({\n                target: this.klRootEl,\n                type: 'error',\n                message: LANG('file-storage-failed-clear'),\n                buttons: ['Ok'],\n            });\n            setTimeout(() => {\n                throw new Error('storage-ui: failed to clear browser storage, ' + e);\n            }, 0);\n        }\n    }\n\n    element: HTMLDivElement;\n\n    constructor (\n        private projectStore: ProjectStore,\n        private getProject: () => IKlProject,\n        private saveReminder: SaveReminder,\n        private klRootEl: HTMLDivElement,\n        private options?: { hideClearButton?: boolean; isFocusable?: boolean }, // isFocusable default = false\n    ) {\n        this.element = BB.el({\n            css: {\n                display: 'grid',\n                gridTemplateColumns: '1fr 0fr',\n                gridTemplateRows: '0fr 0fr 0fr',\n                gap: '0 0',\n                gridTemplateAreas: '\"title title\" \"preview store\" \"preview clear\"',\n            }\n        }) as HTMLDivElement;\n\n\n        const title = BB.el({\n            parent: this.element,\n            content: LANG('file-storage'),\n            css: {\n                gridArea: 'title',\n                display: 'flex',\n                margin: '-5px 0',\n                //background: '#f00',\n            }\n        });\n\n        this.infoEl = BB.el({\n            parent: title,\n            content: '?',\n            title: LANG('file-storage-about'),\n            css: {\n                cursor: 'pointer',\n                marginLeft: '5px',\n                width: '19px',\n                height: '19px',\n                borderRadius: '100%',\n                textAlign: 'center',\n                lineHeight: '19px',\n                fontWeight: 'bold',\n                boxShadow: 'inset 0 0 0 1px #000',\n            },\n            onClick: () => {\n                showIframePopup('./help/#help-browser-storage', false);\n            }\n        }) as HTMLDivElement;\n\n        if (this.projectStore.isBroken()) {\n            BB.el({\n                parent: this.element,\n                content: \" \" + LANG('file-storage-cant-access'),\n                css: {\n                    marginTop: '10px',\n                }\n            });\n            return;\n        }\n\n        this.previewEl = BB.el({\n            parent: this.element,\n            title: LANG('file-storage-thumb-title'),\n            css: {\n                gridArea: 'preview',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                marginTop: '10px',\n                position: 'relative',\n                boxShadow: 'inset 0 0 0 1px #aaa',\n                background: '#cdcdcd',\n                color: '#545454',\n                colorScheme: 'only light',\n                minHeight: '67px',\n            }\n        }) as HTMLDivElement;\n        this.ageEl = BB.el({\n            css: {\n                position: 'absolute',\n                right: '0',\n                bottom: '0',\n                width: '100%',\n                textAlign: 'center',\n                background: 'rgba(0,0,0,0.7)',\n                color: '#fff',\n                textSize: '13px',\n            }\n        }) as HTMLDivElement;\n        const btnCustom = options?.isFocusable ?  {} : {\n            tabIndex: -1,\n        };\n        this.storeButtonEl = BB.el({\n            parent: this.element,\n            tagName: 'button',\n            className: 'gridButton',\n            content: LANG('file-storage-store'),\n            css: {\n                gridArea: 'store',\n                //background: '#00f',\n            },\n            custom: btnCustom,\n            onClick: () => this.store(),\n        }) as HTMLButtonElement;\n        this.clearButtonEl = BB.el({\n            parent: this.element,\n            tagName: 'button',\n            className: 'gridButton',\n            content: '<img src=\"' + removeLayerImg + '\" height=\"20\"/> ' + LANG('file-storage-clear'),\n            css: {\n                gridArea: 'clear',\n                //background: '#ff0',\n            },\n            custom: btnCustom,\n            onClick: () => this.clear(),\n        }) as HTMLButtonElement;\n\n        if (this.options?.hideClearButton) {\n            this.clearButtonEl.style.visibility = 'hidden';\n        }\n\n        this.storeListener = {\n            onUpdate: (timestamp, thumbnail) => {\n                this.updateThumb(timestamp, thumbnail);\n            },\n        };\n        this.projectStore.subscribe(this.storeListener);\n\n        setInterval(() => this.updateAge(), 1000 * 60);\n\n        (async () => {\n            try {\n                const readResult = await this.projectStore.read();\n                if (readResult) {\n                    this.updateThumb(readResult.timestamp, readResult.thumbnail);\n                } else {\n                    this.updateThumb();\n                }\n            } catch (e) {\n                setTimeout(() => {\n                    throw new Error('storage-ui: failed initial read browser storage, ' + e);\n                }, 0);\n            }\n        })();\n    }\n\n\n    getElement() {\n        return this.element;\n    }\n\n    show () {\n        // todo\n    }\n\n    hide () {\n        // todo\n    }\n\n    destroy() {\n        BB.destroyEl(this.infoEl);\n        BB.destroyEl(this.storeButtonEl);\n        BB.destroyEl(this.clearButtonEl);\n        this.projectStore.unsubscribe(this.storeListener);\n    }\n}","import {IKlProject, IKlStorageProject} from '../kl.types';\nimport {ProjectConverter} from './project-converter';\nimport {clear, getKlProjectObj, storeKlProjectObj} from './indexed-db';\nimport {LocalStorage} from '../../bb/base/local-storage';\n\n\nexport interface IProjectStoreListener {\n    onUpdate: (timestamp?: number, thumbnail?: HTMLImageElement | HTMLCanvasElement) => void,\n}\n\nfunction makeAsync(func): Promise<any> {\n    return new Promise((resolve, reject) => {\n        func(resolve, reject);\n    });\n}\n\n/**\n * simplified interface for storing projects into browser storage\n */\nexport class ProjectStore {\n\n    private listeners: IProjectStoreListener[] = [];\n    private accessHasFailed: boolean = false;\n\n    async lowLevelStore (project: IKlStorageProject): Promise<any> {\n        await new Promise((resolve, reject) => {\n            storeKlProjectObj(project, resolve, reject);\n        });\n    }\n\n    async lowLevelRead (): Promise<IKlStorageProject> {\n        return await makeAsync(getKlProjectObj) as IKlStorageProject;\n    }\n\n    async lowLevelClear (): Promise<any> {\n        await makeAsync(clear);\n    }\n\n\n\n    private emit(timestamp?: number, thumbnail?: HTMLImageElement | HTMLCanvasElement) {\n        this.listeners.forEach(item => {\n            item.onUpdate(timestamp, thumbnail);\n        });\n    }\n\n    private updateTimestamp() {\n        LocalStorage.setItem('indexedDbUpdatedAt', '' + new Date().getTime());\n    }\n\n    // --- public ---\n\n    constructor () {\n        window.addEventListener('storage', (e) => {\n            if (e.key !== 'indexedDbUpdatedAt' || this.listeners.length === 0) {\n                return;\n            }\n            try {\n                ( async () => {\n                    const readResult = await this.read();\n                    if (readResult) {\n                        this.emit(readResult.timestamp, readResult.thumbnail);\n                    } else {\n                        this.emit();\n                    }\n                })();\n            } catch (e) {\n                if (e.message.indexOf('db-error') === 0) {\n                    this.accessHasFailed = true;\n                }\n            }\n\n        });\n    }\n\n    async read(): Promise<{\n        project: IKlProject,\n        timestamp: number,\n        thumbnail: HTMLImageElement | HTMLCanvasElement\n    } | null> {\n        let storageProject;\n        try {\n            storageProject = await this.lowLevelRead();\n        } catch (e) {\n            this.accessHasFailed = true;\n            throw new Error('db-error: ' + e);\n        }\n        if (!storageProject) {\n            return null;\n        }\n        let result;\n        try {\n            result = await ProjectConverter.readStorageProject(storageProject);\n        } catch (e) {\n            throw new Error('format-error: ' + e);\n        }\n        return result;\n    }\n\n    async store(project: IKlProject): Promise<void> {\n        try {\n            const storageProject = ProjectConverter.createStorageProject(project);\n            await this.lowLevelStore(storageProject);\n        } catch (e) {\n            this.accessHasFailed = true;\n            throw new Error('db-error: ' + e);\n        }\n        {\n            // immediately test if it can be read\n            const storageProject = await this.lowLevelRead();\n            let readResult = null;\n            try {\n                readResult = await ProjectConverter.readStorageProject(storageProject);\n            } catch (e) {\n                await this.lowLevelClear();\n                this.updateTimestamp();\n                setTimeout(() => this.emit(), 0);\n                throw new Error('format-error: ' + e);\n            }\n            this.updateTimestamp();\n            setTimeout(() => this.emit(readResult.timestamp, readResult.thumbnail), 0);\n        }\n    }\n\n    async clear(): Promise<void> {\n        await this.lowLevelClear();\n        this.updateTimestamp();\n        setTimeout(() => this.emit(), 0);\n    }\n\n    subscribe(listener: IProjectStoreListener) {\n        if (this.listeners.includes(listener)) {\n            return;\n        }\n        this.listeners.push(listener);\n    }\n\n    unsubscribe(listener: IProjectStoreListener) {\n        for (let i = 0; i < this.listeners.length; i++) {\n            if (listener === this.listeners[i]) {\n                this.listeners.splice(i, 1);\n                return;\n            }\n        }\n    }\n\n    isBroken() {\n        return this.accessHasFailed;\n    }\n\n}","import {IKlProject, IKlStorageProject} from '../kl.types';\nimport {BB} from '../../bb/bb';\nimport {drawProject} from '../canvas/draw-project';\nimport {base64ToBlob} from './base-64-to-blob';\n\n\nconst thumbSize = 240;\n\nfunction loadImage(blob: Blob): Promise<HTMLImageElement> {\n    return new Promise<HTMLImageElement>((resolve, reject) => {\n        const im = new Image();\n        try {\n            im.src = BB.imageBlobToUrl(blob);\n        } catch (e) {\n            reject('imageBlobToUrl, ' + e.message);\n            return;\n        }\n        im.onload = () => {\n            URL.revokeObjectURL(im.src);\n            resolve(im);\n        }\n        im.onabort = function () {\n            reject('layer image failed loading');\n        };\n        im.onerror = function () {\n            reject('layer image failed loading');\n        };\n    });\n}\n\n/**\n * for:\n * - preparing project to be stored in ProjectStore\n * - reading a project that came out of the ProjectStore\n */\nexport class ProjectConverter {\n\n    private static createThumbnail(project): HTMLCanvasElement {\n        const size = BB.fitInto(project.width, project.height, thumbSize, thumbSize);\n        const factor = size.width / project.width;\n        return drawProject(project, factor);\n    }\n\n    static createStorageProject(project: IKlProject): IKlStorageProject {\n        return {\n            id: 1,\n            timestamp: new Date().getTime(),\n            thumbnail: base64ToBlob(ProjectConverter.createThumbnail(project).toDataURL('image/png')),\n            width: project.width,\n            height: project.height,\n            layers: project.layers.map(item => {\n                let blob;\n                if (item.image instanceof HTMLCanvasElement) {\n                    blob = base64ToBlob((item.image as HTMLCanvasElement).toDataURL('image/png'));\n                } else {\n                    // todo image\n                    throw new Error('Not implemented');\n                }\n                return {\n                    name: item.name,\n                    opacity: item.opacity,\n                    mixModeStr: item.mixModeStr,\n                    blob,\n                }\n            }),\n        };\n    }\n\n    static async readStorageProject(storageProject: IKlStorageProject): Promise<{\n        project: IKlProject,\n        timestamp: number,\n        thumbnail: HTMLImageElement | HTMLCanvasElement\n    }> {\n        if (\n            !storageProject.width || !storageProject.height ||\n            isNaN(storageProject.width) || isNaN(storageProject.height) ||\n            storageProject.width < 1 || storageProject.height < 1\n        ) {\n            throw new Error('readStorageProject invalid canvas size: ' + storageProject.width + ', ' + storageProject.height);\n        }\n        const project: IKlProject = {\n            width: storageProject.width,\n            height: storageProject.height,\n            layers: (await Promise.all(storageProject.layers.map(layer => loadImage(layer.blob))))\n                .map((image, i) => {\n                    return {\n                        name: storageProject.layers[i].name,\n                        opacity: storageProject.layers[i].opacity,\n                        mixModeStr: storageProject.layers[i].mixModeStr,\n                        image,\n                    };\n                }),\n        };\n\n        let thumbnail;\n        if (storageProject.thumbnail) {\n            thumbnail = await loadImage(storageProject.thumbnail);\n        } else {\n            thumbnail = ProjectConverter.createThumbnail(project);\n        }\n\n        return {\n            project: project,\n            timestamp: storageProject.timestamp,\n            thumbnail: thumbnail,\n        };\n    }\n\n}","\nexport function base64ToBlob(base64Str: string): Blob {\n    let parts = base64Str.match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/);\n    let binStr = atob(parts[3]);\n    let buf = new ArrayBuffer(binStr.length);\n    let view = new Uint8Array(buf);\n    for (let i = 0; i < view.length; i++) {\n        view[i] = binStr.charCodeAt(i);\n    }\n    return new Blob([view], {'type': parts[1]});\n}","import {BB} from '../../../bb/bb';\nimport {KL} from '../../kl';\n// @ts-ignore\nimport newImageImg from 'url:~/src/app/img/ui/new-image.svg';\n// @ts-ignore\nimport exportImg from 'url:~/src/app/img/ui/export.svg';\n// @ts-ignore\nimport shareImg from 'url:~/src/app/img/ui/share.svg';\n// @ts-ignore\nimport uploadImg from 'url:~/src/app/img/ui/upload.svg';\n// @ts-ignore\nimport importImg from 'url:~/src/app/img/ui/import.svg';\n// @ts-ignore\nimport copyImg from 'url:~/src/app/img/ui/copy.svg';\nimport {BrowserStorageUi} from '../components/browser-storage-ui';\nimport {IKlProject} from '../../kl.types';\nimport {SaveReminder} from '../components/save-reminder';\nimport {ProjectStore} from '../../storage/project-store';\nimport {LANG} from '../../../language/language';\n\nexport type exportType = 'png' | 'layers' | 'psd';\n\n\n\n\n\n\n\n\nexport class FileTab {\n\n    private readonly div: HTMLDivElement;\n    private importButton: HTMLInputElement;\n    private fileBrowserStorage: BrowserStorageUi;\n\n    constructor(\n        klRootEl,\n        projectStore: ProjectStore,\n        getProject: () => IKlProject,\n        private exportType,\n        onExportTypeChange,\n        onFileSelect,\n        onSaveImageToComputer,\n        onNewImage,\n        onShareImage,\n        onUpload,\n        onCopyToClipboard,\n        saveReminder: SaveReminder,\n    ) {\n        const _this = this;\n        this.div = document.createElement(\"div\");\n\n        const asyncCreation = () => {\n            let filemenu = document.createElement(\"div\");\n            let newButton = document.createElement(\"button\");\n            let saveButton = document.createElement(\"button\");\n            let shareButton = document.createElement(\"button\");\n            let uploadImgurButton = document.createElement(\"button\");\n            let clipboardButton = document.createElement(\"button\");\n\n            newButton.style.cssFloat = 'left';\n            BB.css(saveButton, {\n                cssFloat: 'left',\n                clear: 'both',\n            });\n            BB.css(clipboardButton, {\n                cssFloat: 'left',\n                clear: 'both',\n            });\n\n            newButton.tabIndex = -1;\n            saveButton.tabIndex = -1;\n            shareButton.tabIndex = -1;\n            uploadImgurButton.tabIndex = -1;\n            clipboardButton.tabIndex = -1;\n\n            newButton.innerHTML = `<img src='${newImageImg}' alt='icon' height='20'/>${LANG('file-new')}`;\n            saveButton.innerHTML = `<img src='${exportImg}' alt='icon' height='20'/>${LANG('file-save')}`;\n            shareButton.innerHTML = `<img src='${shareImg}' alt='icon' height='20'/>${LANG('file-share')}`;\n            uploadImgurButton.innerHTML = `<img style='float:left' src='${uploadImg}' height='20' alt='icon'/>${LANG('file-upload')}`;\n            clipboardButton.innerHTML = `<img src='${copyImg}' alt='icon' height='20'/>${LANG('file-copy')}`;\n            clipboardButton.title = LANG('file-copy-title');\n            newButton.className = \"gridButton\";\n            saveButton.className = \"gridButton\";\n            shareButton.className = \"gridButton\";\n            uploadImgurButton.className = \"gridButton\";\n            clipboardButton.className = \"gridButton\";\n\n\n            this.importButton = document.createElement(\"input\");\n            this.importButton.tabIndex = -1;\n            this.importButton.type = \"file\";\n            this.importButton.multiple = true;\n            this.importButton.accept = \"image\";\n            (this.importButton as any).size = \"71\";\n            this.importButton.textContent = \"Import\";\n            let importWrapper: any = this.importButton;\n\n            function createImportButton() {\n                importWrapper = document.createElement(\"div\");\n                importWrapper.className = \"gridButton\";\n                importWrapper.style.position = \"relative\";\n                importWrapper.style.cursor = \"pointer\";\n                importWrapper.style.cssFloat = \"left\";\n\n                let innerMask = document.createElement(\"div\");\n                innerMask.style.width = \"120px\";\n                innerMask.style.height = \"28px\";\n                innerMask.style.overflow = \"hidden\";\n                innerMask.style.cursor = \"pointer\";\n                innerMask.style.position = \"relative\";\n\n                importWrapper.appendChild(innerMask);\n                innerMask.appendChild(_this.importButton);\n\n                let importFakeButton = document.createElement(\"button\");\n                importFakeButton.innerHTML = \"<img style='float:left' height='20' src='\" + importImg + \"' alt='icon'/>\" + LANG('file-import');\n                importFakeButton.tabIndex = -1;\n\n                BB.css(importFakeButton, {\n                    width: \"120px\",\n                    display: \"box\",\n                    position: \"absolute\",\n                    left: '0',\n                    top: '0',\n                    cursor: \"pointer\"\n                });\n                BB.css(_this.importButton, {\n                    display: 'none'\n                });\n                importWrapper.appendChild(importFakeButton);\n\n                importFakeButton.onclick = function() {\n                    _this.importButton.click();\n                }\n            }\n\n            createImportButton();\n\n            this.importButton.onchange = function (e) {\n                onFileSelect(_this.importButton.files, 'default');\n                _this.importButton.value = \"\";\n\n            };\n\n\n            // --- export filetype dropdown ---\n            let exportTypeWrapper;\n            let exportTypeSelect;\n            {\n                exportTypeWrapper = BB.el({\n                    css: {\n                        fontSize: '15px',\n                        marginLeft: '10px',\n                        marginTop: '10px',\n                        cssFloat: 'left',\n                        width: 'calc(50% - 15px)',\n                        height: '30px'\n                    }\n                });\n                exportTypeSelect = new KL.Select({\n                    optionArr: [\n                        ['png', LANG('file-save-png')],\n                        ['psd', LANG('file-save-psd')],\n                        ['layers', LANG('file-save-layers')],\n                    ],\n                    initValue: exportType,\n                    onChange: function(val) {\n                        exportType = val;\n                        onExportTypeChange(exportType);\n                        onSaveImageToComputer();\n                    }\n                });\n                BB.css(exportTypeSelect.getElement(), {\n                    width: '120px',\n                    height: '30px'\n                });\n                exportTypeWrapper.appendChild(exportTypeSelect.getElement());\n\n            }\n\n\n\n            newButton.onclick = onNewImage;\n            saveButton.onclick = function () {\n                onSaveImageToComputer();\n            };\n            shareButton.onclick = function() {\n                shareButton.disabled = true;\n                onShareImage(() => {\n                    shareButton.disabled = false;\n                });\n            };\n            uploadImgurButton.onclick = function () {\n                onUpload();\n            };\n\n            clipboardButton.onclick = function() {\n                clipboardButton.blur();\n                onCopyToClipboard();\n            };\n\n            let saveNote = document.createElement(\"div\");\n            saveNote.textContent = \" \" + LANG('file-no-autosave');\n            BB.css(saveNote, {\n                textAlign: \"center\",\n                marginTop: \"10px\",\n                background: \"rgb(243, 243, 161)\",\n                padding: \"5px 0px\",\n                color: 'rgba(0,0,0,0.65)',\n                fontSize: '15px',\n            });\n\n            function createSpacer() {\n                let el = document.createElement(\"div\");\n                let clearer = document.createElement(\"div\");\n                let line = document.createElement(\"div\");\n                el.appendChild(clearer);\n                el.appendChild(line);\n                BB.css(clearer, {\n                    clear: 'both'\n                });\n                BB.css(line, {\n                    marginLeft: \"10px\",\n                    marginRight: \"10px\",\n                    marginTop: \"10px\",\n                    borderBottom: \"1px solid rgba(0,0,0,0.2)\",\n                    clear: 'both'\n                });\n                return el;\n            }\n\n            _this.fileBrowserStorage = new BrowserStorageUi(projectStore, getProject, saveReminder, klRootEl);\n            BB.css(_this.fileBrowserStorage.getElement(), {\n                //background: 'red',\n                margin: '10px',\n            });\n\n\n            //actual structure\n            BB.append(filemenu, [\n                saveNote,\n                newButton,\n                importWrapper,\n                BB.el({css: {clear: 'both'}}),\n\n                saveButton,\n                exportTypeWrapper,\n                BB.el({css: {clear: 'both'}}),\n\n                clipboardButton,\n                BB.canShareFiles() ? shareButton : null,\n                BB.el({css: {clear: 'both'}}),\n\n                createSpacer(),\n                _this.fileBrowserStorage.getElement(),\n                createSpacer(),\n                uploadImgurButton,\n            ]);\n\n            this.div.appendChild(filemenu);\n        };\n\n        setTimeout(asyncCreation, 1);\n    }\n\n    refresh() {\n    }\n\n    getElement() {\n        return this.div;\n    }\n\n    setIsVisible(isVisible: boolean) {\n        if (isVisible) {\n            this.refresh();\n        }\n    }\n\n    triggerImport() {\n        this.importButton.click();\n    }\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"upload.48a9c420.svg\" + \"?\" + Date.now();","import {BB} from '../../../bb/bb';\nimport {KL} from '../../kl';\nimport {klHistory} from '../../history/kl-history';\nimport {IKeyString} from '../../../bb/bb.types';\nimport {StatusOverlay} from '../components/status-overlay';\nimport {KlCanvasWorkspace} from '../../canvas-ui/kl-canvas-workspace';\nimport {KlCanvas} from '../../canvas/kl-canvas';\nimport {LANG} from '../../../language/language';\nimport {IFilterApply, IFilterGetDialogParam, IFilterGetDialogResult} from '../../kl.types';\n\n\nexport class FilterTab {\n\n    private readonly div: HTMLDivElement;\n    private isInit = false;\n\n    constructor (\n        private klRootEl,\n        private klColorSlider,\n        private layerManager,\n        // private setCurrentLayer,\n        private klCanvasWorkspace: KlCanvasWorkspace,\n        private handUi,\n        private getCurrentColor,\n        private getKlMaxCanvasSize,\n        private getKlCanvas: () => KlCanvas,\n        private getCurrentLayerCtx,\n        private isEmbed: boolean,\n        private statusOverlay: StatusOverlay,\n    ) {\n        this.div = document.createElement(\"div\");\n    }\n\n    private init() {\n        const _this = this;\n        let filters = KL.filterLib;\n        let buttons = [];\n\n        BB.BbLog.emit({\n            type: 'init-filters',\n        });\n\n        if (!KL.filterLibStatus.isLoaded) {\n            throw new Error('filters not loaded');\n        }\n\n        function createButton(filterKey, filterArr) {\n            let button = document.createElement(\"button\");\n            let buttonLabel = LANG(filterArr[filterKey].lang.button);\n            let im = '<img height=\"20\" width=\"18\" src=\"' + filterArr[filterKey].icon + '\" alt=\"icon\" />';\n            button.innerHTML = im + buttonLabel;\n            button.className = \"gridButton\";\n            BB.css(button, {\n                lineHeight: '20px',\n                fontSize: '12px',\n            });\n            button.tabIndex = -1;\n\n            const filterName = LANG(filterArr[filterKey].lang.name);\n\n            button.onclick = function () {\n\n                function finishedDialog(result, filterDialog) {\n                    if (result == \"Cancel\") {\n                        if (filterDialog.destroy) {\n                            filterDialog.destroy();\n                        }\n                        return;\n                    }\n                    let input;\n                    try {\n                        input = filterDialog.getInput(); // also destroys\n                    } catch (e) {\n                        if (e.message.indexOf('.getInput is not a function') !== -1) {\n                            throw 'filterDialog.getInput is not a function, filter: ' + filterName;\n                        } else {\n                            throw e;\n                        }\n                    }\n                    applyFilter(input);\n                }\n\n                if (!('apply' in filterArr[filterKey])) {\n                    alert('Application not fully loaded');\n                    return;\n                }\n\n                function applyFilter(input) {\n                    let filterResult = filterArr[filterKey].apply({\n                        context: _this.getCurrentLayerCtx(),\n                        klCanvas: _this.getKlCanvas(),\n                        history: klHistory,\n                        input: input\n                    } as IFilterApply);\n                    if (filterResult === false) {\n                        alert(\"Couldn't apply the edit action\");\n                    }\n                    /*\n                     _this.setCurrentLayer(_this.getKlCanvas().getLayer(_this.layerManager.getSelected()));\n                    */\n                    if (filterArr[filterKey].updatePos === true) {\n                        _this.klCanvasWorkspace.resetView();\n                        _this.handUi.update(_this.klCanvasWorkspace.getScale(), _this.klCanvasWorkspace.getAngleDeg());\n                    }\n                    _this.layerManager.update();\n                }\n\n                if (filterArr[filterKey].isInstant){\n                    button.blur();\n                    applyFilter(null);\n                    _this.statusOverlay.out('\"' + filterName + '\" ' + LANG('filter-applied'), true);\n                } else {\n                    let secondaryColorRGB = _this.klColorSlider.getSecondaryRGB();\n                    let filterDialog = filterArr[filterKey].getDialog({\n                        context: _this.getCurrentLayerCtx(),\n                        klCanvas: _this.getKlCanvas(),\n                        maxWidth: _this.getKlMaxCanvasSize(),\n                        maxHeight: _this.getKlMaxCanvasSize(),\n                        currentColorRgb: {r: _this.getCurrentColor().r, g: _this.getCurrentColor().g, b: _this.getCurrentColor().b},\n                        secondaryColorRgb: {r: secondaryColorRGB.r, g: secondaryColorRGB.g, b: secondaryColorRGB.b}\n                    } as IFilterGetDialogParam) as IFilterGetDialogResult;\n\n                    if (!filterDialog) {\n                        return;\n                        //alert('Error: could not perform action');\n                        //throw('filter['+filterKey+'].getDialog returned '+filterDialog+'. ctx:' + currentLayerCtx + ' klCanvas:' + klCanvas);\n                    }\n\n                    let closefunc;\n                    // Todo should move into getDialogParams\n                    filterDialog.errorCallback = function(e) {\n                        setTimeout(function() {\n                            alert('Error: could not perform action');\n                            throw e;\n                        }, 0);\n                        closefunc();\n                    };\n\n\n                    let style: IKeyString = {};\n                    if ('width' in filterDialog) {\n                        style.width = filterDialog.width + 'px'\n                    }\n\n                    KL.popup({\n                        target: _this.klRootEl,\n                        message: \"<b>\" + filterName + \"</b>\",\n                        div: filterDialog.element,\n                        style: style,\n                        buttons: [\"Ok\", \"Cancel\"],\n                        clickOnEnter: 'Ok',\n                        callback: function(result) {\n                            finishedDialog(result, filterDialog);\n                        },\n                        closefunc: function (func) {\n                            closefunc = func;\n                        }\n                    });\n                }\n            }\n            buttons[buttons.length] = button;\n            return button;\n        }\n\n        function addGroup(groupArr, filterArr, targetEl) {\n            for (let filterKey in filterArr) {\n                if (filterArr.hasOwnProperty[filterKey] || !groupArr.includes(filterKey)) {\n                    continue;\n                }\n                if (_this.isEmbed && !filterArr[filterKey].inEmbed) {\n                    continue;\n                }\n                targetEl.appendChild(createButton(filterKey, filterArr));\n            }\n        }\n\n        const groupA = [\n            'cropExtend',\n            'flip',\n            'perspective',\n            'resize',\n            'rotate',\n            'transform',\n        ];\n        const groupB = [\n            'brightnessContrast',\n            'curves',\n            'distort',\n            'hueSaturation',\n            'invert',\n            'tiltShift',\n            'toAlpha',\n            'blur',\n            'unsharpMask',\n        ];\n        const groupC = [\n            'grid',\n            'noise',\n            'pattern',\n            'vanishPoint'\n        ];\n\n        addGroup(groupA, filters, _this.div);\n\n        _this.div.appendChild(BB.el({className: 'gridHr'}));\n        addGroup(groupB, filters, _this.div);\n        _this.div.appendChild(BB.el({className: 'gridHr'}));\n        addGroup(groupC, filters, _this.div);\n\n        this.isInit = true;\n    }\n\n    getElement() {\n        return this.div;\n    }\n\n    show() {\n        if (!this.isInit) {\n            this.init();\n        }\n        this.div.style.display = 'block';\n    }\n\n    hide() {\n        this.div.style.display = 'none';\n    }\n\n}","import {BB} from '../../../bb/bb';\nimport {KL} from '../../kl';\n// @ts-ignore\nimport loadingImg from 'url:~/src/app/img/ui/loading.gif';\nimport {SaveReminder} from '../components/save-reminder';\nimport {base64ToBlob} from '../../storage/base-64-to-blob';\nimport {KlCanvas} from '../../canvas/kl-canvas';\nimport {LANG} from '../../../language/language';\n\n\nasync function upload(canvas, title, description, type: 'png' | 'jpeg', imgurKey: string): Promise<{deletehash: string}> {\n    let img = base64ToBlob(canvas.toDataURL(\"image/\" + type));\n\n    let w = window.open();\n    let label = w.document.createElement(\"div\");\n    let gif = w.document.createElement(\"img\");\n    gif.src = loadingImg;\n    label.appendChild(gif);\n    BB.css(gif, {\n        filter: \"invert(1)\"\n    });\n    w.document.body.style.backgroundColor = \"#121211\";\n    w.document.body.style.backgroundImage = \"linear-gradient(#2b2b2b 0%, #121211 50%)\";\n    w.document.body.style.backgroundRepeat = \"no-repeat\";\n    let labelText = w.document.createElement(\"div\");\n    labelText.style.marginTop = \"10px\";\n    label.appendChild(labelText);\n    labelText.textContent = LANG('upload-uploading');\n\n    w.document.body.appendChild(label);\n    BB.css(label, {\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        marginTop: \"100px\",\n        fontFamily: \"Arial, sans-serif\",\n        fontSize: \"20px\",\n        textAlign: \"center\",\n        transition: \"opacity 0.3s ease-in-out\",\n        opacity: '0',\n        color: \"#ccc\"\n    });\n    setTimeout(function () {\n        label.style.opacity = '1';\n    }, 20);\n\n    let response;\n    try {\n        const formData = new FormData();\n        formData.append('title', title);\n        formData.append('description', description);\n        formData.append('image', img);\n        response = await fetch('https://api.imgur.com/3/image',  {\n            method: 'POST',\n            headers: {\n                Authorization: 'Client-ID ' + imgurKey,\n            },\n            body: formData\n        });\n\n    } catch (e) {\n        w.close();\n        throw new Error(e);\n    }\n    if (!response.ok) {\n        w.close();\n        throw new Error();\n    }\n    let data = (await response.json()).data;\n\n    w.location.href = (data as any).link.replace(/\\.(jpg|png)/, '');\n\n    return data;\n}\n\n\nexport function imgurUpload(klCanvas: KlCanvas, klRootEl, saveReminder: SaveReminder, imgurKey: string) {\n    if (!imgurKey) {\n        throw new Error('imgur key missing');\n    }\n\n    let inputTitle = document.createElement(\"input\");\n    inputTitle.type = \"text\";\n    inputTitle.value = LANG('upload-title-untitled');\n    let inputDescription = BB.el({\n        tagName: 'textarea',\n        custom: {\n            rows: 2,\n        },\n        css: {\n            width: '100%',\n            maxWidth: '100%',\n        },\n    }) as HTMLTextAreaElement;\n\n    let labelTitle = document.createElement(\"div\");\n    labelTitle.textContent = LANG('upload-name') + \":\";\n    let labelDescription = BB.el({\n        content: LANG('upload-caption') + ':',\n        css: {\n            marginTop: '10px',\n        }\n    });\n\n    let tos = document.createElement(\"div\");\n    tos.innerHTML = `<br/><a href=\"https://imgur.com/tos\" target=\"_blank\" rel=\"noopener noreferrer\">${LANG('upload-tos')}</a> ${LANG('upload-tos-2')}`;\n\n    const typeRadio = new KL.RadioList({\n        name: 'filetype',\n        init: 'jpeg',\n        items: [\n            { label: 'JPG', value: 'jpeg' },\n            { label: 'PNG', value: 'png' },\n        ],\n        ignoreFocus: true,\n    });\n    BB.css(typeRadio.getElement(), {\n        marginBottom: '10px',\n    });\n\n\n    let outDiv = document.createElement(\"div\");\n    let infoHint = document.createElement(\"div\");\n    infoHint.className = \"info-hint\";\n    infoHint.textContent = LANG('upload-link-notice');\n    outDiv.append(\n        infoHint,\n        typeRadio.getElement(),\n        labelTitle,\n        inputTitle,\n        labelDescription,\n        inputDescription,\n        tos\n    );\n    KL.popup({\n        target: klRootEl,\n        message: `<b>${LANG('upload-title')}</b>`,\n        type: \"upload\",\n        div: outDiv,\n        buttons: [LANG('upload-submit'), \"Cancel\"],\n        clickOnEnter: LANG('upload-submit'),\n        primaries: [LANG('upload-submit')],\n        autoFocus: LANG('upload-submit'),\n        callback: async function (val) {\n            if (val === LANG('upload-submit') || val === \"Yes\" || val === \"Ok\") {\n                try {\n                    const result = await upload(\n                        klCanvas.getCompleteCanvas(1),\n                        inputTitle.value,\n                        inputDescription.value,\n                        typeRadio.getValue() as 'png' | 'jpeg',\n                        imgurKey,\n                    );\n\n                    KL.popup({\n                        target: klRootEl,\n                        type: \"ok\",\n                        message: `<h3>${LANG('upload-success')}</h3><br>${LANG('upload-delete')}<br><a target='_blank' rel=\"noopener noreferrer\" href='https://imgur.com/delete/${result.deletehash}'>imgur.com/delete/${result.deletehash}</a><br><br>`,\n                        buttons: [\"Ok\"]\n                    });\n                    saveReminder.reset();\n\n                } catch(e) {\n                    KL.popup({\n                        target: klRootEl,\n                        type: \"error\",\n                        message: LANG('upload-failed'),\n                        buttons: [\"Ok\"]\n                    });\n                }\n            }\n        }\n    });\n}","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"loading.cfc18193.gif\" + \"?\" + Date.now();","import {BB} from '../../bb/bb';\n\nlet agPsdLazy;\nexport async function loadAgPsd() {\n    if (!agPsdLazy) {\n        agPsdLazy = await import('ag-psd');\n        BB.BbLog.emit({\n            type: 'loaded-agpsd',\n        });\n    }\n    return agPsdLazy;\n}","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('d3gnI') + \"dist.d00432e1.js\" + \"?\" + Date.now()).catch(err => {delete module.bundle.cache[module.id]; throw err;})).then(() => module.bundle.root('7dPZz'));","import {KL} from '../../kl';\nimport {BB} from '../../../bb/bb';\nimport {KlHistoryInterface} from '../../history/kl-history';\nimport {LANG} from '../../../language/language';\nimport {BrowserStorageUi} from './browser-storage-ui';\nimport {ProjectStore} from '../../storage/project-store';\nimport {IKlProject} from '../../kl.types';\n\n\nconst reminderTimelimitMs = 1000 * 60 * 20; // 20 minutes\nconst unsavedActionsLimit = 100; // number of actions user did since last save\n\n\n/**\n * remind user of saving, keep user aware of save state\n */\nexport class SaveReminder {\n    private lastSavedActionNumber: number = null;\n    private lastSavedAt: number;\n\n    private lastReminderShownAt: number;\n    private unsavedInterval;\n    private closeFunc: () => void;\n\n    showPopup (): void {\n        if (!this.projectStore || !this.getProject) {\n            throw new Error('projectStore and getProject need to be set');\n        }\n\n        const min = Math.round((performance.now() - this.lastSavedAt) / 1000 / 60);\n\n        const contentEl = BB.el({});\n\n        contentEl.append(\n            BB.el({\n                content: LANG(\n                    'save-reminder-text',\n                    {\n                        a: '<strong>' + min,\n                        b: '</strong>',\n                    }\n                ),\n                css: {\n                    marginBottom: '20px',\n                }\n            }),\n        );\n\n        const psdWrapper = BB.el({\n            css: {\n                borderTop: '1px solid #aaa',\n                margin: '0 -20px',\n                padding: '20px',\n            }\n        });\n        const storageWrapper = BB.el({\n            css: {\n                borderTop: '1px solid #aaa',\n                margin: '0 -20px',\n                padding: '20px',\n                paddingBottom: '0',\n            }\n        });\n        contentEl.append(psdWrapper, storageWrapper);\n\n\n        const psdBtn = BB.el({\n            tagName: 'button',\n            className: 'kl-button',\n            content: LANG('save-reminder-save-psd'),\n            onClick: () => this.onSaveAsPsd(),\n        });\n        psdWrapper.append(\n            psdBtn,\n            BB.el({\n                content: LANG('save-reminder-psd-layers'),\n                css: {\n                    marginTop: '10px',\n                }\n            }),\n        );\n\n\n        const storageUi = new BrowserStorageUi(\n            this.projectStore,\n            this.getProject,\n            this,\n            document.body as any,\n            {\n                hideClearButton: true,\n                isFocusable: true,\n            }\n        );\n        storageWrapper.append(storageUi.getElement());\n\n\n        KL.popup({\n            target: document.body,\n            message: `<b>${LANG('save-reminder-title')}</b>`,\n            div: contentEl,\n            ignoreBackground: true,\n            callback: () => {\n                storageUi.destroy();\n                BB.destroyEl(psdBtn);\n                this.closeFunc = null;\n                this.lastReminderShownAt = performance.now();\n            },\n            closefunc: (f) => {\n                this.closeFunc = f;\n            }\n        });\n        setTimeout(() => {\n            psdBtn.focus();\n        }, 40);\n    }\n\n    constructor (\n        private history: KlHistoryInterface,\n        private showReminder: boolean,\n        private changeTitle: boolean,\n        private onSaveAsPsd: () => void,\n        private isDrawing: () => boolean,\n        private projectStore: ProjectStore | null, // needed if showReminder\n        private getProject: (() => IKlProject) | null, // needed if showReminder\n        private title: string = 'Klecks',\n    ) { }\n\n    init (): void {\n        if (this.lastSavedActionNumber !== null) { // already initialized\n            return;\n        }\n        this.lastSavedActionNumber = this.history.getActionNumber();\n        this.lastReminderShownAt = performance.now();\n        this.lastSavedAt = performance.now();\n\n        if (this.showReminder) {\n            setInterval(() => {\n                if (document.visibilityState !== 'visible') {\n                    return;\n                }\n\n                let unsavedActions = Math.abs(this.history.getActionNumber() - this.lastSavedActionNumber);\n\n                if (\n                    KL.dialogCounter.get() === 0 &&\n                    !this.isDrawing() &&\n                    this.lastReminderShownAt + reminderTimelimitMs < performance.now() &&\n                    unsavedActions >= unsavedActionsLimit\n                ) {\n                    this.showPopup();\n                }\n            }, 1000 * 5);\n        }\n\n        // confirmation dialog when closing tab\n        function onBeforeUnload(e) {\n            e.preventDefault();\n            e.returnValue = '';\n        }\n\n        this.history.addListener(() => {\n            let actionNumber = this.history.getActionNumber();\n            if (this.lastSavedActionNumber !== actionNumber) {\n                BB.setEventListener(window, 'onbeforeunload', onBeforeUnload);\n            } else {\n                BB.setEventListener(window, 'onbeforeunload', null);\n            }\n        });\n\n        if (this.changeTitle) {\n            document.addEventListener(\"visibilitychange\", () => {\n                if (document.visibilityState === 'visible') {\n                    document.title = this.title;\n                    clearInterval(this.unsavedInterval);\n                } else {\n                    let actionNumber = this.history.getActionNumber();\n                    if (this.lastSavedActionNumber !== actionNumber) {\n                        document.title = LANG('unsaved') + ' - ' + this.title;\n                        let state = 0;\n                        this.unsavedInterval = setInterval(() => {\n                            state = (state + 1) % 2;\n                            if (state === 1) {\n                                document.title = LANG('unsaved') + '  ' + this.title;\n                            } else {\n                                document.title = LANG('unsaved') + ' - ' + this.title;\n                            }\n                        }, 1000 * 60 * 3);\n                    }\n                }\n            });\n        }\n    }\n\n    reset (): void {\n        if (this.lastSavedActionNumber === null) { // not initialized\n            return;\n        }\n\n        this.lastSavedActionNumber = this.history.getActionNumber();\n        this.lastReminderShownAt = performance.now();\n        this.lastSavedAt = performance.now();\n        BB.setEventListener(window, 'onbeforeunload', null);\n\n        if (this.closeFunc) {\n            this.closeFunc();\n        }\n    }\n}\n","import {BB} from '../../bb/bb';\nimport {KL} from '../kl';\nimport {saveAs} from 'file-saver';\nimport {KlCanvas} from '../canvas/kl-canvas';\n\nexport class SaveToComputer {\n\n    constructor(\n        private saveReminder,\n        private klRootEl,\n        private getExportType,\n        private getKlCanvas: () => KlCanvas,\n        private filenameBase: string,\n    ) {}\n\n    save(format?: 'psd' | 'layers' | 'png') {\n        const _this = this;\n\n        _this.saveReminder.reset();\n\n\n        function saveImage(canvas, filename, mimeType) {\n            let parts = canvas.toDataURL(mimeType).match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/);\n            //assume base64 encoding\n            let binStr = atob(parts[3]);\n            //convert to binary in ArrayBuffer\n            let buf = new ArrayBuffer(binStr.length);\n            let view = new Uint8Array(buf);\n            for (let i = 0; i < view.length; i++) {\n                view[i] = binStr.charCodeAt(i);\n            }\n            let blob = new Blob([view], {'type': parts[1]});\n            saveAs(blob, filename);\n        }\n\n        if (!format) {\n            format = _this.getExportType();\n        }\n\n        if (format === 'png') {\n            let extension = 'png';\n            let mimeType = 'image/png';\n            let filename = BB.getDate() + this.filenameBase + \".\" + extension;\n            let fullCanvas = _this.getKlCanvas().getCompleteCanvas(1);\n\n            /*fullCanvas.toBlob(function(blob) {\n                if (blob === null) {\n                    throw 'save image error, blob is null';\n                }\n                saveAs(blob, filename);\n            }, mimetype);*/\n\n            //using old code, because saving somehow doesn't work for ipad before ios 13\n            //and it doesn't even throw an exception\n            try {\n                saveImage(fullCanvas, filename, mimeType);\n            } catch (error) { //fallback for old browsers\n                let im = new Image();\n                im.width = _this.getKlCanvas().getWidth();\n                im.height = _this.getKlCanvas().getHeight();\n                im.src = fullCanvas.toDataURL(mimeType);\n                KL.exportDialog(_this.klRootEl, im);\n            }\n        } else if (format === 'layers') {\n            let extension = 'png';\n            let mimeType = 'image/png';\n            let fileBase = BB.getDate() + this.filenameBase;\n            let layerArr = _this.getKlCanvas().getLayersFast();\n            for (let i = 0; i < layerArr.length; i++) {\n                let item = layerArr[i];\n                let fnameArr = [\n                    fileBase,\n                    '_',\n                    ('' + (i + 1)).padStart(2, '0'),\n                    '_',\n                    item.name,\n                    '.',\n                    extension\n                ];\n                saveImage(item.canvas, fnameArr.join(''), mimeType);\n            }\n        } else if (format === 'psd') {\n\n            let layerArr = _this.getKlCanvas().getLayersFast();\n\n            let psdConfig = {\n                width: _this.getKlCanvas().getWidth(),\n                height: _this.getKlCanvas().getHeight(),\n                children: [],\n                canvas: _this.getKlCanvas().getCompleteCanvas(1)\n            };\n            for (let i = 0; i < layerArr.length; i++) {\n                let item = layerArr[i];\n                psdConfig.children.push({\n                    name: item.name,\n                    opacity: item.opacity,\n                    canvas: item.canvas,\n                    blendMode: KL.PSD.blendKlToPsd(item.mixModeStr),\n                    left: 0,\n                    top: 0\n                });\n            }\n\n            KL.loadAgPsd().then((agPsdLazy) => {\n                let buffer = agPsdLazy.writePsdBuffer(psdConfig);\n                let blob = new Blob([buffer], { type: 'application/octet-stream' });\n                saveAs(blob, BB.getDate() + this.filenameBase + '.psd');\n            }).catch(() => {\n                alert('Error: failed to load PSD library');\n            });\n\n        }\n\n    }\n\n}",null,"/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","import {KL} from '../kl';\nimport {IHistoryBroadcast, IHistoryEntry, klHistory} from './kl-history';\nimport {KlCanvasWorkspace} from '../canvas-ui/kl-canvas-workspace';\nimport {IFilterApply, IInitState} from '../kl.types';\nimport {KlCanvas} from '../canvas/kl-canvas';\n\nexport class UndoRedoCatchup {\n\n    private doIgnore = false;\n\n    /**\n     * Prevent multiple undo / redo getting triggered at once.\n     * Might be confusing if main thread is choking.\n     */\n    private ignoreTest (): boolean {\n        if (this.doIgnore) {\n            return false;\n        }\n        this.doIgnore = true;\n        setTimeout(() => {\n            this.doIgnore = false;\n        }, 0);\n        return true;\n    }\n\n    // ---- public ----\n\n    constructor (\n        private brushUiObj,\n        private layerPreview,\n        private layerManager,\n        private handUi,\n        private klCanvasWorkspace: KlCanvasWorkspace,\n        private getInitState: () => IInitState,\n        private getKlCanvas: () => KlCanvas,\n        private getCurrentLayerCtx,\n        private setCurrentLayerCtx,\n        private getCurrentBrush,\n    ) { }\n\n    undo (): boolean {\n        if (!this.ignoreTest()) {\n            return false;\n        }\n\n        if (!klHistory.canUndo()) { // || workspace.isPainting()) {\n            return false;\n        }\n        const actions: IHistoryEntry[] = klHistory.undo();\n        const klCanvas = this.getKlCanvas();\n        klHistory.pause(true);\n        const initState: IInitState = this.getInitState();\n        const oldSize = {w: klCanvas.getWidth(), h: klCanvas.getHeight()};\n        klCanvas.copy(initState.canvas);\n        let layerIndex = initState.focus;\n        this.setCurrentLayerCtx(klCanvas.getLayerContext(layerIndex));\n        const brushes: any = {};\n        for (let b in KL.brushes) {\n            if (KL.brushes.hasOwnProperty(b)) {\n                brushes[b] = new KL.brushes[b]();\n                brushes[b].setContext(this.getCurrentLayerCtx());\n            }\n        }\n        brushes.SketchyBrush.setSeed(initState.brushes.SketchyBrush.getSeed());\n        for (let i = 0; i < actions.length; i++) {\n            ((i) => {\n                if (actions[i].tool[0] === \"brush\") {\n                    const b = brushes[actions[i].tool[1]];\n                    if (actions[i].actions) {\n                        for (let e = 0; e < actions[i].actions.length; e++) {\n                            const p = actions[i].actions[e].params;\n                            b[actions[i].actions[e].action].apply(b, p);\n                        }\n                    } else {\n                        const p = actions[i].params;\n                        b[actions[i].action].apply(b, p);\n                    }\n                } else if (actions[i].tool[0] === \"canvas\") {\n                    const p = actions[i].params;\n                    const id = klCanvas[actions[i].action].apply(klCanvas, p);\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        this.setCurrentLayerCtx(klCanvas.getLayerContext(layerIndex));\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(this.getCurrentLayerCtx());\n                            }\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"filter\") {\n                    const p = [{\n                        context: this.getCurrentLayerCtx(),\n                        klCanvas,\n                        input: actions[i].params[0].input,\n                        history: new KL.DecoyKlHistory(),\n                    } as IFilterApply];\n                    KL.filterLib[actions[i].tool[1]][actions[i].action].apply(null, p);\n\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"focusLayer\") {\n                    layerIndex = actions[i].params[0];\n                    this.setCurrentLayerCtx(klCanvas.getLayerContext(actions[i].params[0]));\n                    for (let b in brushes) {\n                        if (brushes.hasOwnProperty(b)) {\n                            brushes[b].setContext(this.getCurrentLayerCtx());\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"importImage\") {\n                    const id = klCanvas.addLayer();\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        if (actions[i].params[1]) {\n                            klCanvas.renameLayer(layerIndex, actions[i].params[1]);\n                        }\n                        this.setCurrentLayerCtx(klCanvas.getLayerContext(layerIndex));\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(this.getCurrentLayerCtx());\n                            }\n                        }\n                    }\n                    this.getCurrentLayerCtx().drawImage(actions[i].params[0], 0, 0);\n                }\n            })(i);\n        }\n        if (oldSize.w !== klCanvas.getWidth() || oldSize.h !== klCanvas.getHeight()) {\n            this.klCanvasWorkspace.resetView();\n            this.handUi.update(this.klCanvasWorkspace.getScale(), this.klCanvasWorkspace.getAngleDeg());\n        }\n        this.layerManager.update(layerIndex);\n        this.layerPreview.setLayer(klCanvas.getLayer(layerIndex));\n        this.brushUiObj.sketchyBrush.setSeed(brushes.SketchyBrush.getSeed());\n        this.getCurrentBrush().setContext(this.getCurrentLayerCtx());\n        this.klCanvasWorkspace.setLastDrawEvent(null);\n\n        klHistory.pause(false);\n        return true;\n    }\n\n    redo (): boolean {\n        if (!this.ignoreTest()) {\n            return false;\n        }\n\n        if (!klHistory.canRedo()) {\n            return false;\n        }\n        const actions = klHistory.redo();\n        const klCanvas = this.getKlCanvas();\n        klHistory.pause(true);\n        const oldSize = {w: klCanvas.getWidth(), h: klCanvas.getHeight()};\n        let layerIndex;\n        const brushes: any = {};\n        for (let b in KL.brushes) {\n            if (KL.brushes.hasOwnProperty(b)) {\n                brushes[b] = new KL.brushes[b]();\n                brushes[b].setContext(this.getCurrentLayerCtx());\n            }\n        }\n        brushes.SketchyBrush.setSeed(this.brushUiObj.sketchyBrush.getSeed());\n        for (let i = 0; i < actions.length; i++) {\n            ((i) => {\n                if (actions[i].tool[0] === \"brush\") {\n                    const b = brushes[actions[i].tool[1]];\n                    if (actions[i].actions) {\n                        for (let e = 0; e < actions[i].actions.length; e++) {\n                            const p = actions[i].actions[e].params;\n                            b[actions[i].actions[e].action].apply(b, p);\n                        }\n                    } else {\n                        const p = actions[i].params;\n                        b[actions[i].action].apply(b, p);\n                    }\n                } else if (actions[i].tool[0] === \"canvas\") {\n                    const p = actions[i].params;\n                    const id = klCanvas[actions[i].action].apply(klCanvas, p);\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        this.setCurrentLayerCtx(klCanvas.getLayerContext(layerIndex));\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(this.getCurrentLayerCtx());\n                            }\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"filter\") {\n                    const p = [{\n                        context: this.getCurrentLayerCtx(),\n                        klCanvas,\n                        input: actions[i].params[0].input,\n                        history: new KL.DecoyKlHistory(),\n                    } as IFilterApply];\n                    KL.filterLib[actions[i].tool[1]][actions[i].action].apply(null, p);\n\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"focusLayer\") {\n                    layerIndex = actions[i].params[0];\n                    this.setCurrentLayerCtx(klCanvas.getLayerContext(actions[i].params[0]));\n                    for (let b in brushes) {\n                        if (brushes.hasOwnProperty(b)) {\n                            brushes[b].setContext(this.getCurrentLayerCtx());\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"importImage\") {\n                    const id = klCanvas.addLayer();\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        if (actions[i].params[1]) {\n                            klCanvas.renameLayer(layerIndex, actions[i].params[1]);\n                        }\n                        this.setCurrentLayerCtx(klCanvas.getLayerContext(layerIndex));\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(this.getCurrentLayerCtx());\n                            }\n                        }\n                    }\n                    this.getCurrentLayerCtx().drawImage(actions[i].params[0], 0, 0);\n                }\n            })(i);\n        }\n\n        if (oldSize.w !== klCanvas.getWidth() || oldSize.h !== klCanvas.getHeight()) {\n            this.klCanvasWorkspace.resetView();\n            this.handUi.update(this.klCanvasWorkspace.getScale(), this.klCanvasWorkspace.getAngleDeg());\n        }\n        const currentLayerIndex = klCanvas.getLayerIndex(this.getCurrentLayerCtx().canvas);\n        this.layerManager.update(currentLayerIndex);\n        this.layerPreview.setLayer(klCanvas.getLayer(currentLayerIndex));\n        this.brushUiObj.sketchyBrush.setSeed(brushes.SketchyBrush.getSeed());\n        this.getCurrentBrush().setContext(this.getCurrentLayerCtx());\n        this.klCanvasWorkspace.setLastDrawEvent(null);\n        klHistory.pause(false);\n\n        return true;\n    }\n\n    catchup (logParam: IHistoryBroadcast | null): void {\n        // const start = performance.now();\n        //play catch up (the version that is a few steps behind)\n        if (logParam && logParam.bufferUpdate) {\n            const initState: IInitState = this.getInitState();\n\n            const brushes = initState.brushes;\n            const actions = [logParam.bufferUpdate];\n            let localCurrentLayerCtx = initState.canvas.getLayerContext(initState.focus);\n            const klCanvas = initState.canvas;\n            let layerIndex = initState.focus;\n            ((i) => {\n                if (actions[i].tool[0] === \"brush\") {\n                    let b = brushes[actions[i].tool[1]];\n                    if (actions[i].actions) {\n                        for (let e = 0; e < actions[i].actions.length; e++) {\n                            const p = actions[i].actions[e].params;\n                            b[actions[i].actions[e].action].apply(b, p);\n                        }\n                    } else {\n                        const p = actions[i].params;\n                        b[actions[i].action].apply(b, p);\n                    }\n                } else if (actions[i].tool[0] === \"canvas\") {\n                    const p = actions[i].params;\n                    const id = klCanvas[actions[i].action].apply(klCanvas, p);\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        localCurrentLayerCtx = klCanvas.getLayerContext(layerIndex);\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(localCurrentLayerCtx);\n                            }\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"filter\") {\n                    const p = [{\n                        context: localCurrentLayerCtx,\n                        klCanvas,\n                        input: actions[i].params[0].input,\n                        history: new KL.DecoyKlHistory(),\n                    } as IFilterApply];\n                    KL.filterLib[actions[i].tool[1]][actions[i].action].apply(null, p);\n\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"focusLayer\") {\n                    layerIndex = actions[i].params[0];\n                    localCurrentLayerCtx = klCanvas.getLayerContext(actions[i].params[0]);\n                    for (let b in brushes) {\n                        if (brushes.hasOwnProperty(b)) {\n                            brushes[b].setContext(localCurrentLayerCtx);\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"importImage\") {\n                    const id = klCanvas.addLayer();\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        if (actions[i].params[1]) {\n                            klCanvas.renameLayer(layerIndex, actions[i].params[1]);\n                        }\n                        localCurrentLayerCtx = klCanvas.getLayerContext(layerIndex);\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(localCurrentLayerCtx);\n                            }\n                        }\n                    }\n                    localCurrentLayerCtx.drawImage(actions[i].params[0], 0, 0);\n                }\n            })(0);\n            initState.focus = layerIndex;\n        }\n        // console.log('catchup', performance.now() - start);\n    }\n\n\n}","import {IRGB, ISliderConfig} from '../kl.types';\n\nexport type TBrushSettingEmit = { type: 'color'; value: IRGB } |\n    { type: 'opacity'; value: number } |\n    { type: 'size'; value: number } |\n    { type: 'sliderConfig'; value: ISliderConfig };\n\nexport type TBrushSettingSubscriber = (p : TBrushSettingEmit) => void;\n\n/**\n * Central place to update brush settings, and to subscribe to changes.\n */\nexport class BrushSettingService {\n\n    private static instance: BrushSettingService;\n    subscriberArr: TBrushSettingSubscriber[] = [];\n\n    private emit (obj: TBrushSettingEmit, skipSubscriber?: TBrushSettingSubscriber): void {\n        for (let i = 0; i < this.subscriberArr.length; i++) {\n            if (this.subscriberArr[i] === skipSubscriber) {\n                continue;\n            }\n            this.subscriberArr[i](obj);\n        }\n    }\n\n    // --- public ---\n\n    constructor (\n        private onSetColor: (rgb: IRGB) => void,\n        private onSetSize: (size: number) => void,\n        private onSetOpacity: (opacity: number) => void,\n        private onGetColor: () => IRGB,\n        private onGetSize: () => number,\n        private onGetOpacity: () => number,\n        private onGetSliderConfig: () => ISliderConfig,\n    ) {\n        if (BrushSettingService.instance) {\n            throw new Error('BrushSettingService already instantiated');\n        }\n        BrushSettingService.instance = this;\n    }\n\n    emitColor (color: IRGB, skipSubscriber?: TBrushSettingSubscriber): void {\n        this.emit(\n            {\n                type: 'color',\n                value: color\n            },\n            skipSubscriber\n        );\n    }\n\n    emitSize (size: number, skipSubscriber?: TBrushSettingSubscriber): void {\n        this.emit(\n            {\n                type: 'size',\n                value: size\n            },\n            skipSubscriber\n        );\n    }\n\n    emitOpacity (opacity: number, skipSubscriber?: TBrushSettingSubscriber): void {\n        this.emit(\n            {\n                type: 'opacity',\n                value: opacity\n            },\n            skipSubscriber\n        );\n    }\n\n    emitSliderConfig (sliderConfig: ISliderConfig, skipSubscriber?: TBrushSettingSubscriber) {\n        this.emit(\n            {\n                type: 'sliderConfig',\n                value: sliderConfig\n            },\n            skipSubscriber\n        );\n    }\n\n    /**\n     * set current brush color\n     * @param color\n     * @param skipSubscriber\n     */\n    setColor (color: IRGB, skipSubscriber?: TBrushSettingSubscriber) {\n        this.onSetColor(color);\n        this.emitColor(color, skipSubscriber);\n    }\n\n    /**\n     * set current brush size\n     * @param size\n     * @param skipSubscriber\n     */\n    setSize (size: number, skipSubscriber?: TBrushSettingSubscriber) {\n        this.onSetSize(size);\n        // why not emitting?\n    }\n\n    /**\n     * set current opacity\n     * @param opacity\n     * @param skipSubscriber\n     */\n    setOpacity (opacity: number, skipSubscriber?: TBrushSettingSubscriber) {\n        this.onSetOpacity(opacity);\n        // why not emitting?\n    }\n\n    /**\n     * get current brush color\n     */\n    getColor (): IRGB {\n        return this.onGetColor();\n    }\n\n    getSize (): number {\n        return this.onGetSize();\n    }\n\n    getOpacity (): number {\n        return this.onGetOpacity();\n    }\n\n    getSliderConfig (): ISliderConfig {\n        return this.onGetSliderConfig();\n    }\n\n    /**\n     * subscribe to changes\n     * @param func\n     */\n    subscribe (func: TBrushSettingSubscriber): void {\n        if (this.subscriberArr.includes(func)) {\n            return;\n        }\n        this.subscriberArr.push(func);\n    }\n\n    unsubscribe (func: TBrushSettingSubscriber): void {\n        for (let i = 0; i < this.subscriberArr.length; i++) {\n            if (func === this.subscriberArr[i]) {\n                this.subscriberArr.splice(i, 1);\n                i--;\n            }\n        }\n    }\n}\n\n","import {BB} from '../../../bb/bb';\nimport {LANG, languageStrings, LS_LANGUAGE_KEY} from '../../../language/language';\nimport {KL} from '../../kl';\nimport {languages} from '../../../../languages/languages';\nimport {Popup} from '../modals/popup';\n// @ts-ignore\nimport bitbofLogoImg from 'url:~/src/app/img/bitbof-logo.svg';\n// @ts-ignore\nimport klecksLogoImg from 'url:~/src/app/img/klecks-logo.png';\n// @ts-ignore\nimport uiSwapImg from 'url:~/src/app/img/ui/ui-swap-lr.svg';\nimport {LocalStorage} from '../../../bb/base/local-storage';\n\nexport class SettingsTab {\n\n    private el: HTMLElement;\n\n    // --- public ---\n    constructor (\n        onLeftRight: () => void,\n        customAbout?: HTMLElement,\n    ) {\n\n        // ---- language ----\n        const language = languageStrings.getLanguage();\n\n        this.el = BB.el({\n            content: `\n${LANG('settings-language')}: ${language.name} (${language.code})\n            `,\n            css: {\n                margin: '10px',\n            }\n        });\n\n        const preferredLanguageRow = BB.el({\n            content: LANG('settings-preferred-language') + ':<br>',\n            css: {\n                marginTop: '10px',\n            }\n        });\n        const options: [string, string][] = [\n            ['auto', LANG('auto')] as [string, string]\n        ].concat(\n            languages.map(item => {\n                return [item.code, item.name + ` (${item.code})`];\n            })\n        );\n        const languageSelect = new KL.Select({\n            initValue: LocalStorage.getItem(LS_LANGUAGE_KEY) ? LocalStorage.getItem(LS_LANGUAGE_KEY) : 'auto',\n            optionArr: options,\n            onChange: (val) => {\n                if (val === 'auto') {\n                    LocalStorage.removeItem(LS_LANGUAGE_KEY);\n                } else {\n                    LocalStorage.setItem(LS_LANGUAGE_KEY, val);\n                }\n                languageHint.style.display = 'block';\n            },\n        });\n        const languageHint = BB.el({\n            content: LANG('settings-language-reload'),\n            css: {\n                display: 'none',\n                marginTop: '5px',\n            }\n        });\n\n        preferredLanguageRow.append(\n            languageSelect.getElement(),\n            languageHint,\n        );\n\n        this.el.append(preferredLanguageRow);\n\n        // ---- flip ui ----\n        BB.el({\n            tagName: 'button',\n            parent: this.el,\n            content: '<img height=\"20\" width=\"18\" src=\"' + uiSwapImg + '\" alt=\"icon\" style=\"margin-right: 5px\"/>' + LANG('switch-ui-left-right'),\n            onClick: () => onLeftRight(),\n            css: {\n                marginTop: '20px',\n            },\n            custom: {\n                tabIndex: '-1',\n            }\n        });\n\n\n        // ---- about ----\n        this.el.append(BB.el({className: 'gridHr', css: {margin: '10px 0'}}));\n\n        function makeLicenses() {\n            return BB.el({\n                tagName: 'a',\n                content: LANG('licenses'),\n                onClick: () => {\n                    import('./licenses').then(result => {\n                        new Popup({\n                            title: BB.el({\n                                content: LANG('licenses'),\n                            }),\n                            content: BB.el({\n                                content: BB.el({\n                                    content: result.licenses.replace(/\\n/g, '<br>'),\n                                    css: {\n                                        padding: '20px',\n                                    }\n                                }),\n                                css: {\n                                    height: '100%',\n                                    overflowY: 'scroll',\n                                }\n                            }),\n                            width: 800,\n                            isMaxHeight: true,\n                        });\n                    });\n                },\n            });\n        }\n\n        if (customAbout) {\n            this.el.append(customAbout);\n            if (!customAbout.innerHTML) {\n                const minimalAbout = BB.el({\n                    parent: customAbout,\n                    css: {\n                       textAlign: 'center',\n                   }\n                });\n                minimalAbout.append(\n                    BB.el({\n                        content: `<img alt=\"icon\" height=\"20\" style=\"vertical-align:middle\" src=\"${bitbofLogoImg}\"> <a href=\"https://bitbof.com\" target=\"_blank\" tabIndex=\"-1\">bitbof</a>  2022<br>`,\n                    }),\n                    makeLicenses(),\n                );\n            }\n        } else {\n            const versionEl = BB.el({\n                parent: this.el,\n                css: {\n                    textAlign: 'center',\n                },\n                content: `\n<img alt=\"Klecks\" height=\"25\" src=\"${klecksLogoImg}\"><br>\n<img alt=\"icon\" height=\"20\" style=\"vertical-align:middle\" src=\"${bitbofLogoImg}\"> <a href=\"https://bitbof.com\" target=\"_blank\" tabIndex=\"-1\">bitbof</a>  2022<br>`\n            });\n\n            versionEl.append(\n                makeLicenses(),\n                document.createTextNode(' | '),\n                BB.el({\n                    tagName: 'a',\n                    content: LANG('donate'),\n                    custom: {\n                        href: 'https://kleki.com/donate/',\n                        target: '_blank',\n                    }\n                }),\n                document.createTextNode(' | '),\n                BB.el({\n                    tagName: 'a',\n                    content: LANG('source-code'),\n                    custom: {\n                        href: 'https://klecks.org',\n                        target: '_blank',\n                    }\n                }),\n            );\n\n\n        }\n\n        window.addEventListener('storage', (e) => {\n            if (e.key !== LS_LANGUAGE_KEY) {\n                return;\n            }\n            languageSelect.setValue(\n                LocalStorage.getItem(LS_LANGUAGE_KEY) ? LocalStorage.getItem(LS_LANGUAGE_KEY) : 'auto'\n            );\n        });\n\n    }\n\n    getElement (): HTMLElement {\n        return this.el;\n    }\n\n}","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"bitbof-logo.c317c28a.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"ui-swap-lr.e21c7203.svg\" + \"?\" + Date.now();","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('d3gnI') + \"licenses.2c035fa3.js\" + \"?\" + Date.now()).catch(err => {delete module.bundle.cache[module.id]; throw err;})).then(() => module.bundle.root('ki4n9'));","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport caretImg from 'url:~/src/app/img/ui/caret-down.svg';\nimport {IKeyString} from '../../../bb/bb.types';\nimport {LANG} from '../../../language/language';\nimport {dialogCounter} from '../modals/modal-count';\n\n/**\n * Scroll buttons at the top and bottom of toolspace\n * Show up when window is very small.\n * Allow user to scroll up and down toolspace.\n */\nexport class ToolspaceScroller {\n\n    private toolspace: HTMLElement;\n    private upBtn: HTMLElement;\n    private downBtn: HTMLElement;\n    private downInterval: any;\n    private upInterval: any;\n\n    private update(): void {\n        if (this.toolspace.scrollHeight > this.toolspace.offsetHeight + 3) { // small buffer where it's not worth it\n            if (!this.upInterval) {\n                this.upBtn.style.display = this.toolspace.scrollTop === 0 ? 'none' : 'block';\n            }\n            if (!this.downInterval) {\n                this.downBtn.style.display = (\n                    this.toolspace.scrollTop + this.toolspace.offsetHeight + 1 >= this.toolspace.scrollHeight ?\n                        'none' : 'block'\n                );\n            }\n        } else {\n            this.upBtn.style.display = 'none';\n            this.downBtn.style.display = 'none';\n        }\n    }\n\n    // --- public ---\n    constructor(p: {toolspace: HTMLElement, uiState: 'left' | 'right'}) {\n        this.toolspace = p.toolspace;\n        this.upBtn = BB.el({\n            parent: this.toolspace,\n            title: LANG('scroll'),\n            className: 'kl-scroller',\n            css: {\n                top: '0',\n                transform: 'rotate(180deg)',\n            }\n        });\n        this.downBtn = BB.el({\n            parent: this.toolspace,\n            title: LANG('scroll'),\n            className: 'kl-scroller',\n            css: {\n                bottom: '0',\n            }\n        });\n        this.updateUiState(p.uiState);\n\n        const upListener = new BB.PointerListener({\n            target: this.upBtn,\n            onPointer: (e) => {\n                if (e.type === 'pointerdown') {\n                    this.upInterval = setInterval(() => {\n                        this.toolspace.scrollBy(0, -13);\n                        this.update();\n                    }, 20);\n                }\n                if (e.type === 'pointerup') {\n                    clearInterval(this.upInterval);\n                    setTimeout(() => { // prevent ff pressing anything underneath\n                        this.upInterval = null;\n                        this.update()\n                    }, 50);\n                }\n            },\n        });\n        const downListener = new BB.PointerListener({\n            target: this.downBtn,\n            onPointer: (e) => {\n                if (e.type === 'pointerdown') {\n                    this.downInterval = setInterval(() => {\n                        this.toolspace.scrollBy(0, 13);\n                        this.update();\n                    }, 20);\n                }\n                if (e.type === 'pointerup') {\n                    clearInterval(this.downInterval);\n                    setTimeout(() => { // prevent ff pressing anything underneath\n                        this.downInterval = null;\n                        this.update()\n                    }, 50);\n                }\n            }\n        });\n\n        const wheelListener = (e: WheelEvent) => {\n            this.toolspace.scrollBy(0, Math.round(0.7 * e.deltaY));\n            this.update();\n        };\n        this.upBtn.addEventListener('wheel', wheelListener);\n        this.downBtn.addEventListener('wheel', wheelListener);\n\n        this.update();\n\n        const observer = new MutationObserver(() => this.update());\n        observer.observe(\n            this.toolspace,\n            {\n                attributes: true,\n                childList: true,\n                subtree: true,\n            }\n        );\n        window.addEventListener('resize', () => this.update());\n\n        // hide if in dialog because that can have its own scrollbar\n        dialogCounter.subscribe((v) => {\n            // ignores the 0.5 by tool dropdown\n            this.upBtn.style.opacity = v >= 1 ? '0' : '';\n            this.downBtn.style.opacity = v >= 1 ? '0' : '';\n        });\n    }\n\n    updateUiState (uiState: 'left' | 'right'): void {\n        BB.css(this.upBtn, {\n            left: uiState === 'left' ? '0' : null,\n            right: uiState === 'right' ? '0' : null,\n        });\n        BB.css(this.downBtn, {\n            left: uiState === 'left' ? '0' : null,\n            right: uiState === 'right' ? '0' : null,\n        });\n    }\n}","import {BB} from '../../../bb/bb';\nimport {KlSlider} from '../base-components/kl-slider';\nimport {LANG} from '../../../language/language';\nimport {Checkbox} from '../base-components/checkbox';\nimport {Options} from '../base-components/options';\n\n\ninterface IGradientUiSettings {\n    opacity: number;\n    type: 'linear' | 'linear-mirror' | 'radial';\n    doLockAlpha: boolean;\n    doSnap: boolean;\n    isReversed: boolean;\n    isEraser: boolean;\n}\n\n/**\n * Gradient Tool tab contents\n *\n * p = {\n *     colorSlider: KlColorSlider// when opening tab, inserts it (snatches it from where else it was)\n * }\n *\n * @param p\n * @constructor\n */\nexport class GradientUi {\n\n    private rootEl: HTMLElement;\n    private colorDiv: HTMLElement;\n    private colorSlider: any; // todo type\n    private isVisible: boolean;\n    private iconArr: HTMLElement[];\n\n    private settings: IGradientUiSettings = {\n        opacity: 1,\n        type: 'linear',\n        doLockAlpha: false,\n        doSnap: false,\n        isReversed: false,\n        isEraser: false,\n    };\n\n    private updateIcons(): void {\n        const col1 = this.settings.isReversed ? '#0000' : '#000';\n        const col2 = this.settings.isReversed ? '#000' : '#0000';\n        this.iconArr[0].style.background = `linear-gradient(${col1}, ${col2})`;\n        this.iconArr[1].style.background = `linear-gradient(${col2}, ${col1}, ${col2})`;\n        this.iconArr[2].style.background = `radial-gradient(${col1}, ${col2})`;\n    }\n\n    // ----- public -------\n\n    constructor (\n        p: {\n            colorSlider: any; // KlColorSlider - when opening tab, inserts it (snatches it from where else it was)\n        }\n    ) {\n        this.colorSlider = p.colorSlider;\n        this.rootEl = BB.el({\n            css: {\n                margin: '10px'\n            }\n        });\n        this.isVisible = true;\n\n        this.colorDiv = BB.el({\n            parent: this.rootEl,\n            css: {\n                marginBottom: '10px'\n            }\n        });\n\n        this.iconArr = [];\n        {\n            const size = 33;\n            [0, 1, 2].forEach(item => {\n                const el = BB.el({\n                    css: {\n                        width: size + 'px',\n                        height: size + 'px',\n                        borderRadius: '3px',\n                        margin: '1px',\n                    }\n                });\n                this.iconArr.push(el);\n            });\n        }\n        this.updateIcons();\n\n        const typeOptions = new Options({\n            optionArr: [\n                {\n                    id: 'linear',\n                    label: this.iconArr[0],\n                    title: LANG('gradient-linear'),\n                },\n                {\n                    id: 'linear-mirror',\n                    label: this.iconArr[1],\n                    title: LANG('gradient-linear-mirror'),\n                },\n                {\n                    id: 'radial',\n                    label: this.iconArr[2],\n                    title: LANG('gradient-radial'),\n                }\n            ],\n            initId: 'linear',\n            onChange: (id) => {\n                this.settings.type = id;\n            },\n        });\n        this.rootEl.append(typeOptions.getElement());\n\n        const opacitySlider = new KlSlider({\n            label: LANG('opacity'),\n            width: 250,\n            height: 30,\n            min: 1 / 100,\n            max: 1,\n            value: this.settings.opacity,\n            toValue: (displayValue) => displayValue / 100,\n            toDisplayValue: (value) => value * 100,\n            onChange: (val) => {\n                this.settings.opacity = val;\n            }\n        });\n        BB.css(opacitySlider.getElement(), {\n            marginTop: '10px'\n        });\n        this.rootEl.append(opacitySlider.getElement());\n\n\n\n        const row1 = BB.el({\n            parent: this.rootEl,\n            css: {\n                display: 'flex',\n                alignItems: 'center',\n                marginTop: '10px'\n            }\n        });\n\n        const reverseToggle = new Checkbox({\n            init: false,\n            label: LANG('reverse'),\n            callback: (b) => {\n                this.settings.isReversed = b;\n                this.updateIcons();\n            },\n            css: {\n                width: '50%',\n            }\n        });\n\n        const doSnapToggle = new Checkbox({\n            init: false,\n            label: LANG('angle-snap'),\n            title: LANG('angle-snap-title'),\n            callback: (b) => {\n                this.settings.doSnap = b;\n            },\n            css: {\n                width: '50%',\n            }\n        });\n\n        row1.append(\n            reverseToggle.getElement(),\n            doSnapToggle.getElement(),\n        );\n\n\n        const row2 = BB.el({\n            parent: this.rootEl,\n            css: {\n                display: 'flex',\n                alignItems: 'center',\n                marginTop: '10px'\n            }\n        });\n\n        const eraserToggle = new Checkbox({\n            init: this.settings.isEraser,\n            label: LANG('eraser'),\n            callback: (b) => {\n                this.settings.isEraser = b;\n            },\n            css: {\n                width: '50%',\n            }\n        });\n\n        const lockAlphaToggle = new Checkbox({\n            init: false,\n            label: LANG('lock-alpha'),\n            title: LANG('lock-alpha-title'),\n            callback: (b) => {\n                this.settings.doLockAlpha = b;\n            },\n            doHighlight: true,\n            css: {\n                width: '50%',\n            }\n        });\n\n        row2.append(\n            eraserToggle.getElement(),\n            lockAlphaToggle.getElement(),\n        );\n\n\n    }\n\n    getElement(): HTMLElement {\n        return this.rootEl;\n    }\n\n    setIsVisible(isVisible: boolean): void {\n        this.isVisible = !!isVisible;\n        this.rootEl.style.display = isVisible ? 'block' : 'none';\n        if (isVisible) {\n            this.colorDiv.appendChild(this.colorSlider.getElement());\n            this.colorDiv.appendChild(this.colorSlider.getOutputElement());\n        }\n    }\n\n    getSettings(): IGradientUiSettings {\n        return BB.copyObj(this.settings);\n    }\n\n}","import {KL} from '../klecks/kl';\nimport {klHistory} from '../klecks/history/kl-history';\nimport {BB} from '../bb/bb';\nimport {showIframePopup} from '../klecks/ui/modals/show-iframe-popup';\n// @ts-ignore\nimport newImageImg from 'url:~/src/app/img/ui/new-image.svg';\n// @ts-ignore\nimport exportImg from 'url:~/src/app/img/ui/export.svg';\n// @ts-ignore\nimport shareImg from 'url:~/src/app/img/ui/share.svg';\n// @ts-ignore\nimport uploadImg from 'url:~/src/app/img/ui/upload.svg';\n// @ts-ignore\nimport importImg from 'url:~/src/app/img/ui/import.svg';\nimport {exportType} from '../klecks/ui/tool-tabs/file-tab';\nimport {ToolspaceTopRow} from \"../embed/toolspace-top-row\";\nimport {IGradient, IInitState, IKlProject, IKlPsd} from '../klecks/kl.types';\nimport {importFilters} from '../klecks/filters/filters-lazy';\nimport {base64ToBlob} from '../klecks/storage/base-64-to-blob';\nimport {klCanvasToPsdBlob} from '../klecks/storage/kl-canvas-to-psd-blob';\nimport {ProjectStore} from '../klecks/storage/project-store';\nimport {SaveReminder} from \"../klecks/ui/components/save-reminder\";\nimport {KlCanvasWorkspace} from '../klecks/canvas-ui/kl-canvas-workspace';\nimport {KlCanvas} from '../klecks/canvas/kl-canvas';\nimport {LANG} from '../language/language';\n// @ts-ignore\nimport toolPaintImg from 'url:~/src/app/img/ui/tool-paint.svg';\n// @ts-ignore\nimport toolHandImg from 'url:~/src/app/img/ui/tool-hand.svg';\n// @ts-ignore\nimport toolFillImg from 'url:~/src/app/img/ui/tool-fill.svg';\n// @ts-ignore\nimport toolGradientImg from 'url:~/src/app/img/ui/tool-gradient.svg';\n// @ts-ignore\nimport toolTextImg from 'url:~/src/app/img/ui/tool-text.svg';\n// @ts-ignore\nimport toolShapeImg from 'url:~/src/app/img/ui/tool-shape.svg';\n// @ts-ignore\nimport tabSettingsImg from 'url:~/src/app/img/ui/tab-settings.svg';\n// @ts-ignore\nimport tabLayersImg from 'url:~/src/app/img/ui/tab-layers.svg';\nimport {LocalStorage} from '../bb/base/local-storage';\n\n\ninterface IKlAppOptions {\n    saveReminder?: SaveReminder;\n    projectStore?: ProjectStore;\n    logoImg?: any; // app logo\n    bottomBar?: HTMLElement; // row at bottom of toolspace\n    embed?: {\n        url: string;\n        onSubmit: (onSuccess: () => void, onError: () => void) => void;\n    };\n    app?: {\n        filenameBase?: string; // part of filename when downloading drawing\n        imgurKey?: string; // for imgur uploads\n    };\n    aboutEl?: HTMLElement; // replaces info about Klecks in settings tab\n}\n\nimportFilters();\n\nexport function KlApp(pProject: IKlProject | null, pOptions: IKlAppOptions) {\n    // default 2048, unless your screen is bigger than that (that computer then probably has the horsepower for that)\n    // but not larger than 4096 - a fairly arbitrary decision\n    let klMaxCanvasSize = Math.min(4096, Math.max(2048, Math.max(window.screen.width, window.screen.height)));\n    let collapseThreshold = 820;\n    let uiState: 'left' | 'right' = (pOptions.embed ? 'left' : (LocalStorage.getItem('uiState') ? LocalStorage.getItem('uiState') : 'right')) as any;\n    const filenameBase = pOptions.app?.filenameBase ? pOptions.app.filenameBase : 'Klecks';\n    const projectStore = pOptions.projectStore;\n    let klRootEl = document.createElement(\"div\");\n    klRootEl.className = 'g-root';\n    let uiWidth: number = Math.max(0, window.innerWidth);\n    let uiHeight: number = Math.max(0, window.innerHeight);\n    const toolWidth = 271;\n    let exportType: exportType = 'png';\n    let klCanvas: KlCanvas = new KL.KlCanvas(\n        pProject ? {\n            projectObj: pProject\n        } : {\n            width: Math.max(10, Math.min(klMaxCanvasSize, window.innerWidth < collapseThreshold ? uiWidth : uiWidth - toolWidth)),\n            height: Math.max(10, Math.min(klMaxCanvasSize, uiHeight)),\n        }, pOptions.embed ? -1 : 0);\n    klCanvas.setHistory(klHistory);\n    let initState: IInitState = null;\n    let mainTabRow;\n\n    if (!pOptions.saveReminder) {\n        pOptions.saveReminder = {init: () => {}, reset: () => {}} as SaveReminder;\n    }\n\n    function translateSmoothing(s: number): number {\n        if (s == 1) {\n            return 1 - 0.5;\n        }\n        if (s == 2) {\n            return 1 - 0.16;\n        }\n        if (s == 3) {\n            return 1 - 0.035;\n        }\n        if (s == 4) {\n            return 1 - 0.0175;\n        }\n        if (s == 5) {\n            return 1 - 0.00875;\n        }\n        return s;\n    }\n\n    let isFirstImage = true;\n\n    if (pProject) {\n        pProject.layers.forEach(layer => {\n            layer.image = null;\n        });\n        pProject = null;\n    } else {\n        klHistory.pause(true);\n        klCanvas.addLayer();\n        klCanvas.layerFill(0, { r: 255, g: 255, b: 255});\n        klHistory.pause(false);\n    }\n    try {\n        initState = {\n            canvas: new KL.KlCanvas({copy: klCanvas}, pOptions.embed ? -1 : 0),\n            focus: klCanvas.getLayerCount() - 1,\n            brushes: {},\n        };\n    } catch (e) {\n        if (e.message === 'kl-create-canvas-error') {\n            klCanvas.destroy();\n        }\n        throw e;\n    }\n    for (let b in KL.brushes) {\n        if (KL.brushes.hasOwnProperty(b)) {\n            initState.brushes[b] = new KL.brushes[b]();\n            if (initState.canvas) {\n                initState.brushes[b].setContext(initState.canvas.getLayerContext(initState.focus));\n            }\n        }\n    }\n\n\n    let currentColor = new BB.RGB(0, 0, 0);\n    let currentBrush;\n    let currentBrushId: string;\n    let lastNonEraserBrushId: string;\n    let currentLayerCtx = klCanvas.getLayerContext(klCanvas.getLayerCount() - 1);\n\n    // when cycling through brushes you need to know the next non-eraser brush\n    function getNextBrushId(): string {\n        if (currentBrushId === 'eraserBrush') {\n            return lastNonEraserBrushId;\n        }\n        const keyArr = Object.keys(brushUiObj).filter(item => item !== 'eraserBrush');\n        const i = keyArr.findIndex(item => item === currentBrushId);\n        return keyArr[(i + 1) % keyArr.length];\n    }\n\n    function sizeWatcher(val) {\n        brushSettingService.emitSize(val);\n        if (klCanvasWorkspace) {\n            klCanvasWorkspace.setCursorSize(val * 2);\n        }\n    }\n\n    const brushSettingService = new KL.BrushSettingService(\n        (color) => {\n            klColorSlider.setColor(color);\n            currentBrush.setColor(color);\n            currentColor = BB.copyObj(color);\n        },\n        (size) => {\n            currentBrush.setSize(size);\n            klCanvasWorkspace.setCursorSize(size * 2);\n        },\n        (opacity) => {\n            currentBrush.setOpacity(opacity);\n        },\n        () => klColorSlider.getColor(),\n        () => brushUiObj[currentBrushId].getSize(),\n        () => brushUiObj[currentBrushId].getOpacity(),\n        () => {\n            return {\n                sizeSlider: KL.brushesUI[currentBrushId].sizeSlider,\n                opacitySlider: KL.brushesUI[currentBrushId].opacitySlider,\n            };\n        }\n    );\n\n    let lineSmoothing = new BB.EventChain.LineSmoothing({\n        smoothing: translateSmoothing(1),\n    });\n    let lineSanitizer = new BB.EventChain.LineSanitizer();\n\n    let drawEventChain = new BB.EventChain.EventChain({\n        chainArr: [\n            lineSanitizer,\n            lineSmoothing\n        ],\n    });\n\n    drawEventChain.setChainOut(function(event) {\n        if (event.type === 'down') {\n            toolspace.style.pointerEvents = 'none';\n            currentBrush.startLine(event.x, event.y, event.pressure);\n            klCanvasWorkspace.requestFrame();\n        }\n        if (event.type === 'move') {\n            currentBrush.goLine(event.x, event.y, event.pressure, false, event.isCoalesced)\n            klCanvasWorkspace.setLastDrawEvent(event.x, event.y, event.pressure);\n            klCanvasWorkspace.requestFrame();\n        }\n        if (event.type === 'up') {\n            toolspace.style.pointerEvents = '';\n            currentBrush.endLine();\n            klCanvasWorkspace.requestFrame();\n        }\n        if (event.type === 'line') {\n            currentBrush.getBrush().drawLineSegment(event.x0, event.y0, event.x1, event.y1);\n            klCanvasWorkspace.requestFrame();\n        }\n    });\n\n    let textToolSettings = {\n        size: 20,\n        align: 'left' as ('left' | 'center' | 'right'),\n        isBold: false,\n        isItalic: false,\n        font: 'sans-serif' as ('serif' | 'monospace' | 'sans-serif' | 'cursive' | 'fantasy'),\n        opacity: 1\n    };\n\n    const klCanvasWorkspace: KlCanvasWorkspace = new KL.KlCanvasWorkspace({\n        klCanvas: klCanvas,\n        width: Math.max(0, uiWidth - toolWidth),\n        height: uiHeight,\n        onDraw: drawEventChain.chainIn,\n        onPick: function(rgbObj, isDragDone) {\n            brushSettingService.setColor(rgbObj);\n            if (isDragDone) {\n                klColorSlider.pickingDone();\n                klCanvasWorkspace.setMode(toolspaceToolRow.getActive());\n            }\n        },\n        onFill: function(canvasX, canvasY) {\n            let layerIndex = klCanvas.getLayerIndex(currentLayerCtx.canvas);\n            klCanvas.floodFill(\n                layerIndex,\n                canvasX,\n                canvasY,\n                fillUi.getIsEraser() ? null : klColorSlider.getColor(),\n                fillUi.getOpacity(),\n                fillUi.getTolerance(),\n                fillUi.getSample(),\n                fillUi.getGrow(),\n                fillUi.getContiguous()\n            );\n            klCanvasWorkspace.requestFrame();\n        },\n        onGradient: function(typeStr, canvasX, canvasY, angleRad) {\n            if (typeStr === 'down') {\n                gradientTool.onDown(canvasX, canvasY, angleRad);\n            }\n            if (typeStr === 'move') {\n                gradientTool.onMove(canvasX, canvasY);\n            }\n            if (typeStr === 'up') {\n                gradientTool.onUp(canvasX, canvasY);\n            }\n        },\n        onText: function(canvasX, canvasY, angleRad) {\n            if (KL.dialogCounter.get() > 0) {\n                return;\n            }\n\n            KL.textToolDialog({\n                klCanvas: klCanvas,\n                layerIndex: klCanvas.getLayerIndex(currentLayerCtx.canvas),\n                x: canvasX,\n                y: canvasY,\n                angleRad: angleRad,\n                color: klColorSlider.getColor(),\n                secondaryColor: klColorSlider.getSecondaryRGB(),\n                size: textToolSettings.size,\n                align: textToolSettings.align,\n                isBold: textToolSettings.isBold,\n                isItalic: textToolSettings.isItalic,\n                font: textToolSettings.font,\n                opacity: textToolSettings.opacity,\n                onConfirm: function(val) {\n\n                    let colorRGBA = val.color;\n                    colorRGBA.a = val.opacity;\n\n                    textToolSettings.size = val.size;\n                    textToolSettings.align = val.align;\n                    textToolSettings.isBold = val.isBold;\n                    textToolSettings.isItalic = val.isItalic;\n                    textToolSettings.font = val.font;\n                    textToolSettings.opacity = val.opacity;\n\n                    let layerIndex = klCanvas.getLayerIndex(currentLayerCtx.canvas);\n                    klCanvas.text(layerIndex, {\n                        textStr: val.textStr,\n                        x: val.x,\n                        y: val.y,\n                        size: val.size,\n                        font: val.font,\n                        align: val.align,\n                        isBold: val.isBold,\n                        isItalic: val.isItalic,\n                        angleRad: angleRad,\n                        color: BB.ColorConverter.toRgbaStr(colorRGBA)\n                    });\n                    klCanvasWorkspace.requestFrame();\n                }\n            });\n\n        },\n        onShape: function(typeStr, canvasX, canvasY, angleRad) {\n            if (typeStr === 'down') {\n                shapeTool.onDown(canvasX, canvasY, angleRad);\n            }\n            if (typeStr === 'move') {\n                shapeTool.onMove(canvasX, canvasY);\n            }\n            if (typeStr === 'up') {\n                shapeTool.onUp(canvasX, canvasY);\n            }\n        },\n\n        onViewChange: function(viewChangeObj) {\n\n            if (viewChangeObj.changed.includes('scale')) {\n                statusOverlay.out({\n                    type: 'transform',\n                    scale: viewChangeObj.scale,\n                    angleDeg: viewChangeObj.angle * 180 / Math.PI\n                });\n            }\n\n            toolspaceToolRow.setEnableZoomIn(viewChangeObj.scale !== klCanvasWorkspace.getMaxScale());\n            toolspaceToolRow.setEnableZoomOut(viewChangeObj.scale !== klCanvasWorkspace.getMinScale());\n\n            handUi.update(viewChangeObj.scale, viewChangeObj.angle * 180 / Math.PI);\n        },\n        onUndo: function() {\n            if (klHistory.canUndo()) {\n                if (undoRedoCatchup.undo()) {\n                    statusOverlay.out(LANG('undo'), true);\n                }\n            }\n        },\n        onRedo: function() {\n            if (klHistory.canRedo()) {\n                if (undoRedoCatchup.redo()) {\n                    statusOverlay.out(LANG('redo'), true);\n                }\n            }\n        },\n    });\n    let keyListener = new BB.KeyListener({\n        onDown: function(keyStr, event, comboStr) {\n            if (KL.dialogCounter.get() > 0 || BB.isInputFocused(true)) {\n                return;\n            }\n\n            let isDrawing = lineSanitizer.getIsDrawing() || klCanvasWorkspace.getIsDrawing();\n            if (isDrawing) {\n                return;\n            }\n\n            if (comboStr === 'plus') {\n                klCanvasWorkspace.zoomByStep(keyListener.isPressed('shift') ? 1/8 : 1/2);\n            }\n            if (comboStr === 'minus') {\n                klCanvasWorkspace.zoomByStep(keyListener.isPressed('shift') ? -1/8 : -1/2);\n            }\n            if (comboStr === 'home') {\n                klCanvasWorkspace.fitView();\n            }\n            if (comboStr === 'end') {\n                klCanvasWorkspace.resetView(true);\n            }\n            if (['ctrl+z', 'cmd+z'].includes(comboStr)) {\n                event.preventDefault();\n                undoRedoCatchup.undo();\n            }\n            if (\n                ['ctrl+y', 'cmd+y'].includes(comboStr) ||\n                (\n                    (\n                        BB.sameKeys('ctrl+shift+z', comboStr) ||\n                        BB.sameKeys('cmd+shift+z', comboStr)\n                    ) && keyStr === 'z'\n                )\n            ) {\n                event.preventDefault();\n                undoRedoCatchup.redo();\n            }\n            if (!pOptions.embed) {\n                if (['ctrl+s', 'cmd+s'].includes(comboStr)) {\n                    event.preventDefault();\n                    saveToComputer.save();\n                }\n                if (['ctrl+shift+s', 'cmd+shift+s'].includes(comboStr)) {\n                    event.preventDefault();\n\n                    (async () => {\n                        let success = true;\n                        try {\n                            await projectStore.store(klCanvas.getProject());\n                        } catch (e) {\n                            success = false;\n                            setTimeout(() => {\n                                throw new Error('keyboard-shortcut: failed to store browser storage, ' + e);\n                            }, 0);\n                            statusOverlay.out(' ' + LANG('file-storage-failed'), true);\n                        }\n                        if (success) {\n                            pOptions.saveReminder.reset();\n                            statusOverlay.out(LANG('file-storage-stored'), true);\n                        }\n                    })();\n                }\n                if (['ctrl+c', 'cmd+c'].includes(comboStr)) {\n                    event.preventDefault();\n                    copyToClipboard(true);\n                }\n            }\n            if (['ctrl+a', 'cmd+a'].includes(comboStr)) {\n                event.preventDefault();\n            }\n\n\n            if (keyListener.comboOnlyContains(['left', 'right', 'up', 'down'])) {\n                if (keyStr === 'left') {\n                    klCanvasWorkspace.translateView(1, 0);\n                }\n                if (keyStr === 'right') {\n                    klCanvasWorkspace.translateView(-1, 0);\n                }\n                if (keyStr === 'up') {\n                    klCanvasWorkspace.translateView(0, 1);\n                }\n                if (keyStr === 'down') {\n                    klCanvasWorkspace.translateView(0, -1);\n                }\n            }\n\n\n            if (['r+left','r+right'].includes(comboStr)) {\n                if (keyStr === 'left') {\n                    klCanvasWorkspace.setAngle(-15, true);\n                    handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n                }\n                if (keyStr === 'right') {\n                    klCanvasWorkspace.setAngle(15, true);\n                    handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n                }\n            }\n            if (['r+up'].includes(comboStr)) {\n                klCanvasWorkspace.setAngle(0);\n                handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n            }\n\n\n            if (comboStr === 'sqbr_open') {\n                currentBrush.decreaseSize(0.03 / klCanvasWorkspace.getScale());\n            }\n            if (comboStr === 'sqbr_close') {\n                currentBrush.increaseSize(0.03 / klCanvasWorkspace.getScale());\n            }\n            if (comboStr === 'enter') {\n                klCanvas.layerFill(klCanvas.getLayerIndex(currentLayerCtx.canvas), klColorSlider.getColor());\n                statusOverlay.out(LANG('filled'), true);\n            }\n            if (['delete', 'backspace'].includes(comboStr)) {\n                let layerIndex = klCanvas.getLayerIndex(currentLayerCtx.canvas);\n                if (layerIndex === 0 && !brushUiObj.eraserBrush.getIsTransparentBg()) {\n                    klCanvas.layerFill(layerIndex, {r: 255, g: 255, b: 255}, 'source-in');\n                } else {\n                    klCanvas.clearLayer(layerIndex);\n                }\n                statusOverlay.out(LANG('cleared-layer'), true);\n            }\n            if (comboStr === 'e') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('draw');\n                toolspaceToolRow.setActive('draw');\n                mainTabRow.open('draw');\n                updateMainTabVisibility();\n                brushTabRow.open('eraserBrush');\n            }\n            if (comboStr === 'b') {\n                event.preventDefault();\n                const prevMode = klCanvasWorkspace.getMode();\n                klCanvasWorkspace.setMode('draw');\n                toolspaceToolRow.setActive('draw');\n                mainTabRow.open('draw');\n                updateMainTabVisibility();\n                brushTabRow.open(prevMode === 'draw' ? getNextBrushId() : currentBrushId);\n            }\n            if (comboStr === 'g') {\n                event.preventDefault();\n                const newMode = klCanvasWorkspace.getMode() === 'fill' ? 'gradient' : 'fill';\n                klCanvasWorkspace.setMode(newMode);\n                toolspaceToolRow.setActive(newMode);\n                mainTabRow.open(newMode);\n                updateMainTabVisibility();\n            }\n            if (comboStr === 't') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('text');\n                toolspaceToolRow.setActive('text');\n                mainTabRow.open('text');\n                updateMainTabVisibility();\n            }\n            if (comboStr === 'u') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('shape');\n                toolspaceToolRow.setActive('shape');\n                mainTabRow.open('shape');\n                updateMainTabVisibility();\n            }\n            if (comboStr === 'x') {\n                event.preventDefault();\n                klColorSlider.swapColors();\n            }\n\n\n        },\n        onUp: function(keyStr, event) {\n        }\n    });\n\n    /**\n     *\n     * @param importedImage - convertedPsd | {type: 'image', width: number, height: number, canvas: image | canvas}\n     * @param filename - string e.g. 'drawing.psd'\n     * @param optionStr? - 'default' | 'layer' | 'image'\n     */\n    function importFinishedLoading(\n        importedImage: IKlPsd | {\n            type: 'image';\n            width: number;\n            height: number;\n            canvas: HTMLCanvasElement | HTMLImageElement;\n        },\n        filename: string,\n        optionStr: 'default' | 'layer' | 'image',\n    ) {\n        if (!importedImage || isNaN(importedImage.width) || isNaN(importedImage.height) || importedImage.width <= 0 || importedImage.height <= 0) {\n            KL.popup({\n                target: klRootEl,\n                type: \"error\",\n                message: LANG('import-broken-file'),\n                buttons: [\"Ok\"],\n            });\n            return;\n        }\n\n        function getResizedDimensions(width, height) {\n            let w = parseInt(width);\n            let h = parseInt(height);\n            if (w > klMaxCanvasSize) {\n                h = klMaxCanvasSize / w * h;\n                w = klMaxCanvasSize;\n            }\n            if (h > klMaxCanvasSize) {\n                w = klMaxCanvasSize / h * w;\n                h = klMaxCanvasSize;\n            }\n            w = parseInt('' + w);\n            h = parseInt('' + h);\n            return {\n                width: w,\n                height: h\n            }\n        }\n\n        function importAsImage(canvas) {\n            let resizedDimensions = getResizedDimensions(canvas.width, canvas.height);\n\n            //resize first\n            let tempCanvas = BB.canvas(canvas.width, canvas.height);\n            let tempCanvasCtx = tempCanvas.getContext('2d');\n            tempCanvasCtx.drawImage(canvas, 0, 0);\n\n            BB.resizeCanvas(tempCanvas, resizedDimensions.width, resizedDimensions.height);\n\n            klCanvas.reset({\n                width: resizedDimensions.width,\n                height: resizedDimensions.height,\n                image: tempCanvas,\n                layerName: filename\n            });\n\n            layerManager.update(0);\n            setCurrentLayer(klCanvas.getLayer(0));\n            klCanvasWorkspace.resetView();\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n\n            isFirstImage = false;\n        }\n\n        /**\n         *\n         * @param convertedPsdObj - if flattened then without layers\n         * @param cropObj? - {x: number, y: number, width: number, height: number}\n         */\n        function importAsImagePsd(convertedPsdObj: IKlPsd, cropObj?) {\n\n            // crop\n            function crop(targetCanvas, cropCanvas, cropObj) {\n                cropCanvas.width = cropCanvas.width;\n                cropCanvas.getContext('2d').drawImage(targetCanvas, -cropObj.x, -cropObj.y);\n                targetCanvas.width = cropObj.width;\n                targetCanvas.height = cropObj.height;\n                targetCanvas.getContext('2d').drawImage(cropCanvas, 0, 0);\n            }\n            if (cropObj && (cropObj.width !== convertedPsdObj.width ||cropObj.height !== convertedPsdObj.height)) {\n                let cropCanvas = BB.canvas(cropObj.width, cropObj.height);\n                convertedPsdObj.width = cropObj.width;\n                convertedPsdObj.height = cropObj.height;\n\n                if (!convertedPsdObj.layers) {\n                    crop(convertedPsdObj.canvas, cropCanvas, cropObj);\n                }\n                if (convertedPsdObj.layers) {\n                    for (let i = 0; i < convertedPsdObj.layers.length; i++) {\n                        let item = convertedPsdObj.layers[i];\n                        crop(item.image, cropCanvas, cropObj);\n                    }\n                }\n            }\n\n            // resize\n            let resizedDimensions = getResizedDimensions(convertedPsdObj.width, convertedPsdObj.height);\n            convertedPsdObj.width = resizedDimensions.width;\n            convertedPsdObj.height = resizedDimensions.height;\n            if (!convertedPsdObj.layers) {\n                BB.resizeCanvas(convertedPsdObj.canvas, convertedPsdObj.width, convertedPsdObj.height);\n            }\n            if (convertedPsdObj.layers) {\n                for (let i = 0; i < convertedPsdObj.layers.length; i++) {\n                    let item = convertedPsdObj.layers[i];\n                    BB.resizeCanvas(item.image, convertedPsdObj.width, convertedPsdObj.height);\n                }\n            }\n\n            let layerIndex;\n            if (convertedPsdObj.layers) {\n                layerIndex = klCanvas.reset({\n                    width: convertedPsdObj.width,\n                    height: convertedPsdObj.height,\n                    layers: convertedPsdObj.layers\n                });\n            } else {\n                layerIndex = klCanvas.reset({\n                    width: convertedPsdObj.width,\n                    height: convertedPsdObj.height,\n                    image: convertedPsdObj.canvas\n                });\n            }\n            layerManager.update(layerIndex);\n            setCurrentLayer(klCanvas.getLayer(layerIndex));\n            klCanvasWorkspace.resetView();\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n\n            isFirstImage = false;\n        }\n\n        function importAsLayer(canvas) {\n            KL.showImportAsLayerDialog({\n                target: klRootEl,\n                klCanvas: klCanvas,\n                importImage: canvas,\n                callback: function(transformObj, isPixelated: boolean) {\n                    if (!transformObj) {\n                        return;\n                    }\n\n                    klHistory.pause(true);\n                    klCanvas.addLayer();\n                    let layers = klCanvas.getLayers();\n                    let activeLayerIndex = layers.length - 1;\n                    if (filename) {\n                        klCanvas.renameLayer(activeLayerIndex, filename);\n                    }\n                    let activeLayerContext = klCanvas.getLayerContext(activeLayerIndex);\n                    BB.drawTransformedImageWithBounds(activeLayerContext, canvas, transformObj, null, isPixelated);\n                    setCurrentLayer(klCanvas.getLayer(activeLayerIndex));\n                    layerManager.update(activeLayerIndex);\n\n                    klHistory.pause(false);\n\n                    klHistory.push({\n                        tool: [\"misc\"],\n                        action: \"importImage\",\n                        params: [BB.copyCanvas(activeLayerContext.canvas), filename]\n                    });\n                }\n            });\n        }\n\n\n        if (optionStr === 'default' || !optionStr) {\n            KL.showImportImageDialog({\n                image: importedImage,\n                target: klRootEl,\n                maxSize: klMaxCanvasSize,\n                callback: function(res) {\n                    if (res.type === 'as-image') {\n                        importAsImage(res.image);\n                    } else if (res.type === 'as-image-psd') {\n                        importAsImagePsd(res.image, res.cropObj);\n                    } else if (res.type === 'as-layer') {\n                        importAsLayer(res.image);\n                    } else if (res.type === 'cancel') {\n                        // nothing to do\n                    }\n                }\n            });\n        }\n\n        if (optionStr === 'layer') {\n            importAsLayer(importedImage.canvas);\n        }\n        if (optionStr === 'image') {\n            if (importedImage.type === 'psd') {\n                importAsImagePsd(importedImage);\n            } else {\n                importAsImage(importedImage.canvas);\n            }\n        }\n\n    }\n\n    function onPaste(e) {\n        if (KL.dialogCounter.get() > 0) {\n            return;\n        }\n\n        function retrieveImageFromClipboardAsBlob(pasteEvent, callback) {\n            if (pasteEvent.clipboardData == false) {\n                if (typeof (callback) == \"function\") {\n                    callback(undefined);\n                }\n            }\n\n            let items = pasteEvent.clipboardData.items;\n\n            if (items == undefined) {\n                if (typeof (callback) == \"function\") {\n                    callback(undefined);\n                }\n            } else {\n                for (let i = 0; i < items.length; i++) {\n                    if (items[i].type.indexOf(\"image\") == -1) {\n                        continue;\n                    }\n                    let blob = items[i].getAsFile();\n\n                    if (typeof (callback) == \"function\") {\n                        callback(blob);\n                    }\n                }\n            }\n\n        }\n\n        e.stopPropagation();\n        e.preventDefault();\n\n        if (e.clipboardData.files[0]) {\n            retrieveImageFromClipboardAsBlob(e, function (imageBlob) {\n                // If there's an image, display it in the canvas\n                if (imageBlob) {\n                    let img = new Image();\n                    img.onload = function () {\n                        URL.revokeObjectURL(img.src);\n                        importFinishedLoading({\n                            type: 'image',\n                            width: img.width,\n                            height: img.height,\n                            canvas: img\n                        }, null, 'default');\n                    };\n                    let URLObj = window.URL || window.webkitURL;\n                    img.src = URLObj.createObjectURL(imageBlob);\n                }\n            });\n        } else if (e.clipboardData.items[0]) {\n            e.clipboardData.items[0].getAsString(function(pasteStr) {\n                pasteStr = pasteStr.trim();\n                if (pasteStr.match(/^https?/)) {\n                    // url\n                    let img = new Image();\n                    img.onload = function () {\n                        importFinishedLoading({\n                            type: 'image',\n                            width: img.width,\n                            height: img.height,\n                            canvas: img\n                        }, null, 'default');\n                    };\n                    img.onerror = function (e) {\n                        console.log('error loading', e);\n                    };\n                    img.crossOrigin = 'Anonymous';\n                    img.src = pasteStr;\n\n                } else if (pasteStr.match(/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/)) {\n                    // url\n                    let rgbObj = BB.ColorConverter.hexToRGB(pasteStr.replace('#', ''));\n                    brushSettingService.setColor(rgbObj);\n                }\n            });\n\n        }\n    }\n\n    function handleFileSelect(files, optionStr) {\n\n        function showWarningPsdFlattened() {\n            KL.popup({\n                target: klRootEl,\n                type: \"warning\",\n                message: LANG('import-psd-unsupported') + \"<br /><br />\",\n                buttons: [\"Ok\"],\n            });\n        }\n\n        let hasUnsupportedFile = false;\n        for (let i = 0, file; file = files[i]; i++) {\n            let extension = file.name.split(\".\");\n            extension = extension[extension.length - 1].toLowerCase();\n            if (extension === \"psd\") {\n\n                (function(f) {\n                    let loaderSizeBytes = 1024 * 1024 * 25; // 25mb\n                    let maxSizeBytes = 1024 * 1024 * 1024; // 1gb\n                    let maxResolution = 4096;\n\n                    if (f.size >= maxSizeBytes) { // pretty likely to break stuff\n                        KL.popup({\n                            target: klRootEl,\n                            type: \"error\",\n                            message: \"File too big. Unable to import.<br /><br />\",\n                            buttons: [\"Ok\"],\n                        });\n                        return;\n                    }\n\n                    let doShowLoader = files.length === 1 && f.size >= loaderSizeBytes;\n                    let loaderIsOpen = true;\n                    let closeLoader;\n\n                    if (doShowLoader) {\n                        KL.popup({\n                            target: klRootEl,\n                            message: LANG('import-opening'),\n                            callback: function (result) {\n                                loaderIsOpen = false;\n                                closeLoader = null;\n                            },\n                            closefunc: function (f) {\n                                closeLoader = f;\n                            }\n                        });\n                    }\n\n\n                    let reader = new FileReader();\n                    reader.onload = function (readerResult) {\n\n                        KL.loadAgPsd().then(function(agPsdLazy) {\n\n                            if (doShowLoader && !loaderIsOpen) {\n                                return;\n                            }\n\n                            try {\n                                let psd;\n\n                                // first pass, only read metadata\n                                psd = agPsdLazy.readPsd(\n                                    (readerResult.target.result as any),\n                                    {\n                                        skipLayerImageData: true,\n                                        skipThumbnail: true,\n                                        skipCompositeImageData: true\n                                    });\n                                if (psd.width > maxResolution || psd.height > maxResolution) {\n                                    if (closeLoader) {\n                                        closeLoader();\n                                    }\n                                    KL.popup({\n                                        target: klRootEl,\n                                        type: \"error\",\n                                        //message: \"Image exceeds maximum dimensions of \" + maxResolution + \" x \" + maxResolution + \" pixels. Unable to import.\"\n                                        message: LANG('import-psd-too-large').replace(/{x}/g, '' + maxResolution)\n                                            + \"<br /><br />\"\n                                            + LANG('import-psd-size') + \": \" + psd.width + \" x \" + psd.height + ' pixels'\n                                            + \"<br /><br />\"\n                                        ,\n                                        buttons: [\"Ok\"],\n                                    });\n                                    return;\n                                }\n\n\n                                // second pass, now load actual data.\n                                psd = null;\n\n                                try {\n                                    psd = agPsdLazy.readPsd((readerResult.target.result as any));\n                                } catch (e) {\n                                    //console.log('failed regular psd import', e);\n                                }\n                                if (psd) {\n                                    //console.log('psd', psd);\n                                    let convertedPsd = KL.PSD.readPsd(psd);\n                                    //console.log('converted', convertedPsd);\n                                    if (optionStr === 'image' && convertedPsd.error) {\n                                        showWarningPsdFlattened();\n                                    }\n\n                                    if (closeLoader) {\n                                        closeLoader();\n                                    }\n                                    importFinishedLoading(convertedPsd, f.name, optionStr);\n                                } else {\n                                    psd = agPsdLazy.readPsd((readerResult.target.result as any), { skipLayerImageData: true, skipThumbnail: true });\n                                    if (optionStr === 'image') {\n                                        showWarningPsdFlattened();\n                                    }\n\n                                    if (closeLoader) {\n                                        closeLoader();\n                                    }\n                                    importFinishedLoading({\n                                        type: 'psd',\n                                        width: psd.width,\n                                        height: psd.height,\n                                        canvas: psd.canvas,\n                                        error: true\n                                    }, f.name, optionStr);\n                                }\n\n\n                            } catch (e) {\n                                if (closeLoader) {\n                                    closeLoader();\n                                }\n                                KL.popup({\n                                    target: klRootEl,\n                                    type: \"error\",\n                                    message: \"Failed to load PSD.<br /><br />\",\n                                    buttons: [\"Ok\"],\n                                });\n                            }\n                        }).catch(() => {\n                            closeLoader();\n                            alert('Error: failed to load PSD library');\n                        });\n\n                    };\n                    reader.readAsArrayBuffer(f);\n                })(file);\n\n            } else if (file.type.match('image.*')) {\n                (function (f) {\n                    window.URL = window.URL || window.webkitURL;\n                    let url = window.URL.createObjectURL(f);\n                    let im = new Image();\n                    im.src = url;\n                    BB.loadImage(im, function () {\n                        importFinishedLoading({\n                            type: 'image',\n                            width: im.width,\n                            height: im.height,\n                            canvas: im\n                        }, f.name, optionStr);\n                    });\n                })(file);\n            } else {\n                hasUnsupportedFile = true;\n            }\n        }\n        if (hasUnsupportedFile) {\n            KL.popup({\n                target: klRootEl,\n                message: LANG('import-unsupported-file'),\n                type: 'error',\n                buttons: ['OK'],\n            });\n        }\n    }\n\n    if (!pOptions.embed) {\n        new KL.KlImageDropper({\n            target: document.body,\n            onDrop: function(files, optionStr) {\n                if (KL.dialogCounter.get() > 0) {\n                    return;\n                }\n                handleFileSelect(files, optionStr);\n            },\n            enabledTest: function() {\n                return KL.dialogCounter.get() === 0;\n            }\n        });\n\n        BB.addEventListener(window, 'paste', onPaste, false);\n    }\n\n    const brushUiObj: any = {};\n\n    // create brush UIs\n    for (let b in KL.brushesUI) {\n        if (KL.brushesUI.hasOwnProperty(b)) {\n            let ui = new KL.brushesUI[b].Ui({\n                onSizeChange: sizeWatcher,\n                onOpacityChange: function(opacity) {\n                    brushSettingService.emitOpacity(opacity);\n                },\n                onConfigChange: () => {\n                    brushSettingService.emitSliderConfig({\n                        sizeSlider: KL.brushesUI[currentBrushId].sizeSlider,\n                        opacitySlider: KL.brushesUI[currentBrushId].opacitySlider\n                    });\n                }\n            });\n            brushUiObj[b] = ui;\n            ui.getElement().style.padding = 10 + 'px';\n        }\n    }\n\n\n    BB.css(klRootEl, {\n        position: 'absolute',\n        left: '0',\n        top: '0',\n        right: '0',\n        bottom: '0'\n    });\n\n    let statusOverlay = new KL.StatusOverlay();\n\n    const toolspace = BB.el({});\n    const toolspaceInner = BB.el({\n        parent: toolspace,\n    });\n    toolspace.oncontextmenu = function () {\n        return false;\n    };\n    toolspace.onclick = BB.handleClick;\n\n\n    let toolspaceCollapser = new KL.ToolspaceCollapser({\n        onChange: function() {\n            updateCollapse();\n        }\n    });\n    function updateCollapse() {\n\n        //collapser\n        if (uiWidth < collapseThreshold) {\n            toolspaceCollapser.getElement().style.display = 'block';\n\n            toolspaceCollapser.setDirection(uiState);\n            if (toolspaceCollapser.isOpen()) {\n                if (uiState === 'left') {\n                    BB.css(toolspaceCollapser.getElement(), {\n                        left: '271px',\n                        right: '',\n                    });\n                    BB.css(klCanvasWorkspace.getElement(), {\n                        left: '271px'\n                    });\n                } else {\n                    BB.css(toolspaceCollapser.getElement(), {\n                        left: '',\n                        right: '271px'\n                    });\n                    BB.css(klCanvasWorkspace.getElement(), {\n                        left: '0'\n                    });\n                }\n                toolspace.style.display = 'block';\n                klCanvasWorkspace.setSize(Math.max(0, uiWidth - toolWidth), uiHeight);\n                statusOverlay.setWide(false);\n\n            } else {\n                if (uiState === 'left') {\n                    BB.css(toolspaceCollapser.getElement(), {\n                        left: '0',\n                        right: '',\n                    });\n                    BB.css(klCanvasWorkspace.getElement(), {\n                        left: '0'\n                    });\n                } else {\n                    BB.css(toolspaceCollapser.getElement(), {\n                        left: '',\n                        right: '0'\n                    });\n                    BB.css(klCanvasWorkspace.getElement(), {\n                        left: '0'\n                    });\n                }\n                toolspace.style.display = 'none';\n                klCanvasWorkspace.setSize(Math.max(0, uiWidth), uiHeight);\n                statusOverlay.setWide(true);\n\n            }\n\n        } else {\n            toolspaceCollapser.getElement().style.display = 'none';\n            if (uiState === 'left') {\n                BB.css(klCanvasWorkspace.getElement(), {\n                    left: '271px'\n                });\n            } else {\n                BB.css(klCanvasWorkspace.getElement(), {\n                    left: '0'\n                });\n            }\n            toolspace.style.display = 'block';\n            klCanvasWorkspace.setSize(Math.max(0, uiWidth - toolWidth), uiHeight);\n            statusOverlay.setWide(false);\n\n        }\n    }\n    updateCollapse();\n\n    function updateUi() {\n        if (uiState === 'left') {\n            BB.css(toolspace, {\n                left: '0',\n                right: '',\n                borderLeft: 'none',\n                borderRight: '1px solid rgb(135, 135, 135)'\n            });\n            BB.css(klCanvasWorkspace.getElement(), {\n                left: '271px'\n            });\n        } else {\n            BB.css(toolspace, {\n                left: '',\n                right: '0',\n                borderLeft: '1px solid rgb(135, 135, 135)',\n                borderRight: 'none'\n            });\n            BB.css(klCanvasWorkspace.getElement(), {\n                left: '0'\n            });\n        }\n        statusOverlay.setUiState(uiState);\n        layerPreview.setUiState('' + uiState);\n        layerManager.setUiState('' + uiState);\n        updateCollapse();\n        toolspaceScroller.updateUiState(uiState);\n    }\n\n\n\n    let overlayToolspace;\n    setTimeout(function() {\n        overlayToolspace = new KL.OverlayToolspace({\n            enabledTest: function() {\n                return KL.dialogCounter.get() === 0 && !lineSanitizer.getIsDrawing();\n            },\n            brushSettingService,\n        });\n        klRootEl.appendChild(overlayToolspace.getElement());\n    }, 0);\n\n    BB.append(klRootEl, [klCanvasWorkspace.getElement(), toolspace, toolspaceCollapser.getElement()]);\n\n    BB.css(toolspace, {\n        position: \"absolute\",\n        right: '0',\n        top: '0',\n        bottom: '0',\n        width: (toolWidth - 1) + \"px\",\n\n        overflow: \"hidden\",\n        backgroundColor: \"#ddd\",\n        borderLeft: \"1px solid rgb(135, 135, 135)\",\n        userSelect: 'none',\n        touchAction: 'none'\n    });\n\n    let toolspaceTopRow;\n    if (pOptions.embed) {\n        toolspaceTopRow = new ToolspaceTopRow({\n            onHelp: () => {\n                showIframePopup(pOptions.embed.url + '/help.html', !!pOptions.embed);\n            },\n            onSubmit: () => {\n                KL.popup({\n                    target: klRootEl,\n                    message: LANG('submit-prompt'),\n                    buttons: [LANG('submit'), 'Cancel'],\n                    callback: async (result) => {\n                        if (result !== LANG('submit')) {\n                            return;\n                        }\n\n                        let overlay = BB.el({\n                            parent: klRootEl,\n                            className: 'upload-overlay',\n                            content: '<div class=\"spinner\"></div> ' + LANG('submit-submitting'),\n                        });\n\n                        pOptions.embed.onSubmit(\n                            () => {\n                                pOptions.saveReminder.reset();\n                                klRootEl.removeChild(overlay);\n                            },\n                            () => {\n                                klRootEl.removeChild(overlay);\n                            });\n                    }\n                });\n            },\n            onLeftRight: () => {\n                uiState = uiState === 'left' ? 'right' : 'left';\n                updateUi();\n            },\n        });\n    } else {\n        toolspaceTopRow = new KL.ToolspaceTopRow({\n            logoImg: pOptions.logoImg,\n            onLogo: function() {\n                showIframePopup('./home/', !!pOptions.embed);\n            },\n            onNew: function() {\n                showNewImageDialog();\n            },\n            onImport: function() {\n                fileTab.triggerImport();\n            },\n            onSave: function() {\n                saveToComputer.save();\n            },\n            onShare: function() {\n                shareImage();\n            },\n            onHelp: function() {\n                showIframePopup('./help/', !!pOptions.embed);\n            },\n        });\n    }\n    toolspaceTopRow.getElement().classList.add('toolspace-row-shadow');\n    toolspaceTopRow.getElement().style.marginBottom = '10px';\n    toolspaceInner.appendChild(toolspaceTopRow.getElement());\n\n    let toolspaceToolRow = new KL.ToolspaceToolRow({\n        onActivate: function(activeStr) {\n            if (activeStr === 'draw') {\n                klCanvasWorkspace.setMode('draw');\n            } else if (activeStr === 'hand') {\n                klCanvasWorkspace.setMode('hand');\n            } else if (activeStr === 'fill') {\n                klCanvasWorkspace.setMode('fill');\n            } else if (activeStr === 'gradient') {\n                klCanvasWorkspace.setMode('gradient');\n            } else if (activeStr === 'text') {\n                klCanvasWorkspace.setMode('text');\n            } else if (activeStr === 'shape') {\n                klCanvasWorkspace.setMode('shape');\n            } else {\n                throw new Error('unknown activeStr');\n            }\n            mainTabRow.open(activeStr);\n            updateMainTabVisibility();\n            klColorSlider.pickingDone();\n        },\n        onZoomIn: function() {\n            klCanvasWorkspace.zoomByStep(keyListener.isPressed('shift') ? 1/8 : 1/2);\n        },\n        onZoomOut: function() {\n            klCanvasWorkspace.zoomByStep(keyListener.isPressed('shift') ? -1/8 : -1/2);\n        },\n        onUndo: function() {\n            undoRedoCatchup.undo();\n        },\n        onRedo: function() {\n            undoRedoCatchup.redo();\n        }\n    });\n    toolspaceToolRow.setIsSmall(uiHeight < 540);\n    klHistory.addListener(function() {\n        toolspaceToolRow.setEnableUndo(klHistory.canUndo());\n        toolspaceToolRow.setEnableRedo(klHistory.canRedo());\n    });\n    toolspaceToolRow.getElement().classList.add('toolspace-row-shadow');\n    toolspaceInner.appendChild(toolspaceToolRow.getElement());\n\n    let klColorSlider;\n\n    function setCurrentBrush(brushId) {\n        if (brushId !== 'eraserBrush') {\n            lastNonEraserBrushId = brushId;\n        }\n\n        if (klColorSlider) {\n            if (brushId === 'eraserBrush') {\n                klColorSlider.enable(false);\n            } else {\n                klColorSlider.enable(true);\n            }\n        }\n\n        currentBrushId = brushId;\n        currentBrush = brushUiObj[brushId];\n        currentBrush.setColor(currentColor);\n        currentBrush.setContext(currentLayerCtx);\n        klCanvasWorkspace.setMode('draw');\n        toolspaceToolRow.setActive('draw');\n        updateMainTabVisibility();\n    }\n\n    function setCurrentLayer(layer) { //BrushContext(p_context) {\n        currentLayerCtx = layer.context;\n        currentBrush.setContext(layer.context);\n        layerPreview.setLayer(layer);\n    }\n\n    function setBrushColor(p_color) {\n        currentColor = p_color;\n        currentBrush.setColor(p_color);\n        brushSettingService.emitColor(p_color);\n        klColorSlider.pickingDone();\n    }\n\n    klColorSlider = new KL.KlColorSlider({\n        width: 250,\n        height: 30,\n        svHeight: 100,\n        startValue: new BB.RGB(0, 0, 0),\n        onPick: setBrushColor\n    });\n    klColorSlider.setHeight(Math.max(163, Math.min(400, uiHeight - 505)));\n    klColorSlider.setPickCallback(function (doPick) {\n\n        if (doPick) {\n            klCanvasWorkspace.setMode('pick');\n        } else {\n            klCanvasWorkspace.setMode(toolspaceToolRow.getActive());\n            updateMainTabVisibility();\n        }\n\n    });\n    let brushDiv = document.createElement(\"div\");\n    let colorDiv = document.createElement(\"div\");\n    BB.css(colorDiv, {\n        margin: '10px',\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-between',\n        alignItems: 'flex-end'\n    });\n    let toolspaceStabilizerRow = new KL.ToolspaceStabilizerRow({\n        smoothing: 1,\n        onSelect: function(v) {\n            lineSmoothing.setSmoothing(translateSmoothing(v));\n        }\n    });\n\n\n    brushDiv.appendChild(colorDiv);\n    BB.append(\n        colorDiv,\n        [klColorSlider.getElement(), klColorSlider.getOutputElement(), toolspaceStabilizerRow.getElement()]\n    );\n\n    let brushTabRow = new KL.TabRow({\n        initialId: 'penBrush',\n        useAccent: true,\n        tabArr: (function () {\n            let result = [];\n\n            function createTab(keyStr) {\n                return {\n                    id: keyStr,\n                    image: KL.brushesUI[keyStr].image,\n                    title: KL.brushesUI[keyStr].tooltip,\n                    onOpen: function() {\n                        brushUiObj[keyStr].getElement().style.display = 'block';\n                        setCurrentBrush(keyStr);\n                        klColorSlider.pickingDone();\n                        brushSettingService.emitSliderConfig({\n                            sizeSlider: KL.brushesUI[keyStr].sizeSlider,\n                            opacitySlider: KL.brushesUI[keyStr].opacitySlider\n                        });\n                        sizeWatcher(brushUiObj[keyStr].getSize());\n                        brushSettingService.emitOpacity(brushUiObj[keyStr].getOpacity());\n                    },\n                    onClose: function() {\n                        brushUiObj[keyStr].getElement().style.display = 'none';\n                    }\n                };\n            }\n\n            let keyArr = Object.keys(brushUiObj);\n            for (let i = 0; i < keyArr.length; i++) {\n                result.push(createTab(keyArr[i]));\n            }\n            return result;\n        })()\n    });\n    brushDiv.appendChild(brushTabRow.getElement());\n    for (let b in KL.brushesUI) {\n        if (KL.brushesUI.hasOwnProperty(b)) {\n            brushDiv.appendChild(brushUiObj[b].getElement());\n        }\n    }\n\n    const handUi = new KL.HandUi({\n        scale: 1,\n        angleDeg: 0,\n        onReset: function() {\n            klCanvasWorkspace.resetView(true);\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n        },\n        onFit: function() {\n            klCanvasWorkspace.fitView();\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n        },\n        onAngleChange: function(angleDeg, isRelative) {\n            klCanvasWorkspace.setAngle(angleDeg, isRelative);\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n        },\n    });\n\n    let fillUi = new KL.FillUi({\n        colorSlider: klColorSlider\n    });\n\n    let gradientUi = new KL.GradientUi({\n        colorSlider: klColorSlider\n    });\n\n    let textUi = new KL.TextUi({\n        colorSlider: klColorSlider\n    });\n\n    let shapeUi = new KL.ShapeUi({\n        colorSlider: klColorSlider\n    });\n\n    const gradientTool = new KL.GradientTool({\n        onGradient: (isDone, x1, y1, x2, y2, angleRad) => {\n            const layerIndex = klCanvas.getLayerIndex(currentLayerCtx.canvas);\n            const settings = gradientUi.getSettings();\n            const gradientObj: IGradient = {\n                type: settings.type,\n                color1: klColorSlider.getColor(),\n                isReversed: settings.isReversed,\n                opacity: settings.opacity,\n                doLockAlpha: settings.doLockAlpha,\n                isEraser: settings.isEraser,\n                doSnap: keyListener.isPressed('shift') || settings.doSnap,\n                x1,\n                y1,\n                x2,\n                y2,\n                angleRad,\n            };\n\n            if (isDone) {\n                klCanvas.setComposite(layerIndex, null);\n                klCanvas.drawGradient(layerIndex, gradientObj);\n            } else {\n                klCanvas.setComposite(layerIndex, {\n                    draw: function(ctx) {\n                        KL.drawGradient(ctx, gradientObj);\n                    }\n                });\n            }\n            klCanvasWorkspace.requestFrame();\n        }\n    });\n\n    let shapeTool = new KL.ShapeTool({\n        onShape: function(isDone, x1, y1, x2, y2, angleRad) {\n\n            let layerIndex = klCanvas.getLayerIndex(currentLayerCtx.canvas);\n\n            let shapeObj: any = {\n                type: shapeUi.getShape(),\n                x1: x1,\n                y1: y1,\n                x2: x2,\n                y2: y2,\n                angleRad: angleRad,\n                isOutwards: shapeUi.getIsOutwards(),\n                opacity: shapeUi.getOpacity(),\n                isEraser: shapeUi.getIsEraser(),\n                doLockAlpha: shapeUi.getDoLockAlpha(),\n            };\n            if (shapeUi.getShape() === 'line') {\n                shapeObj.strokeRgb = klColorSlider.getColor();\n                shapeObj.lineWidth = shapeUi.getLineWidth();\n                shapeObj.isAngleSnap = shapeUi.getIsSnap() || keyListener.isPressed('shift');\n            } else {\n                shapeObj.isFixedRatio = shapeUi.getIsFixed() || keyListener.isPressed('shift');\n                if (shapeUi.getMode() === 'stroke') {\n                    shapeObj.strokeRgb = klColorSlider.getColor();\n                    shapeObj.lineWidth = shapeUi.getLineWidth();\n                } else {\n                    shapeObj.fillRgb = klColorSlider.getColor();\n                }\n            }\n\n            if (isDone) {\n                klCanvas.setComposite(layerIndex, null);\n                klCanvas.drawShape(layerIndex, shapeObj);\n            } else {\n                klCanvas.setComposite(layerIndex, {\n                    draw: function(ctx) {\n                        KL.drawShape(ctx, shapeObj);\n                    }\n                });\n            }\n            klCanvasWorkspace.requestFrame();\n\n        }\n    });\n\n    const layerManager = KL.klLayerManager(klCanvas, function (val) {\n        setCurrentLayer(klCanvas.getLayer(val));\n        klHistory.push({\n            tool: [\"misc\"],\n            action: \"focusLayer\",\n            params: [val]\n        });\n    }, klRootEl) as any;\n    const layerPreview = new KL.LayerPreview({\n        klRootEl: klRootEl,\n        onClick: function () {\n            mainTabRow.open('layers');\n        }\n    });\n    layerPreview.setIsVisible(uiHeight >= 579);\n    layerPreview.setLayer(klCanvas.getLayer(klCanvas.getLayerIndex(currentLayerCtx.canvas)));\n\n    const filterTab = new KL.FilterTab(\n        klRootEl,\n        klColorSlider,\n        layerManager,\n        // setCurrentLayer,\n        klCanvasWorkspace,\n        handUi,\n        () => { //get current color\n            return currentColor;\n        },\n        () => { // get max canvas size\n            return klMaxCanvasSize;\n        },\n        () => { // get kl canvas\n            return klCanvas;\n        },\n        () => { // get current layer ctx\n            return currentLayerCtx;\n        },\n        !!pOptions.embed,\n        statusOverlay,\n    );\n\n    const undoRedoCatchup = new KL.UndoRedoCatchup(\n        brushUiObj,\n        layerPreview,\n        layerManager,\n        handUi,\n        klCanvasWorkspace,\n        () => {\n            if (!initState) {\n                throw new Error('initState not initialized');\n            }\n            return initState;\n        },\n        () => klCanvas,\n        () => currentLayerCtx,\n        (clctx) => {\n            currentLayerCtx = clctx;\n        },\n        () => currentBrush,\n    );\n    klHistory.addListener((p) => {\n        undoRedoCatchup.catchup(p);\n    });\n\n    function showNewImageDialog() {\n        KL.newImageDialog({\n            currentColor: currentColor,\n            secondaryColor: klColorSlider.getSecondaryRGB(),\n            maxCanvasSize: klMaxCanvasSize,\n            canvasWidth: klCanvas.getWidth(),\n            canvasHeight: klCanvas.getHeight(),\n            workspaceWidth: window.innerWidth < collapseThreshold ? uiWidth : uiWidth - toolWidth,\n            workspaceHeight: uiHeight,\n            onConfirm: function(width, height, color) {\n                klCanvas.reset({\n                    width: width,\n                    height: height,\n                    color: color.a === 1 ? color : null\n                });\n\n                layerManager.update(0);\n                setCurrentLayer(klCanvas.getLayer(0));\n                klCanvasWorkspace.resetView();\n                handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n\n                isFirstImage = false;\n            },\n            onCancel: function() {}\n        });\n    }\n\n    function shareImage(callback?) {\n        BB.shareCanvas({\n            canvas: klCanvas.getCompleteCanvas(1),\n            fileName: BB.getDate() + filenameBase + '.png',\n            title: BB.getDate() + filenameBase + '.png',\n            callback: callback ? callback : function() {}\n        });\n    }\n\n    const saveToComputer = new KL.SaveToComputer(\n        pOptions.saveReminder,\n        klRootEl,\n        () => exportType,\n        () => klCanvas,\n        filenameBase,\n    );\n\n    const fileTab = pOptions.embed ? null : new KL.FileTab(\n        klRootEl,\n        projectStore,\n        () => klCanvas.getProject(),\n        exportType,\n        (type) => {\n            exportType = type;\n        },\n        handleFileSelect,\n        () => {\n            saveToComputer.save();\n        },\n        showNewImageDialog,\n        shareImage,\n        () => { // on upload\n            KL.imgurUpload(klCanvas, klRootEl, pOptions.saveReminder, pOptions.app && pOptions.app.imgurKey ? pOptions.app.imgurKey : null, );\n        },\n        copyToClipboard,\n        pOptions.saveReminder,\n    );\n\n    const settingsTab = new KL.SettingsTab(\n        () => {\n            uiState = uiState === 'left' ? 'right' : 'left';\n            updateUi();\n            if (!pOptions.embed) {\n                LocalStorage.setItem('uiState', uiState);\n            }\n        },\n        pOptions.aboutEl\n    );\n\n    mainTabRow = new KL.TabRow({\n        initialId: 'draw',\n        tabArr: [\n            {\n                id: 'draw',\n                title: LANG('tool-brush'),\n                image: toolPaintImg,\n                onOpen: function() {\n                    if (currentBrushId === 'eraserBrush') {\n                        klColorSlider.enable(false);\n                    }\n                    BB.append(\n                        colorDiv,\n                        [klColorSlider.getElement(), klColorSlider.getOutputElement(), toolspaceStabilizerRow.getElement()]\n                    );\n                    brushDiv.style.display = 'block';\n                },\n                onClose: function() {\n                    brushDiv.style.display = 'none';\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'hand',\n                title: LANG('tool-hand'),\n                image: toolHandImg,\n                isVisible: false,\n                onOpen: function() {\n                    handUi.setIsVisible(true);\n                },\n                onClose: function() {\n                    handUi.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'fill',\n                title: LANG('tool-paint-bucket'),\n                image: toolFillImg,\n                isVisible: false,\n                onOpen: function() {\n                    klColorSlider.enable(true);\n                    fillUi.setIsVisible(true);\n                },\n                onClose: function() {\n                    fillUi.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'gradient',\n                title: LANG('tool-gradient'),\n                image: toolGradientImg,\n                isVisible: false,\n                onOpen: function() {\n                    klColorSlider.enable(true);\n                    gradientUi.setIsVisible(true);\n                },\n                onClose: function() {\n                    gradientUi.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'text',\n                title: LANG('tool-text'),\n                image: toolTextImg,\n                isVisible: false,\n                onOpen: function() {\n                    klColorSlider.enable(true);\n                    textUi.setIsVisible(true);\n                },\n                onClose: function() {\n                    textUi.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'shape',\n                title: LANG('tool-shape'),\n                image: toolShapeImg,\n                isVisible: false,\n                onOpen: function() {\n                    klColorSlider.enable(true);\n                    shapeUi.setIsVisible(true);\n                },\n                onClose: function() {\n                    shapeUi.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'layers',\n                title: LANG('tab-layers'),\n                image: tabLayersImg,\n                onOpen: function() {\n                    layerManager.update();\n                    layerManager.style.display = 'block';\n                },\n                onClose: function() {\n                    layerManager.style.display = 'none';\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'edit',\n                label: LANG('tab-edit'),\n                onOpen: function() {\n                    filterTab.show();\n                },\n                onClose: function() {\n                    filterTab.hide();\n                },\n                css: {\n                    padding: '0 7px',\n                },\n            },\n            {\n                id: 'file',\n                label: LANG('tab-file'),\n                isVisible: !!fileTab,\n                onOpen: function() {\n                    if (!fileTab) {\n                        return;\n                    }\n                    fileTab.getElement().style.display = 'block';\n                    fileTab.setIsVisible(true);\n                },\n                onClose: function() {\n                    if (!fileTab) {\n                        return;\n                    }\n                    fileTab.getElement().style.display = 'none';\n                    fileTab.setIsVisible(false);\n                },\n                css: {\n                    padding: '0 7px',\n                },\n            },\n            {\n                id: 'settings',\n                title: LANG('tab-settings'),\n                image: tabSettingsImg,\n                onOpen: function() {\n                    settingsTab.getElement().style.display = 'block';\n                    // settingsTab.setIsVisible(true);\n                },\n                onClose: function() {\n                    settingsTab.getElement().style.display = 'none';\n                    // settingsTab.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            }\n        ]\n    });\n    function updateMainTabVisibility() {\n        if (!mainTabRow) {\n            return;\n        }\n\n        let toolObj = {\n            'draw': {},\n            'hand': {},\n            'fill': {},\n            'gradient': {},\n            'text': {},\n            'shape': {}\n        };\n\n        let activeStr = toolspaceToolRow.getActive();\n        let oldTabId = mainTabRow.getOpenedTabId();\n\n        let keysArr = Object.keys(toolObj);\n        for (let i = 0; i < keysArr.length; i++) {\n            if (activeStr === keysArr[i]) {\n                mainTabRow.setIsVisible(keysArr[i], true);\n            } else {\n                mainTabRow.setIsVisible(keysArr[i], false);\n                if (oldTabId === keysArr[i]) {\n                    mainTabRow.open(activeStr);\n                }\n            }\n        }\n\n    }\n\n    function copyToClipboard(showCrop?) {\n        KL.clipboardDialog(klRootEl, klCanvas.getCompleteCanvas(1), function (inputObj) {\n            if (inputObj.left === 0 && inputObj.right === 0 && inputObj.top === 0 && inputObj.bottom === 0) {\n                return;\n            }\n            //do a crop\n            KL.filterLib.cropExtend.apply({\n                context: currentLayerCtx,\n                klCanvas: klCanvas,\n                input: inputObj, //{left,right,top,bottom}\n                history: klHistory\n            });\n            layerManager.update();\n            klCanvasWorkspace.resetView();\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n        }, statusOverlay, showCrop);\n    }\n\n    const bottomBarWrapper = BB.el({\n        css: {\n            width: \"270px\",\n            position: \"absolute\",\n            bottom: '0',\n            left: '0'\n        },\n    });\n    if (pOptions.bottomBar) {\n        bottomBarWrapper.append(pOptions.bottomBar);\n        const observer = new MutationObserver(() => updateBottomBar());\n        observer.observe(\n            toolspaceInner,\n            {\n                attributes: true,\n                childList: true,\n                subtree: true,\n            }\n        );\n    }\n    function updateBottomBar() {\n        if (!pOptions.bottomBar) {\n            return;\n        }\n        const threshold = 617; //590\n        const isVisible = (\n            threshold < window.innerHeight &&\n            toolspaceInner.scrollHeight + 50 < window.innerHeight\n        );\n        bottomBarWrapper.style.display = isVisible ? '' : 'none';\n    }\n\n\n\n    BB.append(toolspaceInner, [\n        layerPreview.getElement(),\n        mainTabRow.getElement(),\n        brushDiv,\n        handUi.getElement(),\n        fillUi.getElement(),\n        gradientUi.getElement(),\n        textUi.getElement(),\n        shapeUi.getElement(),\n        layerManager,\n        filterTab.getElement(),\n        fileTab ? fileTab.getElement() : null,\n        settingsTab.getElement(),\n        BB.el({\n            css: {\n                height: '10px', // a bit of spacing at the bottom\n            }\n        }),\n        bottomBarWrapper ? bottomBarWrapper : null\n    ]);\n\n    const toolspaceScroller = new KL.ToolspaceScroller({\n        toolspace,\n        uiState,\n    });\n\n    // --- interface ---\n\n    this.getEl = () => {\n        return klRootEl;\n    };\n\n    this.resize = (w, h) => {\n\n        // iPad scrolls down when increasing text zoom\n        if (window.scrollY > 0) {\n            window.scrollTo(0, 0);\n        }\n\n        if (uiWidth === Math.max(0, w) && uiHeight === Math.max(0, h)) {\n            return;\n        }\n\n        uiWidth = Math.max(0, w);\n        uiHeight = Math.max(0, h);\n\n        updateCollapse();\n        updateBottomBar();\n\n        layerPreview.setIsVisible(uiHeight >= 579);\n        klColorSlider.setHeight(Math.max(163, Math.min(400, uiHeight - 505)));\n        toolspaceToolRow.setIsSmall(uiHeight < 540);\n    };\n\n    this.out = (msg) => {\n        statusOverlay.out(msg);\n    };\n\n    this.getPNG = function(): Blob {\n        return base64ToBlob(klCanvas.getCompleteCanvas(1).toDataURL('image/png'));\n    };\n\n    this.getPSD = async function() {\n        return await klCanvasToPsdBlob(klCanvas);\n    };\n\n    this.getProject = () => klCanvas.getProject();\n\n    this.swapUiLeftRight = () => {\n        uiState = uiState === 'left' ? 'right' : 'left';\n        if (!pOptions.embed) {\n            LocalStorage.setItem('uiState', uiState);\n        }\n        updateUi();\n    };\n\n    this.saveAsPsd = () => {\n        saveToComputer.save('psd');\n    };\n\n    this.isDrawing = () => {\n        return lineSanitizer.getIsDrawing() || klCanvasWorkspace.getIsDrawing();\n    };\n\n    // --- end interface ---\n\n    this.resize(uiWidth, uiHeight);\n    updateUi();\n\n    {\n        BB.addEventListener(window, 'resize', () => {\n            this.resize(window.innerWidth, window.innerHeight);\n        });\n        BB.addEventListener(window, 'orientationchange', () => {\n            this.resize(window.innerWidth, window.innerHeight);\n        });\n\n        // iPad doesn't trigger 'resize' event when using text zoom, although it's resizing the window.\n        // Workaround: place a div in the body that fills the window, and use a ResizeObserver\n        const windowResizeWatcher = BB.el({\n            parent: document.body,\n            css: {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                right: '0',\n                bottom: '0',\n                pointerEvents: 'none',\n                zIndex: '-1',\n                userSelect: 'none',\n            }\n        });\n        try {\n            // Not all browsers support ResizeObserver. Not critical though.\n            const observer = new ResizeObserver(() => this.resize(window.innerWidth, window.innerHeight));\n            observer.observe(windowResizeWatcher);\n        } catch (e) {\n            windowResizeWatcher.parentNode.removeChild(windowResizeWatcher);\n        }\n\n        // prevent ctrl scroll -> zooming page\n        BB.addEventListener(klRootEl, 'wheel', (event) => {\n            if (keyListener.isPressed('ctrl')) {\n                event.preventDefault();\n            }\n        });\n        //maybe prevent zooming on safari mac os - todo still needed?\n        const prevent = (e) => {\n            e.preventDefault();\n        }\n        window.addEventListener('gesturestart', prevent);\n        window.addEventListener('gesturechange', prevent);\n        window.addEventListener('gestureend', prevent);\n    }\n}","/**\n * Topmost row of buttons in toolspace\n *\n * p = { // button click callbacks\n *     onSubmit: function(),\n *     onLeftRight: function(),\n *     onHelp: function()\n * }\n *\n * @param p\n * @constructor\n */\nimport {BB} from \"../bb/bb\";\n// @ts-ignore\nimport uiSwapImg from 'url:~/src/app/img/ui/ui-swap-lr.svg';\n// @ts-ignore\nimport helpImg from 'url:~/src/app/img/ui/help.svg';\nimport {LANG} from '../language/language';\n\nexport class ToolspaceTopRow {\n    el: HTMLDivElement;\n\n    constructor(p: {onSubmit: () => void, onLeftRight: () => void, onHelp: () => void}) {\n        let div = document.createElement('div');\n        this.el = div;\n        BB.css(div, {\n            height: '36px',\n            //background: '#f00',\n            display: 'flex',\n            backgroundImage: 'linear-gradient(to top, rgba(255, 255, 255, 0) 20%, rgba(255, 255, 255, 0.6) 100%)'\n        });\n\n        function createButton(p) {\n            let padding = 6 + (p.extraPadding ? p.extraPadding : 0);\n            let result = BB.el({\n                className: 'toolspace-row-button nohighlight',\n                title: p.title,\n                onClick: p.onClick,\n                css: {\n                    padding: p.content ? '' : (p.contain ? padding + 'px 0' : ''),\n                }\n            });\n            if (p.content) {\n                result.appendChild(p.content);\n            } else {\n                let im = BB.el({\n                    css: {\n                        backgroundImage: 'url(\\'' + p.image + '\\')',\n                        backgroundRepeat: 'no-repeat',\n                        backgroundPosition: 'center',\n                        backgroundSize: p.contain ? 'contain' : '',\n                        //filter: 'grayscale(1)',\n                        height: '100%'\n                    }\n                });\n                im.style.pointerEvents = 'none';\n                result.appendChild(im);\n            }\n            (result as any).pointerListener = new BB.PointerListener({ // because :hover causes problems w touch\n                target: result,\n                onEnterLeave: function(isOver) {\n                    result.classList.toggle('toolspace-row-button-hover', isOver);\n                }\n            });\n            return result;\n        }\n\n        let submitButton = createButton({\n            onClick: p.onSubmit,\n            title: LANG('submit-title'),\n            content: BB.el({\n                content: LANG('submit'),\n                className: 'toolspace-row-button__submit',\n                css: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    width: '100%',\n                    height: '100%'\n                }\n            }),\n            contain: true\n        });\n        submitButton.style.width = '45px';\n\n        let helpButton = createButton({\n            onClick: p.onHelp,\n            title: LANG('help'),\n            image: helpImg,\n            contain: true\n        });\n\n        let leftRightButton = createButton({\n            onClick: p.onLeftRight,\n            title: LANG('switch-ui-left-right'),\n            image: uiSwapImg,\n            contain: true\n        });\n\n        div.appendChild(submitButton);\n        div.appendChild(leftRightButton);\n        div.appendChild(helpButton);\n    }\n\n    getElement() {\n        return this.el;\n    }\n}\n","import {filterLib, filterLibStatus} from './filters';\nimport {filterBrightnessContrast} from './filter-brightness-contrast';\nimport {filterCropExtend} from './filter-crop-extend';\nimport {filterCurves} from './filter-curves';\nimport {filterFlip} from './filter-flip';\nimport {filterHueSaturation} from './filter-hue-saturation';\nimport {filterInvert} from './filter-invert';\nimport {filterPerspective} from './filter-perspective';\nimport {filterResize} from './filter-resize';\nimport {filterRotate} from './filter-rotate';\nimport {filterTiltShift} from './filter-tilt-shift';\nimport {filterTransform} from './filter-transform';\nimport {filterBlur} from './filter-blur';\nimport {filterUnsharpMask} from './filter-unsharp-mask';\nimport {filterToAlpha} from './filter-to-alpha';\nimport {filterGrid} from './filter-grid';\nimport {filterNoise} from './filter-noise';\nimport {filterPattern} from './filter-pattern';\nimport {filterDistort} from './filter-distort';\nimport {filterVanishPoint} from \"./filter-vanish-point\";\n\nlet embed: boolean;\nfunction importFilter(libObj, moduleObj): void {\n    if (moduleObj.getDialog) {\n        libObj.getDialog = moduleObj.getDialog;\n    }\n    libObj.apply = moduleObj.apply;\n}\n\n\nexport function importFilters(isEmbed?: boolean) {\n    if (filterLibStatus.isLoaded) {\n        return;\n    }\n    embed = isEmbed\n\n    importFilter(filterLib.brightnessContrast, filterBrightnessContrast);\n    importFilter(filterLib.cropExtend, filterCropExtend);\n    importFilter(filterLib.curves, filterCurves);\n    importFilter(filterLib.flip, filterFlip);\n    importFilter(filterLib.hueSaturation, filterHueSaturation);\n    importFilter(filterLib.invert, filterInvert);\n    importFilter(filterLib.perspective, filterPerspective);\n    importFilter(filterLib.resize, filterResize);\n    importFilter(filterLib.rotate, filterRotate);\n    importFilter(filterLib.tiltShift, filterTiltShift);\n    importFilter(filterLib.transform, filterTransform);\n    importFilter(filterLib.blur, filterBlur);\n    importFilter(filterLib.unsharpMask, filterUnsharpMask);\n    importFilter(filterLib.toAlpha, filterToAlpha);\n    importFilter(filterLib.grid, filterGrid);\n    importFilter(filterLib.noise, filterNoise);\n    importFilter(filterLib.pattern, filterPattern);\n    importFilter(filterLib.distort, filterDistort);\n    importFilter(filterLib.vanishPoint, filterVanishPoint);\n\n    filterLibStatus.isLoaded = true;\n}","import {BB} from '../../bb/bb';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {eventResMs} from './filters-consts';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterBrightnessContrast = {\n    getDialog(params: IFilterGetDialogParam) {\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (tempCanvas.width > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n\n\n        function finishInit() {\n\n            let brightness = 0, contrast = 0;\n            div.innerHTML = LANG('filter-bright-contrast-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            let brightnessSlider = new KlSlider({\n                label: LANG('filter-bright-contrast-brightness'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 100,\n                value: (brightness + 1) * 50,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brightness = val / 50 - 1;\n                    glCanvas.draw(texture).brightnessContrast(brightness, contrast).update();\n                    klCanvasPreview.render();\n                },\n            });\n            let contrastSlider = new KlSlider({\n                label: LANG('filter-bright-contrast-contrast'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 100,\n                value: (contrast + 1) * 50,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    contrast = val / 50 - 1;\n                    glCanvas.draw(texture).brightnessContrast(brightness, contrast).update();\n                    klCanvasPreview.render();\n                },\n            });\n            brightnessSlider.getElement().style.marginBottom = \"10px\";\n            div.appendChild(brightnessSlider.getElement());\n            div.appendChild(contrastSlider.getElement());\n\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + w),\n                height: parseInt('' + h),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + w) + 'px',\n                    height: parseInt('' + h) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n            div.appendChild(previewWrapper);\n\n            try {\n                glCanvas.draw(texture).brightnessContrast(brightness, contrast).update();\n                klCanvasPreview.render();\n            } catch(e) {\n                (div as any).errorCallback(e);\n            }\n\n            result.destroy = () => {\n                brightnessSlider.destroy();\n                contrastSlider.destroy();\n                texture.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    brightness: brightness,\n                    contrast: contrast\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1); // the canvas isn't ready for some reason\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let brightness = params.input.brightness;\n        let contrast = params.input.contrast;\n        let history = params.history;\n        if (!context || brightness === null || contrast === null || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).brightnessContrast(brightness, contrast).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"brightnessContrast\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n\n        return true;\n    }\n}","\nexport const eventResMs = 60;","import {fx} from '../../../script-vendor/glfx';\n\nlet fxCanvas = null\ntry {\n    fxCanvas = fx.canvas();\n} catch (e) {\n}\n\nexport function getSharedFx() {\n    if (!fxCanvas || fxCanvas._.gl.isContextLost()) {\n        try {\n            fxCanvas = fx.canvas();\n        } catch (e) {\n        }\n    }\n    return fxCanvas;\n}","\n// @ts-ignore\nimport shaderNoise from './shader-noise.glsl';\n\n/*\n * glfx.script\n * http://evanw.github.com/glfx.js/\n *\n * Copyright 2011 Evan Wallace\n * Released under the MIT license\n *\n * modifications by bitbof\n */\nexport const fx = (function () {\n    let exports: any = {};\n\n// src/OES_texture_float_linear-polyfill.script\n// From: https://github.com/evanw/OES_texture_float_linear-polyfill\n    (function () {\n        // Uploads a 2x2 floating-point texture where one pixel is 2 and the other\n        // three pixels are 0. Linear filtering is only supported if a sample taken\n        // from the center of that texture is (2 + 0 + 0 + 0) / 4 = 0.5.\n        function supportsOESTextureFloatLinear(gl) {\n            // Need floating point textures in the first place\n            if (!gl.getExtension('OES_texture_float')) {\n                return false;\n            }\n\n            // Create a render target\n            let framebuffer = gl.createFramebuffer();\n            let byteTexture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, byteTexture);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, byteTexture, 0);\n\n            // Create a simple floating-point texture with value of 0.5 in the center\n            let rgba = [\n                2, 0, 0, 0,\n                0, 0, 0, 0,\n                0, 0, 0, 0,\n                0, 0, 0, 0\n            ];\n            let floatTexture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, floatTexture);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.FLOAT, new Float32Array(rgba));\n\n            // Create the test shader\n            let program = gl.createProgram();\n            let vertexShader = gl.createShader(gl.VERTEX_SHADER);\n            let fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n            gl.shaderSource(vertexShader, '\\\n      attribute vec2 vertex;\\\n      void main() {\\\n        gl_Position = vec4(vertex, 0.0, 1.0);\\\n      }\\\n    ');\n            gl.shaderSource(fragmentShader, '\\\n      uniform sampler2D texture;\\\n      void main() {\\\n        gl_FragColor = texture2D(texture, vec2(0.5));\\\n      }\\\n    ');\n            gl.compileShader(vertexShader);\n            gl.compileShader(fragmentShader);\n            gl.attachShader(program, vertexShader);\n            gl.attachShader(program, fragmentShader);\n            gl.linkProgram(program);\n\n            // Create a buffer containing a single point\n            let buffer = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0]), gl.STREAM_DRAW);\n            gl.enableVertexAttribArray(0);\n            gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n\n            // Render the point and read back the rendered pixel\n            let pixel = new Uint8Array(4);\n            gl.useProgram(program);\n            gl.viewport(0, 0, 1, 1);\n            gl.bindTexture(gl.TEXTURE_2D, floatTexture);\n            gl.drawArrays(gl.POINTS, 0, 1);\n            gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n\n            // The center sample will only have a value of 0.5 if linear filtering works\n            return pixel[0] === 127 || pixel[0] === 128;\n        }\n\n        // The constructor for the returned extension object\n        function OESTextureFloatLinear() {\n        }\n\n        // Cache the extension so it's specific to each context like extensions should be\n        function getOESTextureFloatLinear(gl) {\n            if (gl.$OES_texture_float_linear$ === void 0) {\n                Object.defineProperty(gl, '$OES_texture_float_linear$', {\n                    enumerable: false,\n                    configurable: false,\n                    writable: false,\n                    value: new OESTextureFloatLinear()\n                });\n            }\n            return gl.$OES_texture_float_linear$;\n        }\n\n        // This replaces the real getExtension()\n        function getExtension(name) {\n            return name === 'OES_texture_float_linear'\n                ? getOESTextureFloatLinear(this)\n                : oldGetExtension.call(this, name);\n        }\n\n        // This replaces the real getSupportedExtensions()\n        function getSupportedExtensions() {\n            let extensions = oldGetSupportedExtensions.call(this);\n            if (extensions.indexOf('OES_texture_float_linear') === -1) {\n                extensions.push('OES_texture_float_linear');\n            }\n            return extensions;\n        }\n\n        // Get a WebGL context\n        try {\n            let gl = document.createElement('canvas').getContext('experimental-webgl');\n        } catch (e) {\n        }\n\n        // Don't install the polyfill if the browser already supports it or doesn't have WebGL\n        if (!gl || (gl as any).getSupportedExtensions().indexOf('OES_texture_float_linear') !== -1) {\n            return;\n        }\n\n        // Install the polyfill if linear filtering works with floating-point textures\n        let oldGetExtension;\n        let oldGetSupportedExtensions;\n        if (supportsOESTextureFloatLinear(gl)) {\n            oldGetExtension = WebGLRenderingContext.prototype.getExtension;\n            oldGetSupportedExtensions = WebGLRenderingContext.prototype.getSupportedExtensions;\n            WebGLRenderingContext.prototype.getExtension = getExtension;\n            WebGLRenderingContext.prototype.getSupportedExtensions = getSupportedExtensions;\n        }\n    }());\n\n// src/core\\canvas.script\n    var gl;\n\n    function clamp(lo, value, hi) {\n        return Math.max(lo, Math.min(value, hi));\n    }\n\n    function wrapTexture(texture) {\n        return {\n            _: texture,\n            loadContentsOf: function (element) {\n                // Make sure that we're using the correct global WebGL context\n                gl = this._.gl;\n                this._.loadContentsOf(element);\n            },\n            destroy: function () {\n                // Make sure that we're using the correct global WebGL context\n                gl = this._.gl;\n                this._.destroy();\n            }\n        };\n    }\n\n    function texture(element) {\n        return wrapTexture(Texture.fromElement(element));\n    }\n\n    function initialize(width, height) {\n        let type = gl.UNSIGNED_BYTE;\n\n        // Go for floating point buffer textures if we can, it'll make the bokeh\n        // filter look a lot better. Note that on Windows, ANGLE does not let you\n        // render to a floating-point texture when linear filtering is enabled.\n        // See http://crbug.com/172278 for more information.\n        if (gl.getExtension('OES_texture_float') && gl.getExtension('OES_texture_float_linear')) {\n            let testTexture = new Texture(100, 100, gl.RGBA, gl.FLOAT);\n            try {\n                // Only use gl.FLOAT if we can render to it\n                testTexture.drawTo(function () {\n                    type = gl.FLOAT;\n                });\n            } catch (e) {\n            }\n            testTexture.destroy();\n        }\n\n        if (this._.texture) this._.texture.destroy();\n        if (this._.spareTexture) this._.spareTexture.destroy();\n        this.width = width;\n        this.height = height;\n        this._.texture = new Texture(width, height, gl.RGBA, type);\n        this._.spareTexture = new Texture(width, height, gl.RGBA, type);\n        this._.extraTexture = this._.extraTexture || new Texture(0, 0, gl.RGBA, type);\n        this._.flippedShader = this._.flippedShader || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            gl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\\\n        }\\\n    ', 'flippedShader');\n        this._.isInitialized = true;\n    }\n\n    /*\n       Draw a texture to the canvas, with an optional width and height to scale to.\n       If no width and height are given then the original texture width and height\n       are used.\n    */\n    function draw(texture, width, height) {\n        if (!this._.isInitialized || texture._.width != this.width || texture._.height != this.height) {\n            initialize.call(this, width ? width : texture._.width, height ? height : texture._.height);\n        }\n\n        texture._.use();\n        this._.texture.drawTo(function () {\n            Shader.getDefaultShader().drawRect();\n        });\n\n        return this;\n    }\n\n    function update() {\n        this._.texture.use();\n        this._.flippedShader.drawRect();\n        return this;\n    }\n\n    function simpleShader(shader, uniforms, textureIn, textureOut) {\n        (textureIn || this._.texture).use();\n        this._.spareTexture.drawTo(function () {\n            shader.uniforms(uniforms).drawRect();\n        });\n        this._.spareTexture.swapWith(textureOut || this._.texture);\n    }\n\n    function replace(node) {\n        node.parentNode.insertBefore(this, node);\n        node.parentNode.removeChild(node);\n        return this;\n    }\n\n    function contents() {\n        let texture = new Texture(this._.texture.width, this._.texture.height, gl.RGBA, gl.UNSIGNED_BYTE);\n        this._.texture.use();\n        texture.drawTo(function () {\n            Shader.getDefaultShader().drawRect();\n        });\n        return wrapTexture(texture);\n    }\n\n    /*\n       Get a Uint8 array of pixel values: [r, g, b, a, r, g, b, a, ...]\n       Length of the array will be width * height * 4.\n    */\n    function getPixelArray() {\n        let w = this._.texture.width;\n        let h = this._.texture.height;\n        let array = new Uint8Array(w * h * 4);\n        this._.texture.drawTo(function () {\n            gl.readPixels(0, 0, w, h, gl.RGBA, gl.UNSIGNED_BYTE, array);\n        });\n        return array;\n    }\n\n    function wrap(func) {\n        return function () {\n            // Make sure that we're using the correct global WebGL context\n            gl = this._.gl;\n\n            // Now that the context has been switched, we can call the wrapped function\n            return func.apply(this, arguments);\n        };\n    }\n\n    exports.canvas = function () {\n        let canvas: any = document.createElement('canvas');\n        try {\n            gl = canvas.getContext('experimental-webgl', {premultipliedAlpha: false});\n        } catch (e) {\n            gl = null;\n        }\n        if (!gl) {\n            throw 'This browser does not support WebGL';\n        }\n        canvas._ = {\n            gl: gl,\n            isInitialized: false,\n            texture: null,\n            spareTexture: null,\n            flippedShader: null\n        };\n\n        // Core methods\n        canvas.texture = wrap(texture);\n        canvas.draw = wrap(draw);\n        canvas.update = wrap(update);\n        canvas.replace = wrap(replace);\n        canvas.contents = wrap(contents);\n        canvas.getPixelArray = wrap(getPixelArray);\n\n        // Filter methods\n        canvas.brightnessContrast = wrap(brightnessContrast);\n        canvas.hexagonalPixelate = wrap(hexagonalPixelate);\n        canvas.hueSaturation = wrap(hueSaturation);\n        canvas.colorHalftone = wrap(colorHalftone);\n        canvas.triangleBlur = wrap(triangleBlur);\n        canvas.unsharpMask = wrap(unsharpMask);\n        canvas.perspective = wrap(perspective);\n        canvas.matrixWarp = wrap(matrixWarp);\n        canvas.bulgePinch = wrap(bulgePinch);\n        canvas.tiltShift = wrap(tiltShift);\n        canvas.dotScreen = wrap(dotScreen);\n        canvas.edgeWork = wrap(edgeWork);\n        canvas.lensBlur = wrap(lensBlur);\n        canvas.zoomBlur = wrap(zoomBlur);\n        canvas.noise = wrap(noise);\n        canvas.denoise = wrap(denoise);\n        canvas.curves = wrap(curves);\n        canvas.swirl = wrap(swirl);\n        canvas.ink = wrap(ink);\n        canvas.vignette = wrap(vignette);\n        canvas.vibrance = wrap(vibrance);\n        canvas.sepia = wrap(sepia);\n        canvas.invert = wrap(invert);\n        canvas.multiplyAlpha = wrap(multiplyAlpha);\n        canvas.unmultiplyAlpha = wrap(unmultiplyAlpha);\n        canvas.toAlpha = wrap(toAlpha);\n        canvas.distort = wrap(distort);\n\n        return canvas;\n    };\n    exports.splineInterpolate = splineInterpolate;\n\n// src/core\\matrix.script\n// from javax.media.jai.PerspectiveTransform\n\n    function getSquareToQuad(x0, y0, x1, y1, x2, y2, x3, y3) {\n        let dx1 = x1 - x2;\n        let dy1 = y1 - y2;\n        let dx2 = x3 - x2;\n        let dy2 = y3 - y2;\n        let dx3 = x0 - x1 + x2 - x3;\n        let dy3 = y0 - y1 + y2 - y3;\n        let det = dx1 * dy2 - dx2 * dy1;\n        let a = (dx3 * dy2 - dx2 * dy3) / det;\n        let b = (dx1 * dy3 - dx3 * dy1) / det;\n        return [\n            x1 - x0 + a * x1, y1 - y0 + a * y1, a,\n            x3 - x0 + b * x3, y3 - y0 + b * y3, b,\n            x0, y0, 1\n        ];\n    }\n\n    function getInverse(m) {\n        let a = m[0], b = m[1], c = m[2];\n        let d = m[3], e = m[4], f = m[5];\n        let g = m[6], h = m[7], i = m[8];\n        let det = a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n        return [\n            (e * i - f * h) / det, (c * h - b * i) / det, (b * f - c * e) / det,\n            (f * g - d * i) / det, (a * i - c * g) / det, (c * d - a * f) / det,\n            (d * h - e * g) / det, (b * g - a * h) / det, (a * e - b * d) / det\n        ];\n    }\n\n    function multiply(a, b) {\n        return [\n            a[0] * b[0] + a[1] * b[3] + a[2] * b[6],\n            a[0] * b[1] + a[1] * b[4] + a[2] * b[7],\n            a[0] * b[2] + a[1] * b[5] + a[2] * b[8],\n            a[3] * b[0] + a[4] * b[3] + a[5] * b[6],\n            a[3] * b[1] + a[4] * b[4] + a[5] * b[7],\n            a[3] * b[2] + a[4] * b[5] + a[5] * b[8],\n            a[6] * b[0] + a[7] * b[3] + a[8] * b[6],\n            a[6] * b[1] + a[7] * b[4] + a[8] * b[7],\n            a[6] * b[2] + a[7] * b[5] + a[8] * b[8]\n        ];\n    }\n\n// src/core\\shader.script\n    var Shader = (function () {\n        function isArray(obj) {\n            return Object.prototype.toString.call(obj) == '[object Array]';\n        }\n\n        function isNumber(obj) {\n            return Object.prototype.toString.call(obj) == '[object Number]';\n        }\n\n        function compileSource(type, source, nameStr) {\n            let shader = gl.createShader(type);\n            gl.shaderSource(shader, source.replace(/#define.*/, '')); // glslify adds a line add the beginning that breaks it\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                throw 'compile error: ' + nameStr + ' - ' + gl.getShaderInfoLog(shader);\n            }\n            return shader;\n        }\n\n        let defaultVertexSource = '\\\n    attribute vec2 vertex;\\\n    attribute vec2 _texCoord;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n        texCoord = _texCoord;\\\n        gl_Position = vec4(vertex * 2.0 - 1.0, 0.0, 1.0);\\\n    }';\n\n        let defaultFragmentSource = '\\\n    uniform sampler2D texture;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n        gl_FragColor = texture2D(texture, texCoord);\\\n    }';\n\n        // added test 2020-04-27 bitbof\n        let floatPrecision = null;\n\n        function testPrecisionSupport(precisionType) {\n            let format = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, precisionType);\n            return format !== null && format.precision !== 0;\n        }\n\n        function Shader(vertexSource?, fragmentSource?, nameStr?) {\n            this.vertexAttribute = null;\n            this.texCoordAttribute = null;\n            this.program = gl.createProgram();\n            vertexSource = vertexSource || defaultVertexSource;\n            fragmentSource = fragmentSource || defaultFragmentSource;\n            if (floatPrecision === null) {\n                floatPrecision = testPrecisionSupport(gl.HIGH_FLOAT) ? 'highp' : (testPrecisionSupport(gl.MEDIUM_FLOAT) ? 'mediump' : 'lowp');\n            }\n            fragmentSource = 'precision ' + floatPrecision + ' float;' + fragmentSource; // annoying requirement is annoying\n            gl.attachShader(this.program, compileSource(gl.VERTEX_SHADER, vertexSource, nameStr + '(vertex)'));\n            gl.attachShader(this.program, compileSource(gl.FRAGMENT_SHADER, fragmentSource, nameStr + '(fragment)'));\n            gl.linkProgram(this.program);\n            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n                throw 'link error: ' + gl.getProgramInfoLog(this.program);\n            }\n        }\n\n        Shader.prototype.destroy = function () {\n            gl.deleteProgram(this.program);\n            this.program = null;\n        };\n\n        Shader.prototype.uniforms = function (uniforms) {\n            gl.useProgram(this.program);\n            for (var name in uniforms) {\n                if (!uniforms.hasOwnProperty(name)) continue;\n                let location = gl.getUniformLocation(this.program, name);\n                if (location === null) continue; // will be null if the uniform isn't used in the shader\n                let value = uniforms[name];\n                if (isArray(value)) {\n                    switch (value.length) {\n                        case 1:\n                            gl.uniform1fv(location, new Float32Array(value));\n                            break;\n                        case 2:\n                            gl.uniform2fv(location, new Float32Array(value));\n                            break;\n                        case 3:\n                            gl.uniform3fv(location, new Float32Array(value));\n                            break;\n                        case 4:\n                            gl.uniform4fv(location, new Float32Array(value));\n                            break;\n                        case 9:\n                            gl.uniformMatrix3fv(location, false, new Float32Array(value));\n                            break;\n                        case 16:\n                            gl.uniformMatrix4fv(location, false, new Float32Array(value));\n                            break;\n                        default:\n                            throw 'dont\\'t know how to load uniform \"' + name + '\" of length ' + value.length;\n                    }\n                } else if (isNumber(value)) {\n                    gl.uniform1f(location, value);\n                } else {\n                    throw 'attempted to set uniform \"' + name + '\" to invalid value ' + (value || 'undefined').toString();\n                }\n            }\n            // allow chaining\n            return this;\n        };\n\n        // textures are uniforms too but for some reason can't be specified by gl.uniform1f,\n        // even though floating point numbers represent the integers 0 through 7 exactly\n        Shader.prototype.textures = function (textures) {\n            gl.useProgram(this.program);\n            for (var name in textures) {\n                if (!textures.hasOwnProperty(name)) continue;\n                gl.uniform1i(gl.getUniformLocation(this.program, name), textures[name]);\n            }\n            // allow chaining\n            return this;\n        };\n\n        Shader.prototype.drawRect = function (left, top, right, bottom) {\n            let undefined;\n            let viewport = gl.getParameter(gl.VIEWPORT);\n            top = top !== undefined ? (top - viewport[1]) / viewport[3] : 0;\n            left = left !== undefined ? (left - viewport[0]) / viewport[2] : 0;\n            right = right !== undefined ? (right - viewport[0]) / viewport[2] : 1;\n            bottom = bottom !== undefined ? (bottom - viewport[1]) / viewport[3] : 1;\n            if (gl.vertexBuffer == null) {\n                gl.vertexBuffer = gl.createBuffer();\n            }\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([left, top, left, bottom, right, top, right, bottom]), gl.STATIC_DRAW);\n            if (gl.texCoordBuffer == null) {\n                gl.texCoordBuffer = gl.createBuffer();\n                gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);\n                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW);\n            }\n            if (this.vertexAttribute == null) {\n                this.vertexAttribute = gl.getAttribLocation(this.program, 'vertex');\n                gl.enableVertexAttribArray(this.vertexAttribute);\n            }\n            if (this.texCoordAttribute == null) {\n                this.texCoordAttribute = gl.getAttribLocation(this.program, '_texCoord');\n                gl.enableVertexAttribArray(this.texCoordAttribute);\n            }\n            gl.useProgram(this.program);\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);\n            gl.vertexAttribPointer(this.vertexAttribute, 2, gl.FLOAT, false, 0, 0);\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);\n            gl.vertexAttribPointer(this.texCoordAttribute, 2, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        };\n\n        Shader.getDefaultShader = function () {\n            gl.defaultShader = gl.defaultShader || new Shader();\n            return gl.defaultShader;\n        };\n\n        return Shader;\n    })();\n\n// src/core\\spline.script\n// from SplineInterpolator.cs in the Paint.NET source code\n\n    function SplineInterpolator(points) {\n        let n = points.length;\n        this.xa = [];\n        this.ya = [];\n        this.u = [];\n        this.y2 = [];\n\n        points.sort(function (a, b) {\n            return a[0] - b[0];\n        });\n        for (var i = 0; i < n; i++) {\n            this.xa.push(points[i][0]);\n            this.ya.push(points[i][1]);\n        }\n\n        this.u[0] = 0;\n        this.y2[0] = 0;\n\n        for (var i = 1; i < n - 1; ++i) {\n            // This is the decomposition loop of the tridiagonal algorithm.\n            // y2 and u are used for temporary storage of the decomposed factors.\n            let wx = this.xa[i + 1] - this.xa[i - 1];\n            let sig = (this.xa[i] - this.xa[i - 1]) / wx;\n            let p = sig * this.y2[i - 1] + 2.0;\n\n            this.y2[i] = (sig - 1.0) / p;\n\n            let ddydx =\n                (this.ya[i + 1] - this.ya[i]) / (this.xa[i + 1] - this.xa[i]) -\n                (this.ya[i] - this.ya[i - 1]) / (this.xa[i] - this.xa[i - 1]);\n\n            this.u[i] = (6.0 * ddydx / wx - sig * this.u[i - 1]) / p;\n        }\n\n        this.y2[n - 1] = 0;\n\n        // This is the backsubstitution loop of the tridiagonal algorithm\n        for (var i = n - 2; i >= 0; --i) {\n            this.y2[i] = this.y2[i] * this.y2[i + 1] + this.u[i];\n        }\n    }\n\n    SplineInterpolator.prototype.interpolate = function (x) {\n        let n = this.ya.length;\n        let klo = 0;\n        let khi = n - 1;\n\n        // We will find the right place in the table by means of\n        // bisection. This is optimal if sequential calls to this\n        // routine are at random values of x. If sequential calls\n        // are in order, and closely spaced, one would do better\n        // to store previous values of klo and khi.\n        while (khi - klo > 1) {\n            let k = (khi + klo) >> 1;\n\n            if (this.xa[k] > x) {\n                khi = k;\n            } else {\n                klo = k;\n            }\n        }\n\n        let h = this.xa[khi] - this.xa[klo];\n        let a = (this.xa[khi] - x) / h;\n        let b = (x - this.xa[klo]) / h;\n\n        // Cubic spline polynomial is now evaluated.\n        return a * this.ya[klo] + b * this.ya[khi] +\n            ((a * a * a - a) * this.y2[klo] + (b * b * b - b) * this.y2[khi]) * (h * h) / 6.0;\n    };\n\n// src/core\\texture.script\n    var Texture = (function () {\n        Texture.fromElement = function (element) {\n            let texture = new Texture(0, 0, gl.RGBA, gl.UNSIGNED_BYTE);\n            texture.loadContentsOf(element);\n            return texture;\n        };\n\n        function Texture(width, height, format, type) {\n            this.gl = gl;\n            this.id = gl.createTexture();\n            this.width = width;\n            this.height = height;\n            this.format = format;\n            this.type = type;\n\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            if (width && height) gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, null);\n        }\n\n        Texture.prototype.loadContentsOf = function (element) {\n            this.width = element.width || element.videoWidth;\n            this.height = element.height || element.videoHeight;\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texImage2D(gl.TEXTURE_2D, 0, this.format, this.format, this.type, element);\n        };\n\n        Texture.prototype.initFromBytes = function (width, height, data) {\n            this.width = width;\n            this.height = height;\n            this.format = gl.RGBA;\n            this.type = gl.UNSIGNED_BYTE;\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, this.type, new Uint8Array(data));\n        };\n\n        Texture.prototype.destroy = function () {\n            gl.deleteTexture(this.id);\n            this.id = null;\n        };\n\n        Texture.prototype.use = function (unit) {\n            gl.activeTexture(gl.TEXTURE0 + (unit || 0));\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n        };\n\n        Texture.prototype.unuse = function (unit) {\n            gl.activeTexture(gl.TEXTURE0 + (unit || 0));\n            gl.bindTexture(gl.TEXTURE_2D, null);\n        };\n\n        Texture.prototype.ensureFormat = function (width, height, format, type) {\n            // allow passing an existing texture instead of individual arguments\n            if (arguments.length == 1) {\n                let texture = arguments[0];\n                width = texture.width;\n                height = texture.height;\n                format = texture.format;\n                type = texture.type;\n            }\n\n            // change the format only if required\n            if (width != this.width || height != this.height || format != this.format || type != this.type) {\n                this.width = width;\n                this.height = height;\n                this.format = format;\n                this.type = type;\n                gl.bindTexture(gl.TEXTURE_2D, this.id);\n                gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, null);\n            }\n        };\n\n        Texture.prototype.drawTo = function (callback) {\n            // start rendering to this texture\n            gl.framebuffer = gl.framebuffer || gl.createFramebuffer();\n            gl.bindFramebuffer(gl.FRAMEBUFFER, gl.framebuffer);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.id, 0);\n            if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) {\n                throw new Error('incomplete framebuffer');\n            }\n            gl.viewport(0, 0, this.width, this.height);\n\n            // do the drawing\n            callback();\n\n            // stop rendering to this texture\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        };\n\n        let canvas = null;\n\n        function getCanvas(texture) {\n            if (canvas == null) canvas = document.createElement('canvas');\n            canvas.width = texture.width;\n            canvas.height = texture.height;\n            let c = canvas.getContext('2d');\n            c.clearRect(0, 0, canvas.width, canvas.height);\n            return c;\n        }\n\n        Texture.prototype.fillUsingCanvas = function (callback) {\n            callback(getCanvas(this));\n            this.format = gl.RGBA;\n            this.type = gl.UNSIGNED_BYTE;\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);\n            return this;\n        };\n\n        Texture.prototype.toImage = function (image) {\n            this.use();\n            Shader.getDefaultShader().drawRect();\n            let size = this.width * this.height * 4;\n            let pixels = new Uint8Array(size);\n            let c = getCanvas(this);\n            let data = c.createImageData(this.width, this.height);\n            gl.readPixels(0, 0, this.width, this.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n            for (var i = 0; i < size; i++) {\n                data.data[i] = pixels[i];\n            }\n            c.putImageData(data, 0, 0);\n            image.src = canvas.toDataURL();\n        };\n\n        Texture.prototype.swapWith = function (other) {\n            let temp;\n            temp = other.id;\n            other.id = this.id;\n            this.id = temp;\n            temp = other.width;\n            other.width = this.width;\n            this.width = temp;\n            temp = other.height;\n            other.height = this.height;\n            this.height = temp;\n            temp = other.format;\n            other.format = this.format;\n            this.format = temp;\n        };\n\n        return Texture;\n    })();\n\n// src/filters\\common.script\n    function warpShader(uniforms, warp) {\n        return new Shader(null, uniforms + '\\\n    uniform sampler2D texture;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n        vec2 coord = texCoord * texSize;\\\n        ' + warp + '\\\n        gl_FragColor = texture2D(texture, coord / texSize);\\\n        vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);\\\n        if (coord != clampedCoord) {\\\n            /* fade to transparent if we are outside the image */\\\n            gl_FragColor.a *= max(0.0, 1.0 - length(coord - clampedCoord));\\\n        }\\\n    }', 'warp');\n    }\n\n// returns a random number between 0 and 1\n    var randomShaderFunc = '\\\n    float random(vec3 scale, float seed) {\\\n        /* use the fragment position for a different seed per-pixel */\\\n        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\\\n    }\\\n';\n\n// src/filters\\adjust\\brightnesscontrast.script\n    /**\n     * @filter           Brightness / Contrast\n     * @description      Provides additive brightness and multiplicative contrast control.\n     * @param brightness -1 to 1 (-1 is solid black, 0 is no change, and 1 is solid white)\n     * @param contrast   -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n     */\n    function brightnessContrast(brightness, contrast) {\n        gl.brightnessContrast = gl.brightnessContrast || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float brightness;\\\n        uniform float contrast;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            color.rgb += brightness;\\\n            if (contrast > 0.0) {\\\n                color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\\\n            } else {\\\n                color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\\\n            }\\\n            gl_FragColor = color;\\\n        }\\\n    ', 'brightnessContrast');\n\n        simpleShader.call(this, gl.brightnessContrast, {\n            brightness: clamp(-1, brightness, 1),\n            contrast: clamp(-1, contrast, 1)\n        });\n\n        return this;\n    }\n\n// src/filters\\adjust\\curves.script\n    function splineInterpolate(points) {\n        let interpolator = new SplineInterpolator(points);\n        let array = [];\n        for (var i = 0; i < 256; i++) {\n            array.push(clamp(0, Math.floor(interpolator.interpolate(i / 255) * 256), 255));\n        }\n        return array;\n    }\n\n    /**\n     * @filter      Curves\n     * @description A powerful mapping tool that transforms the colors in the image\n     *              by an arbitrary function. The function is interpolated between\n     *              a set of 2D points using splines. The curves filter can take\n     *              either one or three arguments which will apply the mapping to\n     *              either luminance or RGB values, respectively.\n     * @param red   A list of points that define the function for the red channel.\n     *              Each point is a list of two values: the value before the mapping\n     *              and the value after the mapping, both in the range 0 to 1. For\n     *              example, [[0,1], [1,0]] would invert the red channel while\n     *              [[0,0], [1,1]] would leave the red channel unchanged. If green\n     *              and blue are omitted then this argument also applies to the\n     *              green and blue channels.\n     * @param green (optional) A list of points that define the function for the green\n     *              channel (just like for red).\n     * @param blue  (optional) A list of points that define the function for the blue\n     *              channel (just like for red).\n     */\n    function curves(red, green, blue) {\n        // Create the ramp texture\n        red = splineInterpolate(red);\n        if (arguments.length == 1) {\n            green = blue = red;\n        } else {\n            green = splineInterpolate(green);\n            blue = splineInterpolate(blue);\n        }\n        let array = [];\n        for (var i = 0; i < 256; i++) {\n            array.splice(array.length, 0, red[i], green[i], blue[i], 255);\n        }\n        this._.extraTexture.initFromBytes(256, 1, array);\n        this._.extraTexture.use(1);\n\n        gl.curves = gl.curves || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform sampler2D map;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            color.r = texture2D(map, vec2(color.r)).r;\\\n            color.g = texture2D(map, vec2(color.g)).g;\\\n            color.b = texture2D(map, vec2(color.b)).b;\\\n            gl_FragColor = color;\\\n        }\\\n    ', 'curves');\n\n        gl.curves.textures({\n            map: 1\n        });\n        simpleShader.call(this, gl.curves, {});\n\n        return this;\n    }\n\n// src/filters\\adjust\\denoise.script\n    /**\n     * @filter         Denoise\n     * @description    Smooths over grainy noise in dark images using an 9x9 box filter\n     *                 weighted by color intensity, similar to a bilateral filter.\n     * @param exponent The exponent of the color intensity difference, should be greater\n     *                 than zero. A value of zero just gives an 9x9 box blur and high values\n     *                 give the original image, but ideal values are usually around 10-20.\n     */\n    function denoise(exponent) {\n        // Do a 9x9 bilateral box filter\n        gl.denoise = gl.denoise || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float exponent;\\\n        uniform float strength;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 center = texture2D(texture, texCoord);\\\n            vec4 color = vec4(0.0);\\\n            float total = 0.0;\\\n            for (float x = -4.0; x <= 4.0; x += 1.0) {\\\n                for (float y = -4.0; y <= 4.0; y += 1.0) {\\\n                    vec4 sample = texture2D(texture, texCoord + vec2(x, y) / texSize);\\\n                    float weight = 1.0 - abs(dot(sample.rgb - center.rgb, vec3(0.25)));\\\n                    weight = pow(weight, exponent);\\\n                    color += sample * weight;\\\n                    total += weight;\\\n                }\\\n            }\\\n            gl_FragColor = color / total;\\\n        }\\\n    ', 'denoise');\n\n        // Perform two iterations for stronger results\n        for (var i = 0; i < 2; i++) {\n            simpleShader.call(this, gl.denoise, {\n                exponent: Math.max(0, exponent),\n                texSize: [this.width, this.height]\n            });\n        }\n\n        return this;\n    }\n\n// src/filters\\adjust\\huesaturation.script\n    /**\n     * @filter           Hue / Saturation\n     * @description      Provides rotational hue and multiplicative saturation control. RGB color space\n     *                   can be imagined as a cube where the axes are the red, green, and blue color\n     *                   values. Hue changing works by rotating the color vector around the grayscale\n     *                   line, which is the straight line from black (0, 0, 0) to white (1, 1, 1).\n     *                   Saturation is implemented by scaling all color channel values either toward\n     *                   or away from the average color channel value.\n     * @param hue        -1 to 1 (-1 is 180 degree rotation in the negative direction, 0 is no change,\n     *                   and 1 is 180 degree rotation in the positive direction)\n     * @param saturation -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n     */\n    function hueSaturation(hue, saturation) {\n        gl.hueSaturation = gl.hueSaturation || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float hue;\\\n        uniform float saturation;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            \\\n            /* hue adjustment, wolfram alpha: RotationTransform[angle, {1, 1, 1}][{x, y, z}] */\\\n            float angle = hue * 3.14159265;\\\n            float s = sin(angle), c = cos(angle);\\\n            vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\\\n            float len = length(color.rgb);\\\n            color.rgb = vec3(\\\n                dot(color.rgb, weights.xyz),\\\n                dot(color.rgb, weights.zxy),\\\n                dot(color.rgb, weights.yzx)\\\n            );\\\n            \\\n            /* saturation adjustment */\\\n            float average = (color.r + color.g + color.b) / 3.0;\\\n            if (saturation > 0.0) {\\\n                color.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\\\n            } else {\\\n                color.rgb += (average - color.rgb) * (-saturation);\\\n            }\\\n            \\\n            gl_FragColor = color;\\\n        }\\\n    ', 'hueSaturation');\n\n        simpleShader.call(this, gl.hueSaturation, {\n            hue: clamp(-1, hue, 1),\n            saturation: clamp(-1, saturation, 1)\n        });\n\n        return this;\n    }\n\n// src/filters\\adjust\\noise.script\n    /**\n     * @filter         Noise\n     * @description    draws noise, completely replaces original image\n     * @param seed\n     * @param type\n     * @param scale\n     * @param offset\n     * @param octaves\n     * @param samples\n     * @param peaks\n     * @param brightness\n     * @param contrast\n     * @param isReversed\n     * @param colA\n     * @param colB\n     * @param channels\n     */\n    function noise(\n        seed: number, // float, any value okay\n        type: number, // 1 value, 2 simplex, 3 cellular\n        scale: [number, number], // float, small scale will show repeating patterns\n        offset: [number, number], // offset x, y - large offsets will show repeating patterns\n        octaves: number, // int 0 - 4\n        samples: number, // 1 | 4 | 8 -> super-sampling\n        peaks: number, // how often it will ramp *additionally* from 0 to 1\n        brightness: number, // range [-1, 1]\n        contrast: number, // range [-1, 1]\n        isReversed: boolean, // reverse 0-1 range\n        colA: {r: number, g: number, b: number}, // which color at 0, if rgb\n        colB: {r: number, g: number, b: number}, // which color at 1, if rgb\n        channels: 'rgb' | 'alpha', // which channel to target\n    ) {\n        gl.noise = gl.noise || new Shader(null, shaderNoise.replace(/#define.*/, ''), 'noise');\n        simpleShader.call(this, gl.noise, {\n            seed,\n            type,\n            scale: [scale[0], scale[1]],\n            offset,\n            octaves,\n            samples,\n            texSize: [this.width, this.height],\n            peaks,\n            brightness,\n            contrast,\n            isReversed: isReversed ? 1.0 : 0.0,\n            colA: colA ? [colA.r / 255, colA.g / 255, colA.b / 255] : [0, 0, 0],\n            colB: colB ? [colB.r / 255, colB.g / 255, colB.b / 255] : [1, 1, 1],\n            channels: channels === 'rgb' ? 0 : 1,\n        });\n\n        return this;\n    }\n\n// src/filters\\adjust\\sepia.script\n    /**\n     * @filter         Sepia\n     * @description    Gives the image a reddish-brown monochrome tint that imitates an old photograph.\n     * @param amount   0 to 1 (0 for no effect, 1 for full sepia coloring)\n     */\n    function sepia(amount) {\n        gl.sepia = gl.sepia || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float amount;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            float r = color.r;\\\n            float g = color.g;\\\n            float b = color.b;\\\n            \\\n            color.r = min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));\\\n            color.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));\\\n            color.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));\\\n            \\\n            gl_FragColor = color;\\\n        }\\\n    ', 'sepia');\n\n        simpleShader.call(this, gl.sepia, {\n            amount: clamp(0, amount, 1)\n        });\n\n        return this;\n    }\n\n// src/filters\\adjust\\unsharpmask.script\n    /**\n     * @filter         Unsharp Mask\n     * @description    A form of image sharpening that amplifies high-frequencies in the image. It\n     *                 is implemented by scaling pixels away from the average of their neighbors.\n     * @param radius   The blur radius that calculates the average of the neighboring pixels.\n     * @param strength A scale factor where 0 is no effect and higher values cause a stronger effect.\n     */\n    function unsharpMask(radius, strength) {\n        gl.unsharpMask = gl.unsharpMask || new Shader(null, '\\\n        uniform sampler2D blurredTexture;\\\n        uniform sampler2D originalTexture;\\\n        uniform float strength;\\\n        uniform float threshold;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 blurred = texture2D(blurredTexture, texCoord);\\\n            vec4 original = texture2D(originalTexture, texCoord);\\\n            gl_FragColor = mix(blurred, original, 1.0 + strength);\\\n        }\\\n    ', 'unsharpMask');\n\n        // Store a copy of the current texture in the second texture unit\n        this._.extraTexture.ensureFormat(this._.texture);\n        this._.texture.use();\n        this._.extraTexture.drawTo(function () {\n            Shader.getDefaultShader().drawRect();\n        });\n\n        // Blur the current texture, then use the stored texture to detect edges\n        this._.extraTexture.use(1);\n        this.triangleBlur(radius);\n        gl.unsharpMask.textures({\n            originalTexture: 1\n        });\n        simpleShader.call(this, gl.unsharpMask, {\n            strength: strength\n        });\n        this._.extraTexture.unuse(1);\n\n        return this;\n    }\n\n// src/filters\\adjust\\vibrance.script\n    /**\n     * @filter       Vibrance\n     * @description  Modifies the saturation of desaturated colors, leaving saturated colors unmodified.\n     * @param amount -1 to 1 (-1 is minimum vibrance, 0 is no change, and 1 is maximum vibrance)\n     */\n    function vibrance(amount) {\n        gl.vibrance = gl.vibrance || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float amount;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            float average = (color.r + color.g + color.b) / 3.0;\\\n            float mx = max(color.r, max(color.g, color.b));\\\n            float amt = (mx - average) * (-amount * 3.0);\\\n            color.rgb = mix(color.rgb, vec3(mx), amt);\\\n            gl_FragColor = color;\\\n        }\\\n    ', 'vibrance');\n\n        simpleShader.call(this, gl.vibrance, {\n            amount: clamp(-1, amount, 1)\n        });\n\n        return this;\n    }\n\n// src/filters\\adjust\\vignette.script\n    /**\n     * @filter         Vignette\n     * @description    Adds a simulated lens edge darkening effect.\n     * @param size     0 to 1 (0 for center of frame, 1 for edge of frame)\n     * @param amount   0 to 1 (0 for no effect, 1 for maximum lens darkening)\n     */\n    function vignette(size, amount) {\n        gl.vignette = gl.vignette || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float size;\\\n        uniform float amount;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            \\\n            float dist = distance(texCoord, vec2(0.5, 0.5));\\\n            color.rgb *= smoothstep(0.8, size * 0.799, dist * (amount + size));\\\n            \\\n            gl_FragColor = color;\\\n        }\\\n    ', 'vignette');\n\n        simpleShader.call(this, gl.vignette, {\n            size: clamp(0, size, 1),\n            amount: clamp(0, amount, 1)\n        });\n\n        return this;\n    }\n\n// src/filters\\blur\\lensblur.script\n    /**\n     * @filter           Lens Blur\n     * @description      Imitates a camera capturing the image out of focus by using a blur that generates\n     *                   the large shapes known as bokeh. The polygonal shape of real bokeh is due to the\n     *                   blades of the aperture diaphragm when it isn't fully open. This blur renders\n     *                   bokeh from a 6-bladed diaphragm because the computation is more efficient. It\n     *                   can be separated into three rhombi, each of which is just a skewed box blur.\n     *                   This filter makes use of the floating point texture WebGL extension to implement\n     *                   the brightness parameter, so there will be severe visual artifacts if brightness\n     *                   is non-zero and the floating point texture extension is not available. The\n     *                   idea was from John White's SIGGRAPH 2011 talk but this effect has an additional\n     *                   brightness parameter that fakes what would otherwise come from a HDR source.\n     * @param radius     the radius of the hexagonal disk convolved with the image\n     * @param brightness -1 to 1 (the brightness of the bokeh, negative values will create dark bokeh)\n     * @param angle      the rotation of the bokeh in radians\n     */\n    function lensBlur(radius, brightness, angle) {\n        // All averaging is done on values raised to a power to make more obvious bokeh\n        // (we will raise the average to the inverse power at the end to compensate).\n        // Without this the image looks almost like a normal blurred image. This hack is\n        // obviously not realistic, but to accurately simulate this we would need a high\n        // dynamic range source photograph which we don't have.\n        gl.lensBlurPrePass = gl.lensBlurPrePass || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float power;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            color = pow(color, vec4(power));\\\n            gl_FragColor = vec4(color);\\\n        }\\\n    ', 'lensBlurPrePass');\n\n        let common = '\\\n        uniform sampler2D texture0;\\\n        uniform sampler2D texture1;\\\n        uniform vec2 delta0;\\\n        uniform vec2 delta1;\\\n        uniform float power;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        vec4 sample(vec2 delta) {\\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(delta, 151.7182), 0.0);\\\n            \\\n            vec4 color = vec4(0.0);\\\n            float total = 0.0;\\\n            for (float t = 0.0; t <= 30.0; t++) {\\\n                float percent = (t + offset) / 30.0;\\\n                color += texture2D(texture0, texCoord + delta * percent);\\\n                total += 1.0;\\\n            }\\\n            return color / total;\\\n        }\\\n    ';\n\n        gl.lensBlur0 = gl.lensBlur0 || new Shader(null, common + '\\\n        void main() {\\\n            gl_FragColor = sample(delta0);\\\n        }\\\n    ', 'lensBlur0');\n        gl.lensBlur1 = gl.lensBlur1 || new Shader(null, common + '\\\n        void main() {\\\n            gl_FragColor = (sample(delta0) + sample(delta1)) * 0.5;\\\n        }\\\n    ', 'lensBlur1');\n        gl.lensBlur2 = gl.lensBlur2 || new Shader(null, common + '\\\n        void main() {\\\n            vec4 color = (sample(delta0) + 2.0 * texture2D(texture1, texCoord)) / 3.0;\\\n            gl_FragColor = pow(color, vec4(power));\\\n        }\\\n    ', 'lensBlur2').textures({texture1: 1});\n\n        // Generate\n        let dir = [];\n        for (var i = 0; i < 3; i++) {\n            let a = angle + i * Math.PI * 2 / 3;\n            dir.push([radius * Math.sin(a) / this.width, radius * Math.cos(a) / this.height]);\n        }\n        let power = Math.pow(10, clamp(-1, brightness, 1));\n\n        // Remap the texture values, which will help make the bokeh effect\n        simpleShader.call(this, gl.lensBlurPrePass, {\n            power: power\n        });\n\n        // Blur two rhombi in parallel into extraTexture\n        this._.extraTexture.ensureFormat(this._.texture);\n        simpleShader.call(this, gl.lensBlur0, {\n            delta0: dir[0]\n        }, this._.texture, this._.extraTexture);\n        simpleShader.call(this, gl.lensBlur1, {\n            delta0: dir[1],\n            delta1: dir[2]\n        }, this._.extraTexture, this._.extraTexture);\n\n        // Blur the last rhombus and combine with extraTexture\n        simpleShader.call(this, gl.lensBlur0, {\n            delta0: dir[1]\n        });\n        this._.extraTexture.use(1);\n        simpleShader.call(this, gl.lensBlur2, {\n            power: 1 / power,\n            delta0: dir[2]\n        });\n\n        return this;\n    }\n\n// src/filters\\blur\\tiltshift.script\n    /**\n     * @filter               Tilt Shift\n     * @description          Simulates the shallow depth of field normally encountered in close-up\n     *                       photography, which makes the scene seem much smaller than it actually\n     *                       is. This filter assumes the scene is relatively planar, in which case\n     *                       the part of the scene that is completely in focus can be described by\n     *                       a line (the intersection of the focal plane and the scene). An example\n     *                       of a planar scene might be looking at a road from above at a downward\n     *                       angle. The image is then blurred with a blur radius that starts at zero\n     *                       on the line and increases further from the line.\n     * @param startX         The x coordinate of the start of the line segment.\n     * @param startY         The y coordinate of the start of the line segment.\n     * @param endX           The x coordinate of the end of the line segment.\n     * @param endY           The y coordinate of the end of the line segment.\n     * @param blurRadius     The maximum radius of the pyramid blur.\n     * @param gradientRadius The distance from the line at which the maximum blur radius is reached.\n     */\n    function tiltShift(startX, startY, endX, endY, blurRadius, gradientRadius) {\n        gl.tiltShift = gl.tiltShift || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float blurRadius;\\\n        uniform float gradientRadius;\\\n        uniform vec2 start;\\\n        uniform vec2 end;\\\n        uniform vec2 delta;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        void main() {\\\n            vec4 color = vec4(0.0);\\\n            float total = 0.0;\\\n            \\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n            \\\n            vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\\\n            float radius = smoothstep(0.0, 1.0, abs(dot(texCoord * texSize - start, normal)) / gradientRadius) * blurRadius;\\\n            for (float t = -30.0; t <= 30.0; t++) {\\\n                float percent = (t + offset - 0.5) / 30.0;\\\n                float weight = 1.0 - abs(percent);\\\n                vec4 sample = texture2D(texture, texCoord + delta / texSize * percent * radius);\\\n                \\\n                /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n                sample.rgb *= sample.a;\\\n                \\\n                color += sample * weight;\\\n                total += weight;\\\n            }\\\n            \\\n            gl_FragColor = color / total;\\\n            \\\n            /* switch back from pre-multiplied alpha */\\\n            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n        }\\\n    ', 'tiltShift');\n\n        let dx = endX - startX;\n        let dy = endY - startY;\n        let d = Math.sqrt(dx * dx + dy * dy);\n        simpleShader.call(this, gl.tiltShift, {\n            blurRadius: blurRadius,\n            gradientRadius: gradientRadius,\n            start: [startX, startY],\n            end: [endX, endY],\n            delta: [dx / d, dy / d],\n            texSize: [this.width, this.height]\n        });\n        simpleShader.call(this, gl.tiltShift, {\n            blurRadius: blurRadius,\n            gradientRadius: gradientRadius,\n            start: [startX, startY],\n            end: [endX, endY],\n            delta: [-dy / d, dx / d],\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n// src/filters\\blur\\triangleblur.script\n    /**\n     * @filter       Triangle Blur\n     * @description  This is the most basic blur filter, which convolves the image with a\n     *               pyramid filter. The pyramid filter is separable and is applied as two\n     *               perpendicular triangle filters.\n     * @param radius The radius of the pyramid convolved with the image.\n     */\n    function triangleBlur(radius) {\n        gl.triangleBlur = gl.triangleBlur || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 delta;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        void main() {\\\n            vec4 color = vec4(0.0);\\\n            float total = 0.0;\\\n            \\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n            \\\n            for (float t = -30.0; t <= 30.0; t++) {\\\n                float percent = (t + offset - 0.5) / 30.0;\\\n                float weight = 1.0 - abs(percent);\\\n                vec4 sample = texture2D(texture, texCoord + delta * percent);\\\n                \\\n                /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n                sample.rgb *= sample.a;\\\n                \\\n                color += sample * weight;\\\n                total += weight;\\\n            }\\\n            \\\n            gl_FragColor = color / total;\\\n            \\\n            /* switch back from pre-multiplied alpha */\\\n            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n        }\\\n    ', 'triangleBlur');\n\n        simpleShader.call(this, gl.triangleBlur, {\n            delta: [radius / this.width, 0]\n        });\n        simpleShader.call(this, gl.triangleBlur, {\n            delta: [0, radius / this.height]\n        });\n\n        return this;\n    }\n\n// src/filters\\blur\\zoomblur.script\n    /**\n     * @filter         Zoom Blur\n     * @description    Blurs the image away from a certain point, which looks like radial motion blur.\n     * @param centerX  The x coordinate of the blur origin.\n     * @param centerY  The y coordinate of the blur origin.\n     * @param strength The strength of the blur. Values in the range 0 to 1 are usually sufficient,\n     *                 where 0 doesn't change the image and 1 creates a highly blurred image.\n     */\n    function zoomBlur(centerX, centerY, strength) {\n        gl.zoomBlur = gl.zoomBlur || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 center;\\\n        uniform float strength;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        void main() {\\\n            vec4 color = vec4(0.0);\\\n            float total = 0.0;\\\n            vec2 toCenter = center - texCoord * texSize;\\\n            \\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n            \\\n            for (float t = 0.0; t <= 40.0; t++) {\\\n                float percent = (t + offset) / 40.0;\\\n                float weight = 4.0 * (percent - percent * percent);\\\n                vec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);\\\n                \\\n                /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n                sample.rgb *= sample.a;\\\n                \\\n                color += sample * weight;\\\n                total += weight;\\\n            }\\\n            \\\n            gl_FragColor = color / total;\\\n            \\\n            /* switch back from pre-multiplied alpha */\\\n            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n        }\\\n    ', 'zoomBlur');\n\n        simpleShader.call(this, gl.zoomBlur, {\n            center: [centerX, centerY],\n            strength: strength,\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n// src/filters\\fun\\colorhalftone.script\n    /**\n     * @filter        Color Halftone\n     * @description   Simulates a CMYK halftone rendering of the image by multiplying pixel values\n     *                with a four rotated 2D sine wave patterns, one each for cyan, magenta, yellow,\n     *                and black.\n     * @param centerX The x coordinate of the pattern origin.\n     * @param centerY The y coordinate of the pattern origin.\n     * @param angle   The rotation of the pattern in radians.\n     * @param size    The diameter of a dot in pixels.\n     */\n    function colorHalftone(centerX, centerY, angle, size) {\n        gl.colorHalftone = gl.colorHalftone || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 center;\\\n        uniform float angle;\\\n        uniform float scale;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        \\\n        float pattern(float angle) {\\\n            float s = sin(angle), c = cos(angle);\\\n            vec2 tex = texCoord * texSize - center;\\\n            vec2 point = vec2(\\\n                c * tex.x - s * tex.y,\\\n                s * tex.x + c * tex.y\\\n            ) * scale;\\\n            return (sin(point.x) * sin(point.y)) * 4.0;\\\n        }\\\n        \\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            vec3 cmy = 1.0 - color.rgb;\\\n            float k = min(cmy.x, min(cmy.y, cmy.z));\\\n            cmy = (cmy - k) / (1.0 - k);\\\n            cmy = clamp(cmy * 10.0 - 3.0 + vec3(pattern(angle + 0.26179), pattern(angle + 1.30899), pattern(angle)), 0.0, 1.0);\\\n            k = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539), 0.0, 1.0);\\\n            gl_FragColor = vec4(1.0 - cmy - k, color.a);\\\n        }\\\n    ', 'colorHalftone');\n\n        simpleShader.call(this, gl.colorHalftone, {\n            center: [centerX, centerY],\n            angle: angle,\n            scale: Math.PI / size,\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n// src/filters\\fun\\dotscreen.script\n    /**\n     * @filter        Dot Screen\n     * @description   Simulates a black and white halftone rendering of the image by multiplying\n     *                pixel values with a rotated 2D sine wave pattern.\n     * @param centerX The x coordinate of the pattern origin.\n     * @param centerY The y coordinate of the pattern origin.\n     * @param angle   The rotation of the pattern in radians.\n     * @param size    The diameter of a dot in pixels.\n     */\n    function dotScreen(centerX, centerY, angle, size) {\n        gl.dotScreen = gl.dotScreen || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 center;\\\n        uniform float angle;\\\n        uniform float scale;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        \\\n        float pattern() {\\\n            float s = sin(angle), c = cos(angle);\\\n            vec2 tex = texCoord * texSize - center;\\\n            vec2 point = vec2(\\\n                c * tex.x - s * tex.y,\\\n                s * tex.x + c * tex.y\\\n            ) * scale;\\\n            return (sin(point.x) * sin(point.y)) * 4.0;\\\n        }\\\n        \\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            float average = (color.r + color.g + color.b) / 3.0;\\\n            gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\\\n        }\\\n    ', 'dotScreen');\n\n        simpleShader.call(this, gl.dotScreen, {\n            center: [centerX, centerY],\n            angle: angle,\n            scale: Math.PI / size,\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n// src/filters\\fun\\edgework.script\n    /**\n     * @filter       Edge Work\n     * @description  Picks out different frequencies in the image by subtracting two\n     *               copies of the image blurred with different radii.\n     * @param radius The radius of the effect in pixels.\n     */\n    function edgeWork(radius) {\n        gl.edgeWork1 = gl.edgeWork1 || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 delta;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        void main() {\\\n            vec2 color = vec2(0.0);\\\n            vec2 total = vec2(0.0);\\\n            \\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n            \\\n            for (float t = -30.0; t <= 30.0; t++) {\\\n                float percent = (t + offset - 0.5) / 30.0;\\\n                float weight = 1.0 - abs(percent);\\\n                vec3 sample = texture2D(texture, texCoord + delta * percent).rgb;\\\n                float average = (sample.r + sample.g + sample.b) / 3.0;\\\n                color.x += average * weight;\\\n                total.x += weight;\\\n                if (abs(t) < 15.0) {\\\n                    weight = weight * 2.0 - 1.0;\\\n                    color.y += average * weight;\\\n                    total.y += weight;\\\n                }\\\n            }\\\n            gl_FragColor = vec4(color / total, 0.0, 1.0);\\\n        }\\\n    ', 'edgeWork1');\n        gl.edgeWork2 = gl.edgeWork2 || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 delta;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        void main() {\\\n            vec2 color = vec2(0.0);\\\n            vec2 total = vec2(0.0);\\\n            \\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n            \\\n            for (float t = -30.0; t <= 30.0; t++) {\\\n                float percent = (t + offset - 0.5) / 30.0;\\\n                float weight = 1.0 - abs(percent);\\\n                vec2 sample = texture2D(texture, texCoord + delta * percent).xy;\\\n                color.x += sample.x * weight;\\\n                total.x += weight;\\\n                if (abs(t) < 15.0) {\\\n                    weight = weight * 2.0 - 1.0;\\\n                    color.y += sample.y * weight;\\\n                    total.y += weight;\\\n                }\\\n            }\\\n            float c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);\\\n            gl_FragColor = vec4(c, c, c, 1.0);\\\n        }\\\n    ', 'edgeWork2');\n\n        simpleShader.call(this, gl.edgeWork1, {\n            delta: [radius / this.width, 0]\n        });\n        simpleShader.call(this, gl.edgeWork2, {\n            delta: [0, radius / this.height]\n        });\n\n        return this;\n    }\n\n// src/filters\\fun\\hexagonalpixelate.script\n    /**\n     * @filter        Hexagonal Pixelate\n     * @description   Renders the image using a pattern of hexagonal tiles. Tile colors\n     *                are nearest-neighbor sampled from the centers of the tiles.\n     * @param centerX The x coordinate of the pattern center.\n     * @param centerY The y coordinate of the pattern center.\n     * @param scale   The width of an individual tile, in pixels.\n     */\n    function hexagonalPixelate(centerX, centerY, scale) {\n        gl.hexagonalPixelate = gl.hexagonalPixelate || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 center;\\\n        uniform float scale;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec2 tex = (texCoord * texSize - center) / scale;\\\n            tex.y /= 0.866025404;\\\n            tex.x -= tex.y * 0.5;\\\n            \\\n            vec2 a;\\\n            if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) a = vec2(floor(tex.x), floor(tex.y));\\\n            else a = vec2(ceil(tex.x), ceil(tex.y));\\\n            vec2 b = vec2(ceil(tex.x), floor(tex.y));\\\n            vec2 c = vec2(floor(tex.x), ceil(tex.y));\\\n            \\\n            vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\\\n            vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\\\n            vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\\\n            vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\\\n            \\\n            float alen = length(TEX - A);\\\n            float blen = length(TEX - B);\\\n            float clen = length(TEX - C);\\\n            \\\n            vec2 choice;\\\n            if (alen < blen) {\\\n                if (alen < clen) choice = a;\\\n                else choice = c;\\\n            } else {\\\n                if (blen < clen) choice = b;\\\n                else choice = c;\\\n            }\\\n            \\\n            choice.x += choice.y * 0.5;\\\n            choice.y *= 0.866025404;\\\n            choice *= scale / texSize;\\\n            gl_FragColor = texture2D(texture, choice + center / texSize);\\\n        }\\\n    ', 'hexagonalPixelate');\n\n        simpleShader.call(this, gl.hexagonalPixelate, {\n            center: [centerX, centerY],\n            scale: scale,\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n// src/filters\\fun\\ink.script\n    /**\n     * @filter         Ink\n     * @description    Simulates outlining the image in ink by darkening edges stronger than a\n     *                 certain threshold. The edge detection value is the difference of two\n     *                 copies of the image, each blurred using a blur of a different radius.\n     * @param strength The multiplicative scale of the ink edges. Values in the range 0 to 1\n     *                 are usually sufficient, where 0 doesn't change the image and 1 adds lots\n     *                 of black edges. Negative strength values will create white ink edges\n     *                 instead of black ones.\n     */\n    function ink(strength) {\n        gl.ink = gl.ink || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float strength;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec2 dx = vec2(1.0 / texSize.x, 0.0);\\\n            vec2 dy = vec2(0.0, 1.0 / texSize.y);\\\n            vec4 color = texture2D(texture, texCoord);\\\n            float bigTotal = 0.0;\\\n            float smallTotal = 0.0;\\\n            vec3 bigAverage = vec3(0.0);\\\n            vec3 smallAverage = vec3(0.0);\\\n            for (float x = -2.0; x <= 2.0; x += 1.0) {\\\n                for (float y = -2.0; y <= 2.0; y += 1.0) {\\\n                    vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\\\n                    bigAverage += sample;\\\n                    bigTotal += 1.0;\\\n                    if (abs(x) + abs(y) < 2.0) {\\\n                        smallAverage += sample;\\\n                        smallTotal += 1.0;\\\n                    }\\\n                }\\\n            }\\\n            vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\\\n            gl_FragColor = vec4(color.rgb - dot(edge, edge) * strength * 100000.0, color.a);\\\n        }\\\n    ', 'ink');\n\n        simpleShader.call(this, gl.ink, {\n            strength: strength * strength * strength * strength * strength,\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n// src/filters\\warp\\bulgepinch.script\n    /**\n     * @filter         Bulge / Pinch\n     * @description    Bulges or pinches the image in a circle.\n     * @param centerX  The x coordinate of the center of the circle of effect.\n     * @param centerY  The y coordinate of the center of the circle of effect.\n     * @param radius   The radius of the circle of effect.\n     * @param strength -1 to 1 (-1 is strong pinch, 0 is no effect, 1 is strong bulge)\n     */\n    function bulgePinch(centerX, centerY, radius, strength) {\n        gl.bulgePinch = gl.bulgePinch || warpShader('\\\n        uniform float radius;\\\n        uniform float strength;\\\n        uniform vec2 center;\\\n    ', '\\\n        coord -= center;\\\n        float distance = length(coord);\\\n        if (distance < radius) {\\\n            float percent = distance / radius;\\\n            if (strength > 0.0) {\\\n                coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\\\n            } else {\\\n                coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\\\n            }\\\n        }\\\n        coord += center;\\\n    ');\n\n        simpleShader.call(this, gl.bulgePinch, {\n            radius: radius,\n            strength: clamp(-1, strength, 1),\n            center: [centerX, centerY],\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n// src/filters\\warp\\matrixwarp.script\n    /**\n     * @filter                Matrix Warp\n     * @description           Transforms an image by a 2x2 or 3x3 matrix. The coordinates used in\n     *                        the transformation are (x, y) for a 2x2 matrix or (x, y, 1) for a\n     *                        3x3 matrix, where x and y are in units of pixels.\n     * @param matrix          A 2x2 or 3x3 matrix represented as either a list or a list of lists.\n     *                        For example, the 3x3 matrix [[2,0,0],[0,3,0],[0,0,1]] can also be\n     *                        represented as [2,0,0,0,3,0,0,0,1] or just [2,0,0,3].\n     * @param inverse         A boolean value that, when true, applies the inverse transformation\n     *                        instead. (optional, defaults to false)\n     * @param useTextureSpace A boolean value that, when true, uses texture-space coordinates\n     *                        instead of screen-space coordinates. Texture-space coordinates range\n     *                        from -1 to 1 instead of 0 to width - 1 or height - 1, and are easier\n     *                        to use for simple operations like flipping and rotating.\n     */\n    function matrixWarp(matrix, inverse, useTextureSpace) {\n        gl.matrixWarp = gl.matrixWarp || warpShader('\\\n        uniform mat3 matrix;\\\n        uniform bool useTextureSpace;\\\n    ', '\\\n        if (useTextureSpace) coord = coord / texSize * 2.0 - 1.0;\\\n        vec3 warp = matrix * vec3(coord, 1.0);\\\n        coord = warp.xy / warp.z;\\\n        if (useTextureSpace) coord = (coord * 0.5 + 0.5) * texSize;\\\n    ');\n\n        // Flatten all members of matrix into one big list\n        matrix = Array.prototype.concat.apply([], matrix);\n\n        // Extract a 3x3 matrix out of the arguments\n        if (matrix.length == 4) {\n            matrix = [\n                matrix[0], matrix[1], 0,\n                matrix[2], matrix[3], 0,\n                0, 0, 1\n            ];\n        } else if (matrix.length != 9) {\n            throw 'can only warp with 2x2 or 3x3 matrix';\n        }\n\n        simpleShader.call(this, gl.matrixWarp, {\n            matrix: inverse ? getInverse(matrix) : matrix,\n            texSize: [this.width, this.height],\n            useTextureSpace: useTextureSpace | 0\n        });\n\n        return this;\n    }\n\n// src/filters\\warp\\perspective.script\n    /**\n     * @filter       Perspective\n     * @description  Warps one quadrangle to another with a perspective transform. This can be used to\n     *               make a 2D image look 3D or to recover a 2D image captured in a 3D environment.\n     * @param before The x and y coordinates of four points before the transform in a flat list. This\n     *               would look like [ax, ay, bx, by, cx, cy, dx, dy] for four points (ax, ay), (bx, by),\n     *               (cx, cy), and (dx, dy).\n     * @param after  The x and y coordinates of four points after the transform in a flat list, just\n     *               like the other argument.\n     */\n    function perspective(before, after) {\n        let a = getSquareToQuad.apply(null, after);\n        let b = getSquareToQuad.apply(null, before);\n        let c = multiply(getInverse(a), b);\n        return this.matrixWarp(c);\n    }\n\n// src/filters\\warp\\swirl.script\n    /**\n     * @filter        Swirl\n     * @description   Warps a circular region of the image in a swirl.\n     * @param centerX The x coordinate of the center of the circular region.\n     * @param centerY The y coordinate of the center of the circular region.\n     * @param radius  The radius of the circular region.\n     * @param angle   The angle in radians that the pixels in the center of\n     *                the circular region will be rotated by.\n     */\n    function swirl(centerX, centerY, radius, angle) {\n        gl.swirl = gl.swirl || warpShader('\\\n        uniform float radius;\\\n        uniform float angle;\\\n        uniform vec2 center;\\\n    ', '\\\n        coord -= center;\\\n        float distance = length(coord);\\\n        if (distance < radius) {\\\n            float percent = (radius - distance) / radius;\\\n            float theta = percent * percent * angle;\\\n            float s = sin(theta);\\\n            float c = cos(theta);\\\n            coord = vec2(\\\n                coord.x * c - coord.y * s,\\\n                coord.x * s + coord.y * c\\\n            );\\\n        }\\\n        coord += center;\\\n    ');\n\n        simpleShader.call(this, gl.swirl, {\n            radius: radius,\n            center: [centerX, centerY],\n            angle: angle,\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n    /**\n     * @filter        Invert\n     * @description   Inverts color of each pixel\n     */\n    function invert() {\n        gl.invert = gl.invert || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    \\\n    void main() {\\\n        vec4 color = texture2D(texture, texCoord);\\\n        color.rgb = 1.0 - color.rgb;\\\n        gl_FragColor = color;\\\n    }\\\n', 'invert');\n\n        simpleShader.call(this, gl.invert, {\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n    /**\n     * @filter        multiplyAlpha\n     * @description   applies alpha multiply\n     */\n    function multiplyAlpha() {\n        gl.multiplyAlpha = gl.multiplyAlpha || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    \\\n    void main() {\\\n        vec4 color = texture2D(texture, texCoord);\\\n        color.rgb *= color.a;\\\n        gl_FragColor = color;\\\n    }\\\n', 'multiplyAlpha');\n\n        simpleShader.call(this, gl.multiplyAlpha, {\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n    /**\n     * @filter        unmultiplyAlpha\n     * @description   reverses alpha multiply\n     */\n    function unmultiplyAlpha() {\n        gl.unmultiplyAlpha = gl.unmultiplyAlpha || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    \\\n    void main() {\\\n        vec4 color = texture2D(texture, texCoord);\\\n        if(color.a > 0.0) {\\\n            color.rgb /= color.a;\\\n        }\\\n        gl_FragColor = color;\\\n    }\\\n', 'unmultiplyAlpha');\n\n        simpleShader.call(this, gl.unmultiplyAlpha, {\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n    /**\n     * @filter        To Alpha\n     * @description   Generates alpha channel from luminance (r+g+b)\n     * @param isInverted    boolean - invert luminance\n     * @param replaceRGBA    rgba - color to replace rgb with. if a = 0 -> keep orig color\n     */\n    function toAlpha(isInverted, replaceRGBA) {\n        gl.toAlpha = gl.toAlpha || new Shader(null, '\\\n    uniform bool isInverted;\\\n    uniform vec4 replace;\\\n    uniform sampler2D texture;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    \\\n    void main() {\\\n        vec4 color = texture2D(texture, texCoord);\\\n        float alpha = (color.r + color.g + color.b) / 3.0;\\\n        if (isInverted) alpha = 1.0 - alpha;\\\n        alpha = min(color.a, alpha);\\\n        if (replace.a > 0.0) color = replace;\\\n        gl_FragColor = vec4(color.r, color.g, color.b, alpha);\\\n    }\\\n', 'toAlpha');\n\n        simpleShader.call(this, gl.toAlpha, {\n            isInverted: isInverted ? 1 : 0,\n            replace: replaceRGBA ? [replaceRGBA.r / 255, replaceRGBA.g / 255, replaceRGBA.b / 255, replaceRGBA.a] : [0, 0, 0, 0],\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n    /**\n     * @filter        Distort\n     * @description   Distorts image (moves pixels around)\n     */\n    function distort(settings: {\n        stepSize: number; // [1, inf]\n        distortType: 0 | 1 | 2;\n        scale: { x: number; y: number };\n        strength: { x: number; y: number };\n        phase: { x: number; y: number };\n    }) {\n        gl.distort = gl.distort || warpShader('\\\n        uniform float stepSize;\\\n        uniform vec2 scale;\\\n        uniform vec2 strength;\\\n        uniform vec2 phase;\\\n        uniform float type;\\\n        ', '\\\n        const float PI = 3.14159265;\\\n        float x = coord.x;\\\n        float y = coord.y;\\\n        if (stepSize > 1.0) {\\\n            x = floor(x / stepSize) * stepSize;\\\n            y = floor(y / stepSize) * stepSize;\\\n        }\\\n        float distortX = sin((x/scale.x + phase.x) * PI * 2.0) * strength.x;\\\n        float distortY = sin((y/scale.y + phase.y) * PI * 2.0) * strength.y;\\\n        if (type == 0.0) {\\\n            coord.y += distortX;\\\n            coord.x += distortY;\\\n        } else if (type == 1.0) {\\\n            coord.x += distortX;\\\n            coord.y += distortY;\\\n        } else if (type == 2.0) {\\\n            gl_FragColor = texture2D(texture, vec2(x, y) / texSize);\\\n            coord.y += sin(gl_FragColor.r/scale.x*200.0 + phase.x * PI * 2.0) * strength.x;\\\n            coord.x += cos(gl_FragColor.g/scale.y*200.0 + phase.y * PI * 2.0) * strength.y;\\\n        }\\\n        coord.x = mod(coord.x, texSize.x);\\\n        coord.y = mod(coord.y, texSize.y);\\\n        \\\n        ');\n\n        simpleShader.call(this, gl.distort, {\n            stepSize: settings.stepSize,\n            type: settings.distortType,\n            scale: [settings.scale.x, settings.scale.y],\n            strength: [settings.strength.x, settings.strength.y],\n            phase: [settings.phase.x, settings.phase.y],\n            texSize: [this.width, this.height]\n        });\n\n        return this;\n    }\n\n    return exports;\n})();\n","uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform vec2 texSize;\n\nuniform float seed;\nuniform float type;\nuniform vec2 scale;\nuniform vec2 offset;\nuniform float octaves;\nuniform float samples;\n\nuniform float peaks;\nuniform float contrast;\nuniform float brightness;\nuniform float isReversed;\n\nuniform vec3 colA;\nuniform vec3 colB;\n\nuniform float channels; // 0 - rgb, 1 - alpha\n\n// fbm, cellular_noise based on\n// https://github.com/Gonkee/Gonkees-Shaders\n// MIT, Copyright  Gonkee\n\n// hash & simplex based on\n// https://www.shadertoy.com/view/Msf3WH\n// MIT, Copyright  2013 Inigo Quilez\n// https://www.youtube.com/c/InigoQuilez\n// https://iquilezles.org\n\n\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nfloat value_noise(vec2 coord){\n    return rand(floor(coord) / 100.0);\n}\n\nfloat cellular_noise(vec2 coord) {\n    vec2 i = floor(coord);\n    vec2 f = fract(coord);\n\n    float min_dist = 99999.0;\n    for (float x = -1.0; x <= 1.0; x++) {\n        for (float y = -1.0; y <= 1.0; y++) {\n            vec2 node = rand(i + vec2(x, y)) + vec2(x, y);\n            float dist = sqrt((f - node).x * (f - node).x + (f - node).y * (f - node).y);\n            min_dist = min(min_dist, dist);\n        }\n    }\n    return min_dist;\n}\n\n// ---------- Simplex Alternative _--------------------\n\nvec3 hash(vec3 p)\n{ p=vec3(dot(p, vec3(127.1, 311.7, 74.7))\n, dot(p, vec3(269.5, 183.3, 246.1))\n, dot(p, vec3(113.5, 271.9, 124.6)))\n;return fract(sin(p)*43758.5453123)*2.-1.; }\n\nmat3 hash(mat3 p)\n{ return mat3(hash(p[0]), hash(p[1]), hash(p[2])); }\n\nvec3 dots(mat3 a, vec3 w, mat3 b){ return vec3\n(dot(a[0], w-b[0]), dot(a[1], w-b[1]), dot(a[2], w-b[2])); }\n\n//return noiseGra13dx as .x, and its derivatives as .yzw\n// https://www.shadertoy.com/view/llByD1\nvec3 noiseGra13dx(in vec3 x) {\n    vec3 p=floor(x), w=fract(x)\n    #if 1\n    , u=w*w*w*(w*(w*6.-15.)+10.), v=30.*w*w*(w*(w-2.)+1.)//quintic hermite\n    #else\n    , u=w*w*(3.-2.*w), v=6.*w*(1.-w)//cubic hermite\n    #endif\n    //gradients\n    , G=hash(p+vec3(0)), F=hash(p+vec3(1))\n    ;mat3 D=hash(mat3(p, p, p)+mat3(1)), E=hash(mat3(p, p, p)+1.-mat3(1));\n    //projections\n    vec3 d=dots(D, w, mat3(1)), e=dots(E, w, 1.-mat3(1));\n    //interpolations\n    float g=dot(G, w), f=dot(F, w-vec3(1));\n    vec3 h=u.yzx*(g-d.xyx-d.yzz+e.zxy)+d-g, U=u*h, a=d-e;\n    mat3 S=D-mat3(G, G, G), W=D-E;\n    a.x=(a.x+a.y+a.z)+f-g;\n    ;float b=u.x*u.y*u.z;\n\n    vec4 result = vec4(g+U.x+U.y+U.z+a.x*b// value\n    , G*(1.-b)+b*(W[0]+W[1]+W[2]+F)//https://www.shadertoy.com/view/llByD1\n    +u.x*(S[0]+u.y*(G-D[0]-D[1]+E[2]))// derivatives\n    +u.y*(S[1]+u.z*(G-D[1]-D[2]+E[0]))\n    +u.z*(S[2]+u.x*(G-D[0]-D[2]+E[1]))\n    +v*(u.zxy*(g-d.xxy-d.zyz+e.yzx)+h+u.yzx*u.zxy*a.x));\n    return 0.5 + 0.5 * result.xxx;\n}\n\nfloat fbm(vec2 coord) {\n    float normalize_factor = 0.0;\n    float value = 0.0;\n    float scale = 0.5;\n\n    for (float i = 0.0; i < 7.0; i++){\n        if (i < octaves) {\n            if (type == 0.0) {\n                value += value_noise(coord) * scale;\n            } else if (type == 1.0) {\n                value += noiseGra13dx(vec3(coord.x, coord.y, 0.0)).r * scale;\n            } else if (type == 2.0) {\n                value += cellular_noise(coord) * scale;\n            }\n            normalize_factor += scale;\n            coord *= 2.0;\n            scale *= 0.5;\n        }\n    }\n    return value / normalize_factor;\n}\n\nfloat render (vec2 pos) {\n    float result = fbm(pos);\n    //\n\n    if (peaks > 0.0) {\n        result = abs(mod(result * peaks - 0.5, 1.0) - 0.5) * 2.0;// triangle\n        //result = mod(result * (peaks + 1.0), 1.0); // sawtooth\n    }\n\n    result += brightness;\n    if (contrast > 0.0) {\n        result = clamp((result - 0.5) / (1.0 - contrast) + 0.5, 0.0, 1.0);\n    } else if (contrast < 0.0) {\n        result = clamp((result - 0.5) * (1.0 + contrast) + 0.5, 0.0, 1.0);\n    }\n\n    if (isReversed == 1.0) {\n        result = 1.0 - result;\n    }\n    return result;\n}\n\n\nvoid main() {\n    vec4 color;\n\n    vec2 seedOffset;\n    seedOffset.x = (rand(vec2(seed, 0.0)) * 100.0 - 50.0);\n    seedOffset.y = (rand(vec2(0.0, seed)) * 100.0 - 50.0);\n\n    float val = 0.0;\n    vec2 basePos = texCoord * texSize / scale - offset / scale + seedOffset;\n\n    if (samples == 1.0) {\n        val = render(basePos);\n\n    }/* else if (samples == 4.0) {\n        for (float i = 0.0; i < 2.0; i++) {\n            for (float e = 0.0; e < 2.0; e++) {\n                val += render(basePos + (vec2(i, e) - 0.5) * 0.5 / scale);\n            }\n        }\n        val /= 4.0;\n\n    }*/ else if (samples == 16.0) {\n        for (float i = 0.0; i < 4.0; i++) {\n            for (float e = 0.0; e < 4.0; e++) {\n                val += render(basePos + (vec2(i, e) - 0.25) * 0.25 / scale);\n            }\n        }\n        val /= 16.0;\n    }\n\n    if (channels == 0.0) {\n        gl_FragColor = vec4(vec3(mix(colA, colB, val)), 1.0);\n    } else {\n        gl_FragColor = vec4(vec3(1.0), val);\n    }\n}","import {BB} from '../../bb/bb';\nimport {input} from '../ui/base-components/input';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {ColorOptions} from '../ui/base-components/color-options';\nimport {Cropper} from '../ui/components/cropper';\nimport {IFilterApply, IFilterGetDialogParam} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterCropExtend = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        const klCanvas = params.klCanvas;\n        if (!klCanvas)\n            return false;\n        const tempCanvas = BB.canvas();\n        {\n            let fit = BB.fitInto(klCanvas.getWidth(), klCanvas.getHeight(), 560, 400, 1);\n            let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n            let previewFactor = w / klCanvas.getWidth();\n            tempCanvas.width = w;\n            tempCanvas.height = h;\n            tempCanvas.style.display = 'block';\n            tempCanvas.getContext(\"2d\").drawImage(klCanvas.getCompleteCanvas(previewFactor), 0, 0, w, h);\n        }\n\n        const div = document.createElement(\"div\");\n        const result: any = {\n            element: div\n        };\n        div.innerHTML = LANG('filter-crop-description') + \"<br/><br/>\";\n        let left = 0, right = 0, top = 0, bottom = 0;\n        let leftChanged = false, rightChanged = false, topChanged = false, bottomChanged = false;\n        const maxWidth = params.maxWidth, maxHeight = params.maxHeight;\n        let scale;\n\n\n\n        // --- input elements ---\n\n        const lrWrapper = BB.el({\n            css: {lineHeight: '30px', height: '35px'}\n        });\n        const tbWrapper = BB.el({\n            css: {lineHeight: '30px', height: '35px'}\n        });\n        div.appendChild(lrWrapper);\n        div.appendChild(tbWrapper);\n\n        const leftInput = input({\n            init: 0,\n            type: 'number',\n            min: -klCanvas.getWidth(),\n            max: maxWidth,\n            css: {width: '75px', marginRight: '20px'},\n            callback: function(v) {\n                leftChanged = true;\n                updateInput();\n            }\n        });\n        const rightInput = input({\n            init: 0,\n            type: 'number',\n            min: -klCanvas.getWidth(),\n            max: maxWidth,\n            css: {width: '75px'},\n            callback: function(v) {\n                rightChanged = true;\n                updateInput();\n            }\n        });\n        const topInput = input({\n            init: 0,\n            type: 'number',\n            min: -klCanvas.getHeight(),\n            max: maxHeight,\n            css: {width: '75px', marginRight: '20px'},\n            callback: function(v) {\n                topChanged = true;\n                updateInput();\n            }\n        });\n        const bottomInput = input({\n            init: 0,\n            type: 'number',\n            min: -klCanvas.getHeight(),\n            max: maxHeight,\n            css: {width: '75px'},\n            callback: function(v) {\n                bottomChanged = true;\n                updateInput();\n            }\n        });\n\n        const labelStyle = {\n            display: 'inline-block',\n            width: '60px'\n        };\n        lrWrapper.append(\n            BB.el({content: LANG('filter-crop-left') + ':', css: labelStyle}),\n            leftInput,\n            BB.el({content: LANG('filter-crop-right') + ':', css: labelStyle}),\n            rightInput\n        );\n        tbWrapper.append(\n            BB.el({content: LANG('filter-crop-top') + ':', css: labelStyle}),\n            topInput,\n            BB.el({content: LANG('filter-crop-bottom') + ':', css: labelStyle}),\n            bottomInput\n        );\n\n        function updateInput() {\n            left = parseInt(leftInput.value);\n            right = parseInt(rightInput.value);\n            top = parseInt(topInput.value);\n            bottom = parseInt(bottomInput.value);\n            let newWidth = klCanvas.getWidth() + left + right;\n            let newHeight = klCanvas.getHeight() + top + bottom;\n\n            if (newWidth <= 0) {\n                if (leftChanged) {\n                    left = -klCanvas.getWidth() - right + 1;\n                    leftInput.value = '' + left;\n                }\n                if (rightChanged) {\n                    right = -klCanvas.getWidth() - left + 1;\n                    rightInput.value = '' + right;\n                }\n                newWidth = 1;\n            }\n            if (newWidth > maxWidth) {\n                if (leftChanged) {\n                    left = -klCanvas.getWidth() - right + maxWidth;\n                    leftInput.value = '' + left;\n                }\n                if (rightChanged) {\n                    right = -klCanvas.getWidth() - left + maxWidth;\n                    rightInput.value = '' + right;\n                }\n                newWidth = maxWidth;\n            }\n            if (newHeight <= 0) {\n                if (topChanged) {\n                    top = -klCanvas.getHeight() - bottom + 1;\n                    topInput.value = '' + top;\n                }\n                if (bottomChanged) {\n                    bottom = -klCanvas.getHeight() - top + 1;\n                    bottomInput.value = '' + bottom;\n                }\n                newHeight = 1;\n            }\n            if (newHeight > maxHeight) {\n                if (topChanged) {\n                    top = -klCanvas.getHeight() - bottom + maxHeight;\n                    topInput.value = '' + top;\n                }\n                if (bottomChanged) {\n                    bottom = -klCanvas.getHeight() - top + maxHeight;\n                    bottomInput.value = '' + bottom;\n                }\n                newHeight = maxHeight;\n            }\n            cropper.setTransform({\n                x: -left,\n                y: -top,\n                width: newWidth,\n                height: newHeight\n            });\n\n\n            leftChanged = false;\n            rightChanged = false;\n            topChanged = false;\n            bottomChanged = false;\n        }\n\n        let useRuleOfThirds = true;\n        let ruleOThirdsCheckbox = new Checkbox({\n            init: true,\n            label: LANG('filter-crop-rule-thirds'),\n            allowTab: true,\n            callback: function(b) {\n                useRuleOfThirds = b;\n                cropper.showThirds(useRuleOfThirds);\n            }\n        });\n        div.appendChild(BB.el({\n            css: {\n                clear: 'both'\n            }\n        }));\n\n        let selectedRgbaObj = {r: 0, g: 0, b: 0, a: 0};\n        const colorOptionsArr = [\n            {r: 0, g: 0, b: 0, a: 0},\n            {r: 255, g: 255, b: 255, a: 1},\n            {r: 0, g: 0, b: 0, a: 1}\n        ];\n        colorOptionsArr.push({\n            r: params.currentColorRgb.r,\n            g: params.currentColorRgb.g,\n            b: params.currentColorRgb.b,\n            a: 1,\n        });\n        colorOptionsArr.push({\n            r: params.secondaryColorRgb.r,\n            g: params.secondaryColorRgb.g,\n            b: params.secondaryColorRgb.b,\n            a: 1,\n        });\n\n        const colorOptions = new ColorOptions({\n            label: LANG('filter-crop-fill'),\n            colorArr: colorOptionsArr,\n            onChange: function(rgbaObj) {\n                selectedRgbaObj = rgbaObj;\n                updateBg(rgbaObj);\n            }\n        });\n\n\n        const flexRow = BB.el({\n            css: {\n                display: 'flex',\n                justifyContent: 'space-between'\n            }\n        });\n        div.appendChild(flexRow);\n        flexRow.appendChild(ruleOThirdsCheckbox.getElement());\n        flexRow.appendChild(colorOptions.getElement());\n\n\n        // when input field changed, or dragging in preview finished\n        // adjusts the zoom\n        function update(transform) {\n            const fit = BB.fitInto(transform.width, transform.height, 260, 180, 1);\n            scale = fit.width / transform.width;\n\n            const offset = BB.centerWithin(340, 220, fit.width, fit.height);\n\n            tempCanvas.style.width = klCanvas.getWidth() * scale + \"px\";\n            tempCanvas.style.height = klCanvas.getHeight() * scale + \"px\";\n\n            offsetWrapper.style.left = (offset.x - transform.x * scale) + \"px\";\n            offsetWrapper.style.top = (offset.y - transform.y * scale) + \"px\";\n\n            left = parseInt('' + -transform.x);\n            top = parseInt('' + -transform.y);\n            right = parseInt('' + (transform.x + transform.width - klCanvas.getWidth()));\n            bottom = parseInt('' + (transform.y + transform.height - klCanvas.getHeight()));\n            leftInput.value = '' + left;\n            topInput.value = '' + top;\n            rightInput.value = '' + right;\n            bottomInput.value = '' + bottom;\n\n            BB.createCheckerDataUrl(parseInt('' + (50 * scale)), function (url) {\n                previewWrapper.style.background = \"url(\" + url + \")\";\n                if (selectedRgbaObj.a !== 0) {\n                    tempCanvas.style.background = \"url(\" + url + \")\";\n                }\n            });\n            previewWrapper.style.backgroundPosition = (offset.x) + \"px \" + (offset.y) + \"px\";\n\n            cropper.setScale(scale);\n        }\n\n        const previewWrapper = BB.el({\n            css: {\n                width: \"340px\",\n                marginTop: '10px',\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                position: \"relative\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                userSelect: 'none',\n                colorScheme: 'only light',\n                touchAction: 'none',\n            }\n        });\n        previewWrapper.oncontextmenu = function () {\n            return false;\n        };\n        const bgColorOverlay = BB.el({\n            css: {\n                position: 'absolute',\n                left: '0',\n                top: '0',\n                bottom: '0',\n                right: '0'\n            }\n        });\n        previewWrapper.appendChild(bgColorOverlay);\n\n        const offsetWrapper = document.createElement(\"div\");\n        offsetWrapper.style.position = \"absolute\";\n        offsetWrapper.style.left = \"0px\";\n        offsetWrapper.style.top = \"0px\";\n        previewWrapper.appendChild(offsetWrapper);\n\n\n        const canvasWrapper = BB.appendTextDiv(offsetWrapper, \"\");\n        canvasWrapper.appendChild(tempCanvas);\n        //tempCanvas.style.width = w + \"px\";\n        //tempCanvas.style.height = h + \"px\";\n        tempCanvas.style.boxShadow = \"0 0 3px 1px rgba(0,0,0,0.5)\";\n        tempCanvas.style.position = \"absolute\";\n        tempCanvas.style.left = \"0px\";\n        tempCanvas.style.top = \"0px\";\n\n        div.appendChild(previewWrapper);\n        const cropper = new Cropper({\n            x: 0,\n            y: 0,\n            width: klCanvas.getWidth(),\n            height: klCanvas.getHeight(),\n            scale: scale,\n            callback: update,\n            maxW: maxWidth,\n            maxH: maxHeight\n        });\n        update(cropper.getTransform());\n        offsetWrapper.appendChild(cropper.getElement());\n\n        function updateBg(rgbaObj) {\n\n            let borderColor;\n            if (rgbaObj.a === 0) {\n                borderColor = 'rgba(0,0,0,0.5)';\n                bgColorOverlay.style.background = '';\n                tempCanvas.style.background = '';\n            } else {\n                borderColor = (rgbaObj.r + rgbaObj.g + rgbaObj.b < 255 * 3 / 2) ? 'rgba(255,255,255,0.5)' : 'rgba(0,0,0,0.5)'\n                bgColorOverlay.style.background = BB.ColorConverter.toRgbStr(rgbaObj);\n\n                BB.createCheckerDataUrl(parseInt('' + (50 * scale)), function (url) {\n                    tempCanvas.style.background = \"url(\" + url + \")\";\n                });\n            }\n            tempCanvas.style.boxShadow = \"0 0 3px 1px \" + borderColor;\n        }\n\n        result.destroy = () => {\n            cropper.destroy();\n            ruleOThirdsCheckbox.destroy();\n        };\n        result.getInput = function () {\n            result.destroy();\n            return {\n                left: left,\n                right: right,\n                top: top,\n                bottom: bottom,\n                fillColor: selectedRgbaObj.a === 0 ? null : selectedRgbaObj\n            };\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        const klCanvas = params.klCanvas;\n        const history = params.history;\n        if (!klCanvas || !history || isNaN(params.input.left) || isNaN(params.input.right) || isNaN(params.input.top) || isNaN(params.input.bottom)) {\n            return false;\n        }\n        history.pause(true);\n        klCanvas.resizeCanvas(params.input);\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"cropExtend\"],\n            action: \"apply\",\n            params: [{\n                input: JSON.parse(JSON.stringify(params.input))\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {Options} from '../ui/base-components/options';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterCurves = {\n\n    getDialog(params: IFilterGetDialogParam) {\n\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (tempCanvas.width > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div,\n        };\n        let klCanvasPreview;\n\n        function finishInit() {\n\n            let previewFactor = w / context.canvas.width;\n            let brightness = 0, contrast = 0;\n\n            div.innerHTML = LANG('filter-curves-description') + \"<br/><br/>\";\n\n            let curves = {\n                r: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n                g: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n                b: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n            };\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            function update() {\n                try {\n                    glCanvas.draw(texture).curves(curves.r, curves.g, curves.b).update();\n                    if (klCanvasPreview) {\n                        klCanvasPreview.render();\n                    }\n                } catch(e) {\n                    (div as any).errorCallback(e);\n                }\n            }\n\n            let modeButtons;\n\n            function CurvesInput(p) {\n                let div = document.createElement(\"div\");\n                div.oncontextmenu = function () {\n                    return false;\n                };\n                div.style.position = \"relative\";\n                div.style.marginBottom = \"10px\";\n                let mode = \"All\";\n                let curves = p.curves;\n                modeButtons = new Options( {\n                    optionArr: [\n                        {\n                            id: 'All',\n                            label: LANG('filter-curves-all')\n                        },\n                        {\n                            id: 'Red',\n                            label: LANG('red')\n                        },\n                        {\n                            id: 'Green',\n                            label: LANG('green')\n                        },\n                        {\n                            id: 'Blue',\n                            label: LANG('blue')\n                        },\n                    ],\n                    initialId: 'All',\n                    onChange: function(id) {\n                        mode = id;\n                        if (mode === \"All\") {\n                            curves = {\n                                r: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n                                g: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n                                b: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n                            };\n                        }\n                        let curve = curves.r;\n                        if (mode === \"Green\") {\n                            curve = curves.g;\n                        }\n                        if (mode === \"Blue\") {\n                            curve = curves.b;\n                        }\n                        (p0 as any).setPos(0, areah - curve[0][1] * areah);\n                        (p1 as any).setPos(curve[1][0] * areaw, areah - curve[1][1] * areah);\n                        (p2 as any).setPos(curve[2][0] * areaw, areah - curve[2][1] * areah);\n                        (p3 as any).setPos(areaw, areah - curve[3][1] * areah);\n\n                        update();\n                    }\n                });\n                div.appendChild(modeButtons.getElement());\n\n                let curveArea = document.createElement(\"div\");\n                BB.css(curveArea, {\n                    position: 'relative',\n                    marginTop: '10px',\n                    colorScheme: 'only light',\n                })\n                div.appendChild(curveArea);\n\n                let areaw = 300, areah = 100;\n                let canvas = BB.canvas(areaw, areah);\n                BB.css(canvas, {\n                    background: \"#c6c6c6\",\n                    boxShadow: \"0 0 0 1px rgba(0,0,0,0.3)\"\n                });\n                let ctx = canvas.getContext(\"2d\");\n                curveArea.appendChild(canvas);\n\n                let points = {\n                    r: [],\n                    g: [],\n                    b: []\n                };\n\n                function fit(v) {\n                    return Math.max(0, Math.min(1, v));\n                }\n\n                function createPoint(x, y, callback, lock?) {\n                    let gripSize = 14;\n                    let internalY = y, internalX = x;\n                    let point = document.createElement(\"div\");\n                    BB.css(point, {\n                        position: \"absolute\",\n                        left: (x - gripSize / 2) + \"px\",\n                        top: (y - gripSize / 2) + \"px\",\n                        width: gripSize + \"px\",\n                        height: gripSize + \"px\",\n                        background: \"#fff\",\n                        cursor: \"move\",\n                        borderRadius: gripSize + \"px\",\n                        boxShadow: \"inset 0 0 0 2px #000\",\n                        userSelect: 'none',\n                        touchAction: 'none',\n                    });\n\n                    function update() {\n                        BB.css(point, {\n                            left: (x - gripSize / 2) + \"px\",\n                            top: (y - gripSize / 2) + \"px\"\n                        });\n                    }\n\n                    (point as any).pointerListener = new BB.PointerListener({\n                        target: point,\n                        maxPointers: 1,\n                        onPointer: function(event) {\n                            event.eventPreventDefault();\n                            if (event.type === 'pointerdown') {\n                                internalX = x;\n                                internalY = y;\n                            }\n                            if (event.button === 'left' && event.type === 'pointermove') {\n                                if (!lock) {\n                                    internalX += event.dX;\n                                }\n                                x = Math.max(0, Math.min(areaw, internalX));\n                                internalY += event.dY;\n                                y = Math.max(0, Math.min(areah, internalY));\n                                update();\n                                callback({\n                                    x: x,\n                                    y: y\n                                });\n                            }\n                        }\n                    });\n\n                    curveArea.appendChild(point);\n\n                    (point as any).setPos = function (newX, newY) {\n                        x = newX;\n                        y = newY;\n                        internalY = y;\n                        internalX = x;\n                        BB.css(point, {\n                            left: (x - gripSize / 2) + \"px\",\n                            top: (y - gripSize / 2) + \"px\"\n                        });\n                    };\n\n                    return point;\n                }\n\n                function updateControl(i, x, y) {\n                    if (mode === \"All\") {\n                        curves.r[i] = [fit(x / areaw), fit(1 - y / areah)];\n                        curves.g[i] = [fit(x / areaw), fit(1 - y / areah)];\n                        curves.b[i] = [fit(x / areaw), fit(1 - y / areah)];\n                    }\n                    if (mode === \"Red\") {\n                        curves.r[i] = [fit(x / areaw), fit(1 - y / areah)];\n                    }\n                    if (mode === \"Green\") {\n                        curves.g[i] = [fit(x / areaw), fit(1 - y / areah)];\n                    }\n                    if (mode === \"Blue\") {\n                        curves.b[i] = [fit(x / areaw), fit(1 - y / areah)];\n                    }\n                }\n\n                let p0 = createPoint(0, areah, function (val) {\n                    updateControl(0, val.x, val.y);\n                    update();\n                }, true);\n                let p1 = createPoint(areaw / 3, areah / 3 * 2, function (val) {\n                    updateControl(1, val.x, val.y);\n                    update();\n                });\n                let p2 = createPoint(areaw / 3 * 2, areah / 3, function (val) {\n                    updateControl(2, val.x, val.y);\n                    update();\n                });\n                let p3 = createPoint(areaw, 0, function (val) {\n                    updateControl(3, val.x, val.y);\n                    update();\n                }, true);\n\n\n                function update() {\n                    canvas.width = canvas.width;\n                    ctx = canvas.getContext(\"2d\");\n\n                    let outCurves = {\n                        r: [],\n                        g: [],\n                        b: []\n                    };\n                    for (let i = 0; i < curves.r.length; i++) {\n                        outCurves.r.push(curves.r[i]);\n                        outCurves.g.push(curves.g[i]);\n                        outCurves.b.push(curves.b[i]);\n                    }\n\n                    function drawCurve(curve) {\n                        ctx.beginPath();\n                        let spline = new BB.SplineInterpolator(curve);\n                        for (let i = 0; i < 100; i++) {\n                            let y = spline.interpolate(i / 100);\n                            y = Math.max(0, Math.min(1, y));\n\n                            if (i === 0) {\n                                ctx.moveTo(i / 100 * areaw, areah - y * areah);\n                            } else {\n                                ctx.lineTo(i / 100 * areaw, areah - y * areah);\n                            }\n                        }\n                        ctx.stroke();\n                    }\n\n                    ctx.save();\n                    if (mode === \"All\") {\n                        ctx.strokeStyle = \"black\";\n                        drawCurve(outCurves.r);\n                    } else {\n                        ctx.globalAlpha = 0.5;\n                        ctx.strokeStyle = \"red\";\n                        drawCurve(outCurves.r);\n                        ctx.strokeStyle = \"green\";\n                        drawCurve(outCurves.g);\n                        ctx.strokeStyle = \"blue\";\n                        drawCurve(outCurves.b);\n                    }\n                    ctx.restore();\n                    p.callback(outCurves);\n                }\n\n                update();\n\n\n                this.getDiv = function () {\n                    return div;\n                };\n                this.destroy = function() {\n                    (p0 as any).pointerListener.destroy();\n                    (p1 as any).pointerListener.destroy();\n                    (p2 as any).pointerListener.destroy();\n                    (p3 as any).pointerListener.destroy();\n                };\n            }\n\n            let input = new CurvesInput({\n                curves: curves,\n                callback: function (val) {\n                    curves = val;\n                    update();\n                }\n            });\n\n\n            div.appendChild(input.getDiv());\n\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + w),\n                height: parseInt('' + h),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + w) + 'px',\n                    height: parseInt('' + h) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n\n            div.appendChild(previewWrapper);\n\n            result.destroy = () => {\n                input.destroy();\n                texture.destroy();\n                modeButtons.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    curves: curves\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let curves = params.input.curves;\n        let history = params.history;\n        if (!context || curves === null || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).curves(curves.r, curves.g, curves.b).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"curves\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n\n        return true;\n    }\n\n\n};","import {BB} from '../../bb/bb';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\n// @ts-ignore\nimport checkmarkImg from 'url:~/src/app/img/ui/checkmark.svg';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer, IMixMode} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterFlip = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        let isHorizontal = true;\n        let isVertical = false;\n        let doFlipCanvas = true;\n        div.innerHTML = LANG('filter-flip-description') + \"<br/><br/>\";\n\n\n        let horizontalCheckbox = new Checkbox({\n            init: isHorizontal,\n            label: LANG('filter-flip-horizontal') + ' ',\n            allowTab: true,\n            callback: function(v) {\n                isHorizontal = v;\n                updatePreview();\n            },\n            css: {\n                marginBottom: '10px'\n            }\n        });\n        let verticalCheckbox = new Checkbox({\n            init: isVertical,\n            label: LANG('filter-flip-vertical') + ' ',\n            allowTab: true,\n            callback: function(v) {\n                isVertical = v;\n                updatePreview();\n            },\n            css: {\n                marginBottom: '10px'\n            }\n        });\n        div.appendChild(horizontalCheckbox.getElement());\n        div.appendChild(verticalCheckbox.getElement());\n\n\n\n\n\n        let fcOption = document.createElement(\"div\");\n        BB.setEventListener(fcOption, 'onpointerdown', function () {\n            return false;\n        });\n        fcOption.textContent = LANG('filter-flip-image');\n        fcOption.style.width = \"150px\";\n        fcOption.style.height = \"30px\";\n        fcOption.style.paddingTop = \"10px\";\n        fcOption.style.textAlign = \"center\";\n        fcOption.style.cssFloat = \"left\";\n        fcOption.style.paddingBottom = \"0px\";\n        fcOption.style.borderTopLeftRadius = \"10px\";\n        fcOption.style.boxShadow = \"inset 0px 5px 10px rgba(0,0,0,0.5)\";\n        fcOption.style.background = \"url(\" + checkmarkImg + \") no-repeat 12px 16px\";\n        fcOption.style.backgroundSize = '8%';\n        fcOption.style.backgroundColor = \"#9e9e9e\";\n\n        let flOption = document.createElement(\"div\");\n        BB.setEventListener(flOption, 'onpointerdown', function () {\n            return false;\n        });\n        flOption.textContent = LANG('filter-flip-layer');\n        flOption.style.width = \"150px\";\n        flOption.style.height = \"30px\";\n        flOption.style.paddingTop = \"10px\";\n        flOption.style.textAlign = \"center\";\n        flOption.style.cssFloat = \"left\";\n        flOption.style.paddingBottom = \"0px\";\n        flOption.style.borderTopRightRadius = \"10px\";\n        flOption.style.cursor = \"pointer\";\n        flOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n        flOption.style.backgroundSize = '8%';\n\n        BB.setEventListener(fcOption, 'onpointerover', function () {\n            if (doFlipCanvas === false)\n                fcOption.style.backgroundColor = \"#ccc\";\n        });\n        BB.setEventListener(fcOption, 'onpointerout', function () {\n            if (doFlipCanvas === false)\n                fcOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n        });\n        BB.setEventListener(flOption, 'onpointerover', function () {\n            if (doFlipCanvas === true)\n                flOption.style.backgroundColor = \"#ccc\";\n        });\n        BB.setEventListener(flOption, 'onpointerout', function () {\n            if (doFlipCanvas === true)\n                flOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n        });\n\n        fcOption.onclick = function () {\n            doFlipCanvas = true;\n\n            flOption.style.background = \"\";\n            flOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n            flOption.style.boxShadow = \"\";\n            flOption.style.cursor = \"pointer\";\n\n            fcOption.style.background = \"url(\" + checkmarkImg + \") no-repeat 12px 16px\";\n            fcOption.style.backgroundSize = '8%';\n            fcOption.style.backgroundColor = \"#9e9e9e\";\n            fcOption.style.cursor = \"default\";\n            fcOption.style.boxShadow = \"inset 0px 5px 10px rgba(0,0,0,0.5)\";\n\n            updatePreview();\n        };\n        flOption.onclick = function () {\n            doFlipCanvas = false;\n\n            fcOption.style.background = \"\";\n            fcOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n            fcOption.style.boxShadow = \"\";\n            fcOption.style.cursor = \"pointer\";\n\n            flOption.style.background = \"url(\" + checkmarkImg + \") no-repeat 12px 16px\";\n            flOption.style.backgroundSize = '8%';\n            flOption.style.backgroundColor = \"#9e9e9e\";\n            flOption.style.cursor = \"default\";\n            flOption.style.boxShadow = \"inset 0px 5px 10px rgba(0,0,0,0.5)\";\n\n            updatePreview();\n        };\n\n        let optionWrapper = document.createElement(\"div\");\n        optionWrapper.appendChild(fcOption);\n        optionWrapper.appendChild(flOption);\n        div.appendChild(optionWrapper);\n\n\n        let previewWrapper = document.createElement(\"div\");\n        BB.css(previewWrapper, {\n            width: \"340px\",\n            marginLeft: \"-20px\",\n            height: \"220px\",\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            position: \"relative\",\n            userSelect: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            colorScheme: 'only light',\n        });\n\n        let previewLayer: IKlBasicLayer = {\n            image: BB.canvas(Math.round(w), Math.round(h)),\n            opacity: 1,\n            mixModeStr: 'source-over' as IMixMode,\n        };\n        let klCanvasPreview = new KlCanvasPreview({\n            width: Math.round(w),\n            height: Math.round(h),\n            layers: [previewLayer]\n        });\n\n        let previewInnerWrapper = BB.el({\n            css: {\n                position: 'relative',\n                boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                width: parseInt('' + w) + 'px',\n                height: parseInt('' + h) + 'px'\n            }\n        });\n        previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n        previewWrapper.appendChild(previewInnerWrapper);\n\n        function updatePreview() {\n            let ctx = (previewLayer.image as HTMLCanvasElement).getContext('2d');\n            ctx.save();\n            ctx.clearRect(0, 0, previewLayer.image.width, previewLayer.image.height);\n\n            if (doFlipCanvas) {\n                if (isHorizontal) {\n                    ctx.translate(previewLayer.image.width, 0);\n                    ctx.scale(-1, 1);\n                }\n                if (isVertical) {\n                    ctx.translate(0, previewLayer.image.height);\n                    ctx.scale(1, -1);\n                }\n            }\n\n            for (let i = 0; i < layers.length; i++) {\n                ctx.save();\n                if (!doFlipCanvas && selectedLayerIndex === i) {\n                    if (isHorizontal) {\n                        ctx.translate(previewLayer.image.width, 0);\n                        ctx.scale(-1, 1);\n                    }\n                    if (isVertical) {\n                        ctx.translate(0, previewLayer.image.height);\n                        ctx.scale(1, -1);\n                    }\n                }\n                if (ctx.canvas.width > layers[i].context.canvas.width) {\n                    ctx.imageSmoothingEnabled = false;\n                }\n                ctx.globalAlpha = layers[i].opacity;\n                ctx.globalCompositeOperation = layers[i].mixModeStr;\n                ctx.drawImage(layers[i].context.canvas, 0, 0, previewLayer.image.width, previewLayer.image.height);\n                ctx.restore();\n            }\n            klCanvasPreview.render();\n            ctx.restore();\n        }\n        setTimeout(updatePreview, 0);\n\n\n        div.appendChild(previewWrapper);\n        result.destroy = () => {\n            horizontalCheckbox.destroy();\n            verticalCheckbox.destroy();\n        };\n        result.getInput = function () {\n            result.destroy();\n            return {\n                horizontal: isHorizontal,\n                vertical: isVertical,\n                flipCanvas: doFlipCanvas\n            };\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        let history = params.history;\n        let horizontal = params.input.horizontal;\n        let vertical = params.input.vertical;\n        let flipCanvas = params.input.flipCanvas;\n        if (!context || !klCanvas || !history) {\n            return false;\n        }\n\n        history.pause(true);\n        klCanvas.flip(horizontal, vertical, flipCanvas ? null : klCanvas.getLayerIndex(context.canvas));\n        history.pause(false);\n\n        history.push({\n            tool: [\"filter\", \"flip\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    },\n\n};","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"checkmark.285d62a3.svg\" + \"?\" + Date.now();","import {BB} from '../../bb/bb';\nimport {eventResMs} from './filters-consts';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterHueSaturation = {\n\n    getDialog(params: IFilterGetDialogParam) {\n\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height,280, 200,  1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (tempCanvas.width > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n        function finishInit() {\n            let hue = 0, saturation = 0;\n            div.innerHTML = LANG('filter-hue-sat-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            let hueSlider = new KlSlider({\n                label: LANG('filter-hue-sat-hue'),\n                width: 300,\n                height: 30,\n                min: -100,\n                max: 100,\n                value: hue * 100,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    hue = val / 100;\n                    glCanvas.draw(texture).hueSaturation(hue, saturation).update();\n                    klCanvasPreview.render();\n                },\n            });\n            let saturationSlider = new KlSlider({\n                label: LANG('filter-hue-sat-saturation'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 100,\n                value: (saturation + 1) * 50,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    saturation = val / 50 - 1;\n                    glCanvas.draw(texture).hueSaturation(hue, saturation).update();\n                    klCanvasPreview.render();\n                },\n            });\n            hueSlider.getElement().style.marginBottom = \"10px\";\n            div.appendChild(hueSlider.getElement());\n            div.appendChild(saturationSlider.getElement());\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + w),\n                height: parseInt('' + h),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + w) + 'px',\n                    height: parseInt('' + h) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n\n            div.appendChild(previewWrapper);\n\n            try {\n                glCanvas.draw(texture).hueSaturation(hue, saturation).update();\n                klCanvasPreview.render();\n            } catch(e) {\n                (div as any).errorCallback(e);\n            }\n\n            result.destroy = () => {\n                hueSlider.destroy();\n                saturationSlider.destroy();\n                texture.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    hue: hue,\n                    Saturation: saturation\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let hue = params.input.hue;\n        let history = params.history;\n        let Saturation = params.input.Saturation;\n        if (!context || hue === null || Saturation === null || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).hueSaturation(hue, Saturation).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"hueSaturation\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply} from '../kl.types';\n\nexport const filterInvert = {\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        if (!context || !history) {\n            return false;\n        }\n        history.pause(true);\n\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false;\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).invert().update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"invert\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\nimport {TwoTabs} from '../ui/components/two-tabs';\n\nexport const filterPerspective = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let isSmall = window.innerWidth < 550;\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, isSmall ? 280 : 490, isSmall ? 200 : 240, 1);\n        let displayW = parseInt('' + fit.width), displayH = parseInt('' + fit.height);\n        let w = Math.min(displayW, context.canvas.width);\n        let h = Math.min(displayH, context.canvas.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (w > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n        let displayPreviewFactor = displayW / context.canvas.width;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        if (!isSmall) {\n            result.width = 500;\n        }\n\n        let pointerListenerArr = [];\n\n        function finishInit() {\n            div.innerHTML = LANG('filter-perspective-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n            let ba, bb, bc, bd; //before\n            let aa, ab, ac, ad; //after\n            function update() {\n                try {\n                    glCanvas.draw(texture).multiplyAlpha().perspective(\n                        [ba.x, ba.y, bb.x, bb.y, bc.x, bc.y, bd.x, bd.y].map((item, i) => {\n                            if (i % 2 === 0) {\n                                return item / displayW * w;\n                            } else {\n                                return item / displayH * h;\n                            }\n                        }),\n                        [aa.x, aa.y, ab.x, ab.y, ac.x, ac.y, ad.x, ad.y].map((item, i) => {\n                            if (i % 2 === 0) {\n                                return item / displayW * w;\n                            } else {\n                                return item / displayH * h;\n                            }\n                        })\n                    ).unmultiplyAlpha().update();\n                    klCanvasPreview.render();\n                } catch(e) {\n                    (div as any).errorCallback(e);\n                }\n            }\n\n            function nob(x, y, callback?) {\n                let nobSize = 14;\n                let div = document.createElement(\"div\");\n                (div as any).x = x;\n                (div as any).y = y;\n                BB.css(div, {\n                    width: nobSize + \"px\",\n                    height: nobSize + \"px\",\n                    backgroundColor: \"#fff\",\n                    boxShadow: \"inset 0 0 0 2px #000\",\n                    borderRadius: nobSize + \"px\",\n                    position: \"absolute\",\n                    cursor: \"move\",\n                    left: ((div as any).x - nobSize / 2) + \"px\",\n                    top: ((div as any).y - nobSize / 2) + \"px\",\n                    userSelect: 'none',\n                    touchAction: 'none',\n                });\n\n                let pointerListener = new BB.PointerListener({\n                    target: div,\n                    maxPointers: 1,\n                    onPointer: function(event) {\n                        event.eventPreventDefault();\n                        if (event.button === 'left' && event.type === 'pointermove') {\n                            (div as any).x += event.dX;\n                            (div as any).y += event.dY;\n                            div.style.left = ((div as any).x - nobSize / 2) + \"px\";\n                            div.style.top = ((div as any).y - nobSize / 2) + \"px\";\n                            if (callback) {\n                                callback();\n                            }\n                            update();\n                        }\n                    }\n                });\n                (div as any).copy = function (p) {\n                    (div as any).x = p.x;\n                    (div as any).y = p.y;\n                    div.style.left = ((div as any).x - nobSize / 2) + \"px\";\n                    div.style.top = ((div as any).y - nobSize / 2) + \"px\";\n                };\n                pointerListenerArr.push(pointerListener);\n                return div;\n            }\n\n            function updateAfter() {\n                aa.copy(ba);\n                ab.copy(bb);\n                ac.copy(bc);\n                ad.copy(bd);\n            }\n\n            ba = nob(0, 0, updateAfter);\n            bb = nob(displayW, 0, updateAfter);\n            bc = nob(displayW, displayH, updateAfter);\n            bd = nob(0, displayH, updateAfter);\n            aa = nob(0, 0);\n            ab = nob(displayW, 0);\n            ac = nob(displayW, displayH);\n            ad = nob(0, displayH);\n\n            let before = false;\n\n            const beforeAfterTabs = new TwoTabs({\n                left: LANG('compare-before'),\n                right: LANG('compare-after'),\n                init: 1,\n                onChange: (val: number) => {\n                    before = val === 0;\n                    if (before) {\n                        aa.style.display = \"none\";\n                        ab.style.display = \"none\";\n                        ac.style.display = \"none\";\n                        ad.style.display = \"none\";\n\n                        ba.style.display = \"block\";\n                        bb.style.display = \"block\";\n                        bc.style.display = \"block\";\n                        bd.style.display = \"block\";\n                        ba.copy(aa);\n                        bb.copy(ab);\n                        bc.copy(ac);\n                        bd.copy(ad);\n                    } else {\n                        ba.style.display = \"none\";\n                        bb.style.display = \"none\";\n                        bc.style.display = \"none\";\n                        bd.style.display = \"none\";\n\n                        aa.style.display = \"block\";\n                        ab.style.display = \"block\";\n                        ac.style.display = \"block\";\n                        ad.style.display = \"block\";\n                        aa.copy(ba);\n                        ab.copy(bb);\n                        ac.copy(bc);\n                        ad.copy(bd);\n                    }\n                    update();\n                },\n            });\n            div.append(beforeAfterTabs.getElement());\n\n            let previewWrapper = document.createElement(\"div\");\n            previewWrapper.oncontextmenu = function () {\n                return false;\n            };\n            BB.css(previewWrapper, {\n                width: isSmall ? '340px' : '540px',\n                marginLeft: \"-20px\",\n                height: isSmall ? '260px' : '300px',\n                backgroundColor: \"#9e9e9e\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    let canvas = i === selectedLayerIndex ? glCanvas : layers[i].context.canvas;\n                    previewLayerArr.push({\n                        image: canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + displayW),\n                height: parseInt('' + displayH),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + displayW) + 'px',\n                    height: parseInt('' + displayH) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n            previewInnerWrapper.appendChild(aa);\n            previewInnerWrapper.appendChild(ab);\n            previewInnerWrapper.appendChild(ac);\n            previewInnerWrapper.appendChild(ad);\n\n            ba.style.display = \"none\";\n            bb.style.display = \"none\";\n            bc.style.display = \"none\";\n            bd.style.display = \"none\";\n            previewInnerWrapper.appendChild(ba);\n            previewInnerWrapper.appendChild(bb);\n            previewInnerWrapper.appendChild(bc);\n            previewInnerWrapper.appendChild(bd);\n\n\n            div.appendChild(previewWrapper);\n            update();\n            result.destroy = () => {\n                for (let i = 0; i < pointerListenerArr.length; i++) {\n                    pointerListenerArr[i].destroy();\n                }\n                texture.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    before: [\n                        ba.x / displayPreviewFactor,\n                        ba.y / displayPreviewFactor,\n\n                        bb.x / displayPreviewFactor,\n                        bb.y / displayPreviewFactor,\n\n                        bc.x / displayPreviewFactor,\n                        bc.y / displayPreviewFactor,\n\n                        bd.x / displayPreviewFactor,\n                        bd.y / displayPreviewFactor,\n                    ],\n                    after: [\n                        aa.x / displayPreviewFactor,\n                        aa.y / displayPreviewFactor,\n\n                        ab.x / displayPreviewFactor,\n                        ab.y / displayPreviewFactor,\n\n                        ac.x / displayPreviewFactor,\n                        ac.y / displayPreviewFactor,\n\n                        ad.x / displayPreviewFactor,\n                        ad.y / displayPreviewFactor,\n                    ]\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        let before = params.input.before;\n        let after = params.input.after;\n        if (!context || !before || !after || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).multiplyAlpha().perspective(before, after).unmultiplyAlpha().update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"perspective\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport checkmarkImg from 'url:~/src/app/img/ui/checkmark.svg';\n\nconst activeColor = '#9e9e9e';\nconst inactiveColor = 'rgba(0,0,0,0.1)';\nconst hoverColor = '#ccc';\n\nexport class TwoTabs {\n\n    private rootEl: HTMLElement;\n    private leftTab: HTMLElement;\n    private rightTab: HTMLElement;\n    private value: number;\n\n    private update(): void {\n        if (this.value === 0) {\n            BB.css(this.leftTab, {\n                background: \"url(\" + checkmarkImg + \") no-repeat 12px 16px\",\n                backgroundColor: activeColor,\n                backgroundSize: '8%',\n                boxShadow: 'inset 0px 5px 10px rgba(0,0,0,0.5)',\n                cursor: 'default',\n            });\n            BB.css(this.rightTab, {\n                background: '',\n                backgroundColor: inactiveColor,\n                backgroundSize: '8%',\n                boxShadow: '',\n                cursor: 'pointer',\n            });\n        } else {\n            BB.css(this.rightTab, {\n                background: \"url(\" + checkmarkImg + \") no-repeat 12px 16px\",\n                backgroundColor: activeColor,\n                backgroundSize: '8%',\n                boxShadow: 'inset 0px 5px 10px rgba(0,0,0,0.5)',\n                cursor: 'default',\n            });\n            BB.css(this.leftTab, {\n                background: '',\n                backgroundColor: inactiveColor,\n                backgroundSize: '8%',\n                boxShadow: '',\n                cursor: 'pointer',\n            });\n        }\n    }\n\n\n    // ---- public ----\n    constructor(params: {\n        left: string;\n        right: string;\n        init: number; //0, 1\n        onChange: (val: number) => void;\n    }) {\n        this.value = params.init;\n\n        this.rootEl = BB.el({\n            css: {\n                display: 'flex',\n                justifyContent: 'center',\n            }\n        });\n\n        this.leftTab = BB.el({\n            parent: this.rootEl,\n            content: params.left,\n            css: {\n                width: '150px',\n                height: '30px',\n                paddingTop: '10px',\n                textAlign: 'center',\n                paddingBottom: '0',\n                borderTopLeftRadius: '10px',\n                backgroundSize: '8%',\n            }\n        });\n        BB.setEventListener(this.leftTab, 'onpointerdown', function () {\n            return false;\n        });\n\n        this.rightTab = BB.el({\n            parent: this.rootEl,\n            content: params.right,\n            css: {\n                width: '150px',\n                height: '30px',\n                paddingTop: '10px',\n                textAlign: 'center',\n                paddingBottom: '0',\n                borderTopRightRadius: '10px',\n                backgroundSize: '8%',\n            }\n        });\n        BB.setEventListener(this.rightTab, 'onpointerdown', () => {\n            return false;\n        });\n\n        this.update();\n\n        BB.setEventListener(this.leftTab, 'onpointerover', () => {\n            if (this.value !== 0) {\n                this.leftTab.style.backgroundColor = hoverColor;\n            }\n        });\n        BB.setEventListener(this.leftTab, 'onpointerout', () => {\n            if (this.value !== 0) {\n                this.leftTab.style.backgroundColor = inactiveColor;\n            }\n        });\n        BB.setEventListener(this.rightTab, 'onpointerover', () => {\n            if (this.value !== 1) {\n                this.rightTab.style.backgroundColor = hoverColor;\n            }\n        });\n        BB.setEventListener(this.rightTab, 'onpointerout', () => {\n            if (this.value !== 1) {\n                this.rightTab.style.backgroundColor = inactiveColor;\n            }\n        });\n\n        this.leftTab.onclick = () => {\n            if (this.value === 0) {\n                return;\n            }\n            this.value = 0;\n            this.update();\n            params.onChange(this.value);\n        };\n\n        this.rightTab.onclick = () => {\n            if (this.value === 1) {\n                return;\n            }\n            this.value = 1;\n            this.update();\n            params.onChange(this.value);\n        };\n    }\n\n    getElement(): HTMLElement {\n        return this.rootEl;\n    }\n}","import {BB} from '../../bb/bb';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {Select} from '../ui/base-components/select';\n// @ts-ignore\nimport constrainImg from 'url:~/src/app/img/ui/constrain.svg';\nimport {IFilterApply, IFilterGetDialogParam} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterResize = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        //BB.centerWithin\n        let klCanvas = params.klCanvas;\n        if (!klCanvas)\n            return false;\n\n        let fit = BB.fitInto( klCanvas.getWidth(), klCanvas.getHeight(), 280, 200,1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let previewFactor = w / klCanvas.getWidth();\n        let tempCanvas = klCanvas.getCompleteCanvas(1);\n\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        let newWidth = klCanvas.getWidth(), newHeight = klCanvas.getHeight();\n\n        div.innerHTML = LANG('filter-resize-description') + \"<br/><br/>\";\n\n\n        let maxWidth = params.maxWidth, maxHeight = params.maxHeight;\n\n        let widthWrapper = BB.el({\n            css: {\n                width: '150px',\n                height: '35px',\n                lineHeight: '30px',\n            }\n        });\n        let heightWrapper = BB.el({\n            css: {\n                width: '150px',\n                height: '35px',\n                lineHeight: '30px',\n            }\n        });\n        let widthInput = BB.el({\n            tagName: 'input',\n            css: {\n                cssFloat: 'right',\n                width: '90px',\n            },\n            custom: {\n                type: 'number',\n                min: '1',\n                max: '' + maxWidth,\n                value: '' + klCanvas.getWidth(),\n            }\n        }) as HTMLInputElement;\n        let heightInput = BB.el({\n            tagName: 'input',\n            css: {\n                cssFloat: 'right',\n                width: '90px',\n            },\n            custom: {\n                type: 'number',\n                min: '1',\n                max: '' + maxHeight,\n                value: '' + klCanvas.getHeight(),\n            }\n        }) as HTMLInputElement;\n        widthInput.onclick = function () {\n            (this as any).focus();\n            widthChanged = true;\n            update();\n        };\n        heightInput.onclick = function () {\n            (this as any).focus();\n            heightChanged = true;\n            update();\n        };\n        widthInput.onchange = function () {\n            widthChanged = true;\n            update();\n        };\n        heightInput.onchange = function () {\n            heightChanged = true;\n            update();\n        };\n        widthWrapper.append(LANG('width') + \": \", widthInput);\n        heightWrapper.append(LANG('height') + \": \", heightInput);\n        let inputWrapper = BB.el({\n            css: {\n                background: \"url(\" + constrainImg + \") no-repeat 140px 5px\",\n                backgroundSize: '50px 52px',\n            }\n        });\n        inputWrapper.append(widthWrapper, heightWrapper);\n        div.appendChild(inputWrapper);\n\n        //contrain checkbox\n        let heightChanged = false, widthChanged = false;\n        let ratio = klCanvas.getWidth() / klCanvas.getHeight();\n\n        function updateConstrain() {\n            if (isConstrained) {\n                widthInput.value = '' + klCanvas.getWidth();\n                heightInput.value = '' + klCanvas.getHeight();\n                inputWrapper.style.background = \"url(\" + constrainImg + \") no-repeat 140px 5px\";\n                inputWrapper.style.backgroundSize = '50px 52px';\n                update();\n            } else {\n                inputWrapper.style.background = \"\";\n            }\n        }\n\n        let isConstrained = true;\n        let constrainCheckbox = new Checkbox({\n            init: true,\n            label: LANG('constrain-proportions'),\n            allowTab: true,\n            callback: function(b) {\n                isConstrained = b;\n                updateConstrain();\n            }\n        });\n        div.appendChild(BB.el({\n            css: {\n                clear: 'both'\n            }\n        }));\n\n\n        let algorithmSelect = new Select({\n            isFocusable: true,\n            optionArr: [\n                ['smooth', LANG('algorithm-smooth')],\n                ['pixelated', LANG('algorithm-pixelated')]\n            ],\n            title: LANG('scaling-algorithm'),\n            initValue: 'smooth',\n            onChange: function() {\n                update();\n            },\n        });\n\n        let secondRowElement = BB.el({\n            parent: div,\n            css: {\n                display: 'flex',\n                justifyContent: 'space-between'\n            }\n        });\n        secondRowElement.appendChild(constrainCheckbox.getElement());\n        secondRowElement.appendChild(algorithmSelect.getElement());\n\n        let previewCanvas = BB.canvas(w, h);\n        previewCanvas.style.imageRendering = 'pixelated';\n\n\n        let previewCtx = previewCanvas.getContext('2d');\n\n\n        function draw() {\n            if (algorithmSelect.getValue() === 'smooth') {\n                previewCanvas.style.imageRendering = previewFactor > 1 ? 'pixelated' : '';\n\n                previewCanvas.width = klCanvas.getWidth();\n                previewCanvas.height = klCanvas.getHeight();\n\n                previewCtx.save();\n                previewCtx.imageSmoothingQuality = 'high';\n                previewCtx.drawImage(tempCanvas, 0, 0);\n                BB.resizeCanvas(previewCanvas, newWidth, newHeight);\n                previewCtx.restore();\n\n            } else {\n                previewCanvas.style.imageRendering = 'pixelated';\n\n                previewCanvas.width = newWidth;\n                previewCanvas.height = newHeight;\n                previewCtx.save();\n                previewCtx.imageSmoothingEnabled = false;\n                previewCtx.drawImage(tempCanvas, 0, 0, previewCanvas.width, previewCanvas.height);\n                previewCtx.restore();\n            }\n\n        }\n\n        function update() {\n            if ((widthInput.value.length === 0 && widthChanged) || (heightInput.value.length === 0 && heightChanged)) {\n                heightChanged = false;\n                widthChanged = false;\n                return;\n            }\n            widthInput.value = '' + Math.max(1, parseInt(widthInput.value));\n            heightInput.value = '' + Math.max(1, parseInt(heightInput.value));\n            if (isConstrained) {\n                if (heightChanged) {\n                    widthInput.value = '' + parseInt('' + (parseInt(heightInput.value) * ratio));\n                }\n                if (widthChanged) {\n                    heightInput.value = '' + parseInt('' + (parseInt(widthInput.value) / ratio));\n                }\n\n                if (parseInt(widthInput.value) > maxWidth || parseInt(heightInput.value) > maxHeight) {\n                    let fit = BB.fitInto(parseInt(widthInput.value), parseInt(heightInput.value), maxWidth, maxHeight, 1);\n                    widthInput.value = '' + parseInt('' + fit.width);\n                    heightInput.value = '' + parseInt('' + fit.height);\n                }\n            }\n\n            if (parseInt(widthInput.value) > maxWidth) {\n                widthInput.value = '' + maxWidth;\n            }\n            if (parseInt(heightInput.value) > maxHeight) {\n                heightInput.value = '' + maxHeight;\n            }\n\n            heightChanged = false;\n            widthChanged = false;\n\n            newWidth = parseInt(widthInput.value);\n            newHeight = parseInt(heightInput.value);\n\n            let preview = BB.fitInto(newWidth, newHeight, 280, 200, 1);\n            let previewW = parseInt('' + preview.width), previewH = parseInt('' + preview.height);\n            previewFactor = previewW / newWidth;\n\n            let offset = BB.centerWithin(340, 220, previewW, previewH);\n\n            draw();\n\n            previewCanvas.style.width = Math.max(1, previewW) + \"px\";\n            previewCanvas.style.height = Math.max(1, previewH) + \"px\";\n            canvasWrapper.style.left = offset.x + \"px\";\n            canvasWrapper.style.top = offset.y + \"px\";\n            canvasWrapper.style.width = Math.max(1, previewW) + \"px\";\n            canvasWrapper.style.height = Math.max(1, previewH) + \"px\";\n        }\n\n        let previewWrapper = document.createElement(\"div\");\n        BB.css(previewWrapper, {\n            width: \"340px\",\n            marginLeft: \"-20px\",\n            height: \"220px\",\n            display: \"table\",\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            position: \"relative\",\n            userSelect: 'none',\n            colorScheme: 'only light',\n        });\n\n\n        let canvasWrapper = BB.appendTextDiv(previewWrapper, \"\");\n        canvasWrapper.appendChild(previewCanvas);\n        canvasWrapper.style.width = w + \"px\";\n        canvasWrapper.style.height = h + \"px\";\n        canvasWrapper.style.position = \"absolute\";\n        canvasWrapper.style.overflow = \"hidden\";\n        canvasWrapper.style.boxShadow = \"0 0 5px rgba(0,0,0,0.8)\";\n        canvasWrapper.style.overflow = \"hidden\";\n        BB.createCheckerDataUrl(8, function (url) {\n            previewWrapper.style.background = \"url(\" + url + \")\";\n        });\n\n        div.appendChild(previewWrapper);\n        update();\n\n        result.destroy = () => {\n            constrainCheckbox.destroy();\n        };\n        result.getInput = function () {\n            result.destroy();\n            return {\n                width: newWidth,\n                height: newHeight,\n                algorithm: algorithmSelect.getValue()\n            };\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let klCanvas = params.klCanvas;\n        let history = params.history;\n        let width = params.input.width;\n        let height = params.input.height;\n        let algorithm = params.input.algorithm;\n        if (!klCanvas || !history) {\n            return false;\n        }\n        history.pause(true);\n        klCanvas.resize(width, height, algorithm);\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"resize\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"constrain.6950789f.svg\" + \"?\" + Date.now();","import {BB} from '../../bb/bb';\nimport {IFilterApply, IFilterGetDialogParam} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterRotate = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let klCanvas = params.klCanvas;\n        if (!klCanvas)\n            return false;\n\n        let fit = BB.fitInto(klCanvas.getWidth(), klCanvas.getHeight(), 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let previewFactor = w / klCanvas.getWidth();\n        let tempCanvas = BB.canvas(w, h);\n        tempCanvas.style.display = 'block';\n        tempCanvas.getContext(\"2d\").drawImage(klCanvas.getCompleteCanvas(previewFactor), 0, 0, w, h);\n\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        let deg = 0;\n        div.innerHTML = LANG('filter-rotate-description') + \"<br/><br/>\";\n\n        let first = true;\n\n        function update() {\n            (canvasWrapper.style as any).WebkitTransform = \"rotate(\" + deg + \"deg)\";\n            (canvasWrapper.style as any).MozTransform = \"rotate(\" + deg + \"deg)\";\n            (canvasWrapper.style as any).OTransform = \"rotate(\" + deg + \"deg)\";\n            (canvasWrapper.style as any).msTransform = \"rotate(\" + deg + \"deg)\";\n            if (Math.abs(deg % 180) === 90) {\n                //height has to fit width because of rotation\n                let fit = BB.fitInto(h, w, 280, 200, 1);\n                let scale = parseInt('' + fit.height) / w;\n                (canvasWrapper.style as any).WebkitTransform = \"rotate(\" + deg + \"deg) scale(\" + scale + \")\";\n                (canvasWrapper.style as any).MozTransform = \"rotate(\" + deg + \"deg) scale(\" + scale + \")\";\n                (canvasWrapper.style as any).OTransform = \"rotate(\" + deg + \"deg) scale(\" + scale + \")\";\n                (canvasWrapper.style as any).msTransform = \"rotate(\" + deg + \"deg) scale(\" + scale + \")\";\n            }\n        }\n\n        let btnPlus = document.createElement(\"button\");\n        btnPlus.innerHTML = \"<span style='font-size: 1.3em'></span> 90\";\n        let btnMinus = document.createElement(\"button\");\n        btnMinus.innerHTML = \"<span style='font-size: 1.3em'></span> 90\";\n        btnMinus.style.marginRight = '5px';\n\n\n        btnPlus.onclick = function () {\n            deg += 90;\n            update();\n        };\n        btnMinus.onclick = function () {\n            deg -= 90;\n            update();\n        };\n\n        div.appendChild(btnMinus);\n        div.appendChild(btnPlus);\n\n        let previewWrapper = document.createElement(\"div\");\n        BB.css(previewWrapper, {\n            width: \"340px\",\n            marginLeft: \"-20px\",\n            height: \"220px\",\n            display: \"table\",\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            position: \"relative\",\n            userSelect: 'none',\n            colorScheme: 'only light',\n        });\n\n        let previewcell = document.createElement(\"div\");\n        previewcell.style.display = \"table-cell\";\n        previewcell.style.verticalAlign = \"middle\";\n        let canvasWrapper = BB.appendTextDiv(previewcell, \"\");\n        canvasWrapper.appendChild(tempCanvas);\n        previewWrapper.appendChild(previewcell);\n        canvasWrapper.style.width = w + \"px\";\n        canvasWrapper.style.height = h + \"px\";\n        canvasWrapper.style.marginLeft = \"auto\";\n        canvasWrapper.style.marginRight = \"auto\";\n        canvasWrapper.style.boxShadow = \"0 0 5px rgba(0,0,0,0.8)\";\n        canvasWrapper.style.overflow = \"hidden\";\n        BB.createCheckerDataUrl(4, function (url) {\n            canvasWrapper.style.background = \"url(\" + url + \")\";\n        });\n        canvasWrapper.style.transition = \"all 0.2s ease-out\";\n\n        div.appendChild(previewWrapper);\n        update();\n\n        result.getInput = function () {\n            return {\n                deg: deg\n            };\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let klCanvas = params.klCanvas;\n        let history = params.history;\n        let deg = params.input.deg;\n        if (!klCanvas || !history)\n            return false;\n        history.pause(true);\n        klCanvas.rotate(deg);\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"rotate\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {eventResMs} from './filters-consts';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterTiltShift = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let displayW = parseInt('' + fit.width), displayH = parseInt('' + fit.height);\n        let w = Math.min(displayW, context.canvas.width);\n        let h = Math.min(displayH, context.canvas.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (w > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n        let previewFactor = w / context.canvas.width;\n        let displayPreviewFactor = displayW / context.canvas.width;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n        let pointerListenerArr = [];\n\n        function finishInit() {\n            let blur = 20, gradient = 200;\n            div.innerHTML = LANG('filter-tilt-shift-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n            let fa, fb; // focus line\n            function update() {\n                try {\n                    glCanvas.draw(texture).tiltShift(\n                        fa.x / displayPreviewFactor * previewFactor,\n                        fa.y / displayPreviewFactor * previewFactor,\n                        fb.x / displayPreviewFactor * previewFactor,\n                        fb.y / displayPreviewFactor * previewFactor,\n                        blur * previewFactor,\n                        gradient * previewFactor\n                    ).update();\n                    klCanvasPreview.render();\n                } catch(e) {\n                    (div as any).errorCallback(e);\n                }\n            }\n\n            function nob(x, y) {\n                let nobSize = 14;\n                let div = BB.el({\n                    css: {\n                        width: nobSize + \"px\",\n                        height: nobSize + \"px\",\n                        backgroundColor: '#fff',\n                        boxShadow: \"inset 0 0 0 2px #000\",\n                        borderRadius: nobSize + \"px\",\n                        position: \"absolute\",\n                        cursor: 'move',\n                        left: (x - nobSize / 2) + \"px\",\n                        top: (y - nobSize / 2) + \"px\",\n                        userSelect: 'none',\n                        touchAction: 'none',\n                    }\n                });\n                (div as any).x = x;\n                (div as any).y = y;\n                let pointerListener = new BB.PointerListener({\n                    target: div,\n                    maxPointers: 1,\n                    onPointer: function(event) {\n                        event.eventPreventDefault();\n                        if (event.button === 'left' && event.type === 'pointermove') {\n                            (div as any).x += event.dX;\n                            (div as any).y += event.dY;\n                            div.style.left = ((div as any).x - nobSize / 2) + \"px\";\n                            div.style.top = ((div as any).y - nobSize / 2) + \"px\";\n                            update();\n                        }\n                    }\n                });\n                pointerListenerArr.push(pointerListener);\n                return div;\n            }\n\n            fa = nob(parseInt('' + (displayW / 6)), parseInt('' + (displayH / 2)));\n            fb = nob(parseInt('' + (displayW - displayW / 6)), parseInt('' + (displayH - displayH / 3)));\n\n            let blurSlider = new KlSlider({\n                label: LANG('filter-tilt-shift-blur'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 200,\n                value: blur,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    blur = val;\n                    update();\n                },\n            });\n            blurSlider.getElement().style.marginBottom = \"10px\";\n            div.appendChild(blurSlider.getElement());\n            let gradientSlider = new KlSlider({\n                label: LANG('filter-tilt-shift-gradient'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 1000,\n                value: gradient,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    gradient = val;\n                    update();\n                },\n            });\n            div.appendChild(gradientSlider.getElement());\n\n\n            let previewWrapper = document.createElement(\"div\");\n            previewWrapper.oncontextmenu = function () {\n                return false;\n            };\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + displayW),\n                height: parseInt('' + displayH),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + displayW) + 'px',\n                    height: parseInt('' + displayH) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n            previewInnerWrapper.appendChild(fa);\n            previewInnerWrapper.appendChild(fb);\n\n\n            div.appendChild(previewWrapper);\n            update();\n            result.destroy = () => {\n                for (let i = 0; i < pointerListenerArr.length; i++) {\n                    pointerListenerArr[i].destroy();\n                }\n                blurSlider.destroy();\n                gradientSlider.destroy();\n                texture.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    a: {x: fa.x / displayPreviewFactor, y: fa.y / displayPreviewFactor},\n                    b: {x: fb.x / displayPreviewFactor, y: fb.y / displayPreviewFactor},\n                    blur: blur,\n                    gradient: gradient\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        let a = params.input.a;\n        let b = params.input.b;\n        let blur = params.input.blur;\n        let gradient = params.input.gradient;\n        if (!context || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).tiltShift(a.x, a.y, b.x, b.y, blur, gradient).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"tiltShift\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {FreeTransform, ITransform} from '../ui/components/free-transform';\nimport {Select} from '../ui/base-components/select';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\nimport {IRect} from '../../bb/bb.types';\n\ninterface IFilterTransformInput {\n    bounds: {x: number, y: number, width: number, height: number};\n    transform: ITransform;\n    isPixelated: boolean;\n}\n\nexport const filterTransform = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let isSmall = window.innerWidth < 550;\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, isSmall ? 280 : 490, isSmall ? 200 : 240, 1);\n        let displayW = parseInt('' + fit.width), displayH = parseInt('' + fit.height);\n        let w = Math.min(displayW, context.canvas.width);\n        let h = Math.min(displayH, context.canvas.height);\n        let freeTransform: FreeTransform;\n        let displayPreviewFactor = displayW / context.canvas.width;\n\n        // determine bounds and initial transformation\n        const boundsObj: IRect = BB.canvasBounds(context);\n        if (boundsObj === null) {\n            alert(LANG('filter-transform-empty'));\n            return false;\n        }\n        const initTransform = {\n            x: boundsObj.x + boundsObj.width / 2,\n            y: boundsObj.y + boundsObj.height / 2,\n            width: boundsObj.width,\n            height: boundsObj.height,\n            angleDeg: 0,\n        };\n\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        if (!isSmall) {\n            result.width = 500;\n        }\n        div.innerHTML = LANG('filter-transform-description');\n\n        let keyListener = new BB.KeyListener({\n            onDown: function(keyStr) {\n                if (BB.isInputFocused(true)) {\n                    return;\n                }\n\n                if (keyStr === 'left') {\n                    inputX.value = '' + (parseFloat(inputX.value) - 1);\n                    onInputsChanged();\n                }\n                if (keyStr === 'right') {\n                    inputX.value = '' + (parseFloat(inputX.value) + 1);\n                    onInputsChanged();\n                }\n                if (keyStr === 'up') {\n                    inputY.value = '' + (parseFloat(inputY.value) - 1);\n                    onInputsChanged();\n                }\n                if (keyStr === 'down') {\n                    inputY.value = '' + (parseFloat(inputY.value) + 1);\n                    onInputsChanged();\n                }\n            }\n\n        });\n\n        let leftWrapper = document.createElement(\"div\");\n        let rightWrapper = document.createElement(\"div\");\n        let rotWrapper = document.createElement(\"div\");\n        let inputY = document.createElement(\"input\");\n        let inputX = document.createElement(\"input\");\n        let inputR = document.createElement(\"input\");\n        leftWrapper.style.width = \"100px\";\n        leftWrapper.style.height = \"30px\";\n        rightWrapper.style.width = \"100px\";\n        rightWrapper.style.height = \"30px\";\n        rightWrapper.style.display = \"inline-block\";\n        leftWrapper.style.display = \"inline-block\";\n        rotWrapper.style.display = \"inline-block\";\n        rotWrapper.style.width = \"150px\";\n        rotWrapper.style.height = \"30px\";\n        inputY.type = \"number\";\n        inputX.type = \"number\";\n        inputR.type = \"number\";\n        inputX.style.width = 70 + \"px\";\n        inputY.style.width = 70 + \"px\";\n        inputR.style.width = 70 + \"px\";\n        inputY.value = '0';\n        inputX.value = '0';\n        inputR.value = '0';\n        inputY.onclick = function () {\n            (this as any).focus();\n            onInputsChanged();\n        };\n        inputX.onclick = function () {\n            (this as any).focus();\n            onInputsChanged();\n        };\n        inputR.onclick = function () {\n            (this as any).focus();\n            onInputsChanged();\n        };\n        inputY.onchange = function () {\n            onInputsChanged();\n        };\n        inputX.onchange = function () {\n            onInputsChanged();\n        };\n        inputR.onchange = function () {\n            onInputsChanged();\n        };\n        inputY.onkeyup = function () {\n            onInputsChanged();\n        };\n        inputX.onkeyup = function () {\n            onInputsChanged();\n        };\n        inputR.onkeyup = function () {\n            onInputsChanged();\n        };\n        leftWrapper.append(\"X: \", inputX);\n        rightWrapper.append(\"Y: \", inputY);\n        rotWrapper.append(LANG('filter-transform-rotation') + ': ', inputR);\n        if (!isSmall) {\n            const inputRow = BB.el({\n                parent: div,\n                css: {\n                    marginTop: '10px',\n                }\n            });\n            inputRow.append(leftWrapper, rightWrapper, rotWrapper);\n        }\n\n        // buttons\n        const actionBtnCss = {\n            marginLeft: '10px',\n            marginTop: '10px',\n        };\n        const buttonRow = BB.el ({\n            parent: div,\n            css: {\n                display: 'flex',\n                flexWrap: 'wrap',\n                marginLeft: '-10px',\n            }\n        });\n        const flipXBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: LANG('filter-transform-flip') + ' X',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                freeTransform.setSize(-t.width, t.height);\n            },\n            css: actionBtnCss,\n        });\n        const flipYBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: LANG('filter-transform-flip') + ' Y',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                freeTransform.setSize(t.width, -t.height);\n            },\n            css: actionBtnCss,\n        });\n        const scaleRotLeftBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: '-90',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                t.angleDeg -= 90;\n                t.angleDeg %= 360;\n                freeTransform.setAngleDeg(t.angleDeg);\n                inputR.value = '' + Math.round(t.angleDeg);\n                updatePreview();\n            },\n            css: actionBtnCss,\n        });\n        const scaleRotRightBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: '+90',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                t.angleDeg += 90;\n                t.angleDeg %= 360;\n                freeTransform.setAngleDeg(t.angleDeg);\n                inputR.value = '' + Math.round(t.angleDeg);\n                updatePreview();\n            },\n            css: actionBtnCss,\n        });\n        const scaleDoubleBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: '2x',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                if (constrainCheckbox.getValue()) {\n                    freeTransform.setSize(freeTransform.getRatio() * t.height * 2, t.height * 2);\n                } else {\n                    freeTransform.setSize(t.width * 2, t.height * 2);\n                }\n            },\n            css: actionBtnCss,\n        });\n        const scaleHalfBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: '1/2x',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                freeTransform.setSize(Math.round(t.width / 2), Math.round(t.height / 2));\n            },\n            css: actionBtnCss,\n        });\n        const centerBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: LANG('center'),\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                freeTransform.setPos({ x: context.canvas.width / 2, y: context.canvas.height / 2 });\n                freeTransform.setAngleDeg(t.angleDeg);\n                updatePreview();\n            },\n            css: actionBtnCss,\n        });\n\n\n\n\n\n        let isConstrained = true;\n        let constrainCheckbox = new Checkbox({\n            init: true,\n            label: LANG('filter-transform-constrain'),\n            title: LANG('constrain-proportions'),\n            allowTab: true,\n            callback: function(b) {\n                isConstrained = b;\n                freeTransform.setConstrained(isConstrained);\n            },\n            css: {\n                display: 'inline-block'\n            }\n        });\n        let isSnapping = false;\n        let snappingCheckbox = new Checkbox({\n            init: true,\n            label: LANG('filter-transform-snap'),\n            title: LANG('filter-transform-snap-title'),\n            allowTab: true,\n            callback: function(b) {\n                isSnapping = b;\n                freeTransform.setSnapping(isSnapping);\n            },\n            css: {\n                display: 'inline-block',\n                marginLeft: '10px',\n            }\n        });\n        const checkboxWrapper = BB.el({});\n        checkboxWrapper.append(constrainCheckbox.getElement(), snappingCheckbox.getElement());\n\n        div.appendChild(BB.el({\n            css: {\n                clear: 'both',\n                height: '10px'\n            }\n        }));\n\n        const bottomRow = BB.el({\n            parent: div,\n            css: {\n                display: 'flex',\n                justifyContent: 'space-between',\n            }\n        });\n\n        let algorithmSelect = new Select({\n            isFocusable: true,\n            optionArr: [\n                ['smooth', LANG('algorithm-smooth')],\n                ['pixelated', LANG('algorithm-pixelated')]\n            ],\n            initValue: 'smooth',\n            title: LANG('scaling-algorithm'),\n            onChange: function() {\n                updatePreview(true);\n            },\n        });\n        bottomRow.append(checkboxWrapper, algorithmSelect.getElement());\n\n\n        let previewWrapper = document.createElement(\"div\");\n        previewWrapper.oncontextmenu = function () {\n            return false;\n        };\n        BB.css(previewWrapper, {\n            width: isSmall ? '340px' : '540px',\n            marginLeft: \"-20px\",\n            height: isSmall ? '260px' : '300px',\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            position: \"relative\",\n            userSelect: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            colorScheme: 'only light',\n        });\n\n        let previewLayerArr: IKlBasicLayer[] = [];\n        {\n            for (let i = 0; i < layers.length; i++) {\n                let canvas;\n                if (i === selectedLayerIndex) {\n                    canvas = BB.canvas(parseInt('' + w), parseInt('' + h));\n                    let ctx = canvas.getContext('2d');\n                    ctx.drawImage(layers[i].context.canvas, 0, 0, canvas.width, canvas.height);\n                } else {\n                    canvas = layers[i].context.canvas;\n                }\n                previewLayerArr.push({\n                    image: canvas,\n                    opacity: layers[i].opacity,\n                    mixModeStr: layers[i].mixModeStr\n                });\n            }\n        }\n        let klCanvasPreview = new KlCanvasPreview({\n            width: parseInt('' + displayW),\n            height: parseInt('' + displayH),\n            layers: previewLayerArr\n        });\n\n        let previewInnerWrapper = BB.el({\n            css: {\n                position: 'relative',\n                boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                width: parseInt('' + displayW) + 'px',\n                height: parseInt('' + displayH) + 'px'\n            }\n        });\n        previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n        previewWrapper.appendChild(previewInnerWrapper);\n\n        let lastDrawnTransformStr;\n        function updatePreview(doForce: boolean = false) {\n            if (!freeTransform) {\n                return;\n            }\n            let transform = freeTransform.getTransform();\n            if (JSON.stringify(transform) === lastDrawnTransformStr && !doForce) {\n                return;\n            }\n            lastDrawnTransformStr = JSON.stringify(transform);\n            if (displayPreviewFactor < 1) {\n                transform.x *= displayPreviewFactor;\n                transform.y *= displayPreviewFactor;\n                transform.width *= displayPreviewFactor;\n                transform.height *= displayPreviewFactor;\n            }\n            let transformLayerCanvas = previewLayerArr[selectedLayerIndex].image as HTMLCanvasElement;\n            let ctx = transformLayerCanvas.getContext('2d');\n            ctx.save();\n            ctx.clearRect(0, 0, transformLayerCanvas.width, transformLayerCanvas.height);\n            BB.drawTransformedImageWithBounds(\n                ctx,\n                layers[selectedLayerIndex].context.canvas,\n                transform,\n                boundsObj,\n                algorithmSelect.getValue() === 'pixelated' ||\n                BB.testShouldPixelate(transform, transform.width / initTransform.width, transform.height / initTransform.height),\n            );\n            ctx.restore();\n            klCanvasPreview.render();\n        }\n\n        freeTransform = new FreeTransform({\n            x: initTransform.x,\n            y: initTransform.y,\n            width: initTransform.width,\n            height: initTransform.height,\n            angleDeg: initTransform.angleDeg,\n            isConstrained: true,\n            snapX: [0, context.canvas.width],\n            snapY: [0, context.canvas.height],\n            callback: function (t) {\n                inputX.value = '' + Math.round(t.x - initTransform.x);\n                inputY.value = '' + Math.round(t.y - initTransform.y);\n                inputR.value = '' + Math.round(t.angleDeg);\n                updatePreview();\n            },\n            scale: displayPreviewFactor\n        });\n        BB.css(freeTransform.getElement(), {\n            position: 'absolute',\n            left: '0',\n            top: '0'\n        });\n        previewInnerWrapper.appendChild(freeTransform.getElement());\n\n        function onInputsChanged() {\n            freeTransform.setPos({\n                x: parseInt(inputX.value) + initTransform.x,\n                y: parseInt(inputY.value) + initTransform.y}\n            );\n            freeTransform.setAngleDeg(parseInt(inputR.value));\n            updatePreview();\n        }\n\n        updatePreview();\n\n        div.appendChild(previewWrapper);\n        result.destroy = () => {\n            keyListener.destroy();\n            freeTransform.destroy();\n            constrainCheckbox.destroy();\n            snappingCheckbox.destroy();\n            BB.destroyEl(flipXBtn);\n            BB.destroyEl(flipYBtn);\n            BB.destroyEl(scaleRotLeftBtn);\n            BB.destroyEl(scaleRotRightBtn);\n            BB.destroyEl(scaleDoubleBtn);\n            BB.destroyEl(scaleHalfBtn);\n            BB.destroyEl(centerBtn);\n        };\n        result.getInput = function () {\n            const transform = freeTransform.getTransform();\n            let input = {\n                transform,\n                bounds: boundsObj,\n                isPixelated: algorithmSelect.getValue() === 'pixelated' ||\n                    BB.testShouldPixelate(transform, transform.width / initTransform.width, transform.height / initTransform.height),\n            } as IFilterTransformInput;\n            result.destroy();\n            return JSON.parse(JSON.stringify(input));\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        const context = params.context;\n        const history = params.history;\n        if (!context || !history) {\n            return false;\n        }\n        history.pause(true);\n\n        const input: IFilterTransformInput = params.input;\n\n        let copyCanvas = BB.copyCanvas(context.canvas);\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        BB.drawTransformedImageWithBounds(\n            context,\n            copyCanvas,\n            input.transform,\n            input.bounds,\n            input.isPixelated,\n        );\n\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"transform\"],\n            action: \"apply\",\n            params: [{input}],\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {eventResMs} from './filters-consts';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterBlur = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let klCanvas = params.klCanvas;\n        let context = params.context;\n        if (!klCanvas || !context) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let displayW = parseInt('' + fit.width), displayH = parseInt('' + fit.height);\n        let w = Math.min(displayW, context.canvas.width);\n        let h = Math.min(displayH, context.canvas.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (w > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n        let previewFactor = w / context.canvas.width;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n\n        function finishInit() {\n            let radius = 10;\n            div.innerHTML = LANG('filter-triangle-blur-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            let radiusSlider = new KlSlider({\n                label: LANG('radius'),\n                width: 300,\n                height: 30,\n                min: 1,\n                max: 200,\n                value: radius,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    radius = val;\n                    glCanvas.draw(texture).triangleBlur(radius * previewFactor).update();\n                    klCanvasPreview.render();\n                },\n            });\n            div.appendChild(radiusSlider.getElement());\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + displayW),\n                height: parseInt('' + displayH),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + displayW) + 'px',\n                    height: parseInt('' + displayH) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n            div.appendChild(previewWrapper);\n\n            try {\n                glCanvas.draw(texture).triangleBlur(radius * previewFactor).update();\n                klCanvasPreview.render();\n            } catch(e) {\n                (div as any).errorCallback(e);\n            }\n\n            result.destroy = () => {\n                texture.destroy();\n                radiusSlider.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    radius: radius\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        let radius = params.input.radius;\n        if (!context || !radius || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).triangleBlur(radius).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"blur\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {eventResMs} from './filters-consts';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterUnsharpMask = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let displayW = parseInt('' + fit.width), displayH = parseInt('' + fit.height);\n        let w = Math.min(displayW, context.canvas.width);\n        let h = Math.min(displayH, context.canvas.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (w > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n        let previewFactor = w / context.canvas.width;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n        function finishInit() {\n            let radius = 2, strength = 5.1 / 10;\n            div.innerHTML = LANG('filter-unsharp-mask-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            let radiusSlider = new KlSlider({\n                label: LANG('radius'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 200,\n                value: 2,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    radius = val;\n                    glCanvas.draw(texture).unsharpMask(radius * previewFactor, strength).update();\n                    klCanvasPreview.render();\n                },\n                curve: [[0, 0], [0.1, 2], [0.5, 50], [1, 200]],\n            });\n            let strengthSlider = new KlSlider({\n                label: LANG('filter-unsharp-mask-strength'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 50,\n                value: 5.1,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    strength = val / 10;\n                    glCanvas.draw(texture).unsharpMask(radius * previewFactor, strength).update();\n                    klCanvasPreview.render();\n                },\n                curve: [[0, 0], [0.1, 2], [0.5, 10], [1, 50]],\n            });\n            radiusSlider.getElement().style.marginBottom = \"10px\";\n            div.appendChild(radiusSlider.getElement());\n            div.appendChild(strengthSlider.getElement());\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + displayW),\n                height: parseInt('' + displayH),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + displayW) + 'px',\n                    height: parseInt('' + displayH) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n\n            div.appendChild(previewWrapper);\n\n            try {\n                glCanvas.draw(texture).unsharpMask(radius * previewFactor, strength).update();\n                klCanvasPreview.render();\n            } catch(e) {\n                (div as any).errorCallback(e);\n            }\n\n            result.destroy = () => {\n                radiusSlider.destroy();\n                strengthSlider.destroy();\n                texture.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    radius: radius,\n                    strength: strength\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n        return result;\n    },\n\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        let radius = params.input.radius;\n        let strength = params.input.strength;\n        if (!context || radius === null || strength === null || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).unsharpMask(radius, strength).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"unsharpMask\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {Options} from '../ui/base-components/options';\nimport {ColorOptions} from '../ui/base-components/color-options';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const filterToAlpha = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (tempCanvas.width > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n        function finishInit() {\n            let radius = 2, strength = 5.1 / 10;\n            div.appendChild(BB.el({\n                content: LANG('filter-to-alpha-description'),\n                css: {\n                    marginBottom: '5px'\n                }\n            }));\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            function updatePreview() {\n                glCanvas.draw(texture).toAlpha(sourceId === 'inverted-luminance', selectedRgbaObj).update();\n                klCanvasPreview.render();\n            }\n\n            // source\n            let sourceId = 'inverted-luminance';\n            let sourceOptions = new Options({\n                optionArr: [\n                    {\n                        id: 'inverted-luminance',\n                        label: LANG('filter-to-alpha-inverted-lum')\n                    },\n                    {\n                        id: 'luminance',\n                        label: LANG('filter-to-alpha-lum')\n                    }\n                ],\n                initialId: sourceId,\n                onChange: function(id) {\n                    sourceId = id;\n                    updatePreview();\n                }\n            });\n            div.appendChild(sourceOptions.getElement());\n\n            // color\n            let selectedRgbaObj = {r: 0, g: 0, b: 0, a: 1};\n            let colorOptionsArr = [\n                null,\n                {r: 0, g: 0, b: 0, a: 1},\n                {r: 255, g: 255, b: 255, a: 1}\n            ];\n            colorOptionsArr.push({\n                r: params.currentColorRgb.r,\n                g: params.currentColorRgb.g,\n                b: params.currentColorRgb.b,\n                a: 1,\n            });\n            colorOptionsArr.push({\n                r: params.secondaryColorRgb.r,\n                g: params.secondaryColorRgb.g,\n                b: params.secondaryColorRgb.b,\n                a: 1,\n            });\n\n            let colorOptions = new ColorOptions({\n                label: LANG('filter-to-alpha-replace'),\n                colorArr: colorOptionsArr,\n                initialIndex: 1,\n                onChange: function(rgbaObj) {\n                    selectedRgbaObj = rgbaObj;\n                    updatePreview();\n                }\n            });\n            colorOptions.getElement().style.marginTop = '10px';\n            div.appendChild(colorOptions.getElement());\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + w),\n                height: parseInt('' + h),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + w) + 'px',\n                    height: parseInt('' + h) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n\n            div.appendChild(previewWrapper);\n\n            setTimeout(function() { //ie has a problem otherwise...\n                try {\n                    updatePreview();\n                } catch(e) {\n                    (div as any).errorCallback(e);\n                }\n            }, 1);\n\n            result.destroy = () => {\n                texture.destroy();\n                sourceOptions.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    sourceId: sourceId,\n                    selectedRgbaObj: selectedRgbaObj\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n        return result;\n    },\n\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        let sourceId = params.input.sourceId;\n        let selectedRgbaObj = params.input.selectedRgbaObj;\n        if (!context || !sourceId || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).toAlpha(sourceId === 'inverted-luminance', selectedRgbaObj).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"toAlpha\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\n// @ts-ignore\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer, IMixMode} from '../kl.types';\nimport {LANG} from '../../language/language';\nimport {input} from '../ui/base-components/input';\nimport {ColorOptions} from '../ui/base-components/color-options';\nimport {drawGrid} from '../image-operations/draw-grid';\n\n\n\nexport const filterGrid = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n        const renderW = Math.min(w, context.canvas.width);\n        const renderH = Math.min(h, context.canvas.height);\n        const renderFactor = renderW / context.canvas.width;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        div.innerHTML = LANG('filter-grid-description') + \"<br/><br/>\";\n\n        const settingsObj = {\n            x: 2,\n            y: 2,\n            thickness: 2,\n            color: '#000',\n            opacity: 1,\n        };\n\n        let line1 = BB.el({\n            parent: div,\n            css: {\n                display: 'flex',\n                alignItems: 'center',\n            }\n        });\n        let line2 = BB.el({\n            parent: div,\n            css: {\n                display: 'flex',\n                alignItems: 'center',\n                marginTop: '10px'\n            }\n        });\n        const xInput = input({\n            init: 2,\n            type: 'number',\n            min: 1,\n            css: {width: '75px', marginRight: '20px'},\n            callback: function(v) {\n                settingsObj.x = parseFloat(v);\n                updatePreview();\n            }\n        });\n        const yInput = input({\n            init: 2,\n            type: 'number',\n            min: 1,\n            css: {width: '75px', marginRight: '20px'},\n            callback: function(v) {\n                settingsObj.y = parseFloat(v);\n                updatePreview();\n            }\n        });\n        const thicknessInput = input({\n            init: 2,\n            type: 'number',\n            min: 1,\n            css: {width: '75px', marginRight: '20px'},\n            callback: function(v) {\n                settingsObj.thickness = parseFloat(v);\n                updatePreview();\n            }\n        });\n\n        let selectedRgbaObj = {r: 0, g: 0, b: 0, a: 1};\n        const colorOptionsArr = [\n            {r: 0, g: 0, b: 0, a: 1},\n            {r: 255, g: 255, b: 255, a: 1},\n        ];\n        colorOptionsArr.push({\n            r: params.currentColorRgb.r,\n            g: params.currentColorRgb.g,\n            b: params.currentColorRgb.b,\n            a: 1,\n        });\n        colorOptionsArr.push({\n            r: params.secondaryColorRgb.r,\n            g: params.secondaryColorRgb.g,\n            b: params.secondaryColorRgb.b,\n            a: 1,\n        });\n        settingsObj.color = BB.ColorConverter.toRgbStr(selectedRgbaObj);\n\n        const colorOptions = new ColorOptions({\n            label: LANG('shape-stroke'),\n            colorArr: colorOptionsArr,\n            onChange: function(rgbaObj) {\n                selectedRgbaObj = rgbaObj;\n                settingsObj.color = BB.ColorConverter.toRgbStr(selectedRgbaObj);\n                updatePreview();\n            }\n        });\n\n        const labelStyle = {\n            display: 'inline-block',\n            marginRight: '5px',\n        };\n        line1.append(\n            BB.el({content: 'X:', css: labelStyle}),\n            xInput,\n            BB.el({content: 'Y:', css: labelStyle}),\n            yInput,\n        );\n        line2.append(\n            BB.el({content: LANG('shape-line-width') + ':', css: labelStyle}),\n            thicknessInput,\n            BB.el({css:{flexGrow: '1'}}),\n            colorOptions.getElement(),\n        );\n\n\n        let previewWrapper = document.createElement(\"div\");\n        BB.css(previewWrapper, {\n            width: \"340px\",\n            marginLeft: \"-20px\",\n            height: \"220px\",\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            position: \"relative\",\n            userSelect: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            colorScheme: 'only light',\n        });\n\n        let previewLayer: IKlBasicLayer = {\n            image: BB.canvas(renderW, renderH),\n            opacity: layers[selectedLayerIndex].opacity,\n            mixModeStr: layers[selectedLayerIndex].mixModeStr,\n        };\n        let klCanvasPreview = new KlCanvasPreview({\n            width: Math.round(w),\n            height: Math.round(h),\n            layers: layers.map((item, i) => {\n                if (i === selectedLayerIndex) {\n                    return previewLayer;\n                } else {\n                    return {\n                        image: item.context.canvas,\n                        opacity: item.opacity,\n                        mixModeStr: item.mixModeStr,\n                    };\n                }\n            })\n        });\n\n        let previewInnerWrapper = BB.el({\n            css: {\n                position: 'relative',\n                boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                width: parseInt('' + w) + 'px',\n                height: parseInt('' + h) + 'px'\n            }\n        });\n        previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n        previewWrapper.appendChild(previewInnerWrapper);\n\n        function updatePreview() {\n            let ctx = (previewLayer.image as HTMLCanvasElement).getContext('2d');\n            ctx.save();\n            ctx.clearRect(0, 0, renderW, renderH);\n            ctx.drawImage(context.canvas, 0, 0, renderW, renderH);\n            drawGrid(ctx, settingsObj.x, settingsObj.y, Math.max(settingsObj.thickness * renderFactor, 1), settingsObj.color, settingsObj.opacity);\n\n            ctx.restore();\n            klCanvasPreview.render();\n        }\n        setTimeout(updatePreview, 0);\n\n\n        div.appendChild(previewWrapper);\n        result.destroy = () => {\n        };\n        result.getInput = function () {\n            result.destroy();\n            return BB.copyObj(settingsObj);\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        let history = params.history;\n        if (!context || !klCanvas || !history) {\n            return false;\n        }\n\n        history.pause(true);\n        drawGrid(context, params.input.x, params.input.y, params.input.thickness, params.input.color, params.input.opacity);\n        history.pause(false);\n\n        history.push({\n            tool: [\"filter\", \"grid\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    },\n\n};","\n// ideas: padding, gutter, other shapes\n\nexport function drawGrid(\n    ctx: CanvasRenderingContext2D,\n    cellsX: number,\n    cellsY: number,\n    thickness: number, // px\n    color: string,\n    opacity: number, // 0 - 1\n) {\n    ctx.save();\n    const w = ctx.canvas.width;\n    const h = ctx.canvas.height;\n    thickness = Math.round(thickness);\n    const thickIsRound = thickness % 2 === 0;\n\n    ctx.beginPath();\n    ctx.lineWidth = thickness;\n    ctx.strokeStyle = color;\n    ctx.globalAlpha = opacity;\n\n    for(let i = 0; i < cellsX - 1; i++) {\n        const cw = w / (cellsX);\n        let pos = cw * (i + 1);\n        if (thickIsRound) {\n            pos = Math.round(pos);\n        } else {\n            pos = Math.round(pos + 0.5) - 0.5;\n        }\n        ctx.moveTo(pos, 0);\n        ctx.lineTo(pos, h);\n\n    }\n    for(let i = 0; i < cellsY - 1; i++) {\n        const ch = h / (cellsY);\n        let pos = ch * (i + 1);\n        if (thickIsRound) {\n            pos = Math.round(pos);\n        } else {\n            pos = Math.round(pos + 0.5) - 0.5;\n        }\n\n        ctx.moveTo(0, pos);\n        ctx.lineTo(w, pos);\n    }\n\n    ctx.stroke();\n    ctx.restore();\n}","import {BB} from '../../bb/bb';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\n// @ts-ignore\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer, IMixMode, IRGB} from '../kl.types';\nimport {LANG} from '../../language/language';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {getSharedFx} from './shared-gl-fx';\nimport {Options} from '../ui/base-components/options';\nimport {eventResMs} from './filters-consts';\nimport {Select} from '../ui/base-components/select';\nimport {translateBlending} from '../canvas/translate-blending';\nimport {KL} from '../kl';\nimport {ColorConverter} from '../../bb/color/color';\n// @ts-ignore\nimport uiSwapImg from 'url:~/src/app/img/ui/ui-swap-lr.svg';\nimport {Checkbox} from '../ui/base-components/checkbox';\n\n// see noise(...) in glfx.ts\ninterface INoisePreset {\n    type: number;\n    scaleX: number;\n    scaleY: number;\n    offsetX: number;\n    offsetY: number;\n    octaves: number;\n    samples: number;\n    peaks: number;\n    brightness: number;\n    contrast: number;\n    isReversed: boolean;\n}\n\ntype TNoiseChannels = 'rgb' | 'alpha';\n\ninterface INoiseSettings extends INoisePreset {\n    seed: number;\n    colA: IRGB;\n    colB: IRGB;\n    channels: TNoiseChannels;\n}\n\ninterface INoiseFilterInput {\n    seed: number;\n    presetIndex: number; // which preset from presetArr\n    scale: number; // applies to both scaleX and scaleX\n    opacity: number; // aka strength\n    isReversed: boolean; // reverse direction of color gradient\n    channels: TNoiseChannels;\n\n    // only for channels = rgb\n    mixModeStr: GlobalCompositeOperation; // how mixed with image\n    colA: IRGB;\n    colB: IRGB;\n}\n\nconst presetArr: INoisePreset[] = [\n    // each pixel random value\n    {type: 0, scaleX: 1, scaleY: 1, offsetX: 0, offsetY: 0, octaves: 1, samples: 1, peaks: 0, brightness: 0, contrast: 0, isReversed: true},\n\n    // cloud\n    {type: 1, scaleX: 166, scaleY: 164, offsetX: 105, offsetY: 30, octaves: 6, samples: 1, peaks: 0, brightness: 0.055, contrast: 0.23, isReversed: true},\n\n    // thin lines\n    {type: 1, scaleX: 235, scaleY: 190, offsetX: 3227, offsetY: 2156, octaves: 4, samples: 16, peaks: 22, brightness: -0.375, contrast: 1, isReversed: false},\n\n    // soft large simplex, only 1 octave\n    {type: 1, scaleX: 40, scaleY: 40, offsetX: 0, offsetY: 0, octaves: 1, samples: 1, peaks: 0, brightness: 0, contrast: 0, isReversed: false},\n\n    // two value large pixels\n    {type: 0, scaleX: 26, scaleY: 26, offsetX: 557, offsetY: 365, octaves: 1, samples: 1, peaks: 0, brightness: 0.02, contrast: 1, isReversed: true},\n\n    // zebra\n    {type: 1, scaleX: 1500, scaleY: 1500, offsetX: 745, offsetY: 2871, octaves: 5, samples: 16, peaks: 156.02, brightness: 0.03, contrast: 1, isReversed: true},\n\n    // sparse dots / stars\n    {type: 1, scaleX: 11, scaleY: 11, offsetX: 2940, offsetY: 2045, octaves: 1, samples: 16, peaks: 1, brightness: -0.045, contrast: 1, isReversed: true},\n\n    // pseudo marble\n    {type: 2, scaleX: 74, scaleY: 74, offsetX: 4816, offsetY: 1304, octaves: 3, samples: 1, peaks: 2.78, brightness: 0, contrast: 0, isReversed: false},\n];\n\nfunction drawNoise(glCanvas, settings: INoiseSettings): void {\n    glCanvas.noise(\n        settings.seed  ? settings.seed : 0,\n        settings.type,\n        [settings.scaleX, settings.scaleY],\n        [glCanvas.width / 2, glCanvas.height / 2],\n        settings.octaves,\n        settings.samples,\n        settings.peaks,\n        settings.brightness,\n        settings.contrast,\n        settings.isReversed,\n        settings.colA,\n        settings.colB,\n        settings.channels ? settings.channels : 'rgb',\n    ).update();\n}\n\n\nexport const filterNoise = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n        const renderW = Math.min(w, context.canvas.width);\n        const renderH = Math.min(h, context.canvas.height);\n        const renderFactor = renderW / context.canvas.width;\n\n\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return; // todo throw?\n        }\n        let texture;\n\n        const thumbImgArr = [];\n        const thumbSize = 32;\n        {\n            const canvas = BB.canvas(thumbSize, thumbSize);\n            const ctx = canvas.getContext('2d');\n            texture = glCanvas.texture(canvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n            texture.destroy();\n\n            presetArr.forEach((preset, index) => {\n                const thumbImg = new Image();\n                const presetCopy = BB.copyObj(preset);\n                presetCopy.scaleX /= 10;\n                presetCopy.scaleY /= 10;\n                drawNoise(glCanvas, presetCopy);\n                ctx.drawImage(glCanvas, 0, 0);\n                thumbImg.src = canvas.toDataURL('image/png');\n                thumbImgArr.push(thumbImg);\n            });\n\n        }\n\n        let tempCanvas = BB.canvas(renderW, renderH);\n        texture = glCanvas.texture(tempCanvas);\n        glCanvas.draw(texture).update(); // update glCanvas size\n        tempCanvas = null;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n        div.innerHTML = LANG('filter-noise-description') + \"<br/><br/>\";\n\n        const settingsObj: INoiseFilterInput = {\n            seed: Math.random() * 300,\n            presetIndex: 0,\n            scale: 50,\n            opacity: 0.5,\n            isReversed: false,\n            channels: 'rgb',\n            mixModeStr: 'source-over' as GlobalCompositeOperation,\n            colA: {r: 0, g: 0, b: 0},\n            colB: {r: 255, g: 255, b: 255},\n        };\n\n\n        const presetOptions = new Options({\n            optionArr: thumbImgArr.map((img, index) => {\n                BB.css(img, {\n                    margin: '1px',\n                    borderRadius: '3px',\n                    transition: 'all 0.1s ease-in-out',\n                })\n                return {\n                    id: '' + index,\n                    label: img,\n                };\n            }),\n            initialId: '0',\n            onChange: (id) => {\n                settingsObj.presetIndex = Number(id);\n                updatePreview();\n            }\n        });\n        presetOptions.getElement().style.marginBottom = '10px';\n        div.append(presetOptions.getElement());\n\n        const scaleSlider = new KlSlider({\n            label: LANG('filter-noise-scale'),\n            width: 300,\n            height: 30,\n            min: 1,\n            max: 1000,\n            value: settingsObj.scale,\n            eventResMs: eventResMs,\n            curve: BB.quadraticSplineInput(1, 1000, 0.1),\n            onChange: (value) => {\n                settingsObj.scale = value;\n                updatePreview();\n            },\n        });\n        scaleSlider.getElement().style.marginBottom = \"10px\";\n\n        const opacitySlider = new KlSlider({\n            label: LANG('opacity'),\n            width: 300,\n            height: 30,\n            min: 1 / 100,\n            max: 1,\n            value: settingsObj.opacity,\n            eventResMs: eventResMs,\n            toValue: (displayValue) => displayValue / 100,\n            toDisplayValue: (value) => value * 100,\n            onChange: (value) => {\n                settingsObj.opacity = value;\n                updatePreview();\n            },\n        });\n        opacitySlider.getElement().style.marginBottom = \"10px\";\n\n        const row1El = BB.el({\n            css: {\n                display: 'flex',\n                alignItems: 'center',\n                marginBottom: '10px',\n            }\n        });\n\n        const row2El = BB.el({\n            css: {\n                display: 'flex',\n            }\n        });\n\n        const channelsOptions = new Options({\n            optionArr: [\n                {id: 'rgb', label: 'RGB'},\n                {id: 'alpha', label: LANG('filter-noise-alpha')},\n            ],\n            initialId: 'rgb',\n            onChange: (id: TNoiseChannels) => {\n                settingsObj.channels = id;\n                if (id === 'rgb') {\n                    row2El.style.visibility = '';\n                } else {\n                    row2El.style.visibility = 'hidden';\n                }\n                updatePreview();\n            },\n        });\n\n        const reverseToggle = new Checkbox({\n            label: LANG('reverse'),\n            callback: (val) => {\n                settingsObj.isReversed = val;\n                updatePreview();\n            },\n            allowTab: true,\n        });\n\n        const blendSelect = new Select({\n            isFocusable: true,\n            optionArr: [\n                'source-over',\n                null,\n                'darken',\n                'multiply',\n                'color-burn',\n                null,\n                'lighten',\n                'screen',\n                'color-dodge',\n                null,\n                'overlay',\n                'soft-light',\n                'hard-light',\n                null,\n                'difference',\n                'exclusion',\n                null,\n                'hue',\n                'saturation',\n                'color',\n                'luminosity',\n            ].map((item: IMixMode) => {\n                return item ? [item, translateBlending(item)] : null;\n            }),\n            initValue: settingsObj.mixModeStr,\n            onChange: (val: GlobalCompositeOperation) => {\n                settingsObj.mixModeStr = val;\n                updatePreview();\n            },\n        });\n        blendSelect.getElement().title = LANG('layers-blending');\n\n        const colorWrapper = BB.el({\n            css: {\n                display: 'flex',\n            }\n        });\n\n        const colInputStyle = {\n            width: '34px',\n            height: '34px',\n            marginRight: '5px',\n        }\n        const colAInput = KL.input({\n            type: 'color',\n            init: '#' + ColorConverter.toHexString(settingsObj.colA),\n            callback: (val) => {\n                settingsObj.colA = ColorConverter.hexToRGB(val);\n                updatePreview();\n            },\n            css: colInputStyle,\n        });\n\n        const colBInput = KL.input({\n            type: 'color',\n            init: '#' + ColorConverter.toHexString(settingsObj.colB),\n            callback: (val) => {\n                settingsObj.colB = ColorConverter.hexToRGB(val);\n                updatePreview();\n            },\n            css: colInputStyle,\n        });\n\n        colorWrapper.append(\n            colAInput,\n            colBInput,\n        );\n\n\n        row1El.append(\n            channelsOptions.getElement(),\n            BB.el({css:{flexGrow: '1',}}),\n            reverseToggle.getElement(),\n        );\n\n        row2El.append(\n            blendSelect.getElement(),\n            BB.el({css:{flexGrow: '1',}}),\n            colorWrapper,\n        );\n\n        div.append(\n            scaleSlider.getElement(),\n            opacitySlider.getElement(),\n            row1El,\n            row2El,\n        );\n\n\n\n        let previewWrapper = document.createElement(\"div\");\n        BB.css(previewWrapper, {\n            width: \"340px\",\n            marginLeft: \"-20px\",\n            height: \"220px\",\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            position: \"relative\",\n            userSelect: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            colorScheme: 'only light',\n        });\n\n        let previewLayer: IKlBasicLayer = {\n            image: BB.canvas(renderW, renderH),\n            opacity: layers[selectedLayerIndex].opacity,\n            mixModeStr: layers[selectedLayerIndex].mixModeStr,\n        };\n        let klCanvasPreview = new KlCanvasPreview({\n            width: Math.round(w),\n            height: Math.round(h),\n            layers: layers.map((item, i) => {\n                if (i === selectedLayerIndex) {\n                    return previewLayer;\n                } else {\n                    return {\n                        image: item.context.canvas,\n                        opacity: item.opacity,\n                        mixModeStr: item.mixModeStr,\n                    };\n                }\n            })\n        });\n\n        let previewInnerWrapper = BB.el({\n            css: {\n                position: 'relative',\n                boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                width: parseInt('' + w) + 'px',\n                height: parseInt('' + h) + 'px'\n            }\n        });\n        previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n        previewWrapper.appendChild(previewInnerWrapper);\n\n        function updatePreview() {\n            let ctx = (previewLayer.image as HTMLCanvasElement).getContext('2d');\n            ctx.save();\n            ctx.clearRect(0, 0, renderW, renderH);\n            ctx.drawImage(context.canvas, 0, 0, renderW, renderH);\n\n            ctx.globalAlpha = settingsObj.opacity;\n\n            const presetCopy = BB.copyObj(presetArr[settingsObj.presetIndex]);\n            presetCopy.seed = settingsObj.seed;\n            presetCopy.scaleX = presetCopy.scaleX  * settingsObj.scale / 50 * renderFactor;\n            presetCopy.scaleY = presetCopy.scaleY  * settingsObj.scale / 50 * renderFactor;\n            presetCopy.colA = settingsObj.colA;\n            presetCopy.colB = settingsObj.colB;\n            presetCopy.isReversed = settingsObj.isReversed ? !presetCopy.isReversed : presetCopy.isReversed;\n            presetCopy.channels  = settingsObj.channels;\n            drawNoise(glCanvas, presetCopy);\n\n            if (settingsObj.channels === 'alpha') {\n                ctx.globalCompositeOperation = 'destination-out';\n            } else {\n                ctx.globalCompositeOperation = settingsObj.mixModeStr;\n            }\n\n            ctx.drawImage(glCanvas, 0, 0);\n\n            ctx.restore();\n            klCanvasPreview.render();\n        }\n        setTimeout(updatePreview, 0);\n\n        div.appendChild(previewWrapper);\n        result.destroy = () => {\n            presetOptions.destroy();\n            scaleSlider.destroy();\n            opacitySlider.destroy();\n            reverseToggle.destroy();\n            channelsOptions.destroy();\n            texture.destroy();\n            blendSelect.destroy();\n        };\n        result.getInput = function () {\n            result.destroy();\n            return BB.copyObj(settingsObj);\n        };\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        let history = params.history;\n        if (!context || !klCanvas || !history) {\n            return false;\n        }\n\n        history.pause(true);\n\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).update();\n        texture.destroy();\n\n        const input: INoiseFilterInput = params.input;\n\n        const presetCopy = BB.copyObj(presetArr[input.presetIndex]);\n        presetCopy.seed = input.seed;\n        presetCopy.scaleX = presetCopy.scaleX  * input.scale / 50;\n        presetCopy.scaleY = presetCopy.scaleY  * input.scale / 50;\n        presetCopy.colA = input.colA;\n        presetCopy.colB = input.colB;\n        presetCopy.isReversed = input.isReversed ? !presetCopy.isReversed : presetCopy.isReversed;\n        presetCopy.channels  = input.channels;\n        drawNoise(glCanvas, presetCopy);\n\n        context.save();\n        context.globalAlpha = input.opacity;\n        if (input.channels === 'alpha') {\n            context.globalCompositeOperation = 'destination-out';\n        } else {\n            context.globalCompositeOperation = input.mixModeStr;\n        }\n        context.drawImage(glCanvas, 0, 0);\n        context.restore();\n\n        history.pause(false);\n\n        history.push({\n            tool: [\"canvas\"],\n            action: \"replaceLayer\",\n            params: [\n                klCanvas.getLayerIndex(context.canvas),\n                context.getImageData(0, 0, context.canvas.width, context.canvas.height),\n            ]\n        });\n        return true;\n    },\n\n};","import {BB} from '../../bb/bb';\nimport {IFilterApply, IFilterGetDialogParam, IFilterGetDialogResult, IKlBasicLayer} from '../kl.types';\nimport {input} from '../ui/base-components/input';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {LANG} from '../../language/language';\nimport {eventResMs} from './filters-consts';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {TwoTabs} from '../ui/components/two-tabs';\nimport {IVector2D} from '../../bb/bb.types';\n\n\ninterface IPatternSettings {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    blend?: number; // [0, 1] - 1 will blend linearly across whole length\n    offsetX: number;\n    offsetY: number;\n}\n\n/**\n * Draws pattern onto context. Pattern generated from context.\n * Can use blending for smoother transition. Will use area outside of bounds for blending.\n *\n * @param context\n * @param settings\n */\nfunction drawPattern(context: CanvasRenderingContext2D, settings: IPatternSettings): void {\n\n    // keep bounds in center via offset\n    // because blending done towards bottom right\n    const blendOffsetX = settings.blend ? Math.round(settings.blend * settings.width / 2) : 0;\n    const blendOffsetY = settings.blend ? Math.round(settings.blend * settings.height / 2) : 0;\n\n    const finalPatternCanvas = BB.canvas(settings.width, settings.height);\n\n    if (settings.blend) {\n        // construct pattern via linear blending\n\n        const blendCanvas = BB.canvas(settings.width * 2, settings.height * 2);\n        const blendCtx = blendCanvas.getContext('2d');\n        const colTransparent = '#0000';\n        const colOpaque = '#000';\n\n        // transfer source to blendCanvas\n        blendCtx.drawImage(\n            context.canvas,\n            -settings.x + blendOffsetX,\n            -settings.y + blendOffsetY,\n        );\n\n        // --- 1 cross-fade vertical ------------------------\n\n        // erase vertical gradient bottom half\n        blendCtx.save();\n        let blendGradient = blendCtx.createLinearGradient(0, settings.height, 0, settings.height * 2);\n        blendGradient.addColorStop(0, colOpaque);\n        blendGradient.addColorStop(settings.blend, colTransparent);\n        blendCtx.globalCompositeOperation = 'destination-in';\n        blendCtx.fillStyle = blendGradient;\n        blendCtx.fillRect(0, 0, blendCanvas.width, blendCanvas.height);\n        blendCtx.restore();\n\n        // erase vertical gradient top half\n        blendCtx.save();\n        blendGradient = blendCtx.createLinearGradient(0, 0, 0, settings.height);\n        blendGradient.addColorStop(0, colTransparent);\n        blendGradient.addColorStop(settings.blend, colOpaque);\n        blendCtx.globalCompositeOperation = 'destination-in';\n        blendCtx.fillStyle = blendGradient;\n        blendCtx.fillRect(0, 0, settings.width * 2, settings.height * 2);\n        blendCtx.restore();\n\n        // draw bottom half over top half\n        blendCtx.save();\n        // lighter needed for accurate cross-fade\n        blendCtx.globalCompositeOperation = 'lighter';\n        blendCtx.drawImage(blendCanvas, 0, -settings.height);\n        blendCtx.restore();\n\n\n\n        // --- 2 cross-fade horizontal ------------------------\n\n        // erase horizontal gradient right half\n        blendCtx.save();\n        blendGradient = blendCtx.createLinearGradient(settings.width, 0, settings.width * 2, 0);\n        blendGradient.addColorStop(0, colOpaque);\n        blendGradient.addColorStop(settings.blend, colTransparent);\n        blendCtx.globalCompositeOperation = 'destination-in';\n        blendCtx.fillStyle = blendGradient;\n        blendCtx.fillRect(0, 0, blendCanvas.width, blendCanvas.height);\n        blendCtx.restore();\n\n        // erase horizontal gradient left half\n        blendCtx.save();\n        blendGradient = blendCtx.createLinearGradient(0, 0, settings.width, 0);\n        blendGradient.addColorStop(0, colTransparent);\n        blendGradient.addColorStop(settings.blend, colOpaque);\n        blendCtx.globalCompositeOperation = 'destination-in';\n        blendCtx.fillStyle = blendGradient;\n        blendCtx.fillRect(0, 0, settings.width * 2, settings.height * 2);\n        blendCtx.restore();\n\n        // draw right half over left half\n        blendCtx.save();\n        // lighter needed for accurate cross-fade\n        blendCtx.globalCompositeOperation = 'lighter';\n        blendCtx.drawImage(blendCanvas, -settings.width, 0);\n        blendCtx.restore();\n\n        // transfer to pattern canvas\n        finalPatternCanvas.getContext('2d').drawImage(blendCanvas, 0, 0);\n\n    } else {\n        finalPatternCanvas.getContext('2d').drawImage(\n            context.canvas,\n            -settings.x,\n            -settings.y,\n        );\n    }\n\n    context.save();\n\n    context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n    context.translate(settings.offsetX - blendOffsetX, settings.offsetY - blendOffsetY);\n    context.fillStyle = context.createPattern(finalPatternCanvas, 'repeat');\n    context.fillRect(-settings.offsetX + blendOffsetX, -settings.offsetY + blendOffsetY, context.canvas.width, context.canvas.height);\n\n    context.restore();\n}\n\n\nexport const filterPattern = {\n\n    getDialog(params: IFilterGetDialogParam) {\n\n        const isSmall = window.innerWidth < 550;\n        const maxSize = 1024;\n        const rootEl = BB.el({\n            content: LANG('filter-pattern-description') + '<br><br>',\n        });\n        const context = params.context;\n        const width = context.canvas.width;\n        const height = context.canvas.height;\n\n        let settings: IPatternSettings = {\n            x: 0,\n            y: 0,\n            width: width <= 250 ? Math.round(width / 4) : 200,\n            height: height <= 250 ? Math.round(height / 4) : 200,\n            blend: 0,\n            offsetX: 0,\n            offsetY: 0,\n        };\n        let lastDrawnSettings = null;\n\n        // determine bounds\n        const bounds = BB.canvasBounds(context);\n        // adjust settings according to bounds\n        if ( // use layer bounds if:\n            bounds &&\n            (bounds.width <= maxSize && bounds.height <= maxSize) && // don't exceed max size\n            (bounds.width < width * 0.75 || bounds.height < height * 0.75) // aren't too large (heuristic)\n        ) {\n            settings.x = bounds.x;\n            settings.y = bounds.y;\n            settings.width = bounds.width;\n            settings.height = bounds.height;\n        } else { // otherwise use default size in center\n            settings.x = Math.round(width / 2 - settings.width / 2);\n            settings.y = Math.round(height / 2 - settings.height / 2);\n        }\n\n        // ---- controls ----\n\n        const xInput = input({\n            init: settings.x,\n            type: 'number',\n            min: 0,\n            max: width,\n            css: {width: '100%'},\n            callback: function(v) {\n                settings.x = Number(v);\n                updatePreview();\n            }\n        });\n        const yInput = input({\n            init: settings.y,\n            type: 'number',\n            min: 0,\n            max: height,\n            css: {width: '100%'},\n            callback: function(v) {\n                settings.y = Number(v);\n                updatePreview();\n            }\n        });\n        const widthInput = input({\n            init: settings.width,\n            type: 'number',\n            min: 1,\n            max: Math.min(maxSize, width),\n            css: {width: '100%'},\n            callback: function(v) {\n                settings.width = Number(v);\n                updatePreview();\n            }\n        });\n        const heightInput = input({\n            init: settings.height,\n            type: 'number',\n            min: 1,\n            max: Math.min(maxSize, height),\n            css: {width: '100%'},\n            callback: function(v) {\n                settings.height = Number(v);\n                updatePreview();\n            }\n        });\n\n        const inputStyle = {\n            marginLeft: '5px',\n            flex: '1',\n        };\n        rootEl.append(\n            BB.el({\n               content: [\n\n                   BB.el({\n                       tagName: 'label',\n                       content: [\n                           'X:',\n                           xInput,\n                       ],\n                       css: inputStyle,\n                   }),\n\n                   BB.el({\n                       tagName: 'label',\n                       content: [\n                           'Y:',\n                           yInput,\n                       ],\n                       css: inputStyle,\n                   }),\n\n                   BB.el({\n                       tagName: 'label',\n                       content: [\n                           LANG('width') + ':',\n                           widthInput,\n                       ],\n                       css: inputStyle,\n                   }),\n\n                   BB.el({\n                       tagName: 'label',\n                       content: [\n                           LANG('height') + ':',\n                           heightInput,\n                       ],\n                       css: inputStyle,\n                   }),\n               ],\n               css: {\n                   display: 'flex',\n                   marginLeft: '-5px',\n               }\n            }),\n        );\n\n\n        const blendSlider = new KlSlider({\n            label: LANG('brush-blending'),\n            width: 300,\n            height: 30,\n            min: 0,\n            max: 1,\n            value: settings.blend,\n            eventResMs: eventResMs,\n            onChange: function (val) {\n                settings.blend = val;\n                updatePreview();\n            },\n            formatFunc: (val) => {\n                return BB.round(val, 2);\n            },\n            manualInputRoundDigits: 2,\n        });\n        BB.css(blendSlider.getElement(), {\n            margin: '10px 0',\n        })\n\n        rootEl.append(\n            blendSlider.getElement(),\n        );\n\n        // ---- preview tabs ----\n        let previewMode = 1; // 0 before, 1 after\n        const beforeAfterTabs = new TwoTabs({\n            left: LANG('compare-before'),\n            right: LANG('compare-after'),\n            init: previewMode,\n            onChange: (val) => {\n                previewMode = val;\n                overlayCanvas.style.display = val === 0 ? 'block' : 'none';\n                updatePreview(true);\n            },\n        });\n        rootEl.append(beforeAfterTabs.getElement());\n\n        // ---- previews ----\n\n        const klCanvas = params.klCanvas;\n        const layers = klCanvas.getLayers();\n        const selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        const fit = BB.fitInto(context.canvas.width, context.canvas.height, isSmall ? 280 : 490, isSmall ? 200 : 240, 1);\n        const w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n        const renderW = Math.min(w, context.canvas.width);\n        const renderH = Math.min(h, context.canvas.height);\n        const renderFactor = renderW / context.canvas.width;\n        const previewFactor = w / context.canvas.width;\n\n        const previewWrapper = BB.el({\n            css: {\n                width: isSmall ? '340px' : '540px',\n                marginLeft: \"-20px\",\n                height: isSmall ? '260px' : '300px',\n                backgroundColor: \"#9e9e9e\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            }\n        });\n\n        const previewLayer: IKlBasicLayer = {\n            image: BB.canvas(renderW, renderH),\n            opacity: layers[selectedLayerIndex].opacity,\n            mixModeStr: layers[selectedLayerIndex].mixModeStr,\n        };\n        const previewLayerArr = layers.map((item, i) => {\n            if (i === selectedLayerIndex) {\n                return previewLayer;\n            } else {\n                return {\n                    image: item.context.canvas,\n                    opacity: item.opacity,\n                    mixModeStr: item.mixModeStr,\n                };\n            }\n        });\n        const klCanvasPreview = new KlCanvasPreview({\n            width: Math.round(w),\n            height: Math.round(h),\n            layers: previewLayerArr,\n        });\n\n        const overlayCanvas = BB.canvas(w, h);\n        BB.css(overlayCanvas, {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            mixBlendMode: 'difference',\n            imageRendering: 'pixelated',\n        });\n\n        const previewInnerWrapper = BB.el({\n            css: {\n                position: 'relative',\n                boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                width: parseInt('' + w) + 'px',\n                height: parseInt('' + h) + 'px'\n            }\n        });\n        previewInnerWrapper.append(\n            klCanvasPreview.getElement(),\n            overlayCanvas\n        );\n        previewWrapper.append(previewInnerWrapper);\n        rootEl.append(previewWrapper);\n\n\n        // ---- preview input processing ----\n        const inputs: {\n            start: IVector2D;\n            end: IVector2D;\n            oldSettings: IPatternSettings;\n            state: null | 'move' | 'select';\n        } = {\n            start: null,\n            end: null,\n            oldSettings: null,\n            state: null,\n        };\n\n        function syncInputs(): void {\n            xInput.value = '' + settings.x;\n            yInput.value = '' + settings.y;\n            widthInput.value = '' + settings.width;\n            heightInput.value = '' + settings.height;\n        }\n\n        const keyListener = new BB.KeyListener({\n        });\n\n        previewWrapper.oncontextmenu = function () {\n            return false;\n        };\n        previewInnerWrapper.style.touchAction = 'none';\n        const pointerListener = new BB.PointerListener({\n            target: previewInnerWrapper,\n            onPointer: (event) => {\n                if (previewMode === 0) {\n                    if (event.type === 'pointerdown') {\n                        if (!inputs.state) {\n                            inputs.oldSettings = BB.copyObj(settings);\n\n                            const x = event.relX / previewFactor;\n                            const y = event.relY / previewFactor;\n\n                            if (BB.isInsideRect(\n                                {x, y},\n                                {x: settings.x, y: settings.y, width: settings.width, height: settings.height},\n                            )) {\n                                inputs.state = 'move';\n                            } else {\n                                inputs.state = 'select';\n                            }\n                            inputs.start = {x, y};\n                        }\n                    } else if (event.type === 'pointermove') {\n\n                        const x = event.relX / previewFactor;\n                        const y = event.relY / previewFactor;\n\n                        if (inputs.state === 'select') {\n                            inputs.end = {x, y};\n\n                            const x1 = Math.max(0, Math.min(inputs.start.x, inputs.end.x));\n                            const y1 = Math.max(0, Math.min(inputs.start.y, inputs.end.y));\n                            const x2 = Math.min(width, Math.max(inputs.start.x, inputs.end.x));\n                            const y2 = Math.min(height, Math.max(inputs.start.y, inputs.end.y));\n\n                            settings.x = Math.floor(x1);\n                            settings.y = Math.floor(y1);\n                            settings.width = Math.min(maxSize, Math.ceil(x2 - settings.x));\n                            settings.height = Math.min(maxSize, Math.ceil(y2 - settings.y));\n\n                            if (keyListener.isPressed('shift')) {\n                                settings.width = Math.min(settings.width, settings.height);\n                                settings.height = Math.min(settings.width, settings.height);\n                            }\n\n                            if (settings.width === 0 || settings.height === 0) {\n                                settings = BB.copyObj(inputs.oldSettings);\n                            }\n\n                            syncInputs();\n                            updatePreview();\n                        } else if (inputs.state === 'move') {\n                            const dX = Math.round(x - inputs.start.x);\n                            const dY = Math.round(y - inputs.start.y);\n\n                            settings.x = BB.clamp(inputs.oldSettings.x + dX, 0, width - settings.width);\n                            settings.y = BB.clamp(inputs.oldSettings.y + dY, 0, height - settings.height);\n\n                            syncInputs();\n                            updatePreview();\n                        }\n                    } else if (event.type === 'pointerup') {\n                        if (inputs.state) {\n                            inputs.state = null;\n                        }\n                    }\n                } else {\n                    if (event.type === 'pointerdown') {\n                        if (!inputs.state) {\n                            inputs.state = 'move';\n                            inputs.oldSettings = BB.copyObj(settings);\n                            inputs.start = {x: event.relX / previewFactor, y: event.relY / previewFactor};\n                            inputs.end = null;\n                        }\n                    } else if (event.type === 'pointermove') {\n                        if (inputs.state) {\n                            inputs.end = {x: event.relX / previewFactor, y: event.relY / previewFactor};\n\n                            settings.offsetX = Math.round(inputs.end.x - inputs.start.x) + inputs.oldSettings.offsetX;\n                            settings.offsetY = Math.round(inputs.end.y - inputs.start.y) + inputs.oldSettings.offsetY;\n\n                            updatePreview();\n                        }\n                    } else if (event.type === 'pointerup') {\n                        if (inputs.state) {\n                            if (!inputs.end) {\n                                settings.offsetX = 0;\n                                settings.offsetY = 0;\n                                updatePreview();\n                            }\n                            inputs.state = null;\n                        }\n                    }\n                }\n            },\n        });\n\n        // ---------- rendering ---------------------\n        const fullSizeCanvas = BB.canvas(width, height);\n        const fullSizeCtx = fullSizeCanvas.getContext('2d');\n\n        function sharpStrokeRect(\n            context: CanvasRenderingContext2D,\n            x: number,\n            y: number,\n            width: number,\n            height: number\n        ): void {\n            const drawX = Math.round(x + 0.5) - 0.5;\n            const drawY = Math.round(y + 0.5) - 0.5;\n            const drawWidth = Math.round(x + width - drawX);\n            const drawHeight = Math.round(y + height - drawY);\n            context.strokeRect(drawX, drawY, drawWidth, drawHeight);\n        }\n\n        function updatePreview(doForce?: boolean) {\n            if (!doForce && lastDrawnSettings && JSON.stringify(lastDrawnSettings) === JSON.stringify(settings)) {\n                return;\n            }\n\n            if (previewMode === 0) { // before\n                fullSizeCtx.clearRect(0, 0, width, height);\n                fullSizeCtx.drawImage(context.canvas, 0, 0);\n\n                const previewCanvas = previewLayer.image as HTMLCanvasElement;\n                const previewCtx = previewCanvas.getContext('2d');\n                previewCtx.save();\n                previewCtx.clearRect(0, 0, renderW, renderH);\n                previewCtx.drawImage(fullSizeCanvas, 0, 0, renderW, renderH);\n                previewCtx.restore();\n\n                const pW = settings.width * previewFactor;\n                const pH = settings.height * previewFactor;\n\n                const overlayCtx = overlayCanvas.getContext('2d');\n                overlayCtx.save();\n                overlayCtx.clearRect(0, 0, w, h);\n                overlayCtx.strokeStyle = '#fff';\n                sharpStrokeRect(\n                    overlayCtx,\n                    settings.x * previewFactor,\n                    settings.y * previewFactor,\n                    pW,\n                    pH\n                );\n                if (settings.blend > 0.05) {\n                    overlayCtx.strokeStyle = '#f0f';\n                    sharpStrokeRect(\n                        overlayCtx,\n                        settings.x * previewFactor - pW / 2 * settings.blend,\n                        settings.y * previewFactor - pH / 2 * settings.blend,\n                        pW * (1 + settings.blend),\n                        pH * (1 + settings.blend),\n                    );\n                }\n                overlayCtx.restore();\n\n\n\n            } else { // after\n                fullSizeCtx.clearRect(0, 0, width, height);\n                fullSizeCtx.drawImage(context.canvas, 0, 0);\n                drawPattern(fullSizeCtx, settings);\n\n                const previewCanvas = previewLayer.image as HTMLCanvasElement;\n                const previewCtx = previewCanvas.getContext('2d');\n                previewCtx.clearRect(0, 0, renderW, renderH);\n                previewCtx.drawImage(fullSizeCanvas, 0, 0, renderW, renderH);\n            }\n\n\n            klCanvasPreview.render();\n            lastDrawnSettings = BB.copyObj(settings);\n        }\n\n        updatePreview();\n\n\n        // ----- result -------------------\n        const result: IFilterGetDialogResult = {\n            element: rootEl,\n            destroy: () => {\n                blendSlider.destroy();\n                keyListener.destroy();\n                pointerListener.destroy();\n            },\n            getInput: () => BB.copyObj(settings),\n        };\n        if (!isSmall) {\n            result.width = 500;\n        }\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        const klCanvas = params.klCanvas;\n        const ctx = params.context;\n        const history = params.history;\n        if (!klCanvas || !history) {\n            return false;\n        }\n        history.pause(true);\n\n        drawPattern(ctx, params.input);\n\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"pattern\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {IFilterApply, IFilterGetDialogParam, IFilterGetDialogResult, IKlBasicLayer} from '../kl.types';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {LANG} from '../../language/language';\nimport {eventResMs} from './filters-consts';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {Options} from '../ui/base-components/options';\nimport {Checkbox} from '../ui/base-components/checkbox';\n\n\n// see glfx distort\ninterface IDistortSettings {\n    stepSize: number; // [0, inf]\n    distortType: 0 | 1 | 2;\n    scale: { x: number; y: number };\n    strength: { x: number; y: number };\n    phase: { x: number; y: number };\n}\n\n\n\nexport const filterDistort = {\n\n    getDialog(params: IFilterGetDialogParam) {\n\n        const isSmall = window.innerWidth < 550;\n        const rootEl = BB.el({\n            content: LANG('filter-distort-description') + '<br><br>',\n        });\n        const context = params.context;\n        const width = context.canvas.width;\n        const height = context.canvas.height;\n\n        let isSynced = true;\n        let settings: IDistortSettings = {\n            distortType: 0,\n            scale: {x: 100, y: 100},\n            strength: {x: 20, y: 20},\n            phase: {x: 0, y: 0},\n            stepSize: 1,\n        };\n        // let lastDrawnSettings = null;\n\n        // ---- thumb -------\n        const thumbImgArr = [];\n        const thumbSize = 32;\n        {\n            const canvas = BB.canvas(thumbSize, thumbSize);\n            const ctx = canvas.getContext('2d');\n\n            ctx.beginPath();\n            ctx.arc(thumbSize / 2, thumbSize / 2, thumbSize / 2.5, 0, Math.PI * 2);\n            ctx.fill();\n\n            let gradient = ctx.createLinearGradient(0, 0, thumbSize, thumbSize);\n            gradient.addColorStop(0, '#00f');\n            gradient.addColorStop(0.5, '#f00');\n            gradient.addColorStop(1, '#fff');\n            ctx.fillStyle = gradient;\n            ctx.globalCompositeOperation = 'source-atop';\n            ctx.fillRect(0, 0, thumbSize, thumbSize);\n\n            gradient = ctx.createLinearGradient(thumbSize, 0, 0, thumbSize);\n            gradient.addColorStop(0, '#000');\n            gradient.addColorStop(1, '#000');\n            ctx.fillStyle = gradient;\n            ctx.globalCompositeOperation = 'destination-atop';\n            ctx.fillRect(0, 0, thumbSize, thumbSize);\n\n            const glCanvas = getSharedFx();\n            const texture = glCanvas.texture(canvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            const scaleFactor = 20;\n\n            [0, 1, 2].forEach(item => {\n                const thumbImg = new Image();\n                const settingsCopy = BB.copyObj(settings);\n                settingsCopy.distortType = item;\n                settingsCopy.scale.x /= scaleFactor;\n                settingsCopy.scale.y /= scaleFactor;\n                settingsCopy.strength.x /= scaleFactor;\n                settingsCopy.strength.y /= scaleFactor;\n                glCanvas.draw(texture).multiplyAlpha().distort(settingsCopy).unmultiplyAlpha().update();\n                ctx.clearRect(0, 0, thumbSize, thumbSize);\n                ctx.drawImage(glCanvas, 0, 0);\n                thumbImg.src = canvas.toDataURL('image/png');\n                thumbImgArr.push(thumbImg);\n            });\n\n            texture.destroy();\n        }\n\n\n        // ---- controls ----\n\n        const topRowEl = BB.el({\n            parent: rootEl,\n            css: {\n                display: 'flex',\n                alignItems: 'center',\n            }\n        });\n\n        const typeOptions = new Options({\n            optionArr: thumbImgArr.map((img, index) => {\n                BB.css(img, {\n                    margin: '1px',\n                    borderRadius: '3px',\n                    transition: 'all 0.1s ease-in-out',\n                })\n                return {\n                    id: '' + index,\n                    label: img,\n                };\n            }),\n            initialId: '0',\n            onChange: (id) => {\n                settings.distortType = Number(id) as any;\n                updatePreview();\n            }\n        });\n\n        function sync(from: 'x' | 'y') {\n            if (from === 'x') {\n                settings.scale.y = settings.scale.x;\n                settings.strength.y = settings.strength.x;\n                settings.phase.y = settings.phase.x;\n\n                sliderArr[3].setValue(settings.scale.y);\n                sliderArr[4].setValue(settings.strength.y);\n                sliderArr[5].setValue(settings.phase.y);\n            } else {\n                settings.scale.x = settings.scale.y;\n                settings.strength.x = settings.strength.y;\n                settings.phase.x = settings.phase.y;\n\n                sliderArr[0].setValue(settings.scale.x);\n                sliderArr[1].setValue(settings.strength.x);\n                sliderArr[2].setValue(settings.phase.x);\n            }\n            updatePreview();\n        }\n\n        const syncToggle = new Checkbox({\n            init: true,\n            label: LANG('filter-distort-sync-xy'),\n            callback: (val) => {\n                isSynced = val;\n                if (isSynced) {\n                    sync('x');\n                }\n            },\n        });\n\n        topRowEl.append(\n            typeOptions.getElement(),\n            BB.el({css: {flexGrow: '1'}}),\n            syncToggle.getElement(),\n        );\n\n        const xyRowEl = BB.el({\n            parent: rootEl,\n            css: {\n                display: 'flex',\n                flexWrap: 'wrap',\n            }\n        });\n        const leftCol = BB.el({\n            parent: xyRowEl,\n            css: {\n                marginRight: '10px',\n            }\n        });\n        const rightCol = BB.el({parent: xyRowEl});\n\n        const sliderWidth = isSmall ? 300 : 245;\n        const sliderArr: KlSlider[] = [];\n\n        ['x', 'y'].forEach((item, index) => {\n            const targetEl = index === 0 ? leftCol : rightCol;\n\n            const scaleSlider = new KlSlider({\n                label: LANG('filter-noise-scale') + ' ' + item.toUpperCase(),\n                width: sliderWidth,\n                height: 30,\n                min: 1,\n                max: 1000,\n                curve: 'quadratic',\n                value: settings.scale[item],\n                eventResMs: eventResMs,\n                onChange: (val) => {\n                    settings.scale[item] = val;\n                    if (isSynced) {\n                        sync(item as any);\n                    } else {\n                        updatePreview();\n                    }\n                }\n            });\n            scaleSlider.getElement().style.marginTop = '20px';\n            targetEl.append(scaleSlider.getElement());\n\n            const strengthSlider = new KlSlider({\n                label: LANG('filter-unsharp-mask-strength') + ' ' + item.toUpperCase(),\n                width: sliderWidth,\n                height: 30,\n                min: 0,\n                max: 200,\n                curve: 'quadratic',\n                value: settings.strength[item],\n                eventResMs: eventResMs,\n                onChange: (val) => {\n                    settings.strength[item] = val;\n                    if (isSynced) {\n                        sync(item as any);\n                    } else {\n                        updatePreview();\n                    }\n                }\n            });\n            strengthSlider.getElement().style.marginTop = '10px';\n            targetEl.append(strengthSlider.getElement());\n\n            const phaseSlider = new KlSlider({\n                label: LANG('filter-distort-phase') + ' ' + item.toUpperCase(),\n                width: sliderWidth,\n                height: 30,\n                min: 0,\n                max: 1,\n                value: settings.phase[item],\n                manualInputRoundDigits: 2,\n                eventResMs: eventResMs,\n                formatFunc: (val) => BB.round(val, 2),\n                onChange: (val) => {\n                    settings.phase[item] = val;\n                    if (isSynced) {\n                        sync(item as any);\n                    } else {\n                        updatePreview();\n                    }\n                }\n            });\n            phaseSlider.getElement().style.marginTop = '10px';\n            targetEl.append(phaseSlider.getElement());\n\n            sliderArr.push(scaleSlider);\n            sliderArr.push(strengthSlider);\n            sliderArr.push(phaseSlider);\n        });\n\n        const stepSlider = new KlSlider({\n            label: LANG('filter-distort-stepsize'),\n            width: 300,\n            height: 30,\n            min: 1,\n            max: 300,\n            curve: 'quadratic',\n            value: settings.stepSize,\n            eventResMs: eventResMs,\n            onChange: (val) => {\n                settings.stepSize = Math.round(val);\n                updatePreview();\n            }\n        });\n\n        stepSlider.getElement().style.marginTop = '20px';\n        rootEl.append(stepSlider.getElement());\n\n\n        // ---- preview ----\n\n        const klCanvas = params.klCanvas;\n        const layers = klCanvas.getLayers();\n        const selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        const fit = BB.fitInto(context.canvas.width, context.canvas.height, isSmall ? 280 : 490, isSmall ? 200 : 240, 1);\n        const w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n        const renderW = Math.min(w, context.canvas.width);\n        const renderH = Math.min(h, context.canvas.height);\n        const renderFactor = renderW / context.canvas.width;\n        const previewFactor = w / context.canvas.width;\n\n        const previewWrapper = BB.el({\n            css: {\n                width: isSmall ? '340px' : '540px',\n                marginLeft: \"-20px\",\n                height: isSmall ? '260px' : '300px',\n                backgroundColor: \"#9e9e9e\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n                marginTop: '10px',\n            }\n        });\n\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return; // todo throw?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).update(); // update glCanvas size\n\n        const previewLayer: IKlBasicLayer = {\n            image: glCanvas,\n            opacity: layers[selectedLayerIndex].opacity,\n            mixModeStr: layers[selectedLayerIndex].mixModeStr,\n        };\n        const previewLayerArr = layers.map((item, i) => {\n            if (i === selectedLayerIndex) {\n                return previewLayer;\n            } else {\n                return {\n                    image: item.context.canvas,\n                    opacity: item.opacity,\n                    mixModeStr: item.mixModeStr,\n                };\n            }\n        });\n        const klCanvasPreview = new KlCanvasPreview({\n            width: Math.round(w),\n            height: Math.round(h),\n            layers: previewLayerArr,\n        });\n\n        const previewInnerWrapper = BB.el({\n            css: {\n                position: 'relative',\n                boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                width: parseInt('' + w) + 'px',\n                height: parseInt('' + h) + 'px'\n            }\n        });\n        previewInnerWrapper.append(klCanvasPreview.getElement());\n        previewWrapper.append(previewInnerWrapper);\n        rootEl.append(previewWrapper);\n\n        // ---------- rendering ---------------------\n\n        function updatePreview() {\n            glCanvas.draw(texture).multiplyAlpha().distort(settings).unmultiplyAlpha().update();\n            klCanvasPreview.render();\n        }\n\n        updatePreview();\n\n\n        // ----- result -------------------\n        const result: IFilterGetDialogResult = {\n            element: rootEl,\n            destroy: () => {\n                typeOptions.destroy();\n                sliderArr.forEach(item => item.destroy());\n                stepSlider.destroy();\n                syncToggle.destroy();\n                texture.destroy();\n            },\n            getInput: () => BB.copyObj(settings),\n        };\n        if (!isSmall) {\n            result.width = 500;\n        }\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        const klCanvas = params.klCanvas;\n        const context = params.context;\n        const history = params.history;\n        if (!klCanvas || !history) {\n            return false;\n        }\n        history.pause(true);\n\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).multiplyAlpha().distort(params.input).unmultiplyAlpha().update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"distort\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\n// @ts-ignore\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer, IMixMode} from '../kl.types';\nimport {LANG} from '../../language/language';\nimport {input} from '../ui/base-components/input';\nimport {ColorOptions} from '../ui/base-components/color-options';\nimport {drawVanishPoint} from \"../image-operations/draw-vanish-point\";\nimport {KlSlider} from \"../ui/base-components/kl-slider\";\nimport {eventResMs} from \"./filters-consts\";\nimport {IVector2D} from \"../../bb/bb.types\";\n\n\n\nexport const filterVanishPoint = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        if (!context || !klCanvas) {\n            return false;\n        }\n\n        let layers = klCanvas.getLayers();\n        let selectedLayerIndex = klCanvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n        const renderW = Math.min(w, context.canvas.width);\n        const renderH = Math.min(h, context.canvas.height);\n        const renderFactor = renderW / context.canvas.width;\n        const previewFactor = w / context.canvas.width;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        div.innerHTML = LANG('filter-vanish-point-description') + \"<br/><br/>\";\n\n        const settingsObj = {\n            x: context.canvas.width / 2,\n            y: context.canvas.height / 2,\n            lines: 8,\n            thickness: 2,\n            color: {r: 0, g: 0, b: 0},\n            opacity: 1,\n        };\n\n        const linesSlider = new KlSlider({\n            label: LANG('filter-vanish-point-lines'),\n            width: 300,\n            height: 30,\n            min: 2,\n            max: 20,\n            value: settingsObj.lines,\n            curve: 'quadratic',\n            eventResMs: eventResMs,\n            onChange: function (val) {\n                settingsObj.lines = Math.round(val);\n                updatePreview();\n            },\n        });\n        linesSlider.getElement().style.marginBottom = '10px';\n        div.append(linesSlider.getElement());\n\n        let line1 = BB.el({\n            parent: div,\n            css: {\n                display: 'flex',\n                alignItems: 'center',\n            }\n        });\n        let line2 = BB.el({\n            parent: div,\n            css: {\n                display: 'flex',\n                alignItems: 'center',\n                marginTop: '10px'\n            }\n        });\n        const xInput = input({\n            init: settingsObj.x,\n            type: 'number',\n            css: {width: '75px', marginRight: '20px'},\n            callback: function(v) {\n                settingsObj.x = parseFloat(v);\n                updatePreview();\n            }\n        });\n        const yInput = input({\n            init: settingsObj.y,\n            type: 'number',\n            css: {width: '75px', marginRight: '20px'},\n            callback: function(v) {\n                settingsObj.y = parseFloat(v);\n                updatePreview();\n            }\n        });\n        const thicknessInput = input({\n            init: 2,\n            type: 'number',\n            min: 1,\n            css: {width: '75px', marginRight: '20px'},\n            callback: function(v) {\n                settingsObj.thickness = parseFloat(v);\n                updatePreview();\n            }\n        });\n\n        let selectedRgbaObj = {r: 0, g: 0, b: 0, a: 1};\n        const colorOptionsArr = [\n            {r: 0, g: 0, b: 0, a: 1},\n            {r: 255, g: 255, b: 255, a: 1},\n        ];\n        colorOptionsArr.push({\n            r: params.currentColorRgb.r,\n            g: params.currentColorRgb.g,\n            b: params.currentColorRgb.b,\n            a: 1,\n        });\n        colorOptionsArr.push({\n            r: params.secondaryColorRgb.r,\n            g: params.secondaryColorRgb.g,\n            b: params.secondaryColorRgb.b,\n            a: 1,\n        });\n        settingsObj.color = BB.copyObj(selectedRgbaObj);\n\n        const colorOptions = new ColorOptions({\n            label: LANG('shape-stroke'),\n            colorArr: colorOptionsArr,\n            onChange: function(rgbaObj) {\n                selectedRgbaObj = rgbaObj;\n                settingsObj.color = BB.copyObj(selectedRgbaObj);\n                updatePreview();\n            }\n        });\n\n        const labelStyle = {\n            display: 'inline-block',\n            marginRight: '5px',\n        };\n        line1.append(\n            BB.el({content: 'X:', css: labelStyle}),\n            xInput,\n            BB.el({content: 'Y:', css: labelStyle}),\n            yInput,\n        );\n        line2.append(\n            BB.el({content: LANG('shape-line-width') + ':', css: labelStyle}),\n            thicknessInput,\n            BB.el({css:{flexGrow: '1'}}),\n            colorOptions.getElement(),\n        );\n\n\n        let previewWrapper = document.createElement(\"div\");\n        BB.css(previewWrapper, {\n            width: \"340px\",\n            marginLeft: \"-20px\",\n            height: \"220px\",\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            position: \"relative\",\n            userSelect: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            colorScheme: 'only light',\n        });\n\n        let previewLayer: IKlBasicLayer = {\n            image: BB.canvas(renderW, renderH),\n            opacity: layers[selectedLayerIndex].opacity,\n            mixModeStr: layers[selectedLayerIndex].mixModeStr,\n        };\n        let klCanvasPreview = new KlCanvasPreview({\n            width: Math.round(w),\n            height: Math.round(h),\n            layers: layers.map((item, i) => {\n                if (i === selectedLayerIndex) {\n                    return previewLayer;\n                } else {\n                    return {\n                        image: item.context.canvas,\n                        opacity: item.opacity,\n                        mixModeStr: item.mixModeStr,\n                    };\n                }\n            })\n        });\n\n        let previewInnerWrapper = BB.el({\n            css: {\n                position: 'relative',\n                boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                width: parseInt('' + w) + 'px',\n                height: parseInt('' + h) + 'px',\n                cursor: 'move',\n            }\n        });\n        previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n        previewWrapper.appendChild(previewInnerWrapper);\n\n\n\n        // ---- preview input processing ----\n        const inputs: {\n            start: IVector2D;\n            end: IVector2D;\n            state: null | 'move';\n            oldSettings: any;\n        } = {\n            start: null,\n            end: null,\n            state: null,\n            oldSettings: null,\n        };\n        function syncInputs(): void {\n            xInput.value = '' + settingsObj.x;\n            yInput.value = '' + settingsObj.y;\n        }\n        previewWrapper.oncontextmenu = function () {\n            return false;\n        };\n        previewInnerWrapper.style.touchAction = 'none';\n        const pointerListener = new BB.PointerListener({\n            target: previewInnerWrapper,\n            onPointer: (event) => {\n                if (event.type === 'pointerdown') {\n                    if (!inputs.state) {\n                        inputs.state = 'move';\n                        inputs.oldSettings = BB.copyObj(settingsObj);\n                        inputs.start = {x: event.relX / previewFactor, y: event.relY / previewFactor};\n                        inputs.end = null;\n                    }\n                } else if (event.type === 'pointermove') {\n                    if (inputs.state) {\n                        inputs.end = {x: event.relX / previewFactor, y: event.relY / previewFactor};\n\n                        settingsObj.x = Math.round(inputs.end.x - inputs.start.x + inputs.oldSettings.x);\n                        settingsObj.y = Math.round(inputs.end.y - inputs.start.y + inputs.oldSettings.y);\n\n                        syncInputs();\n                        updatePreview();\n                    }\n                } else if (event.type === 'pointerup') {\n                    if (inputs.state) {\n                        inputs.state = null;\n                    }\n                }\n            },\n        });\n\n\n\n        function updatePreview() {\n            let ctx = (previewLayer.image as HTMLCanvasElement).getContext('2d');\n            ctx.save();\n            ctx.clearRect(0, 0, renderW, renderH);\n            ctx.drawImage(context.canvas, 0, 0, renderW, renderH);\n            drawVanishPoint(\n                ctx,\n                settingsObj.x * renderFactor,\n                settingsObj.y * renderFactor,\n                settingsObj.lines,\n                Math.max(settingsObj.thickness * renderFactor, 1),\n                settingsObj.color,\n                settingsObj.opacity,\n            );\n\n            ctx.restore();\n            klCanvasPreview.render();\n        }\n        setTimeout(updatePreview, 0);\n\n\n        div.appendChild(previewWrapper);\n        result.destroy = () => {\n            linesSlider.destroy();\n            pointerListener.destroy();\n        };\n        result.getInput = function () {\n            result.destroy();\n            return BB.copyObj(settingsObj);\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let klCanvas = params.klCanvas;\n        let history = params.history;\n        if (!context || !klCanvas || !history) {\n            return false;\n        }\n\n        history.pause(true);\n        drawVanishPoint(\n            context,\n            params.input.x,\n            params.input.y,\n            params.input.lines,\n            params.input.thickness,\n            params.input.color,\n            params.input.opacity\n        );\n        history.pause(false);\n\n        history.push({\n            tool: [\"filter\", \"vanishPoint\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    },\n\n};","import {drawShape} from \"./shape-tool\";\nimport {BB} from \"../../bb/bb\";\nimport {IRGB} from \"../kl.types\";\n\nexport function drawVanishPoint(\n    ctx: CanvasRenderingContext2D,\n    x: number,\n    y: number,\n    lines: number, // int, [2, inf]\n    thickness: number, // px\n    color: IRGB,\n    opacity: number, // 0 - 1\n): void {\n    ctx.save();\n\n    const degIncrement = 180 / lines;\n    for (let deg = 0; deg < 180; deg += degIncrement) {\n        const p2 = BB.rotateAround({x, y}, {x: x + 9999, y}, deg);\n        drawShape(\n            ctx,\n            {\n                type: 'line',\n                x1: x,\n                y1: y,\n                x2: p2.x,\n                y2: p2.y,\n                //angleRad: 0,\n                isOutwards: true,\n                opacity,\n                //isEraser: false,\n                strokeRgb: color,\n                lineWidth: thickness,\n                //doLockAlpha: false,\n            }\n        );\n    }\n\n    ctx.restore();\n}","import {KL} from '../kl';\nimport {KlCanvas} from '../canvas/kl-canvas';\n\nexport async function klCanvasToPsdBlob(klCanvas: KlCanvas): Promise<Blob> {\n    let layerArr = klCanvas.getLayersFast();\n\n    let psdConfig = {\n        width: klCanvas.getWidth(),\n        height: klCanvas.getHeight(),\n        //canvas: klCanvas.getCompleteCanvas(1), // preview, can be skipped\n        children: []\n    };\n    for (let i = 0; i < layerArr.length; i++) {\n        // todo - can be optimized if layer mostly empty\n        let item = layerArr[i];\n        psdConfig.children.push({\n            name: item.name,\n            opacity: item.opacity,\n            canvas: item.canvas,\n            blendMode: KL.PSD.blendKlToPsd(item.mixModeStr),\n            left: 0,\n            top: 0\n        });\n    }\n\n    let agPsd = await import('ag-psd');\n    let buffer = agPsd.writePsdBuffer(psdConfig);\n    return new Blob([buffer], { type: 'application/octet-stream' });\n}","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tab-settings.3ce93070.svg\" + \"?\" + Date.now();","module.exports = require('./helpers/bundle-url').getBundleURL('d3gnI') + \"tab-layers.45ddc8d0.svg\" + \"?\" + Date.now();"],"names":[],"version":3,"file":"index.9aa0ef6a.js.map","sourceRoot":"/__parcel_source_root/"}